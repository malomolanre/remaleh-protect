import{r as o,a as wt,R as ys}from"./vendor-b1791c80.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))l(n);new MutationObserver(n=>{for(const d of n)if(d.type==="childList")for(const x of d.addedNodes)x.tagName==="LINK"&&x.rel==="modulepreload"&&l(x)}).observe(document,{childList:!0,subtree:!0});function a(n){const d={};return n.integrity&&(d.integrity=n.integrity),n.referrerPolicy&&(d.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?d.credentials="include":n.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function l(n){if(n.ep)return;n.ep=!0;const d=a(n);fetch(n.href,d)}})();var et={exports:{}},Ms={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Nt=o,kt=Symbol.for("react.element"),Ct=Symbol.for("react.fragment"),St=Object.prototype.hasOwnProperty,Et=Nt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Lt={key:!0,ref:!0,__self:!0,__source:!0};function st(t,s,a){var l,n={},d=null,x=null;a!==void 0&&(d=""+a),s.key!==void 0&&(d=""+s.key),s.ref!==void 0&&(x=s.ref);for(l in s)St.call(s,l)&&!Lt.hasOwnProperty(l)&&(n[l]=s[l]);if(t&&t.defaultProps)for(l in s=t.defaultProps,s)n[l]===void 0&&(n[l]=s[l]);return{$$typeof:kt,type:t,key:d,ref:x,props:n,_owner:Et.current}}Ms.Fragment=Ct;Ms.jsx=st;Ms.jsxs=st;et.exports=Ms;var e=et.exports,Fs={},Vs=wt;Fs.createRoot=Vs.createRoot,Fs.hydrateRoot=Vs.hydrateRoot;const $e="https://api.remalehprotect.remaleh.com.au";console.log("🌐 API Configuration - Production API Base URL:",$e);const pe={AUTH:{REGISTER:"/api/auth/register",LOGIN:"/api/auth/login",PROFILE:"/api/auth/profile",REFRESH:"/api/auth/refresh",LOGOUT:"/api/auth/logout",CHANGE_PASSWORD:"/api/auth/change-password",VERIFY_EMAIL:"/api/auth/verify-email",RESEND_VERIFICATION:"/api/auth/resend-verification",REQUEST_PASSWORD_RESET:"/api/auth/request-password-reset"},ADMIN:{USERS:"/api/admin/users",CREATE_USER:"/api/admin/users",USER_DETAILS:"/api/admin/users",USER_UPDATE:"/api/admin/users",USER_SUSPEND:"/api/admin/users",USER_ACTIVATE:"/api/admin/users",USER_DELETE:"/api/admin/users",USER_RESET_PASSWORD:"/api/admin/users",BULK_ACTION:"/api/admin/users/bulk-action",BULK_RESET_PASSWORD:"/api/admin/users/bulk-reset-password",DASHBOARD:"/api/admin/dashboard",MAINTENANCE:"/api/admin/maintenance",COMMUNITY_REPORTS:"/api/admin/community-reports",COMMUNITY_REPORTS_VERIFY:"/api/admin/community-reports",COMMUNITY_REPORTS_REJECT:"/api/admin/community-reports",COMMUNITY_REPORTS_ESCALATE:"/api/admin/community-reports",COMMUNITY_REPORTS_DELETE:"/api/admin/community-reports",COMMUNITY_REPORTS_BULK_ACTION:"/api/admin/community-reports/bulk-action"},THREAT_INTELLIGENCE:{DASHBOARD:"/api/threat_intelligence/dashboard",THREATS:"/api/threat_intelligence/threats",ALERTS:"/api/threat_intelligence/alerts",TRENDS:"/api/threat_intelligence/stats/trends"},RISK_PROFILE:{PROFILE:"/api/risk_profile/profile",SCANS:"/api/risk_profile/scans",LEARNING:"/api/risk_profile/learning/modules",RECOMMENDATIONS:"/api/risk_profile/recommendations"},LEARNING:{MODULES:"/api/learning/modules",PROGRESS:"/api/learning/progress",NEXT_LESSON:"/api/learning/next-lesson"},COMMUNITY:{REPORTS:"/api/community/reports",TRENDING:"/api/community/trending",STATS:"/api/community/stats",ALERTS:"/api/community/alerts",LEADERBOARD:"/api/community/leaderboard",MY_STATS:"/api/community/my-stats"},PUBLIC:{BLOG_FEED:"/api/public/blog-feed"},SCAM:"/api/scam/comprehensive",BREACH:"/api/breach/check",LINK:"/api/link/analyze",CHAT:"/api/chat/"},Es=async(t,s={})=>{const a=localStorage.getItem("authToken");console.log("🌐 API Call - Endpoint:",t),console.log("🌐 API Call - Token present:",!!a),console.log("🌐 API Call - Token value:",a?`${a.substring(0,20)}...`:"None");const l={headers:{"Content-Type":"application/json",...a&&{Authorization:`Bearer ${a}`}},...s};console.log("🌐 API Call - Request headers:",l.headers),console.log("🌐 API Call - Full URL:",`${$e}${t}`);try{const n=await fetch(`${$e}${t}`,l);if(console.log("🌐 API Call - Response status:",n.status),console.log("🌐 API Call - Response headers:",Object.fromEntries(n.headers.entries())),!n.ok){if(n.status===401){console.log("🌐 API Call - 401 Unauthorized, attempting token refresh...");const x=localStorage.getItem("refreshToken");if(x){console.log("🌐 API Call - Refresh token found, attempting refresh...");const y=await fetch(`${$e}${pe.AUTH.REFRESH}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({refresh_token:x})});if(y.ok){const{access_token:M}=await y.json();return console.log("🌐 API Call - Token refresh successful, retrying request..."),localStorage.setItem("authToken",M),l.headers.Authorization=`Bearer ${M}`,await fetch(`${$e}${t}`,l)}else console.log("🌐 API Call - Token refresh failed, removing tokens")}localStorage.removeItem("authToken"),localStorage.removeItem("refreshToken")}let d="Something went wrong. Please try again.";try{const x=await n.json(),y=x&&(x.error||x.message);y&&(d=y)}catch{}throw new Error(d)}return n}catch(n){throw console.error("🌐 API Call - Request failed:",n),n}},Le=t=>Es(t,{method:"GET"}),_e=(t,s)=>Es(t,{method:"POST",body:JSON.stringify(s)}),as=(t,s)=>(console.log("🔧 apiPut called with:",{endpoint:t,data:s}),console.log("🔧 HTTP method will be: PUT"),Es(t,{method:"PUT",body:JSON.stringify(s)})),cs=t=>Es(t,{method:"DELETE"}),Qe={get:t=>Le(t),post:(t,s)=>_e(t,s),put:(t,s)=>as(t,s),delete:t=>cs(t),request:t=>{const{method:s="GET",url:a,data:l,...n}=t;return s==="GET"?Le(a):s==="POST"?_e(a,l):s==="PUT"?as(a,l):s==="DELETE"?cs(a):Es(a,{method:s,body:l?JSON.stringify(l):void 0,...n})}};function ce({children:t,className:s="",padding:a="p-4",shadow:l="shadow-sm",hover:n=!1,onClick:d,interactive:x=!1,...y}){const F=`bg-white rounded-xl border border-gray-200 ${l==="shadow"?"shadow":l==="shadow-lg"?"shadow-lg":"shadow-sm"} ${n?"hover:shadow-lg transition-all duration-200":""} ${x?"active:scale-95 transition-transform duration-100":""} ${a} ${s}`.trim(),O=d?"button":"div";return e.jsx(O,{className:F,onClick:d,...y,children:t})}function Je({children:t,className:s=""}){return e.jsx("div",{className:`mb-3 ${s}`,children:t})}function ss({children:t,className:s=""}){return e.jsx("div",{className:s,children:t})}function ve({label:t,error:s,helperText:a,fullWidth:l=!1,className:n="",...d}){const x=`w-full px-4 py-3 text-base border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors duration-200 ${s?"border-red-300 focus:ring-red-500 focus:border-red-500":""} ${l?"w-full":""} ${n}`;return e.jsxs("div",{className:`${l?"w-full":""}`,children:[t&&e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:t}),e.jsx("input",{className:x,...d}),s&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:s}),a&&!s&&e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:a})]})}function Bs({label:t,error:s,helperText:a,fullWidth:l=!1,rows:n=4,className:d="",...x}){const y=`w-full px-4 py-3 text-base border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors duration-200 resize-none ${s?"border-red-300 focus:ring-red-500 focus:border-red-500":""} ${l?"w-full":""} ${d}`;return e.jsxs("div",{className:`${l?"w-full":""}`,children:[t&&e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:t}),e.jsx("textarea",{className:y,rows:n,...x}),s&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:s}),a&&!s&&e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:a})]})}function Rs({label:t,error:s,helperText:a,options:l=[],fullWidth:n=!1,className:d="",...x}){const y=`w-full px-4 py-3 text-base border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors duration-200 appearance-none bg-white ${s?"border-red-300 focus:ring-red-500 focus:border-red-500":""} ${n?"w-full":""} ${d}`;return e.jsxs("div",{className:`${n?"w-full":""} relative`,children:[t&&e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:t}),e.jsx("select",{className:y,...x,children:l.map(M=>e.jsx("option",{value:M.value,children:M.label},M.value))}),e.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center pr-4 pointer-events-none",children:e.jsx("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})}),s&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:s}),a&&!s&&e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:a})]})}function tt({placeholder:t="Search...",onSearch:s,className:a="",...l}){const[n,d]=ys.useState(""),x=y=>{y.preventDefault(),s&&n.trim()&&s(n.trim())};return e.jsx("form",{onSubmit:x,className:`relative ${a}`,children:e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:n,onChange:y=>d(y.target.value),placeholder:t,className:"w-full pl-12 pr-4 py-3 text-base border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors duration-200",...l}),e.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none",children:e.jsx("svg",{className:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})})]})})}function ie({variant:t="primary",size:s="md",children:a,className:l="",disabled:n=!1,loading:d=!1,...x}){const y="inline-flex items-center justify-center font-medium rounded-lg transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",M={primary:"bg-gradient-to-r from-[#21a1ce] to-[#1a80a3] text-white hover:shadow-lg focus:ring-[#21a1ce]",secondary:"bg-gray-200 text-gray-800 hover:bg-gray-300 focus:ring-gray-500",danger:"bg-red-600 text-white hover:bg-red-700 focus:ring-red-600",success:"bg-green-600 text-white hover:bg-green-700 focus:ring-green-600",warning:"bg-yellow-600 text-white hover:bg-yellow-700 focus:ring-yellow-600",outline:"border-2 border-[#21a1ce] text-[#21a1ce] hover:bg-[#21a1ce] hover:text-white focus:ring-[#21a1ce]"},f={sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-sm",lg:"px-6 py-3 text-base",xl:"px-8 py-4 text-lg"},k=`${y} ${M[t]} ${f[s]} ${l}`.trim();return e.jsxs("button",{className:k,disabled:n||d,...x,children:[d&&e.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),a]})}var _t={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const Rt=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),At=(t,s)=>{const a=o.forwardRef(({color:l="currentColor",size:n=24,strokeWidth:d=2,absoluteStrokeWidth:x,children:y,...M},f)=>o.createElement("svg",{ref:f,..._t,width:n,height:n,stroke:l,strokeWidth:x?Number(d)*24/Number(n):d,className:`lucide lucide-${Rt(t)}`,...M},[...s.map(([k,I])=>o.createElement(k,I)),...(Array.isArray(y)?y:[y])||[]]));return a.displayName=`${t}`,a};var ke=At;const Ws=ke("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),ks=ke("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),ls=ke("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]),js=ke("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["polyline",{points:"22 4 12 14.01 9 11.01",key:"6xbx8j"}]]),gs=ke("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),qs=ke("Flag",[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]]),Mt=ke("HelpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),ps=ke("HelpingHand",[["path",{d:"m3 15 5.12-5.12A3 3 0 0 1 10.24 9H13a2 2 0 1 1 0 4h-2.5m4-.68 4.17-4.89a1.88 1.88 0 0 1 2.92 2.36l-4.2 5.94A3 3 0 0 1 14.96 17H9.83a2 2 0 0 0-1.42.59L7 19",key:"nitrv7"}],["path",{d:"m2 14 6 6",key:"g6j1uo"}]]),Tt=ke("Key",[["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["path",{d:"m15.5 7.5 3 3L22 7l-3-3",key:"1rn1fs"}]]),at=ke("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),Pt=ke("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]),Ts=ke("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]),Ds=ke("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]),Ls=ke("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),bs=ke("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),Dt=ke("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]),It=ke("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),Pe=ke("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z",key:"3xmgem"}]]),rt=ke("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]),lt=ke("ThumbsDown",[["path",{d:"M17 14V2",key:"8ymqnk"}],["path",{d:"M9 18.12 10 14H4.17a2 2 0 0 1-1.92-2.56l2.33-8A2 2 0 0 1 6.5 2H20a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-2.76a2 2 0 0 0-1.79 1.11L12 22h0a3.13 3.13 0 0 1-3-3.88Z",key:"s6e0r"}]]),nt=ke("ThumbsUp",[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2h0a3.13 3.13 0 0 1 3 3.88Z",key:"y3tblf"}]]),Cs=ke("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),ot=ke("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),us=ke("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]),Is=ke("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),xs=ke("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),$t=ke("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Ut=16,ts={lower:"abcdefghjkmnpqrstuvwxyz",upper:"ABCDEFGHJKMNPQRSTUVWXYZ",digits:"23456789",symbols:"!@#$%^&*()-_=+[]{};:,.?/|~",similar:"ilIoO01"};function $s(t){const s=new Uint32Array(t);return crypto.getRandomValues(s),s}function it(t){let s="";return t.lower&&(s+=ts.lower+(t.similar?"il":"")),t.upper&&(s+=ts.upper+(t.similar?"IO":"")),t.digits&&(s+=(t.similar?"01":"")+ts.digits),t.symbols&&(s+=ts.symbols),t.ambiguous&&(s+="{}[]()/\\\\'\\\"`~,;:.<>"),t.similar||(s=[...s].filter(a=>!ts.similar.includes(a)).join("")),s}function Ot(t,s){const a=it(s);if(!a.length)throw new Error("No character sets selected");const l=[];s.lower&&l.push(ts.lower),s.upper&&l.push(ts.upper),s.digits&&l.push(s.similar?ts.digits+"01":ts.digits),s.symbols&&l.push(ts.symbols),s.ambiguous&&l.push("{}[]()/\\\\'\\\"`~,;:.<>");const n=[];l.forEach(y=>{const M=$s(1)[0]%y.length;n.push(y[M])});const d=Math.max(t-n.length,0),x=$s(d);for(let y=0;y<d;y++){const M=x[y]%a.length;n.push(a[M])}for(let y=n.length-1;y>0;y--){const M=$s(1)[0]%(y+1);[n[y],n[M]]=[n[M],n[y]]}return n.join("")}function Ft(t,s){const a=it(s),l=Math.max(a.length,1);return Math.round(t*Math.log2(l))}function Bt({bits:t}){let s="Weak",a=25;return t>=80?(s="Very strong",a=100):t>=60?(s="Strong",a=75):t>=40&&(s="Okay",a=50),e.jsxs("div",{className:"mt-2",children:[e.jsx("div",{className:"w-full h-2 bg-gray-200 rounded",children:e.jsx("div",{className:`h-2 rounded ${a>=75?"bg-green-500":a>=50?"bg-yellow-500":"bg-red-500"}`,style:{width:`${a}%`}})}),e.jsxs("div",{className:"text-xs text-gray-600 mt-1",children:["Strength: ",s," (",t," bits)"]})]})}function zt({onUse:t}){const[s,a]=o.useState(Ut),[l,n]=o.useState({lower:!0,upper:!0,digits:!0,symbols:!0,ambiguous:!1,similar:!1}),[d,x]=o.useState(""),[y,M]=o.useState(!1),f=o.useRef(null),k=o.useMemo(()=>Ft(s,l),[s,l]);function I(g){n(ae=>({...ae,[g]:!ae[g]}))}function F(){try{const g=Ot(s,l);x(g),M(!1)}catch(g){console.error("Failed to generate password:",g)}}async function O(){if(d)try{await navigator.clipboard.writeText(d),M(!0),setTimeout(()=>M(!1),2e3)}catch(g){console.error("Failed to copy password:",g)}}function B(){t&&d&&t(d)}return e.jsxs(ce,{className:"mb-6",children:[e.jsxs(Je,{children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center gap-2",children:[e.jsx(at,{className:"w-5 h-5 text-blue-600"}),"Password Generator"]}),e.jsx("p",{className:"text-sm text-gray-600",children:"Generate secure, random passwords"})]}),e.jsx(ss,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Generated Password"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(ve,{ref:f,value:d,readOnly:!0,className:"flex-1 font-mono text-sm",placeholder:"Click 'Generate' to create a password"}),e.jsx(ie,{onClick:O,variant:"outline",size:"sm",className:"px-3",children:y?"Copied!":"Copy"})]}),d&&e.jsx(Bt,{bits:k})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Password Length: ",s]}),e.jsx("input",{type:"range",min:"8",max:"64",value:s,onChange:g=>a(parseInt(g.target.value)),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer"}),e.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[e.jsx("span",{children:"8"}),e.jsx("span",{children:"16"}),e.jsx("span",{children:"32"}),e.jsx("span",{children:"64"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Character Sets"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:Object.entries(l).map(([g,ae])=>e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",checked:ae,onChange:()=>I(g),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-700 capitalize",children:g==="lower"?"Lowercase":g==="upper"?"Uppercase":g==="digits"?"Numbers":g==="symbols"?"Symbols":g==="ambiguous"?"Ambiguous":g==="similar"?"Similar":g})]},g))})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(ie,{onClick:F,className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white",children:"Generate Password"}),d&&t&&e.jsx(ie,{onClick:B,variant:"outline",className:"flex-1",children:"Use This Password"})]}),e.jsxs("div",{className:"bg-blue-50 p-3 rounded-lg border border-blue-200",children:[e.jsx("h4",{className:"text-sm font-medium text-blue-900 mb-1",children:"Security Tips"}),e.jsxs("ul",{className:"text-xs text-blue-800 space-y-1",children:[e.jsx("li",{children:"• Use at least 16 characters for maximum security"}),e.jsx("li",{children:"• Include uppercase, lowercase, numbers, and symbols"}),e.jsx("li",{children:"• Avoid similar-looking characters (l, 1, I, O, 0)"}),e.jsx("li",{children:"• Store passwords in a secure password manager"})]})]})]})})]})}const Ys={passwords:{keywords:["password","passwords","strong password","secure password","passphrase","password manager"],response:`**Password Protection**

• Use at least 16 characters when possible
• Combine uppercase letters, lowercase letters, numbers, and symbols
• Avoid personal information (birthdays, names, etc.)
• Don't use common words or patterns
• Consider using passphrases (e.g., "KangarooJumping2025!Sydney")
• Use a different password for each account
• Consider using a password manager like LastPass, 1Password, or Bitwarden
• Enable multi-factor authentication (MFA) whenever possible`,source:"Expert Knowledge"}};function Ht(){const[t,s]=o.useState([]),[a,l]=o.useState(""),[n,d]=o.useState(!1),[x,y]=o.useState(!1);return{chatMessages:t,inputMessage:a,isTyping:n,chatError:x,setInputMessage:l,formatChatMessage:k=>k?k.replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>").replace(/^• /gm,"<br>• ").replace(/^\* /gm,"<br>• ").replace(/^- /gm,"<br>• ").replace(/^### (.*$)/gm,'<h4 style="margin: 15px 0 8px 0; color: #374151; font-size: 16px;">$1</h4>').replace(/^## (.*$)/gm,'<h3 style="margin: 15px 0 10px 0; color: #1f2937; font-size: 18px;">$1</h3>').replace(/^# (.*$)/gm,'<h2 style="margin: 15px 0 10px 0; color: #111827; font-size: 20px;">$1</h2>').replace(/\[([^\]]+)\]\(([^)]+)\)/g,'<a href="$2" target="_blank" rel="noopener noreferrer" style="color: #21a1ce; text-decoration: underline;">$1</a>').replace(/\n\n/g,"<br><br>").replace(/\n/g,"<br>"):"",handleChatSubmit:async k=>{if(k.preventDefault(),!a.trim())return;y(!1);const I={text:a,sender:"user"};s(O=>[...O,I]);const F=a;l(""),d(!0);try{let O=!1,B="",g="";const ae=F.toLowerCase();for(const h in Ys){const{keywords:S,response:R,source:$}=Ys[h];for(const w of S)if(ae.includes(w.toLowerCase())){B=R,g=$,O=!0;break}if(O)break}if(!O)try{const h=await fetch(`${$e}/api/chat/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:F})});if(!h.ok)throw new Error(`API status ${h.status}`);const S=await h.json();S.success&&(B=S.response,g=S.source==="expert_knowledge"?"Expert Knowledge":"AI Analysis",O=!0)}catch{}O||(B="I don't have specific information about that topic yet. For complex cybersecurity questions, I recommend consulting with a security professional.",g="AI Analysis"),setTimeout(()=>{const h={text:B,sender:"assistant",source:g};s(S=>[...S,h]),d(!1)},600)}catch{y(!0);const B={text:"Sorry, I encountered an error processing your request. Please try again.",sender:"assistant",source:"System"};s(g=>[...g,B]),d(!1)}}}}function Gt({setActiveTab:t}){const{chatMessages:s,inputMessage:a,isTyping:l,chatError:n,setInputMessage:d,formatChatMessage:x,handleChatSubmit:y}=Ht(),M=o.useRef(null);return o.useEffect(()=>{const f=M.current;if(f)try{f.scrollTo({top:f.scrollHeight,behavior:"smooth"})}catch{f.scrollTop=f.scrollHeight}},[s,l]),e.jsx("div",{className:"p-2 md:p-4",children:e.jsx(ce,{className:"mb-2",children:e.jsx(ss,{children:e.jsxs("div",{className:"border border-gray-200 rounded-lg h-96 md:h-[32rem] flex flex-col",children:[e.jsxs("div",{ref:M,className:"flex-1 p-4 overflow-y-auto space-y-4",children:[s.length===0&&e.jsxs("div",{className:"text-center text-gray-500 mt-8",children:[e.jsx(Ts,{className:"mx-auto mb-2 text-gray-300",size:48}),e.jsx("p",{className:"text-sm md:text-base",children:"Ask me anything about cybersecurity!"}),e.jsx("p",{className:"text-xs md:text-sm mt-2 text-gray-400",children:"Try asking about passwords, phishing, or device security."})]}),s.map((f,k)=>e.jsx("div",{className:`flex ${f.sender==="user"?"justify-end":"justify-start"}`,children:e.jsxs("div",{className:`max-w-[80%] px-3 py-2 rounded-lg ${f.sender==="user"?"bg-[#21a1ce] text-white":"bg-gray-100 text-gray-800"}`,children:[f.sender==="assistant"&&e.jsxs("div",{className:"flex items-center mb-1",children:[e.jsx(Pe,{className:"w-4 h-4 mr-1 text-[#21a1ce]"}),e.jsx("span",{className:"text-xs text-[#21a1ce] font-medium",children:f.source||"AI Assistant"})]}),e.jsx("div",{className:"text-sm",dangerouslySetInnerHTML:{__html:f.sender==="assistant"?x(f.text):f.text}})]})},k)),l&&e.jsx("div",{className:"flex justify-start",children:e.jsx("div",{className:"bg-gray-100 text-gray-800 px-3 py-2 rounded-lg",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(Pe,{className:"w-4 h-4 mr-1 text-[#21a1ce]"}),e.jsx("span",{className:"text-xs text-[#21a1ce] font-medium mr-2",children:"AI Assistant"}),e.jsxs("div",{className:"flex space-x-1",children:[e.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce"}),e.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),e.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})]})})})]}),e.jsx("form",{onSubmit:y,className:"border-t border-gray-200 p-4",children:e.jsxs("div",{className:"flex flex-col items-center space-y-3",children:[e.jsxs("div",{className:"flex w-full max-w-md space-x-2",children:[e.jsx(ve,{type:"text",value:a,onChange:f=>d(f.target.value),placeholder:"Type your cybersecurity question...",disabled:l,className:"flex-1"}),e.jsx(ie,{type:"submit",disabled:l||!a.trim(),className:"bg-[#21a1ce] hover:bg-[#1a80a3] text-white px-4 py-2 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed",children:"Send"})]}),n&&e.jsx("p",{className:"text-red-500 text-sm",children:"Connection error. Please check your internet and try again."})]})})]})})})})}const Vt="modulepreload",Wt=function(t,s){return new URL(t,s).href},Js={},qt=function(s,a,l){if(!a||a.length===0)return s();const n=document.getElementsByTagName("link");return Promise.all(a.map(d=>{if(d=Wt(d,l),d in Js)return;Js[d]=!0;const x=d.endsWith(".css"),y=x?'[rel="stylesheet"]':"";if(!!l)for(let k=n.length-1;k>=0;k--){const I=n[k];if(I.href===d&&(!x||I.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${d}"]${y}`))return;const f=document.createElement("link");if(f.rel=x?"stylesheet":Vt,x||(f.as="script",f.crossOrigin=""),f.href=d,document.head.appendChild(f),x)return new Promise((k,I)=>{f.addEventListener("load",k),f.addEventListener("error",()=>I(new Error(`Unable to preload CSS for ${d}`)))})})).then(()=>s()).catch(d=>{const x=new Event("vite:preloadError",{cancelable:!0});if(x.payload=d,window.dispatchEvent(x),!x.defaultPrevented)throw d})};function me({children:t,variant:s="primary",size:a="md",fullWidth:l=!1,disabled:n=!1,loading:d=!1,className:x="",...y}){const M="inline-flex items-center justify-center font-medium rounded-xl transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed disabled:active:scale-100",f={primary:"bg-blue-600 text-white hover:bg-blue-700 focus:ring-blue-500 shadow-sm",secondary:"bg-gray-100 text-gray-900 hover:bg-gray-200 focus:ring-gray-500",outline:"border border-gray-300 bg-white text-gray-700 hover:bg-gray-50 focus:ring-blue-500",danger:"bg-red-600 text-white hover:bg-red-700 focus:ring-red-500 shadow-sm",success:"bg-green-600 text-white hover:bg-green-700 focus:ring-green-500 shadow-sm",ghost:"bg-transparent text-gray-700 hover:bg-gray-100 focus:ring-gray-500"},k={sm:"px-3 py-2 text-sm min-h-[44px]",md:"px-4 py-3 text-base min-h-[48px]",lg:"px-6 py-4 text-lg min-h-[56px]",xl:"px-8 py-5 text-xl min-h-[64px]"},I=l?"w-full":"",F=`${M} ${f[s]} ${k[a]} ${I} ${x}`.trim();return e.jsxs("button",{className:F,disabled:n||d,...y,children:[d&&e.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),t]})}const ds=()=>{const[t,s]=o.useState(null),[a,l]=o.useState(!1),[n,d]=o.useState(!0),[x,y]=o.useState(null),M=o.useCallback(async()=>{try{const R=localStorage.getItem("refreshToken");if(!R)return{success:!1,error:"No refresh token available"};const $=await _e(pe.AUTH.REFRESH,{refresh_token:R});if($.ok){const w=await $.json(),{access_token:D,refresh_token:z}=w;return localStorage.setItem("authToken",D),z&&localStorage.setItem("refreshToken",z),{success:!0}}else return{success:!1,error:"Token refresh failed"}}catch(R){return console.error("Token refresh error:",R),{success:!1,error:"Token refresh failed"}}},[]),f=o.useCallback(async()=>{if(localStorage.getItem("authToken"))try{const $=await Le(pe.AUTH.PROFILE);if($.ok){const w=await $.json(),D=w.user||w;s(D),l(!0)}else $.status===401&&(await M()).success||(localStorage.removeItem("authToken"),localStorage.removeItem("refreshToken"),s(null),l(!1))}catch{localStorage.removeItem("authToken"),localStorage.removeItem("refreshToken"),s(null),l(!1)}else s(null),l(!1);d(!1)},[M]);o.useEffect(()=>{f();const R=()=>f();return window.addEventListener("remaleh-auth-changed",R),()=>window.removeEventListener("remaleh-auth-changed",R)},[f]);const k=o.useCallback(async(R,$)=>{try{y(null),d(!0),console.log("Attempting login to:",pe.AUTH.LOGIN);const w=await _e(pe.AUTH.LOGIN,{email:R,password:$});if(w.ok){const D=await w.json();console.log("Login response:",D);const{access_token:z,refresh_token:H,user:ne}=D;localStorage.setItem("authToken",z),localStorage.setItem("refreshToken",H);const le=ne||D.user;return console.log("Setting user:",le),console.log("User is_admin:",le==null?void 0:le.is_admin),console.log("User role:",le==null?void 0:le.role),s(le),l(!0),window.dispatchEvent(new Event("remaleh-auth-changed")),{success:!0}}else{let D="Login failed. Please check your email and password.";try{const z=await w.json(),H=z.error||z.message||"";H.toLowerCase().includes("email not verified")?D="Please verify your email to sign in. Check your inbox for the code.":H.toLowerCase().includes("invalid email or password")?D="Incorrect email or password. Please try again.":H.toLowerCase().includes("deactivated")&&(D="Your account is deactivated. Contact support for assistance.")}catch{}return y(D),{success:!1,error:D}}}catch(w){console.error("Login error details:",w);let D="We couldn't reach the server. Please check your connection and try again.";return w.name==="TypeError"&&w.message.includes("fetch")?D="Cannot connect to server. Please check your internet connection or server status.":w.message&&(D=w.message),y(D),{success:!1,error:D}}finally{d(!1)}},[]),I=o.useCallback(async R=>{try{y(null),d(!0);const $=await _e(pe.AUTH.REGISTER,R);if($.ok){const w=await $.json();if(w.requires_verification)return{success:!0,requires_verification:!0,user:w.user};const{access_token:D,refresh_token:z,user:H}=w;return localStorage.setItem("authToken",D),localStorage.setItem("refreshToken",z),s(H),l(!0),window.dispatchEvent(new Event("remaleh-auth-changed")),{success:!0}}else{let w="Registration failed";try{const D=await $.json();w=D.error||D.message||w}catch{}return y(w),{success:!1,error:w}}}catch{const w="We couldn't reach the server. Please check your connection and try again.";return y(w),{success:!1,error:w}}finally{d(!1)}},[]),F=o.useCallback(async(R,$)=>{try{y(null),d(!0);const w=await _e(pe.AUTH.VERIFY_EMAIL,{email:R,code:$});if(w.ok){const D=await w.json(),{access_token:z,refresh_token:H,user:ne}=D;return localStorage.setItem("authToken",z),localStorage.setItem("refreshToken",H),s(ne),l(!0),window.dispatchEvent(new Event("remaleh-auth-changed")),{success:!0}}else{const D=await w.json();return y(D.error||D.message||"Verification failed"),{success:!1,error:D.error||D.message}}}catch{const D="We couldn't reach the server. Please check your connection and try again.";return y(D),{success:!1,error:D}}finally{d(!1)}},[]),O=o.useCallback(async R=>{try{y(null);const $=await _e(pe.AUTH.RESEND_VERIFICATION,{email:R});if($.ok)return{success:!0};{const w=await $.json();return y(w.error||w.message||"Resend failed"),{success:!1,error:w.error||w.message}}}catch{const w="We couldn't reach the server. Please check your connection and try again.";return y(w),{success:!1,error:w}}},[]),B=o.useCallback(async R=>{try{y(null);const $=await _e(pe.AUTH.REQUEST_PASSWORD_RESET,{email:R});if($.ok)return{success:!0,message:(await $.json()).message||"If this email exists, a temporary password has been sent."};{let w="Please wait before trying again.";try{const D=await $.json();w=D.error||D.message||w}catch{}return y(w),{success:!1,error:w}}}catch{const w="We couldn't reach the server. Please check your connection and try again.";return y(w),{success:!1,error:w}}},[]),g=o.useCallback(async()=>{try{localStorage.getItem("authToken")&&await _e(pe.AUTH.LOGOUT)}catch(R){console.error("Logout error:",R)}finally{localStorage.removeItem("authToken"),localStorage.removeItem("refreshToken"),s(null),l(!1),window.dispatchEvent(new Event("remaleh-auth-changed"))}},[]),ae=o.useCallback(async R=>{try{y(null),d(!0);const $={};if(typeof(R==null?void 0:R.name)=="string"){const z=R.name.trim().split(/\s+/);$.first_name=z[0]||"",$.last_name=z.length>1?z.slice(1).join(" "):""}typeof(R==null?void 0:R.first_name)=="string"&&($.first_name=R.first_name),typeof(R==null?void 0:R.last_name)=="string"&&($.last_name=R.last_name),typeof(R==null?void 0:R.bio)=="string"&&($.bio=R.bio);const w=await as(pe.AUTH.PROFILE,$);if(w.ok){const D=await w.json(),z=D.user||D;return s(z),{success:!0,user:z}}else{const D=await w.json();return y(D.message||"Profile update failed"),{success:!1,error:D.message}}}catch{const w="We couldn't reach the server. Please check your connection and try again.";return y(w),{success:!1,error:w}}finally{d(!1)}},[]),h=o.useCallback(async(R,$)=>{try{y(null),d(!0);const w=await _e(pe.AUTH.CHANGE_PASSWORD,{current_password:R,new_password:$});if(w.ok)return{success:!0};{const D=await w.json();return y(D.message||"Password change failed"),{success:!1,error:D.message}}}catch{const D="We couldn't reach the server. Please check your connection and try again.";return y(D),{success:!1,error:D}}finally{d(!1)}},[]),S=o.useCallback(()=>{console.log("=== USER AUTH DEBUG ==="),console.log("User object:",t),console.log("Is authenticated:",a),console.log("Is loading:",n),console.log("User is_admin:",t==null?void 0:t.is_admin),console.log("User role:",t==null?void 0:t.role),console.log("User email:",t==null?void 0:t.email),console.log("Local storage token:",localStorage.getItem("authToken")),console.log("========================")},[t,a,n]);return{user:t,isAuthenticated:a,isLoading:n,error:x,login:k,register:I,verifyEmail:F,resendVerification:O,requestPasswordReset:B,logout:g,updateProfile:ae,changePassword:h,refreshAuthToken:M,clearError:()=>y(null),debugUserState:S}};async function ct(t,{cloudName:s,uploadPreset:a,folder:l="app_uploads"}={}){var k;const n=s||"dhdly65li",d=a||"remaleh_unsigned";if(!n||!d)throw new Error("Cloudinary env not configured");const x=new FormData;x.append("file",t),x.append("upload_preset",d),x.append("folder",l);const y=await fetch(`https://api.cloudinary.com/v1_1/${n}/auto/upload`,{method:"POST",body:x}),M=await y.text();let f=null;try{f=M?JSON.parse(M):null}catch{}if(!y.ok){const I=f&&(((k=f.error)==null?void 0:k.message)||f.message)||`Upload failed (HTTP ${y.status})`;throw new Error(I)}if(!f||!f.secure_url)throw new Error("Upload failed: no URL returned");return{url:f.secure_url,public_id:f.public_id,resource_type:f.resource_type||"image"}}const Oe={MODULES:"/api/learning/modules",MODULE:t=>`/api/learning/modules/${t}`,LESSONS:t=>`/api/learning/modules/${t}/lessons`,LESSON:(t,s)=>`/api/learning/modules/${t}/lessons/${s}`,PROGRESS:t=>`/api/learning/modules/${t}/progress`,PROGRESS_OVERVIEW:"/api/learning/progress/overview",EXPORT:"/api/learning/content/export",IMPORT:"/api/learning/content/import",LEARNING_MEDIA:"/api/learning/media"},As="learning_content_fallback",Ue=async(t=!1)=>{try{const s=t?`${Oe.MODULES}?t=${Date.now()}`:Oe.MODULES;console.log("🔄 getAllModules called with forceRefresh:",t,"endpoint:",s);const a=await Le(s);if(a.ok){const l=await a.json();return console.log("🔄 getAllModules fresh data received:",l),localStorage.setItem(As,JSON.stringify(l)),l.modules||[]}}catch(s){console.warn("Backend unavailable, using fallback data:",s)}if(!t)try{const s=localStorage.getItem(As);if(s)return console.log("🔄 getAllModules using fallback data"),JSON.parse(s).modules||[]}catch(s){console.warn("Fallback data unavailable:",s)}return[]},dt=async t=>{try{const s=await Le(Oe.MODULE(t));if(s.ok)return await s.json()}catch(s){console.warn("Backend unavailable, using fallback data:",s)}try{const s=localStorage.getItem(As);if(s)return(JSON.parse(s).modules||[]).find(l=>l.id===t)}catch(s){console.warn("Fallback data unavailable:",s)}return null},Yt=async(t,s)=>{try{const a=await dt(t);if(a&&a.content&&a.content.lessons)return a.content.lessons.find(l=>l.id===s)}catch(a){console.warn("Error getting lesson:",a)}return null},mt=async t=>{try{const s=await Le(Oe.PROGRESS(t));if(s.ok)return await s.json()}catch(s){console.warn("Backend unavailable, using local progress:",s)}try{const s=localStorage.getItem(`module_progress_${t}`);if(s)return JSON.parse(s)}catch(s){console.warn("Local progress unavailable:",s)}return{module_id:t,completed:!1,score:0,started_at:null,completed_at:null}},Ss=async()=>{try{const t=await Le(Oe.PROGRESS_OVERVIEW);if(t.ok)return await t.json()}catch(t){console.warn("Backend unavailable, using local progress:",t)}try{const t=await Ue(),s=t.filter(a=>{const l=localStorage.getItem(`module_progress_${a.id}`);return l&&JSON.parse(l).completed}).length;return{total_modules:t.length,completed_modules:s,completion_percentage:t.length>0?s/t.length*100:0,total_score:0,average_score:0}}catch(t){return console.warn("Local progress calculation failed:",t),{total_modules:0,completed_modules:0,completion_percentage:0,total_score:0,average_score:0}}},Jt=async()=>{var t,s,a;try{const l=await Ue(),n=await Ss();for(const d of l)if(!(await mt(d.id)).completed)return{module_id:d.id,module_title:d.title,lesson_id:1,lesson_title:((a=(s=(t=d.content)==null?void 0:t.lessons)==null?void 0:s[0])==null?void 0:a.title)||"Introduction"};return null}catch(l){return console.warn("Error getting next recommended lesson:",l),null}},_s=(t,s)=>{var a;try{if(!Array.isArray(t)||!s)return null;const l=new Set((s.lesson_progress_records||[]).filter(n=>n.completed).map(n=>`${n.module_id}_${n.lesson_id}`));for(const n of t){const d=((a=n==null?void 0:n.content)==null?void 0:a.lessons)||[];for(const x of d){const y=`${n.id}_${x.id}`;if(!l.has(y))return{module_id:n.id,module_title:n.title,lesson_id:x.id,lesson_title:x.title}}}return null}catch(l){return console.warn("Error computing next recommended lesson:",l),null}},Kt=async()=>{try{const t=await Ss(),s=await Ue();return{...t,total_lessons:s.reduce((a,l)=>{var n,d;return a+(((d=(n=l.content)==null?void 0:n.lessons)==null?void 0:d.length)||0)},0),estimated_total_time:s.reduce((a,l)=>a+(l.estimated_time||0),0)}}catch(t){return console.warn("Error getting learning stats:",t),{total_modules:0,completed_modules:0,completion_percentage:0,total_lessons:0,estimated_total_time:0}}},Qt=async t=>{try{const s=await Ue(),a=[],l=t.toLowerCase();for(const n of s)if((n.title.toLowerCase().includes(l)||n.description.toLowerCase().includes(l))&&a.push({type:"module",id:n.id,title:n.title,description:n.description,difficulty:n.difficulty}),n.content&&n.content.lessons)for(const d of n.content.lessons)(d.title.toLowerCase().includes(l)||d.content.toLowerCase().includes(l))&&a.push({type:"lesson",module_id:n.id,module_title:n.title,id:d.id,title:d.title,content:d.content.substring(0,100)+"..."});return a}catch(s){return console.warn("Error searching content:",s),[]}},Zt=async t=>{try{return(await Ue()).filter(a=>a.difficulty===t)}catch(s){return console.warn("Error getting content by difficulty:",s),[]}},Xt=async()=>{try{const t=await Ue(),s=[];for(const a of t)if(a.content&&a.content.lessons&&a.content.lessons.length>0){const l=a.content.lessons[0];s.push({module_id:a.id,module_title:a.title,lesson_id:l.id,lesson_title:l.title,content:l.content.substring(0,150)+"...",difficulty:a.difficulty,estimated_time:a.estimated_time})}return s}catch(t){return console.warn("Error getting quick tips:",t),[]}},ea=async()=>{try{const t=await Le(Oe.EXPORT);if(t.ok)return(await t.json()).metadata}catch(t){console.warn("Backend unavailable, using fallback data:",t)}try{const t=localStorage.getItem(As);if(t)return JSON.parse(t).metadata||{version:"1.0",last_updated:new Date().toISOString(),total_modules:0,total_lessons:0}}catch(t){console.warn("Fallback data unavailable:",t)}return{version:"1.0",last_updated:new Date().toISOString(),total_modules:0,total_lessons:0}},ut=async t=>{try{const s=await _e(Oe.MODULES,t);if(s.ok){const a=await s.json();return await Ue(),a}else throw new Error("Failed to create module")}catch(s){throw console.error("Error creating module:",s),s}},xt=async(t,s)=>{try{console.log("🔄 updateModule called with:",{moduleId:t,moduleData:s}),console.log("🌐 API endpoint:",Oe.MODULE(t));const a=await as(Oe.MODULE(t),s);if(console.log("🌐 Response status:",a.status),console.log("🌐 Response ok:",a.ok),a.ok){const l=await a.json();return console.log("✅ Module updated successfully:",l),await Ue(),l}else throw console.error("❌ Failed to update module, status:",a.status),new Error("Failed to update module")}catch(a){throw console.error("❌ Error in updateModule:",a),a}},ht=async t=>{try{if((await cs(Oe.MODULE(t))).ok)return await Ue(),{message:"Module deleted successfully"};throw new Error("Failed to delete module")}catch(s){throw console.error("Error deleting module:",s),s}},gt=async(t,s)=>{try{console.log("🔄 contentManager.addLesson called with:",{moduleId:t,lessonData:s}),console.log("🔄 API endpoint:",Oe.LESSONS(t));const a=await _e(Oe.LESSONS(t),s);if(console.log("🔄 API response received:",a),console.log("🔄 Response status:",a.status),console.log("🔄 Response ok:",a.ok),a.ok){const l=await a.json();return console.log("🔄 Response data:",l),await Ue(),l}else{console.log("❌ Response not ok, status:",a.status);let l="Failed to add lesson";try{const n=await a.json();console.log("❌ Error response body:",n),l=n.error||n.message||l}catch{}throw new Error(l)}}catch(a){throw console.error("❌ Error in addLesson:",a),a}},pt=async t=>{try{const s=await ct(t,{folder:"learning_content"});return{url:s.url,public_id:s.public_id,resource_type:s.resource_type}}catch(s){throw console.error("❌ Error uploading lesson media:",s),s}},ft=async(t,s,a)=>{try{const l=await as(Oe.LESSON(t,s),a);if(l.ok){const n=await l.json();return await Ue(),n}else throw new Error("Failed to update lesson")}catch(l){throw console.error("Error updating lesson:",l),l}},yt=async(t,s)=>{try{console.log("🔄 contentManager.deleteLesson called with:",{moduleId:t,lessonId:s}),console.log("🔄 API endpoint:",Oe.LESSON(t,s));const a=await cs(Oe.LESSON(t,s));if(console.log("🔄 API response received:",a),console.log("🔄 Response status:",a.status),console.log("🔄 Response ok:",a.ok),a.ok)return console.log("✅ Lesson deleted successfully from API"),await Ue(),{message:"Lesson deleted successfully"};{console.log("❌ API response not ok, status:",a.status);const l=await a.json();throw console.log("❌ Error response body:",l),new Error(l.error||`HTTP error! status: ${a.status}`)}}catch(a){throw console.error("❌ Error in deleteLesson:",a),a}},sa=async(t,s,a)=>{try{console.log("🔄 contentManager.updateLessonProgress called with:",{moduleId:t,lessonId:s,progressData:a});const l=`/api/learning/modules/${t}/lessons/${s}/progress`;console.log("🔄 API endpoint:",l);const n=await _e(l,a);if(console.log("🔄 API response received:",n),console.log("🔄 Response status:",n.status),console.log("🔄 Response ok:",n.ok),n.ok){const d=await n.json();return console.log("✅ Lesson progress updated successfully:",d),d}else{console.log("❌ API response not ok, status:",n.status);const d=await n.json();throw console.log("❌ Error response body:",d),new Error(d.error||`HTTP error! status: ${n.status}`)}}catch(l){console.warn("Backend unavailable, storing progress locally:",l);const n={module_id:t,lesson_id:s,completed:a.completed||!1,score:a.score||0,started_at:new Date().toISOString(),completed_at:a.completed?new Date().toISOString():null};return localStorage.setItem(`lesson_progress_${t}_${s}`,JSON.stringify(n)),{progress:n}}},ta=async(t,s)=>{try{const a=await _e(Oe.PROGRESS(t),s);if(a.ok){const l=await a.json();return localStorage.setItem(`module_progress_${t}`,JSON.stringify(l.progress)),l}else throw new Error("Failed to update progress")}catch(a){console.warn("Backend unavailable, storing progress locally:",a);const l={module_id:t,completed:s.completed||!1,score:s.score||0,started_at:new Date().toISOString(),completed_at:s.completed?new Date().toISOString():null};return localStorage.setItem(`module_progress_${t}`,JSON.stringify(l)),{progress:l}}},aa=async()=>{try{const t=await Le(Oe.EXPORT);if(t.ok)return await t.json();throw new Error("Failed to export content")}catch(t){throw console.error("Error exporting content:",t),t}},ra=async t=>{try{const s=await _e(Oe.IMPORT,t);if(s.ok){const a=await s.json();return await Ue(),a}else throw new Error("Failed to import content")}catch(s){throw console.error("Error importing content:",s),s}},la=Object.freeze(Object.defineProperty({__proto__:null,addLesson:gt,computeNextRecommendedLesson:_s,createModule:ut,deleteLesson:yt,deleteModule:ht,exportContent:aa,getAllModules:Ue,getContentByDifficulty:Zt,getContentUpdateInfo:ea,getLearningStats:Kt,getLessonById:Yt,getModuleById:dt,getModuleProgress:mt,getNextRecommendedLesson:Jt,getOverallProgress:Ss,getQuickTips:Xt,importContent:ra,searchLearningContent:Qt,updateLesson:ft,updateLessonProgress:sa,updateModule:xt,updateProgress:ta,uploadLessonMedia:pt},Symbol.toStringTag,{value:"Module"}));function na({setActiveTab:t}){var he,Te,Se,te,de,Re,v,Z;const{isAuthenticated:s}=ds(),[a,l]=o.useState(null),[n,d]=o.useState(null),[x,y]=o.useState(""),[M,f]=o.useState("all"),[k,I]=o.useState([]);o.useState(!1);const[F,O]=o.useState([]),[B,g]=o.useState({completed:0,total:0,progress:0}),[ae,h]=o.useState(null),[S,R]=o.useState(!0),[$,w]=o.useState(null),D=C=>{const A=((C==null?void 0:C.type)||"").toLowerCase();if(A==="quiz")return"Quiz";if(A==="assessment")return"Assessment";switch(((C==null?void 0:C.contentType)||"").toLowerCase()){case"info":return"Information";case"tips":return"Tips";case"example":return"Example";case"list":return"List";case"warning":return"Warning";case"warning-signs":return"Warning Signs";case"steps":return"Steps";case"action-list":return"Actions";case"warning-list":return"Warning List";case"markdown":case"html":return"Information";default:return"Information"}},z=C=>{try{if(C==null)return"—";if(typeof C=="number")return`${Math.max(0,C)} min`;const A=String(C).trim(),V=A.toLowerCase();if(/[a-z]/.test(V))return/(^|\s)(m|mins?)($|\s)/.test(V)?A.replace(/\bm\b/i,"min"):/(^|\s)(s|secs?)($|\s)/.test(V)?A.replace(/\bs\b/i,"sec"):/(^|\s)(h|hrs?)($|\s)/.test(V)?A.replace(/\bh\b/i,"hr"):A;const p=parseInt(A,10);return isNaN(p)?A:`${p} min`}catch{return String(C)}};o.useEffect(()=>{s?H():R(!1)},[s]);const H=async()=>{try{R(!0),w(null);const[C,A]=await Promise.all([Ue(),Ss()]);O(C),g(A),h(_s(C,A))}catch{w("Failed to load learning content. Please try again.")}finally{R(!1)}};o.useEffect(()=>{if(B.lesson_progress_records&&B.lesson_progress_records.length>0){const C=B.lesson_progress_records.filter(p=>p.completed).map(p=>`${p.module_id}_${p.lesson_id}`),A=new Set(C),V=new Set(k);if(C.filter(p=>!V.has(p)),k.filter(p=>!A.has(p)),C.length>k.length)I(C);else if(C.length===k.length){const p=C.filter(G=>!k.includes(G));if(p.length>0){const G=[...new Set([...k,...p])];I(G)}}}},[B]);const ne=async(C,A)=>{var V,p,G;try{const N=F.find(j=>String(j.id)===String(C));if(!N)return;const b=`${String(N.id)}_${String(A)}`;if(k.includes(b))return;const T={completed:!0,score:100,completed_at:new Date().toISOString()},{updateLessonProgress:P}=await qt(()=>Promise.resolve().then(()=>la),void 0,import.meta.url),Q=await P(N.id,A,T),ge=`${String(((V=Q==null?void 0:Q.progress)==null?void 0:V.module_id)??N.id)}_${String(((p=Q==null?void 0:Q.progress)==null?void 0:p.lesson_id)??A)}`,He=!!(((G=Q==null?void 0:Q.progress)==null?void 0:G.completed)??!0)?ge:`${String(N.id)}_${String(A)}`;I(j=>[...new Set([...j,He])]),g(j=>{var J,X;const U=[...Array.isArray(j==null?void 0:j.lesson_progress_records)?j.lesson_progress_records:[]],je=((J=Q==null?void 0:Q.progress)==null?void 0:J.module_id)||N.id,we=((X=Q==null?void 0:Q.progress)==null?void 0:X.lesson_id)||A,Ae=U.findIndex(ee=>ee.module_id===je&&ee.lesson_id===we);Ae>=0?U[Ae]={...U[Ae],completed:!0,score:100}:U.push({module_id:je,lesson_id:we,completed:!0,score:100});const be=U.filter(ee=>ee.completed).length,Ie=(j==null?void 0:j.total_lessons)||F.reduce((ee,Ve)=>{var Ke,Xe;return ee+(((Xe=(Ke=Ve.content)==null?void 0:Ke.lessons)==null?void 0:Xe.length)||0)},0),Ge=Ie>0?be/Ie*100:(j==null?void 0:j.completion_percentage)||0,u={...j,lesson_progress_records:U,completed_lessons:be,completion_percentage:Ge};return h(_s(F,u)),u});const Ce=await Ss(),Ze=new Set([...k||[],He]),ye=Array.isArray(Ce==null?void 0:Ce.lesson_progress_records)?[...Ce.lesson_progress_records]:[];for(const j of Ze){const[L,U]=j.split("_"),je=Number(L),we=Number(U),Ae=ye.findIndex(be=>be.module_id===je&&be.lesson_id===we);Ae>=0?ye[Ae]={...ye[Ae],completed:!0,score:100}:ye.push({module_id:je,lesson_id:we,completed:!0,score:100})}const Ye=ye.filter(j=>j.completed).length,ue=(Ce==null?void 0:Ce.total_lessons)||F.reduce((j,L)=>{var U,je;return j+(((je=(U=L.content)==null?void 0:U.lessons)==null?void 0:je.length)||0)},0),c=ue>0?Ye/ue*100:(Ce==null?void 0:Ce.completion_percentage)||0,E={...Ce,lesson_progress_records:ye,completed_lessons:Ye,completion_percentage:c};g(E),h(_s(F,E))}catch{const b=`${(a==null?void 0:a.id)||"unknown"}_${A}`;I(T=>[...new Set([...T,b])]);try{const T=[...new Set([...k,b])];localStorage.setItem("remaleh-completed-lessons",JSON.stringify(T))}catch{}}},De=(()=>{let C=F;if(M!=="all"&&(C=C.filter(A=>(A.difficulty||"").toLowerCase()===M)),x){const A=x.toLowerCase();C=C.filter(V=>V.title.toLowerCase().includes(A)||V.description&&V.description.toLowerCase().includes(A))}return C})();return s?e.jsxs("div",{className:"flex flex-col p-4 max-w-none mx-auto w-full overflow-x-hidden break-words min-h-screen",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("div",{className:"flex justify-center mb-3",children:e.jsx("div",{className:"w-10 h-10 bg-[#21a1ce] rounded-lg flex items-center justify-center",children:e.jsx(ls,{className:"w-6 h-6 text-white"})})}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Learning Hub"}),e.jsx("p",{className:"text-gray-600 text-sm",children:"Remaleh isn't just about learning it's about doing. Stuck or unsure? A Remaleh Guardian will guide you step-by-step until you're confident, capable, and ready to take action."}),e.jsx("div",{className:"mt-2",children:e.jsxs("button",{onClick:H,disabled:S,className:"inline-flex items-center px-3 py-1.5 rounded-md border border-gray-200 hover:bg-gray-50 transition-all disabled:opacity-50 text-sm text-gray-700",title:"Refresh content",children:[e.jsx(bs,{className:`w-4 h-4 text-gray-600 mr-2 ${S?"animate-spin":""}`}),"Refresh"]})})]}),$&&e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-4",children:[e.jsx("p",{className:"text-red-800",children:$}),e.jsx("button",{onClick:H,className:"mt-2 text-sm text-red-600 hover:text-red-800 underline",children:"Try again"})]}),e.jsxs(ce,{className:"mb-4",children:[e.jsx(Je,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Your Progress"}),e.jsx("div",{className:"text-sm text-gray-600",children:S?"Loading...":`${B.completed_modules||0}/${B.total_modules||0} modules`})]})}),e.jsxs(ss,{children:[e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 mb-2",children:e.jsx("div",{className:"bg-[#21a1ce] h-2 rounded-full transition-all duration-300",style:{width:`${B.completion_percentage||0}%`}})}),e.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-600",children:[e.jsx("span",{children:S?"Loading...":`${Math.round(B.completion_percentage||0)}% Complete`}),ae&&e.jsxs("span",{className:"text-sm text-[#21a1ce] font-medium",children:["Next: ",ae.lesson_title]})]})]})]}),e.jsxs(ce,{className:"mb-4",children:[e.jsx(Je,{children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-[#21a1ce] rounded-lg flex items-center justify-center",children:e.jsx(Pe,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Need Help Implementing?"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Don't struggle alone - get expert guidance"})]})]}),e.jsx("a",{href:"https://www.remaleh.com.au/contact-us",target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center justify-center bg-[#21a1ce] hover:bg-[#1a8bb8] text-white rounded-md px-3 py-1.5 text-sm font-medium whitespace-nowrap self-start sm:self-auto",children:"Connect with a Remaleh Guardian"})]})}),e.jsxs(ss,{children:[e.jsx("p",{className:"text-gray-700 mb-4 text-sm",children:"Learning is just the first step. When you're ready to implement cybersecurity measures, our Remaleh Guardians are here to guide you through every step of the process."}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"w-2 h-2 bg-[#21a1ce] rounded-full mt-2"}),e.jsxs("div",{className:"text-sm text-gray-700",children:[e.jsx("span",{className:"font-medium",children:"Personal Guidance:"})," One-on-one support for your specific situation"]})]}),e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"w-2 h-2 bg-[#21a1ce] rounded-full mt-2"}),e.jsxs("div",{className:"text-sm text-gray-700",children:[e.jsx("span",{className:"font-medium",children:"Step-by-Step Implementation:"})," We'll walk you through each process"]})]}),e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"w-2 h-2 bg-[#21a1ce] rounded-full mt-2"}),e.jsxs("div",{className:"text-sm text-gray-700",children:[e.jsx("span",{className:"font-medium",children:"Ongoing Support:"})," We're here until you feel confident and empowered"]})]})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx(It,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx(ve,{type:"text",placeholder:"Search learning content...",value:x,onChange:C=>y(C.target.value),className:"pl-10"})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx(me,{onClick:()=>f("all"),variant:M==="all"?"primary":"secondary",className:"text-sm px-3 py-2",children:"All"}),e.jsx(me,{onClick:()=>f("beginner"),variant:M==="beginner"?"primary":"secondary",className:"text-sm px-3 py-2",children:"Beginner"}),e.jsx(me,{onClick:()=>f("intermediate"),variant:M==="intermediate"?"primary":"secondary",className:"text-sm px-3 py-2",children:"Intermediate"}),e.jsx(me,{onClick:()=>f("advanced"),variant:M==="advanced"?"primary":"secondary",className:"text-sm px-3 py-2",children:"Advanced"})]})]}),e.jsx("div",{className:"flex-1 min-h-0 overflow-y-auto",children:a?n?e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("button",{onClick:()=>d(null),className:"flex items-center text-[#21a1ce] hover:underline text-sm",children:[e.jsx(ks,{className:"w-4 h-4 mr-1"}),"Back to lessons"]}),!k.includes(`${String(a.id)}_${String(n.id)}`)&&e.jsx(me,{onClick:()=>ne(a.id,n.id),variant:"primary",size:"sm",children:"Mark Complete"})]}),e.jsxs(ce,{children:[e.jsxs(Je,{children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:n.title}),e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[e.jsx("span",{children:z(n.duration)}),e.jsx("span",{children:"•"}),e.jsx("span",{children:D(n)})]})]}),e.jsx(ss,{children:e.jsx(oa,{lesson:n})})]})]}):e.jsxs("div",{children:[e.jsx("div",{className:"flex items-center mb-4",children:e.jsxs("button",{onClick:()=>l(null),className:"flex items-center text-[#21a1ce] hover:underline text-sm",children:[e.jsx(ks,{className:"w-4 h-4 mr-1"}),"Back to modules"]})}),e.jsxs(ce,{children:[e.jsx(Je,{children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg flex items-center justify-center text-white",style:{backgroundColor:a.color},children:e.jsx(ls,{className:"w-5 h-5"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:a.title}),e.jsx("p",{className:"text-gray-600",children:a.description}),e.jsxs("div",{className:"mt-3",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-600 mb-1",children:[e.jsx("span",{children:"Progress"}),e.jsxs("span",{children:[((Te=(he=a.content)==null?void 0:he.lessons)==null?void 0:Te.filter(C=>k.includes(`${String(a.id)}_${String(C.id)}`)).length)||0,"/",((te=(Se=a.content)==null?void 0:Se.lessons)==null?void 0:te.length)||0," lessons"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-[#21a1ce] h-2 rounded-full transition-all duration-300",style:{width:`${((Re=(de=a.content)==null?void 0:de.lessons)==null?void 0:Re.length)>0?a.content.lessons.filter(C=>k.includes(`${String(a.id)}_${String(C.id)}`)).length/a.content.lessons.length*100:0}%`}})})]})]})]})}),e.jsx(ss,{children:e.jsx("div",{className:"space-y-3",children:(Z=(v=a.content)==null?void 0:v.lessons)==null?void 0:Z.map(C=>{const A=`${String(a.id)}_${String(C.id)}`,V=k.includes(A);return e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg cursor-pointer hover:bg-gray-100 transition-colors",onClick:()=>d(C),children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[V?e.jsx(js,{className:"w-5 h-5 text-green-500"}):e.jsx("div",{className:"w-5 h-5 border-2 border-gray-300 rounded-full"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:C.title}),e.jsxs("p",{className:"text-sm text-gray-600",children:[z(C.duration)," • ",D(C)]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[C.contentType==="warning"&&e.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full"}),C.contentType==="example"&&e.jsx("div",{className:"w-2 h-2 bg-yellow-500 rounded-full"}),e.jsx(ks,{className:"w-4 h-4 text-gray-400 transform rotate-180"})]})]},C.id)})})})]})]}):e.jsx("div",{className:"space-y-4",children:S?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-[#21a1ce] mx-auto"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Loading learning modules..."})]}):De.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(ls,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"No learning modules found"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Check back later for new content"})]}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:De.map(C=>{var G,N,b,T;const A=((N=(G=C.content)==null?void 0:G.lessons)==null?void 0:N.length)||0,V=((T=(b=C.content)==null?void 0:b.lessons)==null?void 0:T.filter(P=>k.includes(`${String(C.id)}_${String(P.id)}`)).length)||0,p=A>0?V/A*100:0;return e.jsxs(ce,{className:"cursor-pointer transition-colors hover:bg-gray-50 overflow-hidden",padding:"p-3",onClick:()=>l(C),children:[e.jsx(Je,{className:"mb-2",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"w-9 h-9 bg-[#21a1ce] rounded-lg flex items-center justify-center flex-shrink-0",children:e.jsx(ls,{className:"w-4 h-4 text-white"})}),e.jsxs("div",{className:"min-w-0 break-words",children:[e.jsx("h3",{className:"text-base font-semibold text-gray-900 truncate",children:C.title}),e.jsx("p",{className:"text-xs text-gray-600 leading-5 max-h-[2.5rem] overflow-hidden break-words",children:C.description}),e.jsxs("div",{className:"flex items-center space-x-3 text-[11px] text-gray-500 mt-1",children:[e.jsxs("span",{children:[A," lessons"]}),e.jsxs("span",{children:[C.estimated_time," min"]}),e.jsx("span",{className:"capitalize",children:C.difficulty})]})]})]}),e.jsxs("div",{className:"text-right ml-2 flex-shrink-0",children:[e.jsxs("div",{className:"text-xs font-medium text-[#21a1ce]",children:[Math.round(p),"%"]}),e.jsxs("div",{className:"text-[11px] text-gray-500",children:[V,"/",A]})]})]})}),e.jsx(ss,{children:e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-1.5",children:e.jsx("div",{className:"bg-[#21a1ce] h-1.5 rounded-full transition-all duration-300",style:{width:`${p}%`}})})})]},C.id)})})})})]}):e.jsx("div",{className:"space-y-6 p-4",children:e.jsx(ce,{children:e.jsxs("div",{className:"text-center py-8",children:[e.jsx(ls,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Authentication Required"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Please log in to access the Learning Hub and track your progress."}),e.jsx(me,{onClick:()=>t("login"),className:"bg-[#21a1ce] hover:bg-[#1a8bb8] text-white",children:"Go to Login"})]})})})}function oa({lesson:t}){const s=d=>{if(!d)return"";let x=d.replace(/<\/(?:script|style)>/gi,`
`);return x=x.replace(/<\s*(script|style)[^>]*>[\s\S]*?<\s*\/\s*\1\s*>/gi,""),x=x.replace(/ on[a-z]+\s*=\s*"[^"]*"/gi,""),x=x.replace(/ on[a-z]+\s*=\s*'[^']*'/gi,""),x=x.replace(/ on[a-z]+\s*=\s*[^\s>]+/gi,""),x=x.replace(/<\s*a\b[^>]*>/gi,'<span class="text-[#21a1ce] underline cursor-default" data-role="educational-link">'),x=x.replace(/<\s*\/\s*a\s*>/gi,"</span>"),x},a=d=>{if(!d)return"";let x=d;return x=x.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),x=x.replace(/^### (.*)$/gm,'<h4 class="font-semibold text-gray-900 mb-2">$1</h4>').replace(/^## (.*)$/gm,'<h3 class="font-semibold text-gray-900 mb-2">$1</h3>').replace(/^# (.*)$/gm,'<h2 class="font-bold text-gray-900 mb-2">$1</h2>'),x=x.replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>"),x=x.replace(/\[([^\]]+)\]\(([^)]+)\)/g,'<span class="text-[#21a1ce] underline cursor-default" data-role="educational-link" data-url="$2">$1</span>'),x=x.replace(/^(?:- |\* )(.*)$/gm,"<li>$1</li>"),x=x.replace(/(<li>.*<\/li>\n?)+/g,y=>`<ul class="list-disc list-inside space-y-1">${y}
</ul>`),x=x.replace(/\n\n/g,"<br/><br/>").replace(/\n/g,"<br/>"),x},l=d=>{switch(d){case"blue":return"bg-blue-50 border-blue-200";case"yellow":return"bg-yellow-50 border-yellow-200";case"red":return"bg-red-50 border-red-200";case"green":return"bg-green-50 border-green-200";default:return"bg-gray-50 border-gray-200"}},n=()=>{var d,x,y,M,f;switch(t.contentType){case"tips":return e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"text-gray-700 whitespace-pre-line break-words",children:t.content}),e.jsx("div",{className:"space-y-3",children:(d=t.tips)==null?void 0:d.map((k,I)=>e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"p-1 rounded-full mr-3 mt-1 bg-green-100",children:e.jsx("div",{className:"w-2 h-2 rounded-full bg-green-500"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium whitespace-pre-line",children:k.title}),e.jsx("p",{className:"text-sm text-gray-600 whitespace-pre-line",children:k.description})]})]},I))})]});case"warning-signs":return e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"text-gray-700 whitespace-pre-line break-words",children:t.content}),e.jsx("div",{className:"space-y-3",children:(x=t.signs)==null?void 0:x.map((k,I)=>e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:`p-1 rounded-full mr-3 mt-1 ${k.danger?"bg-red-100":"bg-green-100"}`,children:e.jsx("div",{className:`w-2 h-2 rounded-full ${k.danger?"bg-red-500":"bg-green-500"}`})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium whitespace-pre-line",children:k.title}),e.jsx("p",{className:"text-sm text-gray-600 whitespace-pre-line",children:k.description})]})]},I))})]});case"steps":return e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"text-gray-700 whitespace-pre-line break-words",children:t.content}),e.jsx("div",{className:"space-y-2",children:(y=t.steps)==null?void 0:y.map((k,I)=>e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"w-6 h-6 rounded-full bg-[#21a1ce] text-white text-sm font-bold flex items-center justify-center mr-3 mt-0.5",children:I+1}),e.jsx("p",{className:"text-gray-700 whitespace-pre-line",children:k})]},I))})]});case"list":return e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"text-gray-700 whitespace-pre-line",children:t.content}),e.jsx("ul",{className:"space-y-2 ml-4",children:(M=t.items)==null?void 0:M.map((k,I)=>e.jsxs("li",{className:"text-gray-700 whitespace-pre-line",children:["• ",k]},I))})]});case"warning":case"warning-list":return e.jsxs("div",{className:`p-4 rounded-lg border ${l(t.contentStyle)} break-words`,children:[e.jsx("h4",{className:"font-bold mb-2 text-red-800",children:"Important"}),e.jsx("div",{className:"text-red-700 mb-3 whitespace-pre-line break-words",children:t.content}),t.items&&e.jsx("ul",{className:"space-y-1 text-red-700",children:t.items.map((k,I)=>e.jsxs("li",{className:"whitespace-pre-line",children:["• ",k]},I))})]});case"action-list":return e.jsxs("div",{className:`p-4 rounded-lg border ${l(t.contentStyle)} break-words`,children:[e.jsx("h4",{className:"font-bold mb-2 text-green-800",children:"Actions to Take"}),e.jsx("div",{className:"text-green-700 mb-3 whitespace-pre-line break-words",children:t.content}),e.jsx("ul",{className:"space-y-1 text-green-700",children:(f=t.actions)==null?void 0:f.map((k,I)=>e.jsxs("li",{className:"whitespace-pre-line",children:["• ",k]},I))})]});case"example":return e.jsxs("div",{className:`p-4 rounded-lg border ${l(t.contentStyle)} break-words`,children:[e.jsx("h4",{className:"font-bold mb-2",children:"Real-World Example"}),e.jsx("div",{className:"text-gray-700 whitespace-pre-line break-words",children:t.content})]});case"markdown":return e.jsx("div",{className:`p-4 rounded-lg border ${l(t.contentStyle)} break-words`,children:e.jsx("div",{className:"prose prose-sm max-w-none break-words",dangerouslySetInnerHTML:{__html:s(a(t.content))}})});case"html":return e.jsx("div",{className:`p-4 rounded-lg border ${l(t.contentStyle)} break-words`,children:e.jsx("div",{className:"prose prose-sm max-w-none break-words",dangerouslySetInnerHTML:{__html:s(t.content)}})});default:return e.jsx("div",{className:`p-4 rounded-lg border ${l(t.contentStyle)} break-words`,children:e.jsx("div",{className:"text-gray-700 whitespace-pre-line break-words",children:t.content})})}};return e.jsxs("div",{className:"space-y-6 break-words",children:[n(),Array.isArray(t.media)&&t.media.length>0&&e.jsx("div",{className:"space-y-3",children:t.media.map((d,x)=>e.jsxs("div",{className:"space-y-2",children:[d.type==="image"?e.jsx("img",{src:d.url,alt:d.caption||t.title,className:"w-full max-h-72 object-cover rounded-lg border border-gray-200",loading:"lazy"}):d.type==="video"?e.jsxs("video",{controls:!0,className:"w-full max-h-80 rounded-lg border border-gray-200",children:[e.jsx("source",{src:d.url}),"Your browser does not support the video tag."]}):null,d.caption&&e.jsx("div",{className:"text-xs text-gray-500",children:d.caption})]},x))})]})}const jt=()=>{const[t,s]=o.useState([]),[a,l]=o.useState([]),[n,d]=o.useState(null),[x,y]=o.useState([]),[M,f]=o.useState([]),[k,I]=o.useState([]),[F,O]=o.useState(null),[B,g]=o.useState(!1),[ae,h]=o.useState(null),[S,R]=o.useState(null),[$,w]=o.useState(!0),D=o.useCallback(async(N={},b=!1)=>{try{g(!0),h(null);const T=new URLSearchParams(N).toString(),P=`${pe.COMMUNITY.REPORTS}${T?`?${T}`:""}`,Q=await Le(P);if(Q.ok){const ge=await Q.json();return b&&ge.reports?s(xe=>[...xe,...ge.reports]):s(ge.reports||ge),ge.pagination&&(R(ge.pagination),w(ge.pagination.has_next)),ge}else throw new Error("Failed to fetch community reports")}catch(T){h(T.message),console.error("Error fetching reports:",T)}finally{g(!1)}},[]),z=o.useCallback(async()=>{try{g(!0),h(null);const N=await Le(pe.COMMUNITY.TRENDING);if(N.ok){const b=await N.json();return l(b.trending_threats||b),b}else throw new Error("Failed to fetch trending threats")}catch(N){h(N.message),console.error("Error fetching trending threats:",N)}finally{g(!1)}},[]),H=o.useCallback(async()=>{try{g(!0),h(null);const N=new URLSearchParams({per_page:50,sort:"newest",include_all:"true"}).toString(),b=await Le(`${pe.COMMUNITY.REPORTS}?${N}`);if(b.ok){const ge=((await b.json()).reports||[]).filter(xe=>(xe.status==="APPROVED"||xe.status==="VERIFIED")&&xe.verified===!0&&xe.urgency==="HIGH").slice(0,10);return I(ge),{reports:ge}}else throw new Error("Failed to fetch latest reports")}catch(N){h(N.message),console.error("Error fetching latest reports:",N)}finally{g(!1)}},[]),ne=o.useCallback(async N=>{try{g(!0),h(null);const b=await Le(`${pe.COMMUNITY.REPORTS}/${N}`);if(b.ok)return{success:!0,report:await b.json()};{const T=await b.json();throw new Error(T.message||"Failed to fetch report")}}catch(b){return h(b.message),{success:!1,error:b.message}}finally{g(!1)}},[]),le=o.useCallback(async(N,{page:b=1,per_page:T=20}={})=>{try{g(!0),h(null);const P=new URLSearchParams({page:b,per_page:T}).toString(),Q=await Le(`${pe.COMMUNITY.REPORTS}/${N}/comments?${P}`);if(Q.ok)return{success:!0,...await Q.json()};{const ge=await Q.json();throw new Error(ge.message||"Failed to fetch comments")}}catch(P){return h(P.message),{success:!1,error:P.message}}finally{g(!1)}},[]),De=o.useCallback(async N=>{try{g(!0),h(null);const b=await cs(`/api/community/comments/${N}`);if(b.ok)return{success:!0};{const T=await b.json();throw new Error(T.message||"Failed to delete comment")}}catch(b){return h(b.message),{success:!1,error:b.message}}finally{g(!1)}},[]),he=o.useCallback(async()=>{try{g(!0),h(null);const N=await Le(pe.COMMUNITY.STATS);if(N.ok){const b=await N.json();return d(b),b}else throw new Error("Failed to fetch community statistics")}catch(N){h(N.message),console.error("Error fetching community stats:",N)}finally{g(!1)}},[]),Te=o.useCallback(async()=>{try{g(!0),h(null);const N=await Le(pe.COMMUNITY.ALERTS);if(N.ok){const b=await N.json();return y(b.alerts||b),b}else throw new Error("Failed to fetch community alerts")}catch(N){h(N.message),console.error("Error fetching alerts:",N)}finally{g(!1)}},[]),Se=o.useCallback(async({period:N="90d"}={})=>{try{g(!0),h(null);const b=new URLSearchParams({period:N}).toString(),T=await Le(`${pe.COMMUNITY.LEADERBOARD}?${b}`);if(T.ok){const P=await T.json();return f(P&&P.leaderboard?P.leaderboard:Array.isArray(P)?P:[]),P}else throw new Error("Failed to fetch leaderboard")}catch(b){h(b.message),console.error("Error fetching leaderboard:",b)}finally{g(!1)}},[]),te=o.useCallback(async({period:N="90d"}={})=>{try{g(!0),h(null);const b=new URLSearchParams({period:N}).toString(),T=await Le(`${pe.COMMUNITY.MY_STATS}?${b}`);if(T.ok){const P=await T.json();return O(P),P}else throw new Error("Failed to fetch my stats")}catch(b){h(b.message),console.error("Error fetching my stats:",b)}finally{g(!1)}},[]),de=o.useCallback(async N=>{try{g(!0),h(null);const b={threat_type:N.threat_type,description:N.description,location:N.location,urgency:N.urgency||"MEDIUM"},T=await _e(pe.COMMUNITY.REPORTS,b);if(T.ok){const{report:P}=await T.json();return s(Q=>[P,...Q]),{success:!0,report:P}}else{const P=await T.json();throw new Error(P.message||"Failed to create report")}}catch(b){return h(b.message),{success:!1,error:b.message}}finally{g(!1)}},[]),Re=o.useCallback(async(N,b)=>{try{g(!0),h(null);let T;if(b instanceof File){const P=await ct(b,{folder:"community_reports"});T=await _e(`${pe.COMMUNITY.REPORTS}/${N}/media`,{media_url:P.url,media_type:P.resource_type==="video"?"video":"image"})}else T=await _e(`${pe.COMMUNITY.REPORTS}/${N}/media`,{media_url:String(b),media_type:"image"});if(T.ok){const P=await T.json(),Q=P.media||P;return s(ge=>ge.map(xe=>xe.id===N?{...xe,media:[...xe.media||[],Q]}:xe)),{success:!0,media:Q}}else{const P=await T.json();throw new Error(P.error||P.message||"Failed to upload media")}}catch(T){return h(T.message),{success:!1,error:T.message}}finally{g(!1)}},[s]),v=o.useCallback(async N=>{try{g(!0),h(null);const b=await cs(`${pe.COMMUNITY.REPORTS}/${N}`);if(b.ok)return s(T=>T.filter(P=>P.id!==N)),{success:!0};{const T=await b.json();throw new Error(T.message||"Failed to delete report")}}catch(b){return h(b.message),{success:!1,error:b.message}}finally{g(!1)}},[]),Z=o.useCallback(async(N,b)=>{try{g(!0),h(null);const T=await _e(`${pe.COMMUNITY.REPORTS}/${N}/vote`,{vote_type:b});if(T.ok){const P=await T.json(),Q=P.report||P;return s(ge=>ge.map(xe=>xe.id===N?{...Q}:xe)),{success:!0,data:Q}}else{const P=await T.json();throw new Error(P.message||"Failed to vote on report")}}catch(T){return h(T.message),{success:!1,error:T.message}}finally{g(!1)}},[]),C=o.useCallback(async(N,b)=>{try{g(!0),h(null);const T=await _e(`${pe.COMMUNITY.REPORTS}/${N}/verify`,b);if(T.ok){const P=await T.json(),Q=P.report||P;return s(ge=>ge.map(xe=>xe.id===N?{...Q}:xe)),{success:!0,data:Q}}else{const P=await T.json();throw new Error(P.message||"Failed to verify report")}}catch(T){return h(T.message),{success:!1,error:T.message}}finally{g(!1)}},[]),A=o.useCallback(async(N,b)=>{try{g(!0),h(null);const T=await _e(`${pe.COMMUNITY.REPORTS}/${N}/comment`,b);if(T.ok){const Q={id:(await T.json()).comment_id,comment:b.comment};return s(ge=>ge.map(xe=>xe.id===N?{...xe,comments:[...xe.comments||[],Q]}:xe)),{success:!0,comment:Q}}else{const P=await T.json();throw new Error(P.message||"Failed to add comment")}}catch(T){return h(T.message),{success:!1,error:T.message}}finally{g(!1)}},[]),V=o.useCallback(async N=>{try{g(!0),h(null);const b={message:N.message,severity:(N.priority||"medium").toUpperCase(),threat_type:N.title},T=await _e(pe.COMMUNITY.ALERTS,b);if(T.ok){const{alert:P}=await T.json();return y(Q=>[P,...Q]),{success:!0,alert:P}}else{const P=await T.json();throw new Error(P.message||"Failed to create alert")}}catch(b){return h(b.message),{success:!1,error:b.message}}finally{g(!1)}},[]),p=o.useCallback(async({period:N="90d"}={})=>{await Promise.all([D({},!1),z(),H(),he(),Te(),Se({period:N}),te({period:N})])},[D,z,H,he,Te,Se,te]),G=o.useCallback(()=>h(null),[]);return{reports:t,trendingThreats:a,communityStats:n,alerts:x,leaderboard:M,latestReports:k,myStats:F,isLoading:B,error:ae,pagination:S,hasMore:$,fetchReports:D,fetchTrendingThreats:z,fetchLatestReports:H,fetchComments:le,deleteComment:De,fetchReportById:ne,fetchCommunityStats:he,fetchAlerts:Te,fetchLeaderboard:Se,fetchMyStats:te,createReport:de,voteOnReport:Z,verifyReport:C,addComment:A,createAlert:V,uploadReportMedia:Re,deleteReport:v,loadAllData:p,clearError:G}};function vs({isOpen:t,onClose:s,title:a,children:l,showCloseButton:n=!0,fullScreen:d=!1,hideOnDesktop:x=!0}){return o.useEffect(()=>{const y=M=>{M.key==="Escape"&&s()};return t&&(document.addEventListener("keydown",y),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",y),document.body.style.overflow="unset"}},[t,s]),t?e.jsxs("div",{className:`fixed inset-0 z-50 ${x?"md:hidden":""}`,children:[e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 backdrop-blur-sm",onClick:s}),e.jsxs("div",{className:`absolute inset-0 bg-white ${d?"rounded-none":"rounded-t-3xl"} transform transition-transform duration-300 ease-out ${t?"translate-y-0":"translate-y-full"}`,children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:a}),n&&e.jsx(ie,{variant:"ghost",size:"sm",onClick:s,className:"p-2 rounded-full hover:bg-gray-100",children:e.jsx($t,{className:"w-5 h-5 text-gray-600"})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:l}),e.jsx("div",{className:"h-4 bg-white"})]})]}):null}const ia=({onLoginSuccess:t,onSwitchToRegister:s})=>{const[a,l]=o.useState({email:"",password:""}),[n,d]=o.useState(!1),{login:x,error:y,user:M,isAuthenticated:f,requestPasswordReset:k}=ds(),[I,F]=o.useState(""),[O,B]=o.useState(!1);o.useEffect(()=>{f&&M&&t&&t()},[f,M,t]);const g=async h=>{if(h.preventDefault(),!(!a.email.trim()||!a.password.trim())){d(!0);try{const S=await x(a.email,a.password);S.success||console.error("Login failed:",S.error)}catch(S){console.error("Login error:",S)}finally{d(!1)}}},ae=h=>{l({...a,[h.target.name]:h.target.value})};return e.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:[e.jsx("div",{className:"flex justify-center",children:e.jsx("img",{src:"/remaleh-logo.png",alt:"Remaleh Protect",className:"h-12 w-auto"})}),e.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Sign in to your account"}),e.jsx("p",{className:"mt-2 text-center text-sm text-gray-600",children:"Access your digital security dashboard"})]}),e.jsx("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md",children:e.jsxs("div",{className:"bg-white py-8 px-4 shadow sm:rounded-lg sm:px-10",children:[e.jsxs("form",{className:"space-y-6",onSubmit:g,children:[y&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),e.jsx("div",{className:"ml-3",children:e.jsx("p",{className:"text-sm text-red-800",children:y})})]})}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email address"}),e.jsx("div",{className:"mt-1",children:e.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:a.email,onChange:ae,className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"Enter your email"})})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Password"}),e.jsx("div",{className:"mt-1",children:e.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,value:a.password,onChange:ae,className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"Enter your password"})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{id:"remember-me",name:"remember-me",type:"checkbox",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsx("label",{htmlFor:"remember-me",className:"ml-2 block text-sm text-gray-900",children:"Remember me"})]}),e.jsx("div",{className:"text-sm",children:e.jsx("button",{type:"button",onClick:async()=>{if(!a.email.trim()){F("Enter your email above, then click reset.");return}const h=await k(a.email.trim());F(h.message||"If this email exists, a temporary password has been sent.")},className:"font-medium text-blue-600 hover:text-blue-500",children:"Forgot your password?"})})]}),I&&e.jsx("div",{className:"mt-2 p-3 bg-blue-50 border border-blue-200 rounded-md text-sm text-blue-800",children:I}),e.jsxs("div",{className:"relative my-4",children:[e.jsx("div",{className:"absolute inset-0 flex items-center","aria-hidden":"true",children:e.jsx("div",{className:"w-full border-t border-gray-200"})}),e.jsx("div",{className:"relative flex justify-center text-sm",children:e.jsx("span",{className:"bg-white px-2 text-gray-500",children:"or"})})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[e.jsxs("button",{type:"button",onClick:async()=>{try{B(!0);const S=await fetch("https://api.remalehprotect.remaleh.com.au/api/auth/oauth/google/start");if(S.ok){const R=await S.json();R.auth_url&&(window.location.href=R.auth_url)}else F("Google sign-in is not available right now.")}catch{F("Google sign-in is not available right now.")}finally{B(!1)}},disabled:O,className:"w-full flex items-center justify-center py-2 px-4 border border-gray-300 rounded-md shadow-sm text-sm font-medium bg-white hover:bg-gray-50 disabled:opacity-50",children:[e.jsx("img",{src:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg",alt:"Google",className:"w-4 h-4 mr-2"}),"Continue with Google"]}),e.jsxs("button",{type:"button",onClick:async()=>{try{B(!0);const S=await fetch("https://api.remalehprotect.remaleh.com.au/api/auth/oauth/apple/start");if(S.ok){const R=await S.json();R.auth_url&&(window.location.href=R.auth_url)}else F("Apple sign-in is not available right now.")}catch{F("Apple sign-in is not available right now.")}finally{B(!1)}},disabled:O,className:"w-full flex items-center justify-center py-2 px-4 border border-gray-300 rounded-md shadow-sm text-sm font-medium bg-white hover:bg-gray-50 disabled:opacity-50",children:[e.jsx("svg",{viewBox:"0 0 24 24",className:"w-4 h-4 mr-2",fill:"currentColor","aria-hidden":"true",children:e.jsx("path",{d:"M16.365 1.43c0 1.14-.495 2.294-1.293 3.184-.822.914-2.2 1.622-3.364 1.53-.146-1.12.51-2.314 1.315-3.19.823-.892 2.26-1.646 3.342-1.524zM20.66 17.03c-.836 1.93-1.85 3.84-3.338 3.865-1.464.03-1.934-.93-3.607-.93-1.673 0-2.19.9-3.565.96-1.43.06-2.513-2.08-3.36-4.01-1.832-4.038-1.01-9.19 1.288-11.71.85-.94 1.98-1.55 3.168-1.58 1.3-.03 2.52.89 3.603.89 1.085 0 2.4-1.1 4.05-.94.69.03 2.62.28 3.864 2.12-.1.06-2.31 1.35-2.2 4.02.1 3.23 2.84 4.3 2.94 4.35z"})}),"Continue with Apple"]})]}),I&&e.jsx("div",{className:"mt-2 p-3 bg-blue-50 border border-blue-200 rounded-md text-sm text-blue-800",children:I}),e.jsx("div",{children:e.jsx("button",{type:"submit",disabled:n,className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:n?e.jsxs("div",{className:"flex items-center",children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Signing in..."]}):"Sign in"})})]}),e.jsxs("div",{className:"mt-6",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("div",{className:"w-full border-t border-gray-300"})}),e.jsx("div",{className:"relative flex justify-center text-sm",children:e.jsx("span",{className:"px-2 bg-white text-gray-500",children:"New to Remaleh Protect?"})})]}),e.jsx("div",{className:"mt-6",children:e.jsx("button",{onClick:()=>{s&&s()},className:"w-full flex justify-center py-2 px-4 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Create an account"})})]})]})})]})};function bt({onRefresh:t,children:s,threshold:a=80,className:l=""}){const[n,d]=o.useState(!1),[x,y]=o.useState(0),[M,f]=o.useState(!1),k=o.useRef(null),I=o.useRef(0),F=o.useRef(0);o.useEffect(()=>{const g=k.current;if(!g)return;const ae=R=>{g.scrollTop===0&&(I.current=R.touches[0].clientY,d(!0))},h=R=>{if(!n)return;F.current=R.touches[0].clientY;const $=Math.max(0,F.current-I.current);$>0&&(y($),R.preventDefault())},S=async()=>{if(n){if(x>=a&&t){f(!0);try{await t()}catch(R){console.error("Pull to refresh failed:",R)}finally{f(!1)}}d(!1),y(0)}};return g.addEventListener("touchstart",ae,{passive:!1}),g.addEventListener("touchmove",h,{passive:!1}),g.addEventListener("touchend",S),()=>{g.removeEventListener("touchstart",ae),g.removeEventListener("touchmove",h),g.removeEventListener("touchend",S)}},[n,x,a,t]);const O=Math.min(x/a,1),B=n&&x>20;return e.jsxs("div",{className:`relative ${l}`,children:[B&&e.jsx("div",{className:"absolute top-0 left-0 right-0 z-10 flex items-center justify-center bg-blue-50 border-b border-blue-200 transition-all duration-200",style:{height:`${Math.min(x,a)}px`,opacity:O},children:e.jsxs("div",{className:"flex items-center space-x-2 text-blue-600",children:[e.jsx(bs,{className:`w-5 h-5 transition-transform duration-200 ${O>=1?"animate-spin":""}`,style:{transform:`rotate(${O*180}deg)`}}),e.jsx("span",{className:"text-sm font-medium",children:O>=1?"Release to refresh":"Pull to refresh"})]})}),M&&e.jsx("div",{className:"absolute top-0 left-0 right-0 z-10 flex items-center justify-center bg-blue-50 border-b border-blue-200 h-16",children:e.jsxs("div",{className:"flex items-center space-x-2 text-blue-600",children:[e.jsx(bs,{className:"w-5 h-5 animate-spin"}),e.jsx("span",{className:"text-sm font-medium",children:"Refreshing..."})]})}),e.jsx("div",{ref:k,className:"h-full overflow-auto",style:{transform:B?`translateY(${Math.min(x,a)}px)`:"translateY(0)",transition:B?"none":"transform 0.3s ease-out"},children:s})]})}function ca({setActiveTab:t}){const[s,a]=o.useState("reports"),{reports:l,latestReports:n,fetchLatestReports:d,fetchReports:x,leaderboard:y,trendingThreats:M,myStats:f,loadAllData:k,isLoading:I,pagination:F,hasMore:O,createReport:B,uploadReportMedia:g,deleteReport:ae,voteOnReport:h,addComment:S,fetchReportById:R,fetchComments:$,deleteComment:w,fetchLeaderboard:D,fetchMyStats:z}=jt(),{user:H,isAuthenticated:ne}=ds(),[le,De]=o.useState(!1),[he,Te]=o.useState({description:"",threat_type:"SCAM",urgency:"MEDIUM",location:""}),[Se,te]=o.useState([]),[de,Re]=o.useState(!1),[v,Z]=o.useState(null),[C,A]=o.useState(!1),[V,p]=o.useState([]),[G,N]=o.useState(0),[b,T]=o.useState(!1),[P,Q]=o.useState(null),[ge,xe]=o.useState(1),[He,Ce]=o.useState(!1),[Ze,ye]=o.useState({}),[Ye,ue]=o.useState("90d"),[c,E]=o.useState("ALL"),[j,L]=o.useState(""),[U,je]=o.useState("ALL"),[we,Ae]=o.useState("ALL"),[be,Ie]=o.useState(!1);o.useEffect(()=>{ne&&k({period:Ye})},[ne,k,Ye]),o.useEffect(()=>{ne&&s==="my_reports"&&x({include_own:"true"},!1)},[s,ne,x]),o.useEffect(()=>{const i=()=>{if(s!=="feed")return;if(window.innerHeight+window.scrollY>=document.body.offsetHeight-200&&!I&&O&&F){const q=F.next_num;q&&x({page:q},!0)}};return window.addEventListener("scroll",i),()=>window.removeEventListener("scroll",i)},[s,I,O,F,x]);const Ge=o.useMemo(()=>!l||l.length===0?[]:l.filter(i=>{const K=j?(i.description||"").toLowerCase().includes(j.toLowerCase())||(i.location||"").toLowerCase().includes(j.toLowerCase())||(i.threat_type||"").toLowerCase().includes(j.toLowerCase()):!0,q=U==="ALL"?!0:i.threat_type===U,se=we==="ALL"?!0:i.urgency===we,W=be?!!i.verified:!0;return K&&q&&se&&W}),[l,j,U,we,be]),u=i=>{if(!i)return"";if(i.startsWith("http"))return i;try{return new URL(i,$e).toString()}catch{return`${$e}${i}`}},J=i=>!i||!i.media_type?!0:i.media_type.toLowerCase().startsWith("image"),X=i=>!i||!i.media_type?!1:i.media_type.toLowerCase().startsWith("video"),ee=(i,K=0)=>{const q=(i||[]).filter(J).map(se=>({id:se.id,src:u(se.media_url)})).filter(se=>!!se.src);q.length>0&&(p(q),N(Math.max(0,Math.min(K,q.length-1))),A(!0))},Ve=async i=>{var q,se;xe(1);const K=await $(i,{page:1,per_page:20});K.success&&(Q({id:i,comments:K.comments||[]}),Ce((((q=K.pagination)==null?void 0:q.page)||1)<(((se=K.pagination)==null?void 0:se.pages)||1)),T(!0))},Ke=async()=>{var q,se;if(!P)return;const i=ge+1,K=await $(P.id,{page:i,per_page:20});K.success&&(Q(W=>({...W,comments:[...W.comments||[],...K.comments||[]]})),xe(i),Ce((((q=K.pagination)==null?void 0:q.page)||i)<(((se=K.pagination)==null?void 0:se.pages)||i)))},Xe=async i=>{(await w(i)).success&&Q(q=>({...q,comments:(q.comments||[]).filter(se=>se.id!==i)}))},rs=[{id:"reports",label:"Report Scam",icon:qs},{id:"feed",label:"Community Reports",icon:xs},{id:"my_reports",label:"My Reports",icon:js},{id:"leaderboard",label:"Leaderboard",icon:us},{id:"latest",label:"Latest Scams",icon:ot}],hs=()=>{switch(s){case"reports":return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"text-center mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Report a Scam"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Help protect others by reporting scams you encounter"})]}),e.jsx(ce,{className:"bg-blue-50 border-blue-200",children:e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx(qs,{className:"w-5 h-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:"Your Reporting Stats"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Keep reporting to climb the leaderboard!"})]})]}),e.jsx("div",{className:"flex justify-end mb-2",children:e.jsxs("select",{value:Ye,onChange:i=>{const K=i.target.value;ue(K),z({period:K}),D({period:K})},className:"text-xs border border-gray-300 rounded px-2 py-1",children:[e.jsx("option",{value:"90d",children:"Last 90 days"}),e.jsx("option",{value:"all",children:"All time"})]})}),(()=>{const i=((f==null?void 0:f.tier)||"").toString(),K=i.toLowerCase(),q=!!i,se=q?"grid-cols-4":"grid-cols-3";let W="bg-gray-100 text-gray-700",Y="text-gray-600",oe=null;return K.includes("helper")?(W="bg-blue-100 text-blue-700",Y="text-blue-600",oe=e.jsx(ps,{className:`w-4 h-4 ${Y}`})):K.includes("ally")?(W="bg-purple-100 text-purple-700",Y="text-purple-600",oe=e.jsx(Pe,{className:`w-4 h-4 ${Y}`})):K.includes("champion")?(W="bg-yellow-100 text-yellow-700",Y="text-yellow-600",oe=e.jsx(us,{className:`w-4 h-4 ${Y}`})):K.includes("guardian")&&(W="bg-emerald-100 text-emerald-700",Y="text-emerald-600",oe=e.jsxs("span",{className:"relative inline-block w-5 h-5",children:[e.jsx(Pe,{className:`w-5 h-5 absolute inset-0 ${Y}`}),e.jsx(gs,{className:"w-3 h-3 absolute bottom-0 right-0 text-emerald-700"})]})),e.jsxs("div",{className:`grid ${se} gap-4 text-center`,children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:(f==null?void 0:f.report_count)??0}),e.jsx("div",{className:"text-xs text-gray-600",children:"Reports"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:(f==null?void 0:f.points)??0}),e.jsx("div",{className:"text-xs text-gray-600",children:"Points"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-orange-600",children:f!=null&&f.rank?`#${f.rank}`:"—"}),e.jsx("div",{className:"text-xs text-gray-600",children:"Rank"})]}),q&&e.jsxs("div",{className:"flex flex-col items-center justify-center",children:[e.jsxs("div",{className:`inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full ${W}`,children:[oe,e.jsx("span",{className:"text-xs font-medium",children:i})]}),e.jsx("div",{className:"text-xs text-gray-600 mt-1",children:"Tier"})]})]})})()]})}),e.jsxs(me,{onClick:()=>De(!0),className:"w-full bg-red-600 hover:bg-red-700 text-white py-3",children:[e.jsx(Ls,{className:"w-5 h-5 mr-2"}),"Report New Scam"]})]});case"feed":return e.jsxs("div",{className:"flex flex-col min-h-[70vh]",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-center flex-1",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Community Reports"}),e.jsx("p",{className:"text-sm text-gray-600",children:"See a scam? Share it."})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("select",{onChange:i=>x({sort:i.target.value},!1),className:"text-xs border border-gray-300 rounded px-2 py-1",defaultValue:"newest",children:[e.jsx("option",{value:"newest",children:"Newest"}),e.jsx("option",{value:"top",children:"Top"}),e.jsx("option",{value:"verified",children:"Verified first"})]}),e.jsx(ie,{onClick:()=>x({},!1),variant:"outline",size:"sm",children:"Refresh"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2",children:[e.jsx(tt,{placeholder:"Search reports...",onSearch:i=>L(i)}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Rs,{value:U,onChange:i=>je(i.target.value),options:[{value:"ALL",label:"All categories"},{value:"PHISHING",label:"Phishing"},{value:"MALWARE",label:"Malware"},{value:"SCAM",label:"Scam"},{value:"SOCIAL_ENGINEERING",label:"Social Eng."},{value:"OTHER",label:"Other"}],className:"flex-1"}),e.jsx(Rs,{value:we,onChange:i=>Ae(i.target.value),options:[{value:"ALL",label:"All severity"},{value:"LOW",label:"Caution"},{value:"MEDIUM",label:"Scam"},{value:"HIGH",label:"Ongoing Scam"}],className:"flex-1"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("label",{className:"flex items-center gap-2 text-xs text-gray-700",children:[e.jsx("input",{type:"checkbox",className:"rounded",checked:be,onChange:i=>Ie(i.target.checked)}),"Verified only"]}),(j||be||U!=="ALL"||we!=="ALL")&&e.jsx(ie,{variant:"ghost",size:"sm",onClick:()=>{L(""),je("ALL"),Ae("ALL"),Ie(!1)},children:"Clear"})]})]})]}),e.jsx("div",{className:"flex-1 min-h-0 overflow-y-auto",children:e.jsxs(bt,{onRefresh:async()=>{await x({},!1)},className:"h-full",children:[F&&e.jsxs("div",{className:"text-center text-xs text-gray-500 mb-2",children:["Showing ",Ge.length," of ",F.total," reports",O&&e.jsx("span",{className:"ml-2",children:"• Scroll to load more"})]}),e.jsxs("div",{className:"space-y-3",children:[Ge&&Ge.length>0?Ge.map(i=>{var K,q,se;return e.jsx(ce,{className:"border-gray-200",children:e.jsx("div",{className:"p-4",children:e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"text-xs px-2 py-0.5 rounded-full bg-gray-100 text-gray-700",children:i.threat_type}),e.jsx("span",{className:"text-xs text-gray-500",children:i.created_at?new Date(i.created_at).toLocaleDateString():""}),i.verified&&e.jsx(js,{className:"w-3.5 h-3.5 text-green-600"})]}),e.jsxs("div",{className:"text-xs text-gray-500 mb-1 flex items-center gap-2",children:[e.jsxs("span",{children:["by ",((K=i.creator)==null?void 0:K.name)||"Anonymous"]}),(()=>{var ns;const W=(((ns=i.creator)==null?void 0:ns.tier)||"").toString();if(!W)return null;const Y=W.toLowerCase();let oe="bg-gray-100 text-gray-700",Ee="text-gray-600",es=null;return Y.includes("helper")?(oe="bg-blue-100 text-blue-700",Ee="text-blue-600",es=e.jsx(ps,{className:`w-3.5 h-3.5 ${Ee}`})):Y.includes("ally")?(oe="bg-purple-100 text-purple-700",Ee="text-purple-600",es=e.jsx(Pe,{className:`w-3.5 h-3.5 ${Ee}`})):Y.includes("champion")?(oe="bg-yellow-100 text-yellow-700",Ee="text-yellow-600",es=e.jsx(us,{className:`w-3.5 h-3.5 ${Ee}`})):Y.includes("guardian")&&(oe="bg-emerald-100 text-emerald-700",Ee="text-emerald-600",es=e.jsxs("span",{className:"relative inline-block w-4 h-4",children:[e.jsx(Pe,{className:`w-4 h-4 absolute inset-0 ${Ee}`}),e.jsx(gs,{className:"w-2.5 h-2.5 absolute bottom-0 right-0 text-emerald-700"})]})),e.jsxs("span",{className:`inline-flex items-center gap-1 px-1.5 py-0.5 rounded-full ${oe}`,children:[es,e.jsx("span",{className:"text-[10px] font-medium leading-none",children:W})]})})()]}),((q=i.creator)==null?void 0:q.bio)&&e.jsx("div",{className:"text-xs text-gray-500 italic mb-1",children:i.creator.bio}),e.jsx("p",{className:"text-sm text-gray-800",children:i.description}),i.media&&i.media.length>0&&e.jsx("div",{className:"mt-2 grid grid-cols-3 gap-2",children:i.media.filter(W=>J(W)||X(W)).slice(0,3).map((W,Y,oe)=>{const Ee=Y===oe.length-1&&i.media.length>3,es=i.media.length-3,ns=u(W.media_url);return e.jsxs("button",{type:"button",onClick:()=>ee(i.media,Y),className:"relative w-full h-24 bg-gray-100 rounded overflow-hidden focus:outline-none",children:[ns&&(X(W)?e.jsx("video",{src:ns,className:"w-full h-full object-cover",muted:!0,playsInline:!0}):e.jsx("img",{src:ns,alt:"report media",className:"w-full h-full object-cover",loading:"lazy",onError:ws=>{const Ns=W.media_url||"";Ns&&ws.currentTarget.src!==Ns?ws.currentTarget.src=Ns:ws.currentTarget.style.display="none"}})),Ee&&es>0&&e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-40 flex items-center justify-center",children:e.jsxs("span",{className:"text-white text-sm font-semibold",children:["+",es]})})]},W.id||Y)})}),e.jsxs("div",{className:"mt-3 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(ie,{onClick:()=>h(i.id,"up"),variant:"ghost",size:"sm",className:i.user_vote==="up"?"text-green-600":"",children:[e.jsx(nt,{className:"w-4 h-4 mr-1"})," ",i.votes_up||0]}),e.jsxs(ie,{onClick:()=>h(i.id,"down"),variant:"ghost",size:"sm",className:i.user_vote==="down"?"text-red-600":"",children:[e.jsx(lt,{className:"w-4 h-4 mr-1"})," ",i.votes_down||0]})]}),e.jsxs("div",{className:"text-xs text-gray-500 flex items-center gap-1",children:[e.jsx(Ts,{className:"w-3.5 h-3.5"})," ",((se=i.comments)==null?void 0:se.length)||0]})]}),i.comments&&i.comments.length>0&&e.jsxs("div",{className:"mt-2 space-y-1",children:[i.comments.slice(0,2).map((W,Y)=>e.jsxs("div",{className:"text-xs text-gray-700 bg-gray-50 p-2 rounded",children:[e.jsxs("span",{className:"font-medium",children:[W.user_name||"Anonymous",":"]})," ",W.comment]},W.id||Y)),e.jsx("div",{children:e.jsx(ie,{variant:"ghost",size:"sm",onClick:()=>Ve(i.id),children:"View all comments"})})]}),e.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[e.jsx(ve,{placeholder:"Add a comment...",value:Ze[i.id]||"",onChange:W=>ye(Y=>({...Y,[i.id]:W.target.value})),className:"flex-1"}),e.jsx(ie,{size:"sm",disabled:!(Ze[i.id]||"").trim(),onClick:async()=>{const W=(Ze[i.id]||"").trim();W&&(await S(i.id,{comment:W}),ye(Y=>({...Y,[i.id]:""})))},children:"Comment"})]}),i.user_id===(H==null?void 0:H.id)&&e.jsx("div",{className:"mt-2 text-right",children:e.jsx(ie,{variant:"outline",size:"sm",onClick:async()=>{if(confirm("Delete this report? This cannot be undone.")){const W=await ae(i.id);W.success||alert(W.error||"Failed to delete")}},children:"Delete report"})})]})})})},i.id)}):e.jsx("p",{className:"text-gray-500 text-center py-6",children:"No reports to display yet."}),I&&O&&e.jsxs("div",{className:"text-center py-4",children:[e.jsx("div",{className:"inline-block animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"}),e.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Loading more reports..."})]}),O&&!I&&e.jsx("div",{className:"text-center py-3",children:e.jsx(ie,{variant:"outline",size:"sm",onClick:()=>{F!=null&&F.next_num&&x({page:F.next_num},!0)},children:"Load more"})})]})]})})]});case"my_reports":return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"text-center mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"My Reports"}),e.jsx("p",{className:"text-sm text-gray-600",children:"See the status of your submitted reports"})]}),e.jsxs("div",{className:"grid grid-cols-4 gap-2 text-center",children:[e.jsxs("div",{className:"p-2 bg-green-50 rounded",children:[e.jsx("div",{className:"text-base font-semibold text-green-700",children:(f==null?void 0:f.approved_count)??0}),e.jsx("div",{className:"text-xs text-green-700",children:"Approved"})]}),e.jsxs("div",{className:"p-2 bg-blue-50 rounded",children:[e.jsx("div",{className:"text-base font-semibold text-blue-700",children:(f==null?void 0:f.verified_count)??0}),e.jsx("div",{className:"text-xs text-blue-700",children:"Verified"})]}),e.jsxs("div",{className:"p-2 bg-yellow-50 rounded",children:[e.jsx("div",{className:"text-base font-semibold text-yellow-700",children:(f==null?void 0:f.pending_count)??0}),e.jsx("div",{className:"text-xs text-yellow-700",children:"Pending"})]}),e.jsxs("div",{className:"p-2 bg-red-50 rounded",children:[e.jsx("div",{className:"text-base font-semibold text-red-700",children:(f==null?void 0:f.rejected_count)??0}),e.jsx("div",{className:"text-xs text-red-700",children:"Rejected"})]})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:[{id:"ALL",label:"All"},{id:"PENDING",label:"Pending"},{id:"APPROVED",label:"Approved"},{id:"VERIFIED",label:"Verified"},{id:"REJECTED",label:"Rejected"}].map(i=>e.jsx(ie,{size:"sm",variant:c===i.id?"default":"outline",onClick:()=>E(i.id),children:i.label},i.id))}),e.jsx("div",{className:"space-y-3",children:l&&l.length>0?l.filter(i=>i.user_id===(H==null?void 0:H.id)).filter(i=>c==="ALL"?!0:i.status===c).map(i=>{var K;return e.jsx(ce,{className:"border-gray-200",children:e.jsx("div",{className:"p-4",children:e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"flex-1 pr-3",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${i.status==="APPROVED"||i.status==="VERIFIED"?"bg-green-100 text-green-700":i.status==="REJECTED"?"bg-red-100 text-red-700":"bg-yellow-100 text-yellow-700"}`,children:i.status}),i.urgency==="HIGH"&&e.jsx("span",{className:"text-xs px-2 py-1 rounded-full bg-red-100 text-red-700",children:"Ongoing Scam"}),i.verified&&e.jsx("span",{className:"text-xs px-2 py-1 rounded-full bg-blue-100 text-blue-700",children:"Verified"})]}),e.jsxs("div",{className:"text-xs text-gray-500 mb-1 flex items-center gap-2",children:[e.jsxs("span",{children:["by ",((K=i.creator)==null?void 0:K.name)||"You"]}),(()=>{var Ee;const q=(((Ee=i.creator)==null?void 0:Ee.tier)||(H==null?void 0:H.tier)||"").toString();if(!q)return null;const se=q.toLowerCase();let W="bg-gray-100 text-gray-700",Y="text-gray-600",oe=null;return se.includes("helper")?(W="bg-blue-100 text-blue-700",Y="text-blue-600",oe=e.jsx(ps,{className:`w-3.5 h-3.5 ${Y}`})):se.includes("ally")?(W="bg-purple-100 text-purple-700",Y="text-purple-600",oe=e.jsx(Pe,{className:`w-3.5 h-3.5 ${Y}`})):se.includes("champion")?(W="bg-yellow-100 text-yellow-700",Y="text-yellow-600",oe=e.jsx(us,{className:`w-3.5 h-3.5 ${Y}`})):se.includes("guardian")&&(W="bg-emerald-100 text-emerald-700",Y="text-emerald-600",oe=e.jsxs("span",{className:"relative inline-block w-4 h-4",children:[e.jsx(Pe,{className:`w-4 h-4 absolute inset-0 ${Y}`}),e.jsx(gs,{className:"w-2.5 h-2.5 absolute bottom-0 right-0 text-emerald-700"})]})),e.jsxs("span",{className:`inline-flex items-center gap-1 px-1.5 py-0.5 rounded-full ${W}`,children:[oe,e.jsx("span",{className:"text-[10px] font-medium leading-none",children:q})]})})(),e.jsxs("span",{children:["• Submitted ",new Date(i.created_at).toLocaleString()]})]}),e.jsx("p",{className:"text-sm text-gray-800",children:i.description}),i.media&&i.media.length>0&&e.jsx("div",{className:"mt-2 grid grid-cols-3 gap-2",children:i.media.filter(q=>!q.media_type||q.media_type.startsWith("image")).slice(0,3).map((q,se,W)=>{const Y=se===W.length-1&&i.media.length>3,oe=i.media.length-3,Ee=q.media_url&&(q.media_url.startsWith("http")?q.media_url:`${$e}${q.media_url}`);return e.jsxs("button",{type:"button",onClick:()=>ee(i.media,se),className:"relative w-full h-24 bg-gray-100 rounded overflow-hidden focus:outline-none",children:[Ee&&e.jsx("img",{src:Ee,alt:"report media",className:"w-full h-full object-cover",loading:"lazy"}),Y&&oe>0&&e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-40 flex items-center justify-center",children:e.jsxs("span",{className:"text-white text-sm font-semibold",children:["+",oe]})})]},q.id||se)})})]})})})},i.id)}):e.jsx("p",{className:"text-gray-500 text-center py-6",children:"No reports found"})})]});case"leaderboard":return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"text-center mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Top Reporters"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Community heroes protecting others from scams"})]}),e.jsx("div",{className:"flex justify-end",children:e.jsxs("select",{value:Ye,onChange:i=>{const K=i.target.value;ue(K),D({period:K})},className:"text-xs border border-gray-300 rounded px-2 py-1",children:[e.jsx("option",{value:"90d",children:"Last 90 days"}),e.jsx("option",{value:"all",children:"All time"})]})}),e.jsx("div",{className:"space-y-2",children:y.map((i,K)=>e.jsx(ce,{className:"border-gray-200",children:e.jsx("div",{className:"p-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold ${K===0?"bg-yellow-100 text-yellow-800":K===1?"bg-gray-100 text-gray-800":K===2?"bg-orange-100 text-orange-800":"bg-blue-100 text-blue-800"}`,children:K===0?"🥇":K===1?"🥈":K===2?"🥉":i.rank}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-semibold text-gray-900",children:i.username||i.name}),(()=>{const q=(i.tier||"").toString();if(!q)return null;const se=q.toLowerCase();let W="bg-gray-100 text-gray-700",Y="text-gray-600",oe=null;return se.includes("helper")?(W="bg-blue-100 text-blue-700",Y="text-blue-600",oe=e.jsx(ps,{className:`w-3.5 h-3.5 ${Y}`})):se.includes("ally")?(W="bg-purple-100 text-purple-700",Y="text-purple-600",oe=e.jsx(Pe,{className:`w-3.5 h-3.5 ${Y}`})):se.includes("champion")?(W="bg-yellow-100 text-yellow-700",Y="text-yellow-600",oe=e.jsx(us,{className:`w-3.5 h-3.5 ${Y}`})):se.includes("guardian")&&(W="bg-emerald-100 text-emerald-700",Y="text-emerald-600",oe=e.jsxs("span",{className:"relative inline-block w-4 h-4",children:[e.jsx(Pe,{className:`w-4 h-4 absolute inset-0 ${Y}`}),e.jsx(gs,{className:"w-2.5 h-2.5 absolute bottom-0 right-0 text-emerald-700"})]})),e.jsxs("span",{className:`inline-flex items-center gap-1 px-1.5 py-0.5 rounded-full ${W}`,children:[oe,e.jsx("span",{className:"text-[10px] font-medium leading-none",children:q})]})})()]}),e.jsxs("div",{className:"text-xs text-gray-600",children:[i.points??0," pts"]})]})]}),K<3&&e.jsx(rt,{className:"w-5 h-5 text-yellow-500"})]})})},i.id))})]});case"latest":return e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"text-center mb-4",children:e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Latest Scams"})}),e.jsx("div",{className:"space-y-3",children:n&&n.length>0?n.map(i=>{var K;return e.jsx(ce,{className:"border-gray-200",children:e.jsx("div",{className:"p-4",children:e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"flex-1 pr-3",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${i.status==="APPROVED"||i.status==="VERIFIED"?"bg-green-100 text-green-700":i.status==="REJECTED"?"bg-red-100 text-red-700":"bg-yellow-100 text-yellow-700"}`,children:i.status}),i.verified&&e.jsx("span",{className:"text-xs px-2 py-1 rounded-full bg-blue-100 text-blue-700",children:"Verified"})]}),e.jsxs("div",{className:"text-xs text-gray-500 mb-1 flex items-center gap-2",children:[e.jsxs("span",{children:["by ",((K=i.creator)==null?void 0:K.name)||"Anonymous"]}),(()=>{var Ee;const q=(((Ee=i.creator)==null?void 0:Ee.tier)||"").toString();if(!q)return null;const se=q.toLowerCase();let W="bg-gray-100 text-gray-700",Y="text-gray-600",oe=null;return se.includes("helper")?(W="bg-blue-100 text-blue-700",Y="text-blue-600",oe=e.jsx(ps,{className:`w-3.5 h-3.5 ${Y}`})):se.includes("ally")?(W="bg-purple-100 text-purple-700",Y="text-purple-600",oe=e.jsx(Pe,{className:`w-3.5 h-3.5 ${Y}`})):se.includes("champion")?(W="bg-yellow-100 text-yellow-700",Y="text-yellow-600",oe=e.jsx(us,{className:`w-3.5 h-3.5 ${Y}`})):se.includes("guardian")&&(W="bg-emerald-100 text-emerald-700",Y="text-emerald-600",oe=e.jsxs("span",{className:"relative inline-block w-4 h-4",children:[e.jsx(Pe,{className:`w-4 h-4 absolute inset-0 ${Y}`}),e.jsx(gs,{className:"w-2.5 h-2.5 absolute bottom-0 right-0 text-emerald-700"})]})),e.jsxs("span",{className:`inline-flex items-center gap-1 px-1.5 py-0.5 rounded-full ${W}`,children:[oe,e.jsx("span",{className:"text-[10px] font-medium leading-none",children:q})]})})(),e.jsxs("span",{children:["• ",new Date(i.created_at).toLocaleString()]})]}),e.jsx("p",{className:"text-sm text-gray-800",children:i.description}),i.media&&i.media.length>0&&e.jsx("div",{className:"mt-2 grid grid-cols-3 gap-2",children:i.media.filter(q=>!q.media_type||q.media_type.startsWith("image")).slice(0,3).map((q,se,W)=>{const Y=se===W.length-1&&i.media.length>3,oe=i.media.length-3,Ee=q.media_url&&(q.media_url.startsWith("http")?q.media_url:`${$e}${q.media_url}`);return e.jsxs("button",{type:"button",onClick:()=>ee(i.media,se),className:"relative w-full h-24 bg-gray-100 rounded overflow-hidden focus:outline-none",children:[Ee&&e.jsx("img",{src:Ee,alt:"report media",className:"w-full h-full object-cover",loading:"lazy"}),Y&&oe>0&&e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-40 flex items-center justify-center",children:e.jsxs("span",{className:"text-white text-sm font-semibold",children:["+",oe]})})]},q.id||se)})})]})})})},i.id)}):e.jsx("p",{className:"text-gray-500 text-center py-6",children:"No recent reports."})})]});default:return null}};return e.jsx("div",{className:"space-y-4 p-4 max-w-none mx-auto min-h-screen",children:ne?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("div",{className:"flex justify-center mb-3",children:e.jsx("div",{className:"w-10 h-10 bg-[#21a1ce] rounded-lg flex items-center justify-center",children:e.jsx(xs,{className:"w-6 h-6 text-white"})})}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Community Hub"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Spot it. Share it. Stay safe."})]}),e.jsx("div",{className:"flex space-x-1 bg-gray-100 p-1 rounded-lg",children:rs.map(i=>{const K=i.icon;return e.jsxs("button",{onClick:()=>a(i.id),className:`flex-1 flex items-center justify-center space-x-2 py-2 px-3 rounded-md text-sm font-medium transition-colors ${s===i.id?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-800"}`,children:[e.jsx(K,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:i.label})]},i.id)})}),hs(),s!=="feed"&&e.jsx("div",{className:"mt-6",children:e.jsx(ce,{className:"bg-orange-50 border-orange-200",children:e.jsxs("div",{className:"p-4",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"🤝 Community Benefits"}),e.jsxs("ul",{className:"text-sm text-gray-600 space-y-1",children:[e.jsx("li",{children:"• Report scams to protect others"}),e.jsx("li",{children:"• Earn points and climb the leaderboard"}),e.jsx("li",{children:"• Stay updated on latest scams"}),e.jsx("li",{children:"• Build a safer digital community"})]})]})})}),le&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl mx-4",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Report New Scam"}),ne?e.jsxs("form",{onSubmit:async i=>{i.preventDefault();try{Re(!0);const K=await B(he);if(!K.success)throw new Error(K.error||"Failed to create report");for(const q of Se){const se=await g(K.report.id,q);if(!se.success)throw new Error(se.error||"Failed to upload media")}De(!1),Te({description:"",threat_type:"SCAM",urgency:"MEDIUM",location:""}),te([]),Z({type:"success",message:"Report submitted successfully"}),setTimeout(()=>Z(null),3e3),k()}catch(K){Z({type:"error",message:K.message||"Submission failed"}),setTimeout(()=>Z(null),4e3)}finally{Re(!1)}},className:"space-y-4",children:[e.jsx(Bs,{placeholder:"Detailed Description",value:he.description,onChange:i=>Te({...he,description:i.target.value}),required:!0,rows:4}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Category"}),e.jsxs("select",{value:he.threat_type,onChange:i=>Te({...he,threat_type:i.target.value}),className:"w-full border border-gray-300 rounded-md px-3 py-2",children:[e.jsx("option",{value:"PHISHING",children:"Phishing"}),e.jsx("option",{value:"MALWARE",children:"Malware"}),e.jsx("option",{value:"SCAM",children:"Scam"}),e.jsx("option",{value:"SOCIAL_ENGINEERING",children:"Social Engineering"}),e.jsx("option",{value:"OTHER",children:"Other"})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Severity"}),e.jsxs("select",{value:he.urgency,onChange:i=>Te({...he,urgency:i.target.value}),className:"w-full border border-gray-300 rounded-md px-3 py-2","aria-describedby":"severity-help",children:[e.jsx("option",{value:"LOW",children:"Caution"}),e.jsx("option",{value:"MEDIUM",children:"Scam"}),e.jsx("option",{value:"HIGH",children:"Ongoing Scam"})]}),e.jsx("button",{type:"button","aria-label":"Severity help",title:"About severity levels",className:"absolute right-2 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-700",onClick:()=>alert(`Severity levels:
• Caution: suspicious or low-risk
• Scam: confirmed scam but not active
• Ongoing Scam: active scam happening now or immediate risk`),children:e.jsx(Mt,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Attach Photos (optional)"}),e.jsx("input",{type:"file",accept:"image/*",multiple:!0,onChange:i=>te(Array.from(i.target.files||[])),className:"block w-full text-sm text-gray-700"}),Se.length>0&&e.jsxs("div",{className:"mt-2 text-xs text-gray-600",children:[Se.length," file(s) selected"]})]}),e.jsx(ve,{placeholder:"Location/URL",value:he.location,onChange:i=>Te({...he,location:i.target.value})}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx(ie,{type:"submit",className:"flex-1",disabled:de,children:de?"Submitting...":"Submit Report"}),e.jsx(ie,{type:"button",variant:"outline",onClick:()=>De(!1),className:"flex-1",children:"Cancel"})]})]}):e.jsx("div",{className:"text-center text-gray-600",children:"Please log in to submit a community report."})]})}),v&&e.jsx("div",{className:`fixed bottom-6 left-1/2 -translate-x-1/2 px-4 py-3 rounded-lg shadow-md text-sm z-50 ${v.type==="success"?"bg-green-600 text-white":"bg-red-600 text-white"}`,children:v.message}),e.jsx(vs,{isOpen:C,onClose:()=>A(!1),title:"Preview",fullScreen:!0,hideOnDesktop:!1,children:V.length>0&&e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:"w-full h-[60vh] bg-black flex items-center justify-center mb-3",children:e.jsx("img",{src:V[G].src,alt:"preview",className:"max-h-full max-w-full object-contain"})}),e.jsxs("div",{className:"flex items-center justify-between w-full",children:[e.jsx(ie,{onClick:()=>N(i=>Math.max(0,i-1)),disabled:G===0,variant:"outline",size:"sm",children:"Prev"}),e.jsxs("div",{className:"text-sm text-gray-600",children:[G+1," / ",V.length]}),e.jsx(ie,{onClick:()=>N(i=>Math.min(V.length-1,i+1)),disabled:G>=V.length-1,variant:"outline",size:"sm",children:"Next"})]})]})}),e.jsx(vs,{isOpen:b,onClose:()=>T(!1),title:"All Comments",hideOnDesktop:!1,children:P?e.jsxs("div",{className:"space-y-3",children:[P.comments&&P.comments.length>0?P.comments.map(i=>e.jsxs("div",{className:"p-2 bg-gray-50 rounded border border-gray-200 flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"text-sm text-gray-800",children:[e.jsxs("span",{className:"font-medium",children:[i.user_name||"Anonymous",":"]})," ",i.comment]}),e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:i.created_at?new Date(i.created_at).toLocaleString():""})]}),((H==null?void 0:H.id)===i.user_id||(H==null?void 0:H.is_admin))&&e.jsx(ie,{variant:"ghost",size:"sm",onClick:()=>Xe(i.id),title:"Delete comment",children:e.jsx(Cs,{className:"w-4 h-4 text-red-600"})})]},i.id)):e.jsx("div",{className:"text-sm text-gray-500",children:"No comments yet."}),He&&e.jsx("div",{className:"pt-2",children:e.jsx(ie,{onClick:Ke,variant:"outline",size:"sm",children:"Load more"})})]}):e.jsx("div",{className:"text-sm text-gray-500",children:"Loading..."})})]}):e.jsx("div",{className:"space-y-6",children:e.jsx(ce,{children:e.jsxs("div",{className:"text-center py-8",children:[e.jsx(xs,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Authentication Required"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Please log in to access the Community Hub, report scams, and view the feed."}),e.jsx(me,{onClick:()=>t("login"),className:"bg-[#21a1ce] hover:bg-[#1a8bb8] text-white",children:"Go to Login"})]})})})})}function da({setActiveTab:t}){var Ge;const{isAuthenticated:s,user:a}=ds(),{reports:l,trendingThreats:n,communityStats:d,alerts:x,isLoading:y,error:M,loadAllData:f,createReport:k,voteOnReport:I,verifyReport:F,addComment:O,createAlert:B,uploadReportMedia:g,fetchReportById:ae,fetchComments:h,deleteComment:S,clearError:R}=jt(),[$,w]=o.useState(!1),[D,z]=o.useState(!1),[H,ne]=o.useState({description:"",threat_type:"SCAM",urgency:"MEDIUM",location:""}),[le,De]=o.useState({title:"",message:"",priority:"medium"}),[he,Te]=o.useState(""),[Se,te]=o.useState([]),[de,Re]=o.useState(""),[v,Z]=o.useState("ALL"),[C,A]=o.useState("ALL"),[V,p]=o.useState(!1),[G,N]=o.useState(!1),[b,T]=o.useState([]),[P,Q]=o.useState(0),[ge,xe]=o.useState(!1),[He,Ce]=o.useState(null),[Ze,ye]=o.useState(1),[Ye,ue]=o.useState(!1);o.useEffect(()=>{if(s&&(f(),typeof localStorage<"u"&&localStorage.getItem("openNewReport")==="1"||typeof sessionStorage<"u"&&sessionStorage.getItem("openNewReport")==="1"||typeof window<"u"&&window.__openNewReport===!0)){w(!0);try{localStorage.removeItem("openNewReport")}catch{}try{sessionStorage.removeItem("openNewReport")}catch{}try{delete window.__openNewReport}catch{}}},[f,s]);const c=(l||[]).filter(u=>{const J=de?(u.description||"").toLowerCase().includes(de.toLowerCase())||(u.location||"").toLowerCase().includes(de.toLowerCase())||(u.threat_type||"").toLowerCase().includes(de.toLowerCase()):!0,X=v==="ALL"?!0:u.threat_type===v,ee=C==="ALL"?!0:u.urgency===C,Ve=V?!!u.verified:!0;return J&&X&&ee&&Ve}),E=async u=>{u.preventDefault();const J=await k(H);if(J.success){for(const X of Se)await g(J.report.id,X);w(!1),ne({description:"",threat_type:"SCAM",urgency:"MEDIUM",location:""}),te([])}},j=async u=>{u.preventDefault(),(await B(le)).success&&(z(!1),De({title:"",message:"",priority:"medium"}))},L=async(u,J)=>{await I(u,J)},U=async u=>{await F(u,{verified:!0})},je=async u=>{he.trim()&&(await O(u,{comment:he}),Te(""))},we=async u=>{var X,ee;ye(1);const J=await h(u,{page:1,per_page:20});J.success&&(Ce({id:u,comments:J.comments||[]}),ue((((X=J.pagination)==null?void 0:X.page)||1)<(((ee=J.pagination)==null?void 0:ee.pages)||1)),xe(!0))},Ae=async()=>{var X,ee;if(!He)return;const u=Ze+1,J=await h(He.id,{page:u,per_page:20});J.success&&(Ce(Ve=>({...Ve,comments:[...Ve.comments||[],...J.comments||[]]})),ye(u),ue((((X=J.pagination)==null?void 0:X.page)||u)<(((ee=J.pagination)==null?void 0:ee.pages)||u)))},be=async u=>{(await S(u)).success&&Ce(X=>({...X,comments:(X.comments||[]).filter(ee=>ee.id!==u)}))},Ie=(u,J=0)=>{const X=(u||[]).filter(ee=>!ee.media_type||ee.media_type==="image").map(ee=>({id:ee.id,src:ee.media_url&&(ee.media_url.startsWith("http")?ee.media_url:`${$e}${ee.media_url}`)})).filter(ee=>!!ee.src);X.length>0&&(T(X),Q(Math.max(0,Math.min(J,X.length-1))),N(!0))};if(!s)return e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx(at,{className:"w-8 h-8 mx-auto mb-2 text-gray-400"}),e.jsx("p",{className:"text-gray-600 mb-2",children:"Login required to access Community"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Please log in to view and contribute to community reports"})]})});if(y)return e.jsx("div",{className:"flex items-center justify-center min-h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading community data..."})]})});if(M){const u=M.includes("Token is missing")||M.includes("401")||M.includes("Unauthorized");return e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Ws,{className:"h-5 w-5 text-red-400 mr-2"}),e.jsx("span",{className:"text-red-800",children:u?"Authentication Required":M})]}),e.jsx("p",{className:"text-red-700 text-sm mt-2",children:u?"Please log in to access community features. Your session may have expired.":""}),e.jsx("div",{className:"flex gap-2 mt-3",children:u?e.jsx(ie,{onClick:()=>window.location.reload(),variant:"outline",size:"sm",children:"Go to Login"}):e.jsx(ie,{onClick:R,variant:"outline",size:"sm",children:"Dismiss"})})]})}return e.jsxs("div",{className:"space-y-6 p-4 max-w-3xl mx-auto",children:[e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsx("button",{onClick:()=>t("community"),className:"p-2 mr-3 text-gray-600 hover:text-gray-800 transition-colors",children:e.jsx(ks,{className:"w-5 h-5"})}),e.jsxs("div",{className:"flex-1 text-center",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Community Reports"}),e.jsx("p",{className:"text-gray-600 text-sm",children:"Report and track security threats"})]})]}),d&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx(ce,{className:"p-4",children:e.jsxs(Je,{className:"flex items-center",children:[e.jsx(xs,{className:"h-8 w-8 text-blue-600 mr-3"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Reports"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:d.total_reports||0})]})]})}),e.jsx(ce,{className:"p-4",children:e.jsxs(Je,{className:"flex items-center",children:[e.jsx(Ws,{className:"h-8 w-8 text-red-600 mr-3"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Verified"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:d.status_breakdown&&d.status_breakdown.VERIFIED||0})]})]})}),e.jsx(ce,{className:"p-4",children:e.jsxs(Je,{className:"flex items-center",children:[e.jsx(js,{className:"h-8 w-8 text-green-600 mr-3"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Pending"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:d.status_breakdown&&d.status_breakdown.PENDING||0})]})]})}),e.jsx(ce,{className:"p-4",children:e.jsxs(Je,{className:"flex items-center",children:[e.jsx(xs,{className:"h-8 w-8 text-purple-600 mr-3"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Top Reporter"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:d.top_contributors&&((Ge=d.top_contributors[0])==null?void 0:Ge.name)||"—"})]})]})})]}),e.jsxs(ce,{className:"p-6",children:[e.jsxs(Je,{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Trending Threats"}),e.jsx(ot,{className:"h-5 w-5 text-orange-500"})]}),e.jsx(ss,{children:e.jsx("div",{className:"space-y-3",children:n&&n.length>0?n.map((u,J)=>e.jsx("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(rt,{className:"h-4 w-4 text-yellow-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:u.threat_type}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Reports: ",u.report_count," • Trend: ",u.trend," • Urgency score: ",u.urgency_score]})]})]})},J)):e.jsx("p",{className:"text-gray-500 text-center py-4",children:"No trending threats at the moment"})})})]}),e.jsxs(ce,{className:"p-6",children:[e.jsxs(Je,{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Recent Reports"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ie,{onClick:()=>w(!0),size:"sm",children:"Report New Scam"}),e.jsx(ie,{onClick:f,variant:"outline",size:"sm",children:"Refresh"})]})]}),e.jsx(ss,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2",children:[e.jsx(tt,{placeholder:"Search reports...",onSearch:u=>Re(u)}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Rs,{value:v,onChange:u=>Z(u.target.value),options:[{value:"ALL",label:"All categories"},{value:"PHISHING",label:"Phishing"},{value:"MALWARE",label:"Malware"},{value:"SCAM",label:"Scam"},{value:"SOCIAL_ENGINEERING",label:"Social Eng."},{value:"OTHER",label:"Other"}],className:"flex-1"}),e.jsx(Rs,{value:C,onChange:u=>A(u.target.value),options:[{value:"ALL",label:"All severity"},{value:"LOW",label:"Caution"},{value:"MEDIUM",label:"Scam"},{value:"HIGH",label:"Ongoing Scam"}],className:"flex-1"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("label",{className:"flex items-center gap-2 text-xs text-gray-700",children:[e.jsx("input",{type:"checkbox",className:"rounded",checked:V,onChange:u=>p(u.target.checked)}),"Verified only"]}),(de||V||v!=="ALL"||C!=="ALL")&&e.jsx(ie,{variant:"ghost",size:"sm",onClick:()=>{Re(""),Z("ALL"),A("ALL"),p(!1)},children:"Clear"})]})]}),e.jsxs("div",{className:"text-center text-xs text-gray-500 mb-1",children:["Showing ",c.length,Array.isArray(l)?" of "+l.length:""," reports"]}),e.jsx(bt,{onRefresh:f,className:"h-[60vh] sm:h-[65vh] md:h-[70vh]",children:e.jsx("div",{className:"space-y-4",children:c&&c.length>0?c.map(u=>{var J;return e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-gray-900",children:u.threat_type}),e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:u.description}),u.media&&u.media.length>0&&e.jsx("div",{className:"mt-2 grid grid-cols-3 gap-2",children:u.media.filter(X=>!X.media_type||X.media_type==="image").slice(0,3).map((X,ee,Ve)=>{const Ke=ee===Ve.length-1&&u.media.length>3,Xe=u.media.length-3,rs=X.media_url&&(X.media_url.startsWith("http")?X.media_url:`${$e}${X.media_url}`);return e.jsxs("button",{type:"button",onClick:()=>Ie(u.media,ee),className:"relative w-full h-20 bg-gray-100 rounded overflow-hidden focus:outline-none",children:[rs&&e.jsx("img",{src:rs,alt:"report media",className:"w-full h-full object-cover",loading:"lazy"}),Ke&&Xe>0&&e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-40 flex items-center justify-center",children:e.jsxs("span",{className:"text-white text-sm font-semibold",children:["+",Xe]})})]},X.id||ee)})}),e.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500",children:[e.jsxs("span",{children:["Urgency: ",u.urgency]}),e.jsxs("span",{children:["Location: ",u.location||"N/A"]}),e.jsxs("span",{children:["Reported: ",u.created_at?new Date(u.created_at).toLocaleDateString():"N/A"]})]})]}),e.jsx("div",{className:"flex items-center space-x-2",children:u.verified&&e.jsx(js,{className:"h-4 w-4 text-green-500"})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(ie,{onClick:()=>L(u.id,"up"),variant:"ghost",size:"sm",className:u.user_vote==="up"?"text-green-600":"",children:[e.jsx(nt,{className:"h-4 w-4 mr-1"}),u.votes_up||0]}),e.jsxs(ie,{onClick:()=>L(u.id,"down"),variant:"ghost",size:"sm",className:u.user_vote==="down"?"text-red-600":"",children:[e.jsx(lt,{className:"h-4 w-4 mr-1"}),u.votes_down||0]})]}),(a==null?void 0:a.is_admin)&&!u.verified&&e.jsxs(ie,{onClick:()=>U(u.id),variant:"outline",size:"sm",children:[e.jsx(js,{className:"h-4 w-4 mr-1"}),"Verify"]})]}),e.jsx("div",{className:"text-sm text-gray-500",children:((J=u.creator)==null?void 0:J.name)||"Anonymous"})]}),u.comments&&u.comments.length>0&&e.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-200",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Comments"}),e.jsx("div",{className:"space-y-2",children:u.comments.map((X,ee)=>e.jsxs("div",{className:"text-sm text-gray-600 bg-gray-50 p-2 rounded",children:[e.jsxs("span",{className:"font-medium",children:[X.user_name||"Anonymous",":"]})," ",X.comment]},ee))}),e.jsx("div",{className:"mt-2",children:e.jsx(ie,{variant:"ghost",size:"sm",onClick:()=>we(u.id),children:"View all comments"})})]}),e.jsx("div",{className:"mt-3 pt-3 border-t border-gray-200",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(ve,{placeholder:"Add a comment...",value:he,onChange:X=>Te(X.target.value),className:"flex-1"}),e.jsx(ie,{onClick:()=>je(u.id),size:"sm",disabled:!he.trim(),children:"Comment"})]})})]},u.id)}):e.jsx("p",{className:"text-gray-500 text-center py-8",children:"No reports yet. Be the first to report a threat!"})})})]})})]}),e.jsxs(ce,{className:"p-6",children:[e.jsx(Je,{className:"flex items-center justify-between mb-4",children:e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Community Alerts"})}),e.jsx(ss,{children:e.jsx("div",{className:"space-y-3",children:x&&x.length>0?x.map(u=>e.jsxs("div",{className:"flex items-start space-x-3 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsx(Ts,{className:"h-5 w-5 text-blue-600 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-medium text-blue-900",children:u.threat_type||"Community Alert"}),e.jsx("p",{className:"text-sm text-blue-800",children:u.message}),e.jsxs("div",{className:"flex items-center space-x-4 mt-2 text-xs text-blue-600",children:[e.jsxs("span",{children:["Severity: ",u.severity]}),e.jsx("span",{children:u.created_at?new Date(u.created_at).toLocaleDateString():""})]})]})]},u.id)):e.jsx("p",{className:"text-gray-500 text-center py-4",children:"No active alerts"})})})]}),$&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl mx-4",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Report New Threat"}),e.jsxs("form",{onSubmit:E,className:"space-y-4",children:[e.jsx(Bs,{placeholder:"Detailed Description",value:H.description,onChange:u=>ne({...H,description:u.target.value}),required:!0,rows:4}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("select",{value:H.threat_type,onChange:u=>ne({...H,threat_type:u.target.value}),className:"border border-gray-300 rounded-md px-3 py-2",children:[e.jsx("option",{value:"PHISHING",children:"Phishing"}),e.jsx("option",{value:"MALWARE",children:"Malware"}),e.jsx("option",{value:"SCAM",children:"Scam"}),e.jsx("option",{value:"SOCIAL_ENGINEERING",children:"Social Engineering"}),e.jsx("option",{value:"OTHER",children:"Other"})]}),e.jsxs("select",{value:H.urgency,onChange:u=>ne({...H,urgency:u.target.value}),className:"border border-gray-300 rounded-md px-3 py-2",children:[e.jsx("option",{value:"LOW",children:"Low"}),e.jsx("option",{value:"MEDIUM",children:"Medium"}),e.jsx("option",{value:"HIGH",children:"High"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Attach Photos (optional)"}),e.jsx("input",{type:"file",accept:"image/*",multiple:!0,onChange:u=>te(Array.from(u.target.files||[])),className:"block w-full text-sm text-gray-700"}),Se.length>0&&e.jsxs("div",{className:"mt-2 text-xs text-gray-600",children:[Se.length," file(s) selected"]})]}),e.jsx(ve,{placeholder:"Location/URL",value:H.location,onChange:u=>ne({...H,location:u.target.value})}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx(ie,{type:"submit",className:"flex-1",children:"Submit Report"}),e.jsx(ie,{type:"button",variant:"outline",onClick:()=>w(!1),className:"flex-1",children:"Cancel"})]})]})]})}),D&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-lg mx-4",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Create Community Alert"}),e.jsxs("form",{onSubmit:j,className:"space-y-4",children:[e.jsx(ve,{placeholder:"Alert Title",value:le.title,onChange:u=>De({...le,title:u.target.value}),required:!0}),e.jsx(Bs,{placeholder:"Alert Message",value:le.message,onChange:u=>De({...le,message:u.target.value}),required:!0,rows:4}),e.jsxs("select",{value:le.priority,onChange:u=>De({...le,priority:u.target.value}),className:"border border-gray-300 rounded-md px-3 py-2 w-full",children:[e.jsx("option",{value:"low",children:"Low Priority"}),e.jsx("option",{value:"medium",children:"Medium Priority"}),e.jsx("option",{value:"high",children:"High Priority"}),e.jsx("option",{value:"urgent",children:"Urgent"})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx(ie,{type:"submit",className:"flex-1",children:"Create Alert"}),e.jsx(ie,{type:"button",variant:"outline",onClick:()=>z(!1),className:"flex-1",children:"Cancel"})]})]})]})}),e.jsx(vs,{isOpen:ge,onClose:()=>xe(!1),title:"All Comments",children:He?e.jsxs("div",{className:"space-y-3",children:[He.comments&&He.comments.length>0?He.comments.map(u=>e.jsxs("div",{className:"p-2 bg-gray-50 rounded border border-gray-200 flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"text-sm text-gray-800",children:[e.jsxs("span",{className:"font-medium",children:[u.user_name||"Anonymous",":"]})," ",u.comment]}),e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:u.created_at?new Date(u.created_at).toLocaleString():""})]}),((a==null?void 0:a.id)===u.user_id||(a==null?void 0:a.is_admin))&&e.jsx(ie,{variant:"ghost",size:"sm",onClick:()=>be(u.id),title:"Delete comment",children:e.jsx(Cs,{className:"w-4 h-4 text-red-600"})})]},u.id)):e.jsx("div",{className:"text-sm text-gray-500",children:"No comments yet."}),Ye&&e.jsx("div",{className:"pt-2",children:e.jsx(ie,{onClick:Ae,variant:"outline",size:"sm",children:"Load more"})})]}):e.jsx("div",{className:"text-sm text-gray-500",children:"Loading..."})}),e.jsx(vs,{isOpen:G,onClose:()=>N(!1),title:"Preview",fullScreen:!0,children:b.length>0&&e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:"w-full h-[60vh] bg-black flex items-center justify-center mb-3",children:e.jsx("img",{src:b[P].src,alt:"preview",className:"max-h-full max-w-full object-contain"})}),e.jsxs("div",{className:"flex items-center justify-between w-full",children:[e.jsx(ie,{onClick:()=>Q(u=>Math.max(0,u-1)),disabled:P===0,variant:"outline",size:"sm",children:"Prev"}),e.jsxs("div",{className:"text-sm text-gray-600",children:[P+1," / ",b.length]}),e.jsx(ie,{onClick:()=>Q(u=>Math.min(b.length-1,u+1)),disabled:P>=b.length-1,variant:"outline",size:"sm",children:"Next"})]})]})})]})}const fs=ys.forwardRef(({className:t="",...s},a)=>{const n=`flex min-h-[80px] w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm placeholder:text-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:cursor-not-allowed disabled:opacity-50 ${t}`;return e.jsx("textarea",{className:n,ref:a,...s})});fs.displayName="Textarea";const qe={USERS:"/api/admin/users",USER:t=>`/api/admin/users/${t}`,UPDATE_STATUS:t=>`/api/admin/users/${t}/status`,UPDATE_ROLE:t=>`/api/admin/users/${t}/role`,DELETE_USER:t=>`/api/admin/users/${t}`,HARD_DELETE_USER:t=>`/api/admin/users/${t}/hard-delete`,DELETED_USERS:"/api/admin/users/deleted"},ma=async(t={})=>{try{const s=new URLSearchParams;t.page&&s.append("page",t.page),t.per_page&&s.append("per_page",t.per_page),t.status&&s.append("status",t.status),t.role&&s.append("role",t.role);const a=`${qe.USERS}?${s.toString()}`,l=await Le(a);if(l.ok){const n=await l.json();return{users:n.users||[],pagination:n.pagination||{},success:!0}}else throw new Error("Request failed. Please try again.")}catch(s){return console.error("Error fetching users:",s),{users:[],pagination:{},success:!1,error:s.message}}},ua=async()=>{try{const t=await Le(qe.DELETED_USERS);if(t.ok)return{users:(await t.json()).users||[],success:!0};throw new Error("Request failed. Please try again.")}catch(t){return console.error("Error fetching deleted users:",t),{users:[],success:!1,error:t.message}}},Us=async(t,s)=>{try{console.log("🔄 userManager.updateUserStatus called with:",{userId:t,newStatus:s}),console.log("🔄 API endpoint:",qe.UPDATE_STATUS(t));const a=await as(qe.UPDATE_STATUS(t),{status:s});if(console.log("🔄 API response received:",a),console.log("🔄 Response status:",a.status),console.log("🔄 Response ok:",a.ok),a.ok){const l=await a.json();return console.log("🔄 Response data:",l),{success:!0,message:l.message||"User status updated successfully",user:l.user}}else{console.log("❌ Response not ok, status:",a.status);const l=await a.json();throw console.log("❌ Error response body:",l),new Error(l.error||l.message||"Request failed. Please try again.")}}catch(a){return console.error("❌ Error in updateUserStatus:",a),{success:!1,error:a.message}}},Os=async(t,s)=>{try{console.log("🔄 userManager.updateUserRole called with:",{userId:t,newRole:s}),console.log("🔄 API endpoint:",qe.UPDATE_ROLE(t));const a=await as(qe.UPDATE_ROLE(t),{role:s});if(console.log("🔄 API response received:",a),console.log("🔄 Response status:",a.status),console.log("🔄 Response ok:",a.ok),a.ok){const l=await a.json();return console.log("🔄 Response data:",l),{success:!0,message:l.message||"User role updated successfully",user:l.user}}else{console.log("❌ Response not ok, status:",a.status);const l=await a.json();throw console.log("❌ Error response body:",l),new Error(l.error||l.message||"Request failed. Please try again.")}}catch(a){return console.error("❌ Error in updateUserRole:",a),{success:!1,error:a.message}}},Ks=async(t,s)=>{try{const a=await as(qe.USER(t),s);if(a.ok){const l=await a.json();return{success:!0,message:l.message||"User information updated successfully",user:l.user}}else{const l=await a.json();throw new Error(l.error||l.message||"Request failed. Please try again.")}}catch(a){return console.error("Error updating user information:",a),{success:!1,error:a.message}}},xa=async(t,s)=>{try{const a=await as(`${qe.USER(t)}/password`,{password:s});if(a.ok)return{success:!0,message:(await a.json()).message||"User password updated successfully"};{const l=await a.json();throw new Error(l.error||l.message||"Request failed. Please try again.")}}catch(a){return console.error("Error updating user password:",a),{success:!1,error:a.message}}},Qs=async t=>{try{const s=await cs(qe.DELETE_USER(t));if(s.ok)return{success:!0,message:(await s.json()).message||"User deleted successfully"};{const a=await s.json();throw new Error(a.error||a.message||"Request failed. Please try again.")}}catch(s){return console.error("Error deleting user:",s),{success:!1,error:s.message}}},ha=async t=>{try{const s=await cs(qe.HARD_DELETE_USER(t));if(s.ok)return{success:!0,message:(await s.json()).message||"User permanently deleted"};{const a=await s.json();throw new Error(a.error||a.message||"Request failed. Please try again.")}}catch(s){return console.error("Error hard-deleting user:",s),{success:!1,error:s.message}}},ga=async t=>{try{const s=await _e(qe.USERS,t);if(s.ok){const a=await s.json();return{success:!0,message:a.message||"User created successfully",user:a.user}}else{const a=await s.json();throw new Error(a.error||a.message||"Request failed. Please try again.")}}catch(s){return console.error("Error creating user:",s),{success:!1,error:s.message}}},pa=async()=>{try{const t=await Le(qe.USERS);if(t.ok){const a=(await t.json()).users||[];return{stats:{total:a.length,active:a.filter(n=>n.status==="ACTIVE").length,suspended:a.filter(n=>n.status==="SUSPENDED").length,banned:a.filter(n=>n.status==="BANNED").length,admins:a.filter(n=>n.is_admin||n.role==="ADMIN").length,moderators:a.filter(n=>n.role==="MODERATOR").length,regular:a.filter(n=>n.role==="USER").length},success:!0}}else throw new Error("Request failed. Please try again.")}catch(t){return console.error("Error fetching user stats:",t),{stats:{total:0,active:0,suspended:0,banned:0,admins:0,moderators:0,regular:0},success:!1,error:t.message}}},Zs=async t=>{try{console.log("🔄 userManager.restoreUser called with:",{userId:t}),console.log("🔄 API endpoint:",qe.USER(t)+"/restore");const s=await as(`${qe.USER(t)}/restore`,{});if(console.log("🔄 API response received:",s),console.log("🔄 Response status:",s.status),console.log("🔄 Response ok:",s.ok),s.ok){const a=await s.json();return console.log("🔄 Response data:",a),{success:!0,message:a.message||"User restored successfully",user:a.user}}else{console.log("❌ Response not ok, status:",s.status);const a=await s.json();throw console.log("❌ Error response body:",a),new Error(a.error||a.message||"Request failed. Please try again.")}}catch(s){return console.error("❌ Error in restoreUser:",s),{success:!1,error:s.message}}},Xs=({initialFilters:t})=>{const[s,a]=o.useState([]),[l,n]=o.useState({}),[d,x]=o.useState(!0),[y,M]=o.useState(null),[f,k]=o.useState(null),[I,F]=o.useState([]),[O,B]=o.useState([]),[g,ae]=o.useState(!1),[h,S]=o.useState(null),[R,$]=o.useState(!1),[w,D]=o.useState(""),[z,H]=o.useState({page:1,per_page:20,status:"",urgency:"",threat_type:"",verified:""});o.useEffect(()=>{t&&Object.keys(t).length>0&&H(v=>({...v,...t,page:1}))},[]),o.useEffect(()=>{ne()},[z]);const ne=async()=>{try{x(!0);const v=new URLSearchParams;Object.entries(z).forEach(([A,V])=>{V&&v.append(A,V)});const C=await(await Qe.get(`/api/admin/reports?${v}`)).json();a(C.reports||[]),n(C.pagination||{}),M(null)}catch(v){M("Failed to load community reports"),console.error("Reports error:",v)}finally{x(!1)}},le=async(v,Z)=>{var C,A;try{let V;if(Z==="verify")V=await Qe.request({method:"POST",url:`/api/community/reports/${v}/verify`});else{const p={reject:"REJECTED",escalate:"FLAGGED",approve:"APPROVED"},G=p[Z]||p.approve;V=await Qe.request({method:"PUT",url:`/api/admin/reports/${v}/moderate`,data:{action:G}})}if(!V.ok){const p=await V.json().catch(()=>({}));throw new Error(p.error||`Failed to ${Z} report`)}ne(),B([])}catch(V){console.error("Report action error:",V),alert(`Failed to ${Z} report: ${((A=(C=V.response)==null?void 0:C.data)==null?void 0:A.error)||V.message}`)}},De=async()=>{var v,Z;if(!(!w||O.length===0)){F([]);try{if(w==="delete"&&!window.confirm(`Delete ${O.length} report(s)? This cannot be undone.`))return;let C;if(w==="delete"){C=[];for(const p of O)try{let G=!0;try{G=(await Qe.request({method:"GET",url:`/api/community/reports/${p}`})).ok}catch{G=!1}if(!G){C.push({status:"fulfilled",value:{id:p}});continue}let N=await Qe.request({method:"DELETE",url:`/api/admin/reports/${p}`});if(N.ok||(await N.json().catch(()=>({})),N=await Qe.request({method:"DELETE",url:`/api/community/reports/${p}`})),!N.ok){const b=await N.json().catch(()=>({}));if(N.status===404)C.push({status:"fulfilled",value:{id:p}});else throw new Error(b.error||b.details||`Failed to delete report ${p}`)}C.push({status:"fulfilled",value:{id:p}})}catch(G){C.push({status:"rejected",reason:G})}}else C=await Promise.allSettled(O.map(async p=>{if(w==="verify"){const T=await Qe.request({method:"POST",url:`/api/community/reports/${p}/verify`});if(!T.ok){const P=await T.json().catch(()=>({}));throw new Error(P.error||`Failed to verify report ${p}`)}return{id:p}}const G={reject:"REJECTED",approve:"APPROVED"},N=G[w]||G.approve,b=await Qe.request({method:"PUT",url:`/api/admin/reports/${p}/moderate`,data:{action:N}});if(!b.ok){const T=await b.json().catch(()=>({}));throw new Error(T.error||`Failed to ${w} report ${p}`)}return{id:p}}));const A=C.map((p,G)=>({r:p,id:O[G]})).filter(p=>p.r.status==="rejected").map(p=>{var G;return{id:p.id,error:((G=p.r.reason)==null?void 0:G.message)||"Unknown error"}}),V=C.filter(p=>p.status==="fulfilled").length;ne(),B([]),$(!1),D(""),A.length>0?(F(A),k({type:"error",message:`Bulk ${w}: ${V} succeeded, ${A.length} failed`})):k({type:"success",message:`Bulk ${w}: ${V} succeeded`}),setTimeout(()=>k(null),3500)}catch(C){console.error("Bulk action error:",C),k({type:"error",message:((Z=(v=C.response)==null?void 0:v.data)==null?void 0:Z.error)||C.message||"Bulk action failed"}),setTimeout(()=>k(null),4500)}}},he=v=>{B(Z=>Z.includes(v)?Z.filter(C=>C!==v):[...Z,v])},Te=()=>{O.length===s.length?B([]):B(s.map(v=>v.id))},Se=v=>{H(Z=>({...Z,...v,page:1}))},te=({report:v})=>e.jsx("div",{className:"bg-white border rounded-lg p-4 mb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("input",{type:"checkbox",checked:O.includes(v.id),onChange:()=>he(v.id),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${v.urgency==="HIGH"?"bg-red-100 text-red-800":v.urgency==="MEDIUM"?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"}`,children:v.urgency==="HIGH"?"Ongoing Scam":v.urgency==="MEDIUM"?"Scam":"Caution"}),v.status!=="VERIFIED"&&e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${v.status==="PENDING"?"bg-yellow-100 text-yellow-800":v.status==="REJECTED"?"bg-red-100 text-red-800":v.status==="ESCALATED"?"bg-orange-100 text-orange-800":"bg-gray-100 text-gray-800"}`,children:v.status}),(v.verified||v.status==="VERIFIED")&&e.jsx("span",{className:"px-2 py-1 text-xs rounded-full bg-blue-100 text-blue-800",children:"✓ Verified"})]}),e.jsx("h4",{className:"font-medium text-gray-900",children:v.threat_type}),e.jsx("p",{className:"text-sm text-gray-600 mt-1 line-clamp-2",children:v.description}),e.jsxs("div",{className:"flex items-center space-x-4 mt-2 text-xs text-gray-500",children:[e.jsxs("span",{children:["Location: ",v.location||"N/A"]}),e.jsxs("span",{children:["Votes: +",v.votes_up," / -",v.votes_down]}),e.jsxs("span",{children:["Created: ",new Date(v.created_at).toLocaleDateString()]})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>{S(v),ae(!0)},className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:"View"}),e.jsx("div",{className:"relative",children:e.jsxs("select",{onChange:Z=>le(v.id,Z.target.value),className:"text-sm border rounded px-2 py-1",defaultValue:"",children:[e.jsx("option",{value:"",disabled:!0,children:"Actions"}),v.status==="PENDING"&&e.jsxs(e.Fragment,{children:[e.jsx("option",{value:"approve",children:"Approve"}),e.jsx("option",{value:"verify",children:"Verify"}),e.jsx("option",{value:"reject",children:"Reject"}),e.jsx("option",{value:"escalate",children:"Flag"})]}),v.status==="APPROVED"&&e.jsx(e.Fragment,{children:e.jsx("option",{value:"verify",children:"Verify"})})]})})]})]})}),de=()=>{const v=h&&h.reporter&&typeof h.reporter=="object"?h.reporter:null,Z=h?h.creator&&(h.creator.username||h.creator.name)||h.creator_name||h.user_name||v&&(v.username||v.email||v.name)||h.user&&(h.user.username||h.user.name)||h.user_email||h.email||(typeof h.reporter=="string"?h.reporter:"")||"Anonymous":"",C=h&&(h.creator&&h.creator.tier||h.creator_tier||h.user&&h.user.tier||v&&v.tier||h.tier)||"";return e.jsx(vs,{isOpen:g,onClose:()=>ae(!1),title:"Report Details",hideOnDesktop:!1,fullScreen:!0,children:h&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Threat Type"}),e.jsx("p",{className:"text-gray-900",children:h.threat_type})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Reporter"}),e.jsxs("div",{className:"flex items-center gap-2 text-gray-900",children:[e.jsx("span",{children:Z}),C&&(()=>{const A=String(C).toLowerCase();let V="bg-gray-100 text-gray-700",p="text-gray-600",G=null;return A.includes("helper")?(V="bg-blue-100 text-blue-700",p="text-blue-600",G=e.jsx(ps,{className:`w-3.5 h-3.5 ${p}`})):A.includes("ally")?(V="bg-purple-100 text-purple-700",p="text-purple-600",G=e.jsx(Pe,{className:`w-3.5 h-3.5 ${p}`})):A.includes("champion")?(V="bg-yellow-100 text-yellow-700",p="text-yellow-600",G=e.jsx(us,{className:`w-3.5 h-3.5 ${p}`})):A.includes("guardian")&&(V="bg-emerald-100 text-emerald-700",p="text-emerald-600",G=e.jsxs("span",{className:"relative inline-block w-4 h-4",children:[e.jsx(Pe,{className:`w-4 h-4 absolute inset-0 ${p}`}),e.jsx(gs,{className:"w-2.5 h-2.5 absolute bottom-0 right-0 text-emerald-700"})]})),e.jsxs("span",{className:`inline-flex items-center gap-1 px-1.5 py-0.5 rounded-full text-xs ${V}`,children:[G,e.jsx("span",{className:"leading-none",children:C})]})})()]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Urgency"}),e.jsx("p",{className:"text-gray-900",children:h.urgency})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Status"}),e.jsx("p",{className:"text-gray-900",children:h.status})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Verified"}),e.jsx("p",{className:"text-gray-900",children:h.verified?"Yes":"No"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Location"}),e.jsx("p",{className:"text-gray-900",children:h.location||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Created"}),e.jsx("p",{className:"text-gray-900",children:new Date(h.created_at).toLocaleString()})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Description"}),e.jsx("p",{className:"text-gray-900",children:h.description})]}),h.media&&h.media.length>0&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Attachments"}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:h.media.map((A,V)=>{var G;const p=(G=A.media_url)!=null&&G.startsWith("http")?A.media_url:`${$e}${A.media_url}`;return e.jsx("a",{href:p,target:"_blank",rel:"noreferrer",className:"block w-full h-24 bg-gray-100 rounded overflow-hidden",children:e.jsx("img",{src:p,alt:"attachment",className:"w-full h-full object-cover",onError:N=>{N.currentTarget.style.display="none"}})},A.id||V)})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Up Votes"}),e.jsx("p",{className:"text-gray-900",children:h.votes_up})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Down Votes"}),e.jsx("p",{className:"text-gray-900",children:h.votes_down})]})]}),e.jsxs("div",{className:"pt-4 border-t",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Quick Actions"}),e.jsxs("div",{className:"flex space-x-2",children:[h.status==="PENDING"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>{le(h.id,"approve"),ae(!1)},className:"bg-green-600 text-white px-3 py-2 rounded text-sm hover:bg-green-700",children:"Approve"}),e.jsx("button",{onClick:()=>{le(h.id,"verify"),ae(!1)},className:"bg-blue-600 text-white px-3 py-2 rounded text-sm hover:bg-blue-700",children:"Verify"}),e.jsx("button",{onClick:()=>{le(h.id,"reject"),ae(!1)},className:"bg-red-600 text-white px-3 py-2 rounded text-sm hover:bg-red-700",children:"Reject"})]}),h.status==="APPROVED"&&e.jsx("button",{onClick:()=>{le(h.id,"verify"),ae(!1)},className:"bg-blue-600 text-white px-3 py-2 rounded text-sm hover:bg-blue-700",children:"Verify"}),e.jsx("button",{onClick:async()=>{if(confirm("Delete this report?"))try{let A=await Qe.request({method:"DELETE",url:`/api/admin/reports/${h.id}`});if(A.ok||(await A.json().catch(()=>({})),A=await Qe.request({method:"DELETE",url:`/api/community/reports/${h.id}`})),!A.ok&&A.status!==404&&(await Qe.request({method:"PUT",url:`/api/admin/reports/${h.id}/moderate`,data:{action:"REJECTED"}}).catch(()=>({})),A=await Qe.request({method:"DELETE",url:`/api/admin/reports/${h.id}`})),!A.ok&&A.status!==404)throw new Error("Delete failed");ae(!1),ne()}catch(A){alert("Failed to delete report: "+(A.message||"Unknown error"))}},className:"bg-gray-600 text-white px-3 py-2 rounded text-sm hover:bg-gray-700",children:"Delete"})]})]})]})})},Re=()=>e.jsx(vs,{isOpen:R,onClose:()=>$(!1),title:"Bulk Actions",hideOnDesktop:!1,fullScreen:!0,children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Action for ",O.length," selected reports"]}),e.jsxs("select",{value:w,onChange:v=>D(v.target.value),className:"w-full border rounded-lg px-3 py-2",children:[e.jsx("option",{value:"",children:"Select action..."}),e.jsx("option",{value:"approve",children:"Approve"}),e.jsx("option",{value:"verify",children:"Verify"}),e.jsx("option",{value:"reject",children:"Reject"}),e.jsx("option",{value:"delete",children:"Delete"})]})]}),e.jsx("div",{className:"pt-4 border-t",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:De,disabled:!w,className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 disabled:bg-gray-400",children:"Apply Action"}),e.jsx("button",{onClick:()=>$(!1),className:"bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700",children:"Cancel"})]})})]})});return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Community Reports"}),e.jsx("p",{className:"text-gray-600",children:"Manage and moderate community threat reports"})]}),e.jsxs("div",{className:"mt-4 sm:mt-0 flex space-x-2",children:[O.length>0&&e.jsxs("button",{onClick:v=>{v.preventDefault(),v.stopPropagation(),$(!0)},className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700",children:["Bulk Actions (",O.length,")"]}),e.jsx("button",{onClick:ne,className:"bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700",children:"Refresh"})]})]})}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Filters"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),e.jsxs("select",{value:z.status,onChange:v=>Se({status:v.target.value}),className:"w-full border rounded-lg px-3 py-2",children:[e.jsx("option",{value:"",children:"All Statuses"}),e.jsx("option",{value:"PENDING",children:"Pending"}),e.jsx("option",{value:"VERIFIED",children:"Verified"}),e.jsx("option",{value:"REJECTED",children:"Rejected"}),e.jsx("option",{value:"ESCALATED",children:"Escalated"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Severity"}),e.jsxs("select",{value:z.urgency,onChange:v=>Se({urgency:v.target.value}),className:"w-full border rounded-lg px-3 py-2",children:[e.jsx("option",{value:"",children:"All Severity"}),e.jsx("option",{value:"HIGH",children:"Ongoing Scam"}),e.jsx("option",{value:"MEDIUM",children:"Scam"}),e.jsx("option",{value:"LOW",children:"Caution"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category"}),e.jsxs("select",{value:z.threat_type,onChange:v=>Se({threat_type:v.target.value}),className:"w-full border rounded-lg px-3 py-2",children:[e.jsx("option",{value:"",children:"All Categories"}),e.jsx("option",{value:"PHISHING",children:"Phishing"}),e.jsx("option",{value:"MALWARE",children:"Malware"}),e.jsx("option",{value:"SCAM",children:"Scam"}),e.jsx("option",{value:"SOCIAL_ENGINEERING",children:"Social Engineering"}),e.jsx("option",{value:"OTHER",children:"Other"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Verified"}),e.jsxs("select",{value:z.verified,onChange:v=>Se({verified:v.target.value}),className:"w-full border rounded-lg px-3 py-2",children:[e.jsx("option",{value:"",children:"All"}),e.jsx("option",{value:"true",children:"Verified Only"}),e.jsx("option",{value:"false",children:"Unverified Only"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Per Page"}),e.jsxs("select",{value:z.per_page,onChange:v=>Se({per_page:parseInt(v.target.value)}),className:"w-full border rounded-lg px-3 py-2",children:[e.jsx("option",{value:10,children:"10"}),e.jsx("option",{value:20,children:"20"}),e.jsx("option",{value:50,children:"50"})]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow",children:[e.jsx("div",{className:"p-6 border-b",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Reports (",l.total||0,")"]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",checked:O.length===s.length&&s.length>0,onChange:Te,className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-600",children:"Select All"})]})]})}),e.jsx("div",{className:"p-6",children:d?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):y?e.jsxs("div",{className:"text-center py-12",children:[e.jsxs("div",{className:"text-red-500 mb-4",children:["⚠️ ",y]}),e.jsx("button",{onClick:ne,className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700",children:"Retry"})]}):s.length===0?e.jsx("div",{className:"text-center py-12 text-gray-500",children:"No reports found matching your criteria"}):e.jsx("div",{children:s.map(v=>e.jsx(te,{report:v},v.id))})})]}),l.pages>1&&e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-gray-700",children:["Showing ",(l.page-1)*l.per_page+1," to"," ",Math.min(l.page*l.per_page,l.total)," of"," ",l.total," results"]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>Se({page:l.page-1}),disabled:l.page<=1,className:"px-3 py-2 border rounded-lg disabled:bg-gray-100 disabled:text-gray-400",children:"Previous"}),e.jsxs("span",{className:"px-3 py-2 text-gray-700",children:["Page ",l.page," of ",l.pages]}),e.jsx("button",{onClick:()=>Se({page:l.page+1}),disabled:l.page>=l.pages,className:"px-3 py-2 border rounded-lg disabled:bg-gray-100 disabled:text-gray-400",children:"Next"})]})]})}),e.jsx(de,{}),e.jsx(Re,{}),f&&e.jsx("div",{className:`fixed bottom-6 left-1/2 -translate-x-1/2 px-4 py-3 rounded-lg shadow-md text-sm z-50 ${f.type==="success"?"bg-green-600 text-white":f.type==="error"?"bg-red-600 text-white":"bg-gray-800 text-white"}`,children:f.message}),I.length>0&&e.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-800 p-4 rounded",children:[e.jsx("div",{className:"font-medium mb-2",children:"Some items failed:"}),e.jsx("ul",{className:"list-disc pl-5 space-y-1 text-sm",children:I.map(v=>e.jsxs("li",{children:["#",v.id,": ",v.error]},v.id))})]})]})};function fa({setActiveTab:t}){var zs,Hs;const{user:s,isAuthenticated:a,isLoading:l}=ds(),[n,d]=o.useState("overview"),[x,y]=o.useState(!1),[M,f]=o.useState(!1),[k,I]=o.useState(null),[F,O]=o.useState(null),[B,g]=o.useState(!1),[ae,h]=o.useState(!1),[S,R]=o.useState({title:"",description:"",difficulty:"BEGINNER",estimated_time:10}),[$,w]=o.useState({first_name:"",last_name:"",email:"",role:"USER",password:""}),[D,z]=o.useState([]),[H,ne]=o.useState([]),[le,De]=o.useState([]),[he,Te]=o.useState({total:0,active:0,suspended:0,banned:0,admins:0,moderators:0,regular:0}),[Se,te]=o.useState(null),[de,Re]=o.useState("checking"),[v,Z]=o.useState([]),C=r=>v.includes(r),A=r=>Z(m=>m.includes(r)?m.filter(_=>_!==r):[...m,r]),V=()=>{const r=le.map(_=>_.id),m=r.every(_=>v.includes(_));Z(m?v.filter(_=>!r.includes(_)):Array.from(new Set([...v,...r])))},p=()=>Z([]),[G,N]=o.useState([]),[b,T]=o.useState(""),[P,Q]=o.useState(""),ge=r=>G.includes(r),xe=r=>{N(m=>m.includes(r)?m.filter(_=>_!==r):[...m,r])},He=()=>{const r=H.map(_=>_.id),m=r.every(_=>G.includes(_));N(m?G.filter(_=>!r.includes(_)):Array.from(new Set([...G,...r])))},Ce=()=>{N([]),T(""),Q("")},Ze=async()=>{if(G.length===0){alert("Select at least one user");return}if(!b){alert("Choose a bulk action");return}if((b==="status"||b==="role")&&!P){alert("Choose a value for the selected action");return}if(b==="delete"&&!confirm(`Delete ${G.length} user(s)?`))return;g(!0);const r={success:0,failed:0,errors:[]};for(const _ of G)try{if(b==="status"){const re=await Us(_,P);if(!re.success)throw new Error(re.error||"Failed")}else if(b==="role"){const re=await Os(_,P);if(!re.success)throw new Error(re.error||"Failed")}else if(b==="delete"){const re=await Qs(_);if(!re.success)throw new Error(re.error||"Failed")}r.success+=1}catch(re){r.failed+=1,r.errors.push(`#${_}: ${re.message||"Error"}`)}await J(),await X(),g(!1),Ce();const m=`Bulk ${b}: ${r.success} succeeded, ${r.failed} failed${r.errors.length?`
${r.errors.join(`
`)}`:""}`;alert(m)},[ye,Ye]=o.useState(null),[ue,c]=o.useState(null),[E,j]=o.useState({title:"",type:"info",content:"",contentType:"info",contentStyle:"default",duration:5,media:[]}),[L,U]=o.useState(null),[je,we]=o.useState(!1),[Ae,be]=o.useState(""),[Ie,Ge]=o.useState(0);ys.useEffect(()=>{if(Ae){const r=setTimeout(()=>{be("")},3e3);return()=>clearTimeout(r)}},[Ae]),ys.useEffect(()=>{var r,m,_;console.log("🔄 selectedModuleForLessons state changed:",ue),ue&&(console.log("🔄 New selectedModuleForLessons lessons:",(r=ue.content)==null?void 0:r.lessons),console.log("🔄 New selectedModuleForLessons lesson count:",((_=(m=ue.content)==null?void 0:m.lessons)==null?void 0:_.length)||0))},[ue]);const u=async()=>{try{te(null);const r=await Ue();z(r)}catch(r){console.error("Failed to load modules:",r),te(`Failed to load modules: ${r.message}`),(r.message.includes("Failed to fetch")||r.message.includes("NetworkError"))&&Re("disconnected")}},J=async()=>{try{h(!0),te(null),console.log("🔄 loadUsers called");const r=await ma();console.log("🔄 getAllUsers result:",r),r.success?(console.log("✅ Setting users state with:",r.users),ne(r.users)):(console.error("❌ Failed to load users:",r.error),te(`Failed to load users: ${r.error}`))}catch(r){console.error("❌ Error in loadUsers:",r),te(`Failed to load users: ${r.message}`),(r.message.includes("Failed to fetch")||r.message.includes("NetworkError"))&&Re("disconnected")}finally{h(!1)}},X=async()=>{try{console.log("🔄 loadDeletedUsers called");const r=await ua();console.log("🔄 getDeletedUsers result:",r),r.success?(console.log("✅ Setting deletedUsers state with:",r.users),De(r.users)):console.error("❌ Failed to load deleted users:",r.error)}catch(r){console.error("❌ Error in loadDeletedUsers:",r)}},ee=async()=>{try{te(null);const r=await pa();r.success?Te(r.stats):(console.error("Failed to load user stats:",r.error),te(`Failed to load user stats: ${r.error}`))}catch(r){console.error("Failed to load user stats:",r),te(`Failed to load user stats: ${r.message}`),(r.message.includes("Failed to fetch")||r.message.includes("NetworkError"))&&Re("disconnected")}},Ve=async()=>{if(!S.title.trim()||!S.description.trim()){alert("Please fill in all required fields");return}try{g(!0);const r={...S,content:{lessons:[]}};await ut(r),R({title:"",description:"",difficulty:"BEGINNER",estimated_time:10}),y(!1),await u(),alert("Module created successfully!")}catch(r){console.error("Failed to create module:",r),alert(`Failed to create module: ${r.message}`)}finally{g(!1)}},Ke=async r=>{if(confirm("Are you sure you want to delete this module? This will also delete all lessons within it. This action cannot be undone."))try{g(!0),await ht(r),alert("Module deleted successfully!"),await u()}catch(m){console.error("Failed to delete module:",m),alert(`Failed to delete module: ${m.message}`)}finally{g(!1)}},Xe=async(r,m)=>{try{g(!0),console.log("🔄 Updating user status:",{userId:r,newStatus:m});const _=await Us(r,m);console.log("🔄 updateUserStatus result:",_),_.success?(console.log("✅ User status updated successfully"),alert("User status updated successfully!"),await J(),await ee()):(console.log("❌ User status update failed:",_.error),alert(`Failed to update user status: ${_.error}`))}catch(_){console.error("❌ Error updating user status:",_),alert(`Failed to update user status: ${_.message}`)}finally{g(!1)}},rs=async(r,m)=>{try{g(!0),console.log("🔄 Updating user role:",{userId:r,newRole:m});const _=await Os(r,m);console.log("🔄 updateUserRole result:",_),_.success?(console.log("✅ User role updated successfully"),alert("User role updated successfully!"),await J(),await ee()):(console.log("❌ User role update failed:",_.error),alert(`Failed to update user role: ${_.error}`))}catch(_){console.error("❌ Error updating user role:",_),alert(`Failed to update user role: ${_.message}`)}finally{g(!1)}},hs=async r=>{if(confirm("Are you sure you want to delete this user? This action cannot be undone."))try{g(!0);const m=await Qs(r);m.success?(alert("User deleted successfully!"),await J(),await X(),await ee()):alert(`Failed to delete user: ${m.error}`)}catch(m){console.error("Failed to delete user:",m),alert(`Failed to delete user: ${m.message}`)}finally{g(!1)}},i=async r=>{if(confirm("Are you sure you want to restore this user? They will be able to access the system again."))try{g(!0);const m=await Zs(r);m.success?(alert("User restored successfully!"),await J(),await X(),await ee()):alert(`Failed to restore user: ${m.error}`)}catch(m){console.error("Failed to restore user:",m),alert(`Failed to restore user: ${m.message}`)}finally{g(!1)}},K=async()=>{if(v.length===0){alert("Select at least one user to restore");return}try{g(!0);const r={success:0,failed:0,errors:[]};for(const m of v)try{const _=await Zs(m);if(!_.success)throw new Error(_.error||"Failed");r.success++}catch(_){r.failed++,r.errors.push(`#${m}: ${_.message||"Error"}`)}await J(),await X(),alert(`Bulk restore: ${r.success} succeeded, ${r.failed} failed${r.errors.length?`
${r.errors.join(`
`)}`:""}`)}finally{g(!1),Z([])}},q=async()=>{if(!$.first_name.trim()||!$.last_name.trim()||!$.email.trim()||!$.password.trim()){alert("Please fill in all required fields");return}try{g(!0),te(null);const r=await ga($);r.success?(alert("User created successfully!"),w({first_name:"",last_name:"",email:"",role:"USER",password:""}),f(!1),await J(),await ee()):te(r.error||"Failed to create user")}catch(r){console.error("Failed to create user:",r),te(r.message||"Failed to create user")}finally{g(!1)}},se=async r=>{var m,_,re,Ne,Me;try{g(!0),te(null);const fe=F,Be=[];if(fe.first_name!==((m=H.find(Fe=>Fe.id===r))==null?void 0:m.first_name)||fe.last_name!==((_=H.find(Fe=>Fe.id===r))==null?void 0:_.last_name)||fe.email!==((re=H.find(Fe=>Fe.id===r))==null?void 0:re.email)){const Fe={first_name:fe.first_name,last_name:fe.last_name,email:fe.email};Be.push(Ks(r,Fe))}if(fe.role&&fe.role!==((Ne=H.find(Fe=>Fe.id===r))==null?void 0:Ne.role)&&Be.push(Os(r,fe.role)),fe.status&&fe.status!==((Me=H.find(Fe=>Fe.id===r))==null?void 0:Me.status)&&Be.push(Us(r,fe.status)),fe.newPassword&&Be.push(xa(r,fe.newPassword)),Be.length>0){const Fe=await Promise.all(Be);if(Fe.some(We=>!We.success)){const We=Fe.filter(os=>!os.success).map(os=>os.error).join(", ");te(`Failed to update user: ${We}`);return}}alert("User updated successfully!"),O(null),await J(),await ee()}catch(fe){console.error("Failed to update user:",fe),te(fe.message||"Failed to update user")}finally{g(!1)}},W=async r=>{try{console.log("🔄 handleUpdateModule called with moduleId:",r),console.log("🔄 editingModule state:",k),g(!0),te(null);const m=k;console.log("🔄 moduleToUpdate:",m);const _={title:m.title,description:m.description,difficulty:m.difficulty,estimated_time:m.estimated_time};console.log("🔄 moduleData to send:",_),console.log("🔄 Calling updateModule from contentManager..."),await xt(r,_),alert("Module updated successfully!"),I(null),await u()}catch(m){console.error("❌ Failed to update module:",m),te(m.message||"Failed to update module")}finally{g(!1)}},Y=async r=>{var m,_,re,Ne,Me,fe,Be,ms,Fe,Ps;try{we(!0),be(""),console.log("🔄 Adding lesson with data:",{moduleId:r,newLessonData:E});const We=await gt(r,E);if(console.log("🔄 addLesson response:",We),We&&We.message){console.log("✅ Lesson added successfully, response:",We),j({title:"",type:"info",content:"",contentType:"info",contentStyle:"default",duration:5,media:[]}),await u(),console.log("🔄 After loadModules, modules state:",D);const os=await Ue(!0);console.log("🔄 getAllModules result:",os),console.log("🔄 All modules content:",os.map(is=>{var Gs;return{id:is.id,title:is.title,content:is.content,lessons:(Gs=is.content)==null?void 0:Gs.lessons}}));const ze=os.find(is=>is.id===r);console.log("🔄 Found updated module:",ze),console.log("🔄 Module content:",ze==null?void 0:ze.content),console.log("🔄 Module lessons:",(m=ze==null?void 0:ze.content)==null?void 0:m.lessons),console.log("🔄 Lesson count:",((re=(_=ze==null?void 0:ze.content)==null?void 0:_.lessons)==null?void 0:re.length)||0),console.log("🔄 Current selectedModuleForLessons state:",ue),console.log("🔄 Current selectedModuleForLessons lessons:",(Ne=ue==null?void 0:ue.content)==null?void 0:Ne.lessons),console.log("🔄 Current selectedModuleForLessons lesson count:",((fe=(Me=ue==null?void 0:ue.content)==null?void 0:Me.lessons)==null?void 0:fe.length)||0),ze?(console.log("🔄 Setting selectedModuleForLessons to:",ze),console.log("🔄 Current lesson count before update:",((ms=(Be=ue==null?void 0:ue.content)==null?void 0:Be.lessons)==null?void 0:ms.length)||0),console.log("🔄 New lesson count after update:",((Ps=(Fe=ze==null?void 0:ze.content)==null?void 0:Fe.lessons)==null?void 0:Ps.length)||0),c(ze),z(os),Ge(is=>is+1),setTimeout(()=>{console.log("🔄 After state update - selectedModuleForLessons:",ue),console.log("🔄 After state update - modules state:",D),console.log("🔄 After state update - forceUpdate value:",Ie)},100)):console.log("❌ Could not find updated module with ID:",r),be("Lesson added successfully!")}else console.log("❌ Lesson add failed, response:",We),te((We==null?void 0:We.error)||"Failed to add lesson")}catch(We){console.error("❌ Error adding lesson:",We),te("Failed to add lesson")}finally{we(!1)}},oe=async(r,m,_)=>{try{we(!0),be("");const re=await ft(r,m,_);if(re&&re.message){U(null),await u();const Ne=await Ue(!0),Me=Ne.find(fe=>fe.id===r);Me&&(c(Me),z(Ne),Ge(fe=>fe+1)),be("Lesson updated successfully!")}else te((re==null?void 0:re.error)||"Failed to update lesson")}catch(re){console.error("Error updating lesson:",re),te("Failed to update lesson")}finally{we(!1)}},Ee=async(r,m)=>{var _,re,Ne;if(window.confirm("Are you sure you want to delete this lesson?"))try{we(!0),be(""),console.log("🔄 handleDeleteLesson called with:",{moduleId:r,lessonId:m});const Me=await yt(r,m);if(console.log("🔄 deleteLesson response:",Me),Me&&Me.message){console.log("✅ Lesson deleted successfully, refreshing data..."),await u();const fe=await Ue(!0),Be=fe.find(ms=>ms.id===r);Be&&(console.log("🔄 Found updated module:",Be),console.log("🔄 Module content:",Be.content),console.log("🔄 Module lessons:",(_=Be.content)==null?void 0:_.lessons),console.log("🔄 Lesson count:",((Ne=(re=Be.content)==null?void 0:re.lessons)==null?void 0:Ne.length)||0),c(Be),z(fe),Ge(ms=>ms+1)),be("Lesson deleted successfully!")}else console.log("❌ Failed to delete lesson:",Me==null?void 0:Me.error),te((Me==null?void 0:Me.error)||"Failed to delete lesson")}catch(Me){console.error("❌ Error deleting lesson:",Me),te("Failed to delete lesson")}finally{we(!1)}},es=async()=>{try{Re("checking");const m=await fetch("https://api.remalehprotect.remaleh.com.au/api/health",{method:"GET",headers:{"Content-Type":"application/json"},signal:AbortSignal.timeout(1e4)});if(m.ok){const _=await m.json();console.log("Health check response:",_),Re(_.database==="healthy"?"connected":"disconnected"),_.database!=="healthy"?te(`Database status: ${_.database}`):te(null)}else console.error("Health check failed with status:",m.status),Re("disconnected"),te(`Backend health check failed: ${m.status}`)}catch(r){console.error("Database connection check failed:",r),Re("disconnected"),r.name==="AbortError"?te("Backend connection timeout - service may be unavailable"):r.message.includes("Failed to fetch")?te("Cannot connect to backend - check if service is running"):te(`Connection error: ${r.message}`)}};if(ys.useEffect(()=>{u(),J(),X(),ee(),es(),(async()=>{try{const r=await Le("/api/admin/stats");if(r.ok){const m=await r.json();Ye(m)}}catch{}})()},[]),l)return e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#21a1ce] mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Checking authentication..."})]})});if(!a)return e.jsxs("div",{className:"space-y-6 p-4",children:[e.jsx("div",{className:"bg-gradient-to-r from-[#21a1ce] to-[#1a8bb8] rounded-2xl p-6 text-white shadow-lg",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Pe,{className:"w-16 h-16 mx-auto mb-4"}),e.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Authentication Required"}),e.jsx("p",{className:"text-white text-lg",children:"Please log in to access the Admin Dashboard."})]})}),e.jsx(ce,{children:e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Pe,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Access Denied"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"You must be logged in to access the admin panel."}),e.jsx(me,{onClick:()=>t("login"),className:"bg-[#21a1ce] hover:bg-[#1a8bb8] text-white",children:"Go to Login"})]})})]});if(!(s!=null&&s.is_admin)&&(s==null?void 0:s.role)!=="ADMIN"&&(s==null?void 0:s.role)!=="MODERATOR")return e.jsxs("div",{className:"space-y-6 p-4",children:[e.jsx("div",{className:"bg-gradient-to-r from-red-500 to-red-600 rounded-2xl p-6 text-white shadow-lg",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Pe,{className:"w-16 h-16 mx-auto mb-4"}),e.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Access Denied"}),e.jsx("p",{className:"text-white text-lg",children:"You don't have permission to access the Admin Dashboard."})]})}),e.jsx(ce,{children:e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Pe,{className:"w-16 h-16 text-red-400 mx-auto mb-4"}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Insufficient Privileges"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Only administrators can access this panel."}),e.jsx(me,{onClick:()=>t("home"),className:"bg-[#21a1ce] hover:bg-[#1a8bb8] text-white",children:"Return to Home"})]})})]});const ns=()=>{var r,m;return e.jsx("div",{className:"space-y-6",children:e.jsx(ce,{children:e.jsxs("div",{className:"p-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"System Overview"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsx(ce,{children:e.jsxs("div",{className:"text-center p-4",children:[e.jsx(ls,{className:"w-8 h-8 text-blue-500 mx-auto mb-2"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:D.length}),e.jsx("p",{className:"text-sm text-gray-600",children:"Learning Modules"})]})}),e.jsx(ce,{children:e.jsxs("div",{className:"text-center p-4",children:[e.jsx(xs,{className:"w-8 h-8 text-green-500 mx-auto mb-2"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:he.total}),e.jsx("p",{className:"text-sm text-gray-600",children:"Total Users"}),e.jsxs("div",{className:"mt-2 grid grid-cols-2 gap-x-3 gap-y-1 text-xs text-gray-600",children:[e.jsxs("span",{children:["Active: ",e.jsx("span",{className:"font-medium",children:he.active??0})]}),e.jsxs("span",{children:["Admins: ",e.jsx("span",{className:"font-medium",children:he.admins??0})]}),e.jsxs("span",{children:["Moderators: ",e.jsx("span",{className:"font-medium",children:he.moderators??0})]}),e.jsxs("span",{children:["Deleted: ",e.jsx("span",{className:"font-medium",children:(le==null?void 0:le.length)??0})]}),e.jsxs("span",{children:["Suspended: ",e.jsx("span",{className:"font-medium",children:he.suspended??0})]}),e.jsxs("span",{children:["Banned: ",e.jsx("span",{className:"font-medium",children:he.banned??0})]})]})]})}),e.jsx(ce,{children:e.jsxs("div",{className:"text-center p-4",children:[e.jsx(Ts,{className:"w-8 h-8 text-orange-500 mx-auto mb-2"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:((r=ye==null?void 0:ye.reports)==null?void 0:r.total)??0}),e.jsx("p",{className:"text-sm text-gray-600",children:"Community Reports"}),(ye==null?void 0:ye.reports)&&e.jsxs("div",{className:"mt-2 grid grid-cols-3 gap-2 text-xs",children:[e.jsxs("span",{className:"px-2 py-1 rounded-full bg-yellow-50 text-yellow-700 text-center",children:["Pending: ",e.jsx("span",{className:"font-medium",children:ye.reports.pending??0})]}),e.jsxs("span",{className:"px-2 py-1 rounded-full bg-green-50 text-green-700 text-center",children:["Approved: ",e.jsx("span",{className:"font-medium",children:ye.reports.approved??0})]}),e.jsxs("span",{className:"px-2 py-1 rounded-full bg-blue-50 text-blue-700 text-center",children:["Verified: ",e.jsx("span",{className:"font-medium",children:ye.reports.verified??0})]})]}),e.jsxs("div",{className:"mt-3 flex items-center justify-center gap-2",children:[e.jsx(me,{onClick:()=>d("reports"),className:"bg-orange-600 hover:bg-orange-700 text-white px-3 py-1 text-xs",children:"Go to Reports"}),((m=ye==null?void 0:ye.reports)==null?void 0:m.pending)>0&&e.jsx(me,{onClick:()=>{d("reports"),window.__ADMIN_REPORTS_INITIAL_FILTERS__={status:"PENDING"}},className:"bg-yellow-600 hover:bg-yellow-700 text-white px-3 py-1 text-xs",children:"Review Pending"})]})]})}),e.jsx(ce,{children:e.jsxs("div",{className:"text-center p-4",children:[e.jsx(Pe,{className:"w-8 h-8 text-purple-500 mx-auto mb-2"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Active"}),e.jsx("p",{className:"text-sm text-gray-600",children:"System Status"}),e.jsxs("div",{className:"mt-3 space-y-1",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2 text-xs",children:[e.jsx("span",{className:"text-gray-500",children:"Backend:"}),e.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-0.5 rounded-full ${de==="connected"?"bg-green-100 text-green-700":de==="disconnected"?"bg-red-100 text-red-700":"bg-yellow-100 text-yellow-700"}`,children:[e.jsx("span",{className:`w-2 h-2 rounded-full ${de==="connected"?"bg-green-500":de==="disconnected"?"bg-red-500":"bg-yellow-500"}`}),de==="connected"?"Connected":de==="disconnected"?"Disconnected":"Checking..."]})]}),e.jsxs("div",{className:"flex items-center justify-center gap-2 text-xs",children:[e.jsx("span",{className:"text-gray-500",children:"Database:"}),e.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-0.5 rounded-full ${de==="connected"?"bg-green-100 text-green-700":de==="disconnected"?"bg-red-100 text-red-700":"bg-yellow-100 text-yellow-700"}`,children:[e.jsx("span",{className:`w-2 h-2 rounded-full ${de==="connected"?"bg-green-500":de==="disconnected"?"bg-red-500":"bg-yellow-500"}`}),de==="connected"?"Connected":de==="disconnected"?"Disconnected":"Checking..."]})]}),e.jsx("button",{onClick:es,className:"block mx-auto mt-1 text-[11px] text-blue-600 hover:text-blue-800 underline",children:"Check connection"})]})]})})]})]})})})},ws=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Learning Content Management"}),e.jsxs(me,{onClick:()=>y(!0),className:"bg-[#21a1ce] hover:bg-[#1a8bb8] text-white",children:[e.jsx(Ls,{className:"w-4 h-4 mr-2"}),"Add Module"]})]}),e.jsx("div",{className:"space-y-4",children:D.length===0?e.jsx(ce,{children:e.jsxs("div",{className:"text-center py-8",children:[e.jsx(ls,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Modules Yet"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Create your first learning module to get started."}),e.jsxs(me,{onClick:()=>y(!0),className:"bg-[#21a1ce] hover:bg-[#1a8bb8] text-white",children:[e.jsx(Ls,{className:"w-4 h-4 mr-2"}),"Create First Module"]})]})}):D.map(r=>{var m,_;return e.jsx(ce,{children:e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:r.title}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>c(r),className:"p-2 text-green-600 hover:bg-green-50 rounded-lg transition-colors",title:"Manage Lessons",children:e.jsx(ls,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>I(r),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Edit Module",children:e.jsx(Ds,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>Ke(r.id),disabled:B,className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors disabled:opacity-50",title:"Delete Module",children:e.jsx(Cs,{className:"w-4 h-4"})})]})]}),e.jsx("p",{className:"text-gray-600 text-sm mb-2",children:r.description}),e.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500",children:[e.jsxs("span",{children:[((_=(m=r.content)==null?void 0:m.lessons)==null?void 0:_.length)||0," lessons"]}),e.jsx("span",{className:"px-2 py-1 rounded-full text-xs bg-blue-100 text-blue-800",children:r.difficulty}),e.jsxs("span",{className:"px-2 py-1 rounded-full text-xs bg-green-100 text-green-800",children:[r.estimated_time," min"]})]})]})},r.id)})})]}),Ns=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"User Management"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs(me,{onClick:J,disabled:B,className:"bg-gray-600 hover:bg-gray-700 text-white",children:[e.jsx(bs,{className:`w-4 h-4 mr-2 ${B?"animate-spin":""}`}),"Refresh"]}),e.jsxs(me,{onClick:()=>f(!0),className:"bg-green-600 hover:bg-green-700 text-white",children:[e.jsx(Ls,{className:"w-4 h-4 mr-2"}),"Add User"]})]})]}),ae?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#21a1ce] mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading users..."})]})}):H.length===0?e.jsx(ce,{children:e.jsxs("div",{className:"text-center py-8",children:[e.jsx(xs,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Users Found"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"There are no users in the system yet."})]})}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-white border rounded-lg p-3 flex flex-wrap items-center gap-2",children:[e.jsx("button",{onClick:He,className:"px-2 py-1 text-sm border rounded",children:H.every(r=>G.includes(r.id))&&H.length>0?"Unselect All":"Select All"}),e.jsxs("span",{className:"text-sm text-gray-600",children:["Selected: ",G.length]}),e.jsxs("select",{value:b,onChange:r=>{T(r.target.value),Q("")},className:"text-sm border rounded px-2 py-1",children:[e.jsx("option",{value:"",children:"Bulk action..."}),e.jsx("option",{value:"status",children:"Set Status"}),e.jsx("option",{value:"role",children:"Set Role"}),e.jsx("option",{value:"delete",children:"Delete"})]}),b==="status"&&e.jsxs("select",{value:P,onChange:r=>Q(r.target.value),className:"text-sm border rounded px-2 py-1",children:[e.jsx("option",{value:"",children:"Choose status"}),e.jsx("option",{value:"ACTIVE",children:"Active"}),e.jsx("option",{value:"SUSPENDED",children:"Suspended"}),e.jsx("option",{value:"BANNED",children:"Banned"})]}),b==="role"&&e.jsxs("select",{value:P,onChange:r=>Q(r.target.value),className:"text-sm border rounded px-2 py-1",children:[e.jsx("option",{value:"",children:"Choose role"}),e.jsx("option",{value:"USER",children:"User"}),e.jsx("option",{value:"MODERATOR",children:"Moderator"}),e.jsx("option",{value:"ADMIN",children:"Admin"})]}),e.jsx(me,{onClick:Ze,disabled:B||G.length===0||!b||(b==="status"||b==="role")&&!P,className:"px-3 py-1",children:"Apply"}),G.length>0&&e.jsx("button",{onClick:Ce,className:"text-sm text-gray-600 hover:underline ml-auto",children:"Clear"})]}),H.map(r=>{var m;return e.jsx(ce,{children:e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("input",{type:"checkbox",checked:ge(r.id),onChange:()=>xe(r.id),className:"mt-1 h-4 w-4"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:r.first_name&&r.last_name?`${r.first_name} ${r.last_name}`:((m=r.email)==null?void 0:m.split("@")[0])||"Unknown User"}),e.jsx("p",{className:"text-sm text-gray-600",children:r.email}),r.created_at&&e.jsxs("p",{className:"text-xs text-gray-500",children:["Joined: ",new Date(r.created_at).toLocaleDateString()]})]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>O(r),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Edit User",children:e.jsx(Ds,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>hs(r.id),disabled:B,className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors disabled:opacity-50",title:"Delete User",children:e.jsx(Cs,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"flex items-center space-x-4 text-sm mb-3",children:[e.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${r.is_admin||r.role==="ADMIN"?"bg-purple-100 text-purple-800":r.role==="MODERATOR"?"bg-orange-100 text-orange-800":"bg-blue-100 text-blue-800"}`,children:r.role||"USER"}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${r.status==="ACTIVE"?"bg-green-100 text-green-800":r.status==="SUSPENDED"?"bg-yellow-100 text-yellow-800":r.status==="BANNED"?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"}`,children:r.status||"UNKNOWN"})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs("select",{value:r.status||"ACTIVE",onChange:_=>Xe(r.id,_.target.value),disabled:B,className:"px-2 py-1 text-xs border border-gray-300 rounded-md focus:ring-1 focus:ring-blue-500 disabled:opacity-50",children:[e.jsx("option",{value:"ACTIVE",children:"Active"}),e.jsx("option",{value:"SUSPENDED",children:"Suspended"}),e.jsx("option",{value:"BANNED",children:"Banned"})]}),e.jsxs("select",{value:r.role||"USER",onChange:_=>rs(r.id,_.target.value),disabled:B,className:"px-2 py-1 text-xs border border-gray-300 rounded-md focus:ring-1 focus:ring-blue-500 disabled:opacity-50",children:[e.jsx("option",{value:"USER",children:"User"}),e.jsx("option",{value:"MODERATOR",children:"Moderator"}),e.jsx("option",{value:"ADMIN",children:"Admin"})]}),e.jsxs("label",{className:"flex items-center space-x-2 text-xs",children:[e.jsx("input",{type:"checkbox",checked:!!r.email_verified,onChange:async _=>{try{g(!0),await Ks(r.id,{email_verified:_.target.checked}),await J()}catch(re){alert("Failed to update verification flag: "+(re.message||"Unknown error"))}finally{g(!1)}},className:"h-4 w-4"}),e.jsx("span",{children:"Email verified"})]})]})]})},r.id)})]})]}),vt=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Deleted Users"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-white border rounded-lg p-3 flex flex-wrap items-center gap-2",children:[e.jsx("button",{onClick:V,className:"px-2 py-1 text-sm border rounded",children:le.every(r=>v.includes(r.id))&&le.length>0?"Unselect All":"Select All"}),e.jsxs("span",{className:"text-sm text-gray-600",children:["Selected: ",v.length]}),e.jsx(me,{onClick:K,disabled:B||v.length===0,className:"px-3 py-1",children:"Restore Selected"}),e.jsx(me,{onClick:async()=>{if(v.length===0){alert("Select at least one user");return}if(confirm(`Permanently delete ${v.length} user(s)? This cannot be undone.`))try{g(!0);const r={success:0,failed:0,errors:[]};for(const m of v)try{const _=await ha(m);if(!_.success)throw new Error(_.error||"Failed");r.success++}catch(_){r.failed++,r.errors.push(`#${m}: ${_.message||"Error"}`)}await J(),await X(),alert(`Bulk permanent delete: ${r.success} succeeded, ${r.failed} failed${r.errors.length?`
${r.errors.join(`
`)}`:""}`)}finally{g(!1),Z([])}},disabled:B||v.length===0,className:"px-3 py-1 bg-red-600 hover:bg-red-700 text-white",children:"Permanently Delete"}),v.length>0&&e.jsx("button",{onClick:p,className:"text-sm text-gray-600 hover:underline ml-auto",children:"Clear"})]}),le.map(r=>{var m;return e.jsx(ce,{children:e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("input",{type:"checkbox",checked:C(r.id),onChange:()=>A(r.id),className:"mt-1 h-4 w-4"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900",children:r.first_name&&r.last_name?`${r.first_name} ${r.last_name}`:((m=r.email)==null?void 0:m.split("@")[0])||"Unknown User"}),e.jsx("p",{className:"text-sm text-gray-600",children:r.email}),r.created_at&&e.jsxs("p",{className:"text-xs text-gray-500",children:["Joined: ",new Date(r.created_at).toLocaleDateString()]})]})]}),e.jsx("div",{className:"flex space-x-2",children:e.jsx("button",{onClick:()=>i(r.id),disabled:B,className:"p-2 text-green-600 hover:bg-green-50 rounded-lg transition-colors disabled:opacity-50",title:"Restore User",children:e.jsx(bs,{className:"w-4 h-4"})})})]}),e.jsxs("div",{className:"flex items-center space-x-4 text-sm",children:[e.jsx("span",{className:"px-2 py-1 rounded-full text-xs bg-gray-100 text-gray-800",children:r.role||"USER"}),e.jsx("span",{className:"px-2 py-1 rounded-full text-xs bg-red-100 text-red-800",children:"DELETED"})]})]})},r.id)}),le.length===0&&e.jsx("div",{className:"text-center py-8 text-gray-500",children:e.jsx("p",{children:"No deleted users"})})]})]});return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:((s==null?void 0:s.role)||"").toUpperCase()==="MODERATOR"&&!(s!=null&&s.is_admin)?"Moderator Dashboard":"Admin Dashboard"}),e.jsxs("p",{className:"text-gray-600",children:["Welcome back, ",(s==null?void 0:s.name)||(((s==null?void 0:s.role)||"").toUpperCase()==="MODERATOR"?"Moderator":"Admin")]}),e.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[e.jsx("span",{className:"text-sm text-gray-500",children:"Backend:"}),e.jsxs("div",{className:`flex items-center space-x-1 ${de==="connected"?"text-green-600":de==="disconnected"?"text-red-600":"text-yellow-600"}`,children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${de==="connected"?"bg-green-500":de==="disconnected"?"bg-red-500":"bg-yellow-500"}`}),e.jsx("span",{className:"text-xs font-medium capitalize",children:de==="connected"?"Connected":de==="disconnected"?"Disconnected":"Checking..."})]})]})]}),e.jsx("button",{onClick:()=>t("home"),className:"p-2 text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"flex space-x-1 bg-gray-100 p-1 rounded-xl",children:[((s==null?void 0:s.is_admin)||(s==null?void 0:s.role)==="ADMIN")&&e.jsx("button",{onClick:()=>d("overview"),className:`flex-1 py-2 px-4 rounded-lg text-sm font-medium transition-colors ${n==="overview"?"bg-white text-[#21a1ce] shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:"Overview"}),e.jsx("button",{onClick:()=>d("content"),className:`flex-1 py-2 px-4 rounded-lg text-sm font-medium transition-colors ${n==="content"?"bg-white text-[#21a1ce] shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:"Content"}),((s==null?void 0:s.is_admin)||(s==null?void 0:s.role)==="ADMIN")&&e.jsx("button",{onClick:()=>d("users"),className:`flex-1 py-2 px-4 rounded-lg text-sm font-medium transition-colors ${n==="users"?"bg-white text-[#21a1ce] shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:"Users"}),e.jsx("button",{onClick:()=>d("reports"),className:`flex-1 py-2 px-4 rounded-lg text-sm font-medium transition-colors ${n==="reports"?"bg-white text-[#21a1ce] shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:"Reports"})]}),((s==null?void 0:s.is_admin)||(s==null?void 0:s.role)==="ADMIN")&&n==="overview"&&ns(),n==="content"&&ws(),((s==null?void 0:s.is_admin)||(s==null?void 0:s.role)==="ADMIN")&&n==="users"&&e.jsxs(e.Fragment,{children:[Ns(),vt()]}),n==="reports"&&(window.__ADMIN_REPORTS_INITIAL_FILTERS__?(()=>{const r=window.__ADMIN_REPORTS_INITIAL_FILTERS__;return delete window.__ADMIN_REPORTS_INITIAL_FILTERS__,e.jsx(Xs,{initialFilters:r})})():e.jsx(Xs,{})),x&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white rounded-2xl max-w-md w-full max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Add New Module"}),e.jsx("button",{onClick:()=>y(!1),className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Module Title *"}),e.jsx(ve,{type:"text",value:S.title,onChange:r=>R(m=>({...m,title:r.target.value})),placeholder:"Enter module title",className:"w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description *"}),e.jsx(fs,{value:S.description,onChange:r=>R(m=>({...m,description:r.target.value})),placeholder:"Enter module description",className:"w-full",rows:3})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Difficulty"}),e.jsxs("select",{value:S.difficulty,onChange:r=>R(m=>({...m,difficulty:r.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#21a1ce] focus:border-transparent",children:[e.jsx("option",{value:"BEGINNER",children:"Beginner"}),e.jsx("option",{value:"INTERMEDIATE",children:"Intermediate"}),e.jsx("option",{value:"ADVANCED",children:"Advanced"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Estimated Time (minutes)"}),e.jsx(ve,{type:"number",value:S.estimated_time,onChange:r=>R(m=>({...m,estimated_time:parseInt(r.target.value)||10})),placeholder:"10",min:"1",max:"120",className:"w-full"})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx(me,{onClick:()=>y(!1),className:"flex-1 bg-gray-600 hover:bg-gray-700 text-white",children:"Cancel"}),e.jsx(me,{onClick:Ve,disabled:B,className:"flex-1 bg-[#21a1ce] hover:bg-[#1a8bb8] text-white",children:B?"Creating...":"Create Module"})]})]})]})})}),M&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white rounded-2xl max-w-md w-full max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Add New User"}),e.jsx("button",{onClick:()=>f(!1),className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Full Name"}),e.jsx(ve,{type:"text",placeholder:"Enter full name",value:$.first_name,onChange:r=>w(m=>({...m,first_name:r.target.value})),className:"w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),e.jsx(ve,{type:"email",placeholder:"Enter email address",value:$.email,onChange:r=>w(m=>({...m,email:r.target.value})),className:"w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Role"}),e.jsxs("select",{value:$.role,onChange:r=>w(m=>({...m,role:r.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#21a1ce] focus:border-transparent",children:[e.jsx("option",{value:"USER",children:"User"}),e.jsx("option",{value:"MODERATOR",children:"Moderator"}),e.jsx("option",{value:"ADMIN",children:"Admin"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),e.jsx(ve,{type:"password",placeholder:"Enter password",value:$.password,onChange:r=>w(m=>({...m,password:r.target.value})),className:"w-full"})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx(me,{onClick:()=>f(!1),className:"flex-1 bg-gray-600 hover:bg-gray-700 text-white",children:"Cancel"}),e.jsx(me,{onClick:q,disabled:B,className:"flex-1 bg-green-600 hover:bg-green-700 text-white",children:B?"Creating...":"Create User"})]})]})]})})}),F&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white rounded-2xl max-w-md w-full max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Edit User"}),e.jsx("button",{onClick:()=>O(null),className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"First Name"}),e.jsx(ve,{type:"text",placeholder:"Enter first name",value:F.first_name||"",onChange:r=>O(m=>({...m,first_name:r.target.value})),className:"w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Last Name"}),e.jsx(ve,{type:"text",placeholder:"Enter last name",value:F.last_name||"",onChange:r=>O(m=>({...m,last_name:r.target.value})),className:"w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),e.jsx(ve,{type:"email",placeholder:"Enter email address",value:F.email||"",onChange:r=>O(m=>({...m,email:r.target.value})),className:"w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Role"}),e.jsxs("select",{value:F.role||"USER",onChange:r=>O(m=>({...m,role:r.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#21a1ce] focus:border-transparent",children:[e.jsx("option",{value:"USER",children:"User"}),e.jsx("option",{value:"MODERATOR",children:"Moderator"}),e.jsx("option",{value:"ADMIN",children:"Admin"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),e.jsxs("select",{value:F.status||"ACTIVE",onChange:r=>O(m=>({...m,status:r.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#21a1ce] focus:border-transparent",children:[e.jsx("option",{value:"ACTIVE",children:"Active"}),e.jsx("option",{value:"SUSPENDED",children:"Suspended"}),e.jsx("option",{value:"BANNED",children:"Banned"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"New Password (leave blank to keep current)"}),e.jsx(ve,{type:"password",placeholder:"Enter new password",value:F.newPassword||"",onChange:r=>O(m=>({...m,newPassword:r.target.value})),className:"w-full"})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx(me,{onClick:()=>O(null),className:"flex-1 bg-gray-600 hover:bg-gray-700 text-white",children:"Cancel"}),e.jsx(me,{onClick:()=>se(F.id),disabled:B,className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white",children:B?"Updating...":"Update User"})]})]})]})})}),k&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white rounded-2xl max-w-md w-full max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Edit Module"}),e.jsx("button",{onClick:()=>I(null),className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Title"}),e.jsx(ve,{type:"text",placeholder:"Enter module title",value:k.title||"",onChange:r=>I(m=>({...m,title:r.target.value})),className:"w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),e.jsx(fs,{placeholder:"Enter module description",value:k.description||"",onChange:r=>I(m=>({...m,description:r.target.value})),className:"w-full",rows:3})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Difficulty"}),e.jsxs("select",{value:k.difficulty||"BEGINNER",onChange:r=>I(m=>({...m,difficulty:r.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#21a1ce] focus:border-transparent",children:[e.jsx("option",{value:"BEGINNER",children:"Beginner"}),e.jsx("option",{value:"INTERMEDIATE",children:"Intermediate"}),e.jsx("option",{value:"ADVANCED",children:"Advanced"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Estimated Time (minutes)"}),e.jsx(ve,{type:"number",placeholder:"10",value:k.estimated_time||10,onChange:r=>I(m=>({...m,estimated_time:parseInt(r.target.value)||10})),min:"1",max:"120",className:"w-full"})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx(me,{onClick:()=>I(null),className:"flex-1 bg-gray-600 hover:bg-gray-700 text-white",children:"Cancel"}),e.jsx(me,{onClick:()=>W(k.id),disabled:B,className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white",children:B?"Updating...":"Update Module"})]})]})]})})}),ue&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white rounded-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-900",children:["Manage Lessons: ",ue.title]}),e.jsxs("div",{className:"text-sm text-gray-500",children:["Last updated: ",new Date().toLocaleTimeString()," (Render: ",Ie,")"]}),e.jsx("button",{onClick:()=>c(null),className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Add New Lesson"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Title"}),e.jsx(ve,{type:"text",placeholder:"Enter lesson title",value:E.title,onChange:r=>j(m=>({...m,title:r.target.value})),className:"w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Type"}),e.jsxs("select",{value:E.type,onChange:r=>j(m=>({...m,type:r.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#21a1ce] focus:border-transparent",children:[e.jsx("option",{value:"info",children:"Information"}),e.jsx("option",{value:"quiz",children:"Quiz"}),e.jsx("option",{value:"video",children:"Video"}),e.jsx("option",{value:"interactive",children:"Interactive"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Content Type"}),e.jsxs("select",{value:E.contentType,onChange:r=>j(m=>({...m,contentType:r.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#21a1ce] focus:border-transparent",children:[e.jsx("option",{value:"info",children:"Plain Text"}),e.jsx("option",{value:"tips",children:"Tips (title + description list)"}),e.jsx("option",{value:"warning-signs",children:"Warning Signs"}),e.jsx("option",{value:"steps",children:"Steps (numbered)"}),e.jsx("option",{value:"list",children:"Bullet List"}),e.jsx("option",{value:"warning",children:"Warning Box"}),e.jsx("option",{value:"warning-list",children:"Warning Box + List"}),e.jsx("option",{value:"action-list",children:"Actions To Take"}),e.jsx("option",{value:"example",children:"Real-world Example"}),e.jsx("option",{value:"markdown",children:"Markdown"}),e.jsx("option",{value:"html",children:"HTML (sanitized)"})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"This controls how the lesson renders in the Learn Hub."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Duration (minutes)"}),e.jsx(ve,{type:"number",placeholder:"5",value:E.duration,onChange:r=>j(m=>({...m,duration:parseInt(r.target.value)||5})),min:"1",max:"60",className:"w-full"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Content"}),e.jsx(fs,{placeholder:"Enter lesson content",value:E.content,onChange:r=>j(m=>({...m,content:r.target.value})),className:"w-full",rows:4})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Media (optional)"}),e.jsxs("div",{className:"space-y-3",children:[(E.media||[]).map((r,m)=>e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-2 items-center",children:[e.jsxs("select",{value:r.type||"image",onChange:_=>j(re=>{const Ne=[...re.media||[]];return Ne[m]={...Ne[m],type:_.target.value},{...re,media:Ne}}),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#21a1ce] focus:border-transparent",children:[e.jsx("option",{value:"image",children:"Image"}),e.jsx("option",{value:"video",children:"Video"})]}),e.jsx("input",{type:"url",placeholder:"https://cdn.example.com/path/to/media",value:r.url||"",onChange:_=>j(re=>{const Ne=[...re.media||[]];return Ne[m]={...Ne[m],url:_.target.value},{...re,media:Ne}}),className:"md:col-span-2 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#21a1ce] focus:border-transparent"}),e.jsx("input",{type:"text",placeholder:"Caption (optional)",value:r.caption||"",onChange:_=>j(re=>{const Ne=[...re.media||[]];return Ne[m]={...Ne[m],caption:_.target.value},{...re,media:Ne}}),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#21a1ce] focus:border-transparent"}),e.jsx("button",{type:"button",onClick:()=>j(_=>({..._,media:(_.media||[]).filter((re,Ne)=>Ne!==m)})),className:"text-red-600 text-sm hover:underline",children:"Remove"})]},m)),e.jsx("button",{type:"button",onClick:()=>j(r=>({...r,media:[...r.media||[],{type:"image",url:"",caption:""}]})),className:"text-[#21a1ce] text-sm hover:underline",children:"+ Add media"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"file",accept:"image/*,video/*",onChange:async r=>{var _;const m=(_=r.target.files)==null?void 0:_[0];if(m)try{we(!0);const re=await pt(m),Ne=re.url,Me=re.resource_type||"image";j(fe=>({...fe,media:[...fe.media||[],{type:Me,url:Ne,caption:""}]}))}catch(re){alert("Upload failed: "+(re.message||"Unknown error"))}finally{we(!1),r.target.value=""}},className:"text-sm"}),e.jsx("span",{className:"text-xs text-gray-500",children:"Upload to Cloudinary and auto-add to list"})]})]})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx(me,{onClick:()=>Y(ue.id),disabled:je,className:"bg-[#21a1ce] hover:bg-[#1a8bb8] text-white",children:je?"Adding...":"Add Lesson"}),Ae&&e.jsx("div",{className:"mt-3 p-3 bg-green-50 border border-green-200 rounded-lg",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("svg",{className:"w-5 h-5 text-green-600 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),e.jsx("span",{className:"text-sm text-green-800 font-medium",children:Ae})]})})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Existing Lessons"}),je&&e.jsx("div",{className:"mb-4 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(bs,{className:"w-4 h-4 text-blue-600 mr-2 animate-spin"}),e.jsx("span",{className:"text-sm text-blue-800",children:"Updating lessons..."})]})}),((Hs=(zs=ue.content)==null?void 0:zs.lessons)==null?void 0:Hs.length)>0?e.jsx("div",{className:"space-y-3",children:ue.content.lessons.map(r=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h4",{className:"font-medium text-gray-900",children:r.title}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>U(r),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Edit Lesson",children:e.jsx(Ds,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>Ee(ue.id,r.id),disabled:je,className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors disabled:opacity-50",title:"Delete Lesson",children:e.jsx(Cs,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"text-sm text-gray-600 mb-2",children:[e.jsx("span",{className:"px-2 py-1 rounded-full text-xs bg-blue-100 text-blue-800 mr-2",children:r.type}),e.jsxs("span",{className:"px-2 py-1 rounded-full text-xs bg-green-100 text-green-800 mr-2",children:[r.duration," min"]}),e.jsx("span",{className:"px-2 py-1 rounded-full text-xs bg-purple-100 text-purple-800",children:r.contentType})]}),e.jsx("p",{className:"text-gray-700 text-sm line-clamp-2",children:r.content})]},r.id))}):e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(ls,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("p",{children:"No lessons yet. Add your first lesson above!"})]})]})]})})}),L&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white rounded-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Edit Lesson"}),e.jsx("button",{onClick:()=>U(null),className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Title"}),e.jsx(ve,{type:"text",placeholder:"Enter lesson title",value:L.title||"",onChange:r=>U(m=>({...m,title:r.target.value})),className:"w-full"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Type"}),e.jsxs("select",{value:L.type||"info",onChange:r=>U(m=>({...m,type:r.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#21a1ce] focus:border-transparent",children:[e.jsx("option",{value:"info",children:"Information"}),e.jsx("option",{value:"quiz",children:"Quiz"}),e.jsx("option",{value:"video",children:"Video"}),e.jsx("option",{value:"interactive",children:"Interactive"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Duration (minutes)"}),e.jsx(ve,{type:"number",placeholder:"5",value:L.duration||5,onChange:r=>U(m=>({...m,duration:parseInt(r.target.value)||5})),min:"1",max:"60",className:"w-full"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Content Type"}),e.jsxs("select",{value:L.contentType||"info",onChange:r=>U(m=>({...m,contentType:r.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#21a1ce] focus:border-transparent",children:[e.jsx("option",{value:"info",children:"Plain Text"}),e.jsx("option",{value:"tips",children:"Tips (title + description list)"}),e.jsx("option",{value:"warning-signs",children:"Warning Signs"}),e.jsx("option",{value:"steps",children:"Steps (numbered)"}),e.jsx("option",{value:"list",children:"Bullet List"}),e.jsx("option",{value:"warning",children:"Warning Box"}),e.jsx("option",{value:"warning-list",children:"Warning Box + List"}),e.jsx("option",{value:"action-list",children:"Actions To Take"}),e.jsx("option",{value:"example",children:"Real-world Example"}),e.jsx("option",{value:"markdown",children:"Markdown"}),e.jsx("option",{value:"html",children:"HTML (sanitized)"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Content"}),e.jsx(fs,{placeholder:"Enter lesson content",value:L.content||"",onChange:r=>U(m=>({...m,content:r.target.value})),className:"w-full",rows:6})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx(me,{onClick:()=>U(null),className:"flex-1 bg-gray-600 hover:bg-gray-700 text-white",children:"Cancel"}),e.jsx(me,{onClick:()=>oe(ue.id,L.id,L),disabled:je,className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white",children:je?"Updating...":"Update Lesson"})]})]})]})})})]})}function ya({setActiveTab:t}){const{user:s,updateProfile:a,changePassword:l}=ds(),[n,d]=o.useState(!1),[x,y]=o.useState(!1),[M,f]=o.useState(!1),[k,I]=o.useState({name:(s==null?void 0:s.name)||`${(s==null?void 0:s.first_name)||""} ${(s==null?void 0:s.last_name)||""}`.trim(),email:(s==null?void 0:s.email)||"",bio:(s==null?void 0:s.bio)||""}),[F,O]=o.useState({currentPassword:"",newPassword:"",confirmPassword:""}),B=S=>{const{name:R,value:$}=S.target;I(w=>({...w,[R]:$}))},g=S=>{const{name:R,value:$}=S.target;O(w=>({...w,[R]:$}))},ae=async()=>{f(!0);try{await a(k),d(!1)}catch(S){console.error("Failed to update profile:",S)}finally{f(!1)}},h=async()=>{if(F.newPassword!==F.confirmPassword){alert("New passwords do not match");return}f(!0);try{await l(F.currentPassword,F.newPassword),y(!1),O({currentPassword:"",newPassword:"",confirmPassword:""})}catch(S){console.error("Failed to change password:",S)}finally{f(!1)}};return s?e.jsxs("div",{className:"space-y-6",children:[(()=>(`${(s==null?void 0:s.first_name)||""} ${(s==null?void 0:s.last_name)||""}`.trim()||s!=null&&s.name,null))(),e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:()=>t("home"),className:"p-2 text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(ks,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Profile Settings"}),e.jsx("p",{className:"text-gray-600",children:"Manage your account information"})]})]})}),e.jsx(ce,{children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Profile Information"}),e.jsx(me,{onClick:()=>d(!n),variant:n?"secondary":"primary",className:"bg-[#21a1ce] hover:bg-[#1a8bb8] text-white",children:n?"Cancel":"Edit Profile"})]}),n?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Full Name"}),e.jsx(ve,{type:"text",name:"name",value:k.name,onChange:B,placeholder:"Enter your full name",className:"w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),e.jsx(ve,{type:"email",name:"email",value:k.email,disabled:!0,className:"w-full bg-gray-50 cursor-not-allowed"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Email changes are not supported from here."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Bio"}),e.jsx(fs,{name:"bio",value:k.bio,onChange:B,placeholder:"Tell us about yourself",rows:3,className:"w-full"})]}),e.jsxs(me,{onClick:ae,disabled:M,loading:M,className:"w-full bg-[#21a1ce] hover:bg-[#1a8bb8] text-white",children:[e.jsx(Dt,{className:"w-4 h-4 mr-2"}),"Save Changes"]})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Is,{className:"w-5 h-5 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Name"}),e.jsx("p",{className:"font-medium text-gray-900",children:`${(s==null?void 0:s.first_name)||""} ${(s==null?void 0:s.last_name)||""}`.trim()||(s==null?void 0:s.name)||"Not set"})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Pt,{className:"w-5 h-5 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Email"}),e.jsx("p",{className:"font-medium text-gray-900",children:s.email})]})]}),s.bio&&e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(Is,{className:"w-5 h-5 text-gray-400 mt-1"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Bio"}),e.jsx("p",{className:"font-medium text-gray-900",children:s.bio})]})]})]})]})}),e.jsx(ce,{children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Security"}),e.jsx(me,{onClick:()=>y(!x),variant:x?"secondary":"primary",className:"bg-green-600 hover:bg-green-700 text-white",children:x?"Cancel":"Change Password"})]}),x?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Current Password"}),e.jsx(ve,{type:"password",name:"currentPassword",value:F.currentPassword,onChange:g,placeholder:"Enter current password",className:"w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"New Password"}),e.jsx(ve,{type:"password",name:"newPassword",value:F.newPassword,onChange:g,placeholder:"Enter new password",className:"w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Confirm New Password"}),e.jsx(ve,{type:"password",name:"confirmPassword",value:F.confirmPassword,onChange:g,placeholder:"Confirm new password",className:"w-full"})]}),e.jsxs(me,{onClick:h,disabled:M,loading:M,className:"w-full bg-green-600 hover:bg-green-700 text-white",children:[e.jsx(Tt,{className:"w-4 h-4 mr-2"}),"Update Password"]})]}):e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Pe,{className:"w-5 h-5 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Password"}),e.jsx("p",{className:"font-medium text-gray-900",children:"••••••••"})]})]})]})}),e.jsx(ce,{children:e.jsxs("div",{className:"p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Account Status"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Account Type"}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${s.is_admin||s.role==="ADMIN"?"bg-purple-100 text-purple-800":"bg-blue-100 text-blue-800"}`,children:s.is_admin||s.role==="ADMIN"?"Admin":"User"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Status"}),e.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:"Active"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Member Since"}),e.jsx("span",{className:"text-sm font-medium text-gray-900",children:s.created_at?new Date(s.created_at).toLocaleDateString():"Unknown"})]})]})]})})]}):e.jsx("div",{className:"space-y-6",children:e.jsx(ce,{children:e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Is,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Profile Not Found"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Please log in to access your profile."}),e.jsx(me,{onClick:()=>t("login"),className:"bg-[#21a1ce] hover:bg-[#1a8bb8] text-white",children:"Go to Login"})]})})})}const ja=({onRegisterSuccess:t,onSwitchToLogin:s})=>{const[a,l]=o.useState({first_name:"",last_name:"",email:"",password:"",confirm_password:""}),[n,d]=o.useState({}),[x,y]=o.useState(!1),{register:M,verifyEmail:f,resendVerification:k,error:I,user:F,isAuthenticated:O}=ds(),[B,g]=o.useState(!1),[ae,h]=o.useState(""),[S,R]=o.useState("");o.useEffect(()=>{O&&F&&t&&t()},[O,F,t]);const $=()=>{const z={};return a.first_name.trim()||(z.first_name="First name is required"),a.last_name.trim()||(z.last_name="Last name is required"),a.email.trim()?/\S+@\S+\.\S+/.test(a.email)||(z.email="Email is invalid"):z.email="Email is required",a.password?a.password.length<8&&(z.password="Password must be at least 8 characters"):z.password="Password is required",a.password!==a.confirm_password&&(z.confirm_password="Passwords do not match"),d(z),Object.keys(z).length===0},w=async z=>{if(z.preventDefault(),!!$()){y(!0);try{const H={first_name:a.first_name.trim(),last_name:a.last_name.trim(),email:a.email.trim().toLowerCase(),password:a.password},ne=await M(H);ne.success?ne.requires_verification&&(g(!0),R("We sent a 6-digit code to your email. Enter it below to verify your account.")):(console.error("Registration failed:",ne.error),ne.error&&ne.error.toLowerCase().includes("email")&&d(le=>({...le,email:ne.error})))}catch(H){console.error("Registration error:",H)}finally{y(!1)}}},D=z=>{l({...a,[z.target.name]:z.target.value}),n[z.target.name]&&d({...n,[z.target.name]:""})};return e.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:[e.jsx("div",{className:"flex justify-center",children:e.jsx("img",{src:"/remaleh-logo.png",alt:"Remaleh Protect",className:"h-12 w-auto"})}),e.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Create your account"}),e.jsx("p",{className:"mt-2 text-center text-sm text-gray-600",children:"Join Remaleh Protect for enhanced digital security"})]}),e.jsx("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md",children:e.jsxs("div",{className:"bg-white py-8 px-4 shadow sm:rounded-lg sm:px-10",children:[!B&&e.jsxs("form",{className:"space-y-6",onSubmit:w,children:[I&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),e.jsx("div",{className:"ml-3",children:e.jsx("p",{className:"text-sm text-red-800",children:I})})]})}),e.jsxs("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"first_name",className:"block text-sm font-medium text-gray-700",children:"First name"}),e.jsx("div",{className:"mt-1",children:e.jsx("input",{id:"first_name",name:"first_name",type:"text",autoComplete:"given-name",required:!0,value:a.first_name,onChange:D,className:`appearance-none block w-full px-3 py-2 border rounded-md placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm ${n.first_name?"border-red-300":"border-gray-300"}`,placeholder:"Enter your first name"})}),n.first_name&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:n.first_name})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"last_name",className:"block text-sm font-medium text-gray-700",children:"Last name"}),e.jsx("div",{className:"mt-1",children:e.jsx("input",{id:"last_name",name:"last_name",type:"text",autoComplete:"family-name",required:!0,value:a.last_name,onChange:D,className:`appearance-none block w-full px-3 py-2 border rounded-md placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm ${n.last_name?"border-red-300":"border-gray-300"}`,placeholder:"Enter your last name"})}),n.last_name&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:n.last_name})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email address"}),e.jsx("div",{className:"mt-1",children:e.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:a.email,onChange:D,className:`appearance-none block w-full px-3 py-2 border rounded-md placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm ${n.email?"border-red-300":"border-gray-300"}`,placeholder:"Enter your email address"})}),n.email&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:n.email})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Password"}),e.jsx("div",{className:"mt-1",children:e.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"new-password",required:!0,value:a.password,onChange:D,className:`appearance-none block w-full px-3 py-2 border rounded-md placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm ${n.password?"border-red-300":"border-gray-300"}`,placeholder:"Create a strong password"})}),n.password&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:n.password}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Must be at least 8 characters long"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"confirm_password",className:"block text-sm font-medium text-gray-700",children:"Confirm password"}),e.jsx("div",{className:"mt-1",children:e.jsx("input",{id:"confirm_password",name:"confirm_password",type:"password",autoComplete:"new-password",required:!0,value:a.confirm_password,onChange:D,className:`appearance-none block w-full px-3 py-2 border rounded-md placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm ${n.confirm_password?"border-red-300":"border-gray-300"}`,placeholder:"Confirm your password"})}),n.confirm_password&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:n.confirm_password})]}),e.jsx("div",{children:e.jsx("button",{type:"submit",disabled:x,className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:x?e.jsxs("div",{className:"flex items-center",children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Creating account..."]}):"Create account"})})]}),B&&e.jsxs("div",{className:"space-y-4",children:[S&&e.jsx("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded",children:e.jsx("p",{className:"text-sm text-blue-800",children:S})}),I&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-3",children:e.jsx("p",{className:"text-sm text-red-800",children:I})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Verification code"}),e.jsx("input",{type:"text",inputMode:"numeric",pattern:"[0-9]*",maxLength:6,value:ae,onChange:z=>h(z.target.value.replace(/\D/g,"")),className:"mt-1 appearance-none block w-full px-3 py-2 border rounded-md placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm border-gray-300",placeholder:"Enter 6-digit code"})]}),e.jsx("button",{onClick:async()=>{if(!a.email||ae.length!==6)return;(await f(a.email.trim().toLowerCase(),ae)).success&&t&&t()},className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none",children:"Verify and continue"}),e.jsx("button",{type:"button",onClick:async()=>{a.email&&(await k(a.email.trim().toLowerCase()),R("A new code has been sent to your email."))},className:"w-full flex justify-center py-2 px-4 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50",children:"Resend code"})]}),e.jsxs("div",{className:"mt-6",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("div",{className:"w-full border-t border-gray-300"})}),e.jsx("div",{className:"relative flex justify-center text-sm",children:e.jsx("span",{className:"px-2 bg-white text-gray-500",children:"Already have an account?"})})]}),e.jsx("div",{className:"mt-6",children:e.jsx("button",{onClick:()=>{s?s():t&&t()},className:"w-full flex justify-center py-2 px-4 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Sign in instead"})})]})]})})]})};function ba(){const[t,s]=o.useState("home"),[a,l]=o.useState(""),[n,d]=o.useState([]),[x,y]=o.useState(""),[M,f]=o.useState(null),[k,I]=o.useState(!1),[F,O]=o.useState(""),[B,g]=o.useState(!1),[ae,h]=o.useState(!1),{user:S,isAuthenticated:R,logout:$}=ds(),[w,D]=o.useState(""),[z,H]=o.useState(!1),[ne,le]=o.useState([]),De=async()=>{try{localStorage.removeItem("authToken"),localStorage.removeItem("refreshToken"),s("home"),window.location.reload()}catch(c){console.error("Global logout error:",c),window.location.reload()}};o.useEffect(()=>(window.logoutUser=De,()=>{delete window.logoutUser}),[]),o.useEffect(()=>{try{const c=new URLSearchParams(window.location.search),E=c.get("oauth"),j=c.get("access_token"),L=c.get("refresh_token");E&&j&&L&&(localStorage.setItem("authToken",j),localStorage.setItem("refreshToken",L),window.history.replaceState({},document.title,window.location.pathname),window.dispatchEvent(new Event("remaleh-auth-changed")),s("home"))}catch{}},[]),o.useEffect(()=>{l((()=>{const E=new Date().getHours();return E<12?"Good morning!":E<17?"Good afternoon!":"Good evening!"})())},[]),o.useEffect(()=>{(async()=>{try{if(!R)return;const E=await Le("/api/enhanced-scam/forwarding-address");if(E.ok){const j=await E.json();D(j.forwarding_address||"")}}catch{}})()},[R]),o.useEffect(()=>{const c=async()=>{try{if(!R)return;const j=await Le("/api/enhanced-scam/recent-scans?limit=10");if(j.ok){const L=await j.json();le(Array.isArray(L.items)?L.items:[])}}catch{}};c();const E=setInterval(c,15e3);return()=>clearInterval(E)},[R]),o.useEffect(()=>{(async()=>{try{const E=await fetch(`${$e}${pe.PUBLIC.BLOG_FEED}?limit=8`);if(E.ok){const u=await E.json();if(Array.isArray(u.items)&&u.items.length>0){d(u.items);return}}const j="https://www.remaleh.com.au/blog/blog-feed.xml",L=[u=>`${$e}/api/public/rss-proxy?url=${encodeURIComponent(u)}`,u=>`https://api.allorigins.win/raw?url=${encodeURIComponent(u)}`,u=>"https://r.jina.ai/http://www.remaleh.com.au/blog/blog-feed.xml"];let U="";for(const u of L)try{const J=await fetch(u(j),{cache:"no-store"});if(J.ok&&(U=await J.text(),U&&U.length>100))break}catch{}if(!U)return;const we=new DOMParser().parseFromString(U,"text/xml"),Ae=we.querySelector("rss > channel");let be=[];Ae?be=Array.from(Ae.querySelectorAll("item")):be=Array.from(we.querySelectorAll("entry"));const Ie=(u,J)=>{const X=u.querySelector(J);return X&&X.textContent?X.textContent.trim():""},Ge=be.slice(0,8).map(u=>{const J=Ie(u,"title");let X="";const ee=u.querySelector("link");ee&&(X=ee.getAttribute("href")||ee.textContent||"");const Ve=Ie(u,"pubDate")||Ie(u,"updated")||Ie(u,"published"),Ke=Ie(u,"description")||Ie(u,"content\\:encoded")||Ie(u,"summary")||Ie(u,"content"),Xe=Ke?Ke.replace(/<[^>]+>/g,"").slice(0,240):"";let rs="";const hs=(Ke||"").match(/<img[^>]+src=["']([^"']+)["']/i);return hs&&(rs=hs[1]),{title:J,link:X,pubDate:Ve,excerpt:Xe,image:rs}});d(Ge)}catch{}})()},[]);const he=c=>{try{if(!c)return"";const E=new Date(c);return isNaN(E)?"":E.toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"})}catch{return""}},Te=()=>{if(S!=null&&S.name){const c=S.name.split(" ");return c.length>=2?`${c[0][0]}${c[c.length-1][0]}`.toUpperCase():c[0][0].toUpperCase()}return S!=null&&S.email?S.email[0].toUpperCase():"U"},Se=()=>{h(!ae)},te=()=>{$(),h(!1),s("home")};o.useEffect(()=>{const c=j=>{ae&&!j.target.closest(".profile-dropdown")&&h(!1)},E=j=>{j.key==="Escape"&&ae&&h(!1)};return document.addEventListener("mousedown",c),document.addEventListener("keydown",E),()=>{document.removeEventListener("mousedown",c),document.removeEventListener("keydown",E)}},[ae]);const de=[{id:"home",icon:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})})},{id:"breach",icon:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})},{id:"scam",icon:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})},{id:"learn",icon:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})}),label:"Learning Hub"},{id:"community",icon:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})})},{id:"chat",icon:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})})},{id:"admin",icon:e.jsxs("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756 2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a0 3 3 0 11-6 0 3 3 0 016 0z"})]}),label:"Admin"}],Re=async()=>{if(!x||!x.includes("@")){O("Please enter a valid email address");return}I(!0),O(""),f(null);try{const c=await _e(pe.BREACH,{email:x}),E=await c.json();c.ok?f(E):O(E.error||"Failed to check for breaches")}catch(c){console.error("Breach check error:",c),O("We couldn't reach the breach service. Please check your connection and try again.")}finally{I(!1)}},v=c=>{console.log("Generated password:",c),g(!1)},[Z,C]=o.useState(""),[A,V]=o.useState("message"),[p,G]=o.useState(null),[N,b]=o.useState(!1),[T,P]=o.useState(""),Q=async()=>{if(!Z.trim()){P("Please enter content to analyze");return}b(!0),P(""),G(null);try{let c,E=A,j="";if(A==="link"){const L=/^https?:\/\/[^\s]+$/i,U=/https?:\/\/[^\s]+/gi.test(Z);L.test(Z.trim())?(c=await ge(Z),j="Analyzed as single URL"):U?(c=await Ce(Z),E="message",j="Detected message with URLs - used Enhanced Scam Detection Engine"):(c=await Ce(Z),E="message",j="No URLs detected - analyzed with Enhanced Scam Detection Engine")}else if(A==="email"){const L=/^[^\s]+@[^\s]+\.[^\s]+/i,U=/^(from|to|subject|date):/im.test(Z);L.test(Z.split(`
`)[0])||U?(c=await xe(Z),j="Analyzed as email content"):(c=await Ce(Z),E="message",j="Content doesn't appear to be email - used Enhanced Scam Detection Engine")}else c=await Ce(Z),j="Analyzed with Enhanced Scam Detection Engine";j&&(c.contentTypeNote=j,c.detectedContentType=E),G(c)}catch(c){console.error("Scam analysis error:",c),c.message.includes("Failed to fetch")?P("Unable to connect to security APIs. Please check your internet connection and try again."):c.message.includes("HTTP error")?P("Security service temporarily unavailable. Please try again later."):P("Analysis failed. Please try again.")}finally{b(!1)}},ge=async c=>{var E;try{const j=await fetch(`${$e}/api/link/analyze-url`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:c})});if(!j.ok)throw new Error("Service temporarily unavailable");const L=await j.json();if(!L.success)throw new Error(L.error||"Link analysis failed");const U=L.result;return{riskLevel:((E=U.risk_level)==null?void 0:E.toLowerCase())||"medium",riskScore:U.risk_score||50,indicators:U.indicators||[],recommendations:U.recommendations||["Be cautious of this link","Verify the destination before clicking","Check for HTTPS and legitimate domain"],analysis:c.substring(0,100)+(c.length>100?"...":""),linkDetails:U}}catch(j){return console.error("Link analysis error:",j),ye(c,"link")}},xe=async c=>{var E;try{const j=await fetch(`${$e}/api/enhanced-scam/analyze`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:c})});if(!j.ok)throw new Error("Service temporarily unavailable");const L=await j.json();if(!L.success)throw new Error(L.error||"Email analysis failed");const U=L.result;return{riskLevel:((E=U.risk_level)==null?void 0:E.toLowerCase())||"medium",riskScore:Math.round(U.risk_score*100)||50,indicators:U.indicators||[],recommendations:He(U.risk_level,U.indicators),analysis:c.substring(0,100)+(c.length>100?"...":""),emailDetails:U}}catch(j){return console.error("Email analysis error:",j),ye(c,"email")}},He=(c,E)=>{const j=[];return c==="SCAM"?(j.push("Do not respond to this email"),j.push("Delete immediately and contact Remaleh Guardians"),j.push("Do not click any links or attachments"),j.push("If you clicked any links, reach out to Remaleh Guardians via chat immediately")):c==="SUSPICIOUS"?(j.push("Exercise extreme caution with this email"),j.push("Verify sender authenticity before responding"),j.push("Do not share personal information"),j.push("Contact Remaleh Guardians if you need assistance")):(j.push("Review this email carefully"),j.push("Check sender authenticity"),j.push("Avoid clicking suspicious links")),E.some(L=>L.includes("financial"))&&(j.push("Never send money or financial information via email"),j.push("Contact Remaleh Guardians if you have financial concerns")),E.some(L=>L.includes("urgency"))&&j.push("Be cautious of urgent requests - legitimate organizations rarely pressure you"),j},Ce=async c=>{var E;try{const j=await fetch(`${$e}/api/enhanced-scam/analyze`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:c})});if(!j.ok)throw new Error("Service temporarily unavailable");const L=await j.json();if(!L.success)throw new Error(L.error||"Enhanced scam analysis failed");const U=L.result;return{riskLevel:((E=U.risk_level)==null?void 0:E.toLowerCase())||"medium",riskScore:Math.round(U.risk_score*100)||50,indicators:U.indicators||[],recommendations:Ze(U.risk_level,U.indicators,U.patterns),analysis:c.substring(0,100)+(c.length>100?"...":""),messageDetails:U}}catch(j){return console.error("Enhanced message analysis error:",j),ye(c,"message")}},Ze=(c,E,j)=>{const L=[];return c==="SCAM"?(L.push("Do not respond to this message"),L.push("Delete immediately and contact Remaleh Guardians"),L.push("Do not click any links or attachments"),L.push("If you clicked any links, reach out to Remaleh Guardians via chat immediately")):c==="SUSPICIOUS"?(L.push("Exercise extreme caution with this message"),L.push("Verify authenticity before responding"),L.push("Do not share personal information"),L.push("Contact Remaleh Guardians if you need assistance")):c==="SAFE"?(L.push("Content appears safe - no obvious threats detected"),L.push("Continue to exercise normal caution"),L.push("If you have concerns, contact Remaleh Guardians via chat")):(L.push("Review this message carefully"),L.push("Check sender authenticity"),L.push("Avoid clicking suspicious links")),j&&j.includes("suspicious_domain")&&L.push("Contains suspicious domain (.buzz, .tk, etc.) - high risk"),j&&j.includes("url")&&L.push("Contains URLs - verify before clicking"),j&&j.includes("phone_number")&&L.push("Contains phone numbers - do not call unknown numbers"),L.some(je=>je.includes("Remaleh Guardians"))||L.push("Contact Remaleh Guardians via chat for immediate assistance"),[...new Set(L)]},ye=(c,E)=>{const j={urgency:/(urgent|immediate|now|quick|fast|hurry|deadline|limited time|expires|last chance)/gi,money:/(\$[\d,]+|money|payment|bank|account|credit card|paypal|bitcoin|crypto|investment|profit|return)/gi,personal:/(password|login|verify|confirm|update|social security|ssn|birthday|address|phone)/gi,threats:/(suspended|blocked|locked|deleted|expired|legal action|police|fbi|irs|tax)/gi,suspicious:/(click here|verify now|login|password|bank|urgent|free|winner|prize|lottery)/gi},L={};let U=0;Object.entries(j).forEach(([we,Ae])=>{const be=c.match(Ae);be&&(L[we]=be.length,U+=be.length*2)}),E==="link"&&((c.includes("bit.ly")||c.includes("tinyurl"))&&(U+=5),c.includes("http://")&&!c.includes("https://")&&(U+=3)),E==="email"&&c.includes("@")&&!c.includes("@gmail.com")&&!c.includes("@yahoo.com")&&(U+=2);const je=U<10?"safe":U<20?"suspicious":"scam";return{riskLevel:je,riskScore:U,indicators:L,recommendations:Ye(je,L,E),analysis:c.substring(0,100)+(c.length>100?"...":"")}},Ye=(c,E,j)=>{const L=[];return c==="scam"&&(L.push("Do not click any links or provide personal information"),L.push("Contact Remaleh Guardians immediately"),L.push("Delete the message immediately"),L.push("If you clicked any links, reach out to Remaleh Guardians via chat")),E.urgency&&L.push("Be cautious of urgent requests - legitimate organizations rarely pressure you"),E.money&&L.push("Never send money to unknown sources or for urgent requests"),E.personal&&L.push("Never share passwords, SSN, or other sensitive information via message"),j==="link"&&(L.push("Hover over links to verify the actual destination"),L.push("Use link scanning tools before clicking")),L.some(je=>je.includes("Remaleh Guardians"))||L.push("Contact Remaleh Guardians via chat for immediate assistance"),[...new Set(L)]},ue=()=>{switch(t){case"home":return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-3xl font-bold text-black mb-2",children:a}),e.jsx("p",{className:"text-gray-600",children:"Welcome to Remaleh Protect"})]}),e.jsx("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-gray-100",children:e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"flex gap-4 overflow-x-auto pb-4 scrollbar-hide",children:[(n.length>0?n:[]).map((c,E)=>e.jsxs("a",{href:c.link||"https://www.remaleh.com.au/blog",target:"_blank",rel:"noopener noreferrer",className:"flex-shrink-0 w-80 bg-white rounded-xl border border-gray-200 overflow-hidden hover:shadow-md transition-all duration-200",children:[c.image&&e.jsx("img",{src:c.image,alt:c.title||"Blog image",className:"w-full h-40 object-cover",onError:j=>{j.currentTarget.style.display="none"}}),e.jsxs("div",{className:"p-4",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-1 line-clamp-2",children:c.title}),c.excerpt&&e.jsx("p",{className:"text-gray-600 text-sm mb-3 line-clamp-3",children:c.excerpt}),e.jsx("div",{className:"flex items-center text-xs text-gray-500",children:e.jsx("span",{children:he(c.pubDate)})})]})]},`${c.link||E}`)),n.length===0&&e.jsx("a",{href:"https://www.remaleh.com.au/blog",target:"_blank",rel:"noopener noreferrer",className:"flex-shrink-0 w-80 bg-white rounded-xl border border-gray-200 overflow-hidden hover:shadow-md transition-all duration-200",children:e.jsx("div",{className:"p-4",children:e.jsxs("div",{className:"flex items-start justify-between h-full",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Visit the Remaleh Blog"}),e.jsx("span",{className:"text-gray-500 text-xs",children:"Latest insights and security tips"})]}),e.jsx("div",{className:"text-blue-400 ml-3",children:e.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10.293 3.293a1 1 0 011.414 0L17 8.586a1 1 0 010 1.414l-5.293 5.293a1 1 0 01-1.414-1.414L13.586 10H4a1 1 0 110-2h9.586l-3.293-3.293a1 1 0 010-1.414z",clipRule:"evenodd"})})})]})})})]}),e.jsx("div",{className:"flex justify-center mt-4 space-x-2",children:[1,2,3,4,5].map((c,E)=>e.jsx("div",{className:"w-2 h-2 rounded-full bg-gray-300"},E))})]})}),e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsx("div",{onClick:()=>s("breach"),className:"bg-white rounded-2xl p-5 shadow-sm border border-gray-100 hover:shadow-md transition-shadow cursor-pointer",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-12 h-12 bg-[#21a1ce] rounded-xl flex items-center justify-center mr-4",children:e.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-semibold text-black mb-1",children:"Breach Check"}),e.jsx("p",{className:"text-gray-600 text-sm",children:"Check if your email has been compromised in data breaches"})]}),e.jsx("div",{className:"text-gray-400",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]})}),e.jsx("div",{onClick:()=>s("scam"),className:"bg-white rounded-2xl p-5 shadow-sm border border-gray-100 hover:shadow-md transition-shadow cursor-pointer",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-12 h-12 bg-[#21a1ce] rounded-xl flex items-center justify-center mr-4",children:e.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-semibold text-black mb-1",children:"Scam Analysis"}),e.jsx("p",{className:"text-gray-600 text-sm",children:"Analyze suspicious messages and links for potential scams"})]}),e.jsx("div",{className:"text-gray-400",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]})}),e.jsx("div",{onClick:()=>s("learn"),className:"bg-white rounded-2xl p-5 shadow-sm border border-gray-100 hover:shadow-md transition-shadow cursor-pointer",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-12 h-12 bg-[#21a1ce] rounded-xl flex items-center justify-center mr-4",children:e.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-semibold text-black mb-1",children:"Learning Hub"}),e.jsx("p",{className:"text-gray-600 text-sm",children:"Learn how to stay safe online, the easy way."})]}),e.jsx("div",{className:"text-gray-400",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]})}),e.jsx("div",{onClick:()=>s("community"),className:"bg-white rounded-2xl p-5 shadow-sm border border-gray-100 hover:shadow-md transition-shadow cursor-pointer",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-12 h-12 bg-[#21a1ce] rounded-xl flex items-center justify-center mr-4",children:e.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-semibold text-black mb-1",children:"Community"}),e.jsx("p",{className:"text-gray-600 text-sm",children:"Report scams. Protect your community."})]}),e.jsx("div",{className:"text-gray-400",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]})}),e.jsx("div",{onClick:()=>s("chat"),className:"bg-white rounded-2xl p-5 shadow-sm border border-gray-100 hover:shadow-md transition-shadow cursor-pointer",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-12 h-12 bg-[#21a1ce] rounded-xl flex items-center justify-center mr-4",children:e.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-semibold text-black mb-1",children:"Chat"}),e.jsx("p",{className:"text-gray-600 text-sm",children:"Chat with our Cyber Assistant and a Remaleh Guardian’s just a message away"})]}),e.jsx("div",{className:"text-gray-400",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]})})]})]});case"breach":return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-gray-100",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"flex justify-center mb-3",children:e.jsx("div",{className:"w-10 h-10 bg-[#21a1ce] rounded-lg flex items-center justify-center",children:e.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})})}),e.jsx("h1",{className:"text-2xl font-bold text-black mb-2",children:"Breach Checker"}),e.jsx("p",{className:"text-gray-600 text-sm",children:"Check if your email has been compromised"})]})}),e.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-gray-100",children:[e.jsx("h2",{className:"text-lg font-semibold text-black mb-4",children:"Check Your Email"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("svg",{className:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 12a4 4 0 10-8 0 4 4 0 008 0zm0 0v1.5a2.5 2.5 0 005 0V12a9 9 0 10-9 9m4.5-1.206a8.959 8.959 0 01-4.5 1.207"})})}),e.jsx("input",{type:"email",id:"email",value:x,onChange:c=>y(c.target.value),onKeyDown:c=>{c.key==="Enter"&&!k&&x&&x.includes("@")&&Re()},placeholder:"Enter your email address",className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-[#21a1ce] focus:border-transparent transition-all duration-200",disabled:k})]})]}),F&&e.jsx("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("svg",{className:"w-5 h-5 text-red-600 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})}),e.jsx("span",{className:"text-red-800 text-sm",children:F})]})}),e.jsx("button",{onClick:Re,disabled:k||!x,className:"w-full bg-[#21a1ce] text-white py-3 px-6 rounded-xl font-medium hover:bg-[#1a8bb8] transition-all duration-200 shadow-sm hover:shadow-md flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed",children:k?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Checking..."]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),"Check for Breaches"]})})]})]}),M&&e.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-gray-100",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[M.breached?e.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-xl flex items-center justify-center mr-4",children:e.jsx("svg",{className:"w-6 h-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}):e.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-xl flex items-center justify-center mr-4",children:e.jsx("svg",{className:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h2",{className:"text-xl font-bold text-black",children:M.breached?"Breaches Found":"No Breaches Detected"}),e.jsx("p",{className:"text-gray-600",children:M.breached?`${M.breach_count} breach(es) found`:"Your email is secure"}),e.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Checked: ",x]})]})]}),e.jsx("div",{className:"mb-4",children:e.jsx("p",{className:`text-lg ${M.breached?"text-red-700":"text-green-700"}`,children:M.message})}),M.breached&&M.breaches&&M.breaches.length>0&&e.jsxs("div",{className:"space-y-3",children:[e.jsx("h3",{className:"font-semibold text-gray-800",children:"Affected Services:"}),M.breaches.map((c,E)=>e.jsx("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-medium text-red-800 mb-1",children:c.name}),e.jsx("p",{className:"text-red-700 text-sm mb-2",children:c.domain}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs("span",{className:"text-red-600 text-xs",children:["Breached: ",c.date]}),e.jsx("span",{className:"text-red-600 text-xs",children:"•"}),e.jsx("span",{className:"text-red-600 text-xs",children:c.data.join(", ")})]})]}),e.jsx("div",{className:"text-red-400 ml-3",children:e.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})})]})},E))]}),M.demo_mode&&e.jsx("div",{className:"mt-4 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("svg",{className:"w-5 h-5 text-blue-600 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("span",{className:"text-blue-800 text-sm",children:"Demo mode - Results are simulated for testing purposes"})]})}),e.jsxs("div",{className:"mt-6 pt-4 border-t border-gray-200",children:[e.jsx("h3",{className:"text-lg font-semibold text-black mb-4",children:"Security Recommendations"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-lg",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center mr-3 flex-shrink-0",children:e.jsx("svg",{className:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-medium text-blue-800 mb-1",children:"Enable Multi-Factor Authentication (MFA)"}),e.jsx("p",{className:"text-blue-700 text-sm mb-3",children:"Add an extra layer of security to your accounts with MFA apps like Google Authenticator, Authy, or Microsoft Authenticator."}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-700 text-xs rounded-full",children:"Google Authenticator"}),e.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-700 text-xs rounded-full",children:"Authy"}),e.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-700 text-xs rounded-full",children:"Microsoft Authenticator"})]})]})]})}),e.jsx("div",{className:"p-4 bg-green-50 border border-green-200 rounded-lg",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center mr-3 flex-shrink-0",children:e.jsx("svg",{className:"w-5 h-5 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-medium text-green-800 mb-1",children:"Use Strong, Unique Passwords"}),e.jsx("p",{className:"text-green-700 text-sm mb-3",children:"Generate secure passwords for each account to prevent credential stuffing attacks."}),e.jsxs("button",{onClick:()=>g(!0),className:"inline-flex items-center px-3 py-2 bg-green-600 text-white text-sm font-medium rounded-lg hover:bg-green-700 transition-colors",children:[e.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),"Generate Secure Password"]})]})]})}),e.jsx("div",{className:"p-4 bg-purple-50 border border-purple-200 rounded-lg",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"w-10 h-10 bg-purple-100 rounded-lg flex items-center justify-center mr-3 flex-shrink-0",children:e.jsx("svg",{className:"w-5 h-5 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-medium text-purple-800 mb-1",children:"Monitor Your Accounts Regularly"}),e.jsx("p",{className:"text-purple-700 text-sm mb-3",children:"Use Remaleh Protect regularly to check for new breaches and stay updated on security threats."}),e.jsxs("div",{className:"flex items-center text-purple-600 text-sm",children:[e.jsx("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Check back monthly for new breaches"]})]})]})}),e.jsx("div",{className:"p-4 bg-orange-50 border border-orange-200 rounded-lg",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"w-10 h-10 bg-orange-100 rounded-lg flex items-center justify-center mr-3 flex-shrink-0",children:e.jsx("svg",{className:"w-5 h-5 text-orange-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-medium text-orange-800 mb-1",children:"Use a Password Manager"}),e.jsx("p",{className:"text-orange-700 text-sm mb-3",children:"Store and manage your passwords securely with trusted password managers."}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx("span",{className:"px-2 py-1 bg-orange-100 text-orange-700 text-xs rounded-full",children:"Bitwarden"}),e.jsx("span",{className:"px-2 py-1 bg-orange-100 text-orange-700 text-xs rounded-full",children:"1Password"}),e.jsx("span",{className:"px-2 py-1 bg-orange-100 text-orange-700 text-xs rounded-full",children:"LastPass"}),e.jsx("span",{className:"px-2 py-1 bg-orange-100 text-orange-700 text-xs rounded-full",children:"Dashlane"})]})]})]})})]})]}),e.jsx("div",{className:"mt-6 pt-4 border-t border-gray-200",children:e.jsx("button",{onClick:()=>{y(""),f(null),O("")},className:"w-full bg-gray-100 text-gray-700 py-3 px-6 rounded-xl font-medium hover:bg-gray-200 transition-all duration-200",children:"Check Another Email"})})]}),e.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-gray-100",children:[e.jsx("h2",{className:"text-lg font-semibold text-black mb-4",children:"How It Works"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"text-center p-4",children:[e.jsx("div",{className:"w-12 h-12 bg-[#21a1ce] bg-opacity-10 rounded-xl flex items-center justify-center mx-auto mb-3",children:e.jsx("span",{className:"text-[#21a1ce] font-bold text-lg",children:"1"})}),e.jsx("h3",{className:"font-medium text-gray-800 mb-2",children:"Enter Email"}),e.jsx("p",{className:"text-gray-600 text-sm",children:"Provide your email address securely"})]}),e.jsxs("div",{className:"text-center p-4",children:[e.jsx("div",{className:"w-12 h-12 bg-[#21a1ce] bg-opacity-10 rounded-xl flex items-center justify-center mx-auto mb-3",children:e.jsx("span",{className:"text-[#21a1ce] font-bold text-lg",children:"2"})}),e.jsx("h3",{className:"font-medium text-gray-800 mb-2",children:"Scan Database"}),e.jsx("p",{className:"text-gray-600 text-sm",children:"We check against known breaches"})]}),e.jsxs("div",{className:"text-center p-4",children:[e.jsx("div",{className:"w-12 h-12 bg-[#21a1ce] bg-opacity-10 rounded-xl flex items-center justify-center mx-auto mb-3",children:e.jsx("span",{className:"text-[#21a1ce] font-bold text-lg",children:"3"})}),e.jsx("h3",{className:"font-medium text-gray-800 mb-2",children:"Get Results"}),e.jsx("p",{className:"text-gray-600 text-sm",children:"Instant results and recommendations"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-gray-100",children:[e.jsx("h2",{className:"text-lg font-semibold text-black mb-4",children:"Security Features"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center p-3 bg-green-50 rounded-lg border border-green-200",children:[e.jsx("svg",{className:"w-5 h-5 text-green-600 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("span",{className:"text-green-800 text-sm",children:"Your data is never stored or shared"})]}),e.jsxs("div",{className:"flex items-center p-3 bg-blue-50 rounded-lg border border-blue-200",children:[e.jsx("svg",{className:"w-5 h-5 text-blue-600 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),e.jsx("span",{className:"text-blue-800 text-sm",children:"Real-time breach database updates"})]}),e.jsxs("div",{className:"flex items-center p-3 bg-purple-50 rounded-lg border border-purple-200",children:[e.jsx("svg",{className:"w-5 h-5 text-purple-600 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})}),e.jsx("span",{className:"text-purple-800 text-sm",children:"Instant results and notifications"})]})]})]})]});case"scam":return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-gray-100",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"flex justify-center mb-3",children:e.jsx("div",{className:"w-10 h-10 bg-[#21a1ce] rounded-lg flex items-center justify-center",children:e.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})})}),e.jsx("h1",{className:"text-2xl font-bold text-black mb-2",children:"Scam Analysis"}),e.jsx("p",{className:"text-gray-600 text-sm",children:"Analyze suspicious content for potential scams"})]}),e.jsxs("div",{className:"flex items-center justify-center space-x-2 text-sm mt-2",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),e.jsx("span",{className:"text-gray-600",children:"Connected to Remaleh Protect Security Engine"}),e.jsx("button",{onClick:async()=>{try{const c=await fetch(`${$e}/api/security/status`);if(c.ok){const E=await c.json();console.log("Security Engine Status:",E),alert(`Security Engine Status: ${E.status}
Version: ${E.version}
Services: ${Object.keys(E.available_services).length} available`)}}catch(c){console.error("Status check failed:",c),alert("Unable to check Security Engine status")}},className:"ml-2 text-xs text-[#21a1ce] hover:text-[#1a8bb8] underline cursor-pointer",children:"Check Status"})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-gray-100",children:[e.jsx("h2",{className:"text-lg font-semibold text-black mb-4",children:"Analyze Content"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Content Type"}),e.jsx("div",{className:"grid grid-cols-3 gap-3",children:[{id:"message",label:"Message",icon:"💬"},{id:"link",label:"Link",icon:"🔗"},{id:"email",label:"Email",icon:"📧"}].map(c=>e.jsx("button",{onClick:()=>V(c.id),className:`p-3 rounded-xl border-2 transition-all duration-200 ${A===c.id?"border-[#21a1ce] bg-[#21a1ce] bg-opacity-10":"border-gray-200 hover:border-gray-300"}`,children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl mb-1",children:c.icon}),e.jsx("div",{className:"text-sm font-medium text-gray-700",children:c.label})]})},c.id))})]}),A==="email"?e.jsx("div",{className:"space-y-3",children:R?e.jsxs("div",{className:"p-3 bg-gray-50 border border-gray-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-gray-700",children:[e.jsx("span",{className:"font-medium",children:"Forward emails for analysis:"}),e.jsx("div",{className:"mt-1 select-all break-all",children:w||"Generating..."})]}),e.jsx("button",{onClick:()=>{w&&navigator.clipboard.writeText(w).then(()=>{H(!0),setTimeout(()=>H(!1),1500)})},className:"ml-3 text-xs bg-[#21a1ce] text-white px-3 py-2 rounded-lg hover:bg-[#1a8bb8]",children:z?"Copied":"Copy"})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Forward suspicious emails (including attachments) to this address. We’ll analyze them and show results below."})]}):e.jsx("p",{className:"text-sm text-gray-600",children:"Sign in to get your personal forwarding address."})}):e.jsxs("div",{children:[e.jsx("label",{htmlFor:"scamInput",className:"block text-sm font-medium text-gray-700 mb-2",children:A==="message"?"Message Content":"URL or Link"}),e.jsxs("div",{className:"relative",children:[A==="link"?e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("svg",{className:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})})}):e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("svg",{className:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})})}),e.jsx("textarea",{id:"scamInput",value:Z,onChange:c=>C(c.target.value),placeholder:A==="message"?"Paste the suspicious message here...":"Enter the URL or link to analyze...",rows:4,className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-[#21a1ce] focus:border-transparent transition-all duration-200 resize-none",disabled:N})]})]}),T&&e.jsx("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("svg",{className:"w-5 h-5 text-red-600 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})}),e.jsx("span",{className:"text-red-800 text-sm",children:T})]})}),A!=="email"&&e.jsx("button",{onClick:Q,disabled:N||!Z.trim(),className:"w-full bg-[#21a1ce] text-white py-3 px-6 rounded-xl font-medium hover:bg-[#1a8bb8] transition-all duration-200 shadow-sm hover:shadow-md flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed",children:N?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Analyzing with ",A==="link"?"Link Analysis Engine":"Comprehensive Scam Analysis Engine","..."]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),"Analyze for Scams"]})})]}),e.jsx("div",{className:"mt-3 text-center",children:e.jsx("p",{className:"text-xs text-gray-500",children:"Sometimes our scanners miss the mark, so double check to stay safe."})})]}),p&&e.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-gray-100",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center mr-4 ${p.riskLevel==="scam"?"bg-red-100":p.riskLevel==="suspicious"?"bg-yellow-100":(p.riskLevel==="safe","bg-green-100")}`,children:e.jsx("svg",{className:`w-6 h-6 ${p.riskLevel==="scam"?"text-red-600":p.riskLevel==="suspicious"?"text-yellow-600":(p.riskLevel==="safe","text-green-600")}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl font-bold text-black",children:["Risk Level: ",p.riskLevel==="safe"?"Safe ✅":p.riskLevel==="scam"?"Scam 🚨":p.riskLevel==="suspicious"?"Suspicious ⚠️":p.riskLevel.charAt(0).toUpperCase()+p.riskLevel.slice(1),p.riskLevel==="scam"?" - IMMEDIATE ACTION REQUIRED":"",p.riskLevel==="safe"?" - No threats detected":"",p.riskLevel==="suspicious"?" - Exercise caution":""]}),e.jsxs("p",{className:"text-gray-600",children:["Risk Score: ",p.riskScore,"/100",p.riskScore>=70?" - IMMEDIATE ACTION REQUIRED":"",p.riskLevel==="safe"?" - Content appears safe":"",p.riskLevel==="suspicious"?" - Review carefully":""]}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Analyzed with ",A==="link"?"Link Analysis Engine":A==="email"?"Enhanced Scam Detection Engine":"Comprehensive Scam Analysis Engine"]}),p.contentTypeNote&&e.jsx("div",{className:"mt-2 p-2 bg-blue-50 rounded-lg border border-blue-200",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("svg",{className:"w-4 h-4 text-blue-600 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsxs("span",{className:"text-blue-800 text-xs",children:[e.jsx("strong",{children:"Content Detection:"})," ",p.contentTypeNote]})]})})]})]}),(p.riskLevel==="scam"||p.riskScore>=70)&&e.jsxs("div",{className:"mb-4 p-4 bg-red-50 border-2 border-red-300 rounded-xl",children:[e.jsxs("div",{className:"flex items-center mb-3",children:[e.jsx("svg",{className:"w-6 h-6 text-red-600 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})}),e.jsx("h3",{className:"text-lg font-bold text-red-800",children:"🚨 SCAM DETECTED"})]}),e.jsxs("div",{className:"space-y-2 text-red-700",children:[e.jsx("p",{className:"font-medium",children:"This content shows multiple signs of being a scam:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1 text-sm",children:[p.riskLevel==="scam"&&e.jsx("li",{children:"Scam risk level - immediate action required"}),p.riskScore>=70&&e.jsxs("li",{children:["Very high risk score (",p.riskScore,"/100)"]}),p.indicators&&p.indicators.length>0&&e.jsx("li",{children:"Multiple suspicious indicators detected"}),e.jsx("li",{children:"Do NOT click any links or respond to this message"}),e.jsx("li",{children:"Contact Remaleh Guardians via chat immediately"})]})]})]}),p.riskLevel==="suspicious"&&e.jsxs("div",{className:"mb-4 p-4 bg-yellow-50 border-2 border-yellow-300 rounded-xl",children:[e.jsxs("div",{className:"flex items-center mb-3",children:[e.jsx("svg",{className:"w-6 h-6 text-yellow-600 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})}),e.jsx("h3",{className:"text-lg font-bold text-yellow-800",children:"⚠️ SUSPICIOUS CONTENT DETECTED"})]}),e.jsxs("div",{className:"space-y-2 text-yellow-700",children:[e.jsx("p",{className:"font-medium",children:"This content shows some concerning signs:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1 text-sm",children:[e.jsx("li",{children:"Exercise caution with this content"}),e.jsx("li",{children:"Verify authenticity before responding"}),e.jsx("li",{children:"Do not share personal information"}),e.jsx("li",{children:"Contact Remaleh Guardians via chat if you need assistance"})]})]})]}),p.riskLevel==="safe"&&e.jsxs("div",{className:"mb-4 p-4 bg-green-50 border-2 border-green-300 rounded-xl",children:[e.jsxs("div",{className:"flex items-center mb-3",children:[e.jsx("svg",{className:"w-6 h-6 text-green-600 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("h3",{className:"text-lg font-bold text-green-800",children:"✅ CONTENT APPEARS SAFE"})]}),e.jsxs("div",{className:"space-y-2 text-green-700",children:[e.jsx("p",{className:"font-medium",children:"This content shows no obvious signs of being a scam:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1 text-sm",children:[e.jsxs("li",{children:["Low risk score (",p.riskScore,"/100)"]}),e.jsx("li",{children:"No suspicious patterns detected"}),e.jsx("li",{children:"Continue to exercise normal caution"}),e.jsx("li",{children:"If you have concerns, contact Remaleh Guardians via chat"})]})]})]}),p.indicators&&e.jsxs("div",{className:"mb-4",children:[e.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Detected Indicators:"}),Object.keys(p.indicators).length>0&&!Array.isArray(p.indicators)&&e.jsx("div",{className:"grid grid-cols-2 gap-2",children:Object.entries(p.indicators).map(([c,E])=>e.jsx("div",{className:"p-2 bg-gray-50 rounded-lg border border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700 capitalize",children:c.replace(/([A-Z])/g," $1").trim()}),e.jsx("span",{className:"text-xs bg-[#21a1ce] text-white px-2 py-1 rounded-full",children:E})]})},c))}),Array.isArray(p.indicators)&&p.indicators.length>0&&e.jsx("div",{className:"space-y-2",children:p.indicators.map((c,E)=>e.jsx("div",{className:"p-3 bg-yellow-50 rounded-lg border border-yellow-200",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("svg",{className:"w-4 h-4 text-yellow-600 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})}),e.jsx("span",{className:"text-yellow-800 text-sm",children:c})]})},E))}),(!p.indicators||Array.isArray(p.indicators)&&p.indicators.length===0||!Array.isArray(p.indicators)&&Object.keys(p.indicators).length===0)&&e.jsx("div",{className:"p-3 bg-green-50 rounded-lg border border-green-200",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("svg",{className:"w-4 h-4 text-green-600 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("span",{className:"text-green-800 text-sm",children:"No suspicious indicators detected"})]})})]}),p.linkDetails&&e.jsxs("div",{className:"mb-4",children:[e.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Link Analysis Details:"}),e.jsx("div",{className:"space-y-2",children:p.linkDetails.indicators&&p.linkDetails.indicators.map((c,E)=>e.jsx("div",{className:"p-2 bg-yellow-50 rounded-lg border border-yellow-200",children:e.jsx("span",{className:"text-yellow-800 text-sm",children:c})},E))})]}),p.emailDetails&&e.jsxs("div",{className:"mb-4",children:[e.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Email Analysis Details:"}),e.jsx("div",{className:"space-y-2",children:p.emailDetails.scam_categories&&p.emailDetails.scam_categories.map((c,E)=>e.jsx("div",{className:"p-2 bg-purple-50 rounded-lg border border-purple-200",children:e.jsx("span",{className:"text-purple-800 text-sm",children:c})},E))})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Security Recommendations:"}),e.jsx("div",{className:"space-y-2",children:p.recommendations.map((c,E)=>e.jsxs("div",{className:"flex items-start p-3 bg-blue-50 rounded-lg border border-blue-200",children:[e.jsx("svg",{className:"w-4 h-4 text-blue-600 mr-2 mt-0.5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("span",{className:"text-blue-800 text-sm",children:c})]},E))})]}),e.jsx("div",{className:"pt-4 border-t border-gray-200",children:e.jsx("button",{onClick:()=>{C(""),G(null),P("")},className:"w-full bg-gray-100 text-gray-700 py-3 px-6 rounded-xl font-medium hover:bg-gray-200 transition-all duration-200",children:"Analyze Another Item"})})]}),R&&A==="email"&&e.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-gray-100",children:[e.jsx("h3",{className:"text-lg font-semibold text-black mb-3",children:"Recently forwarded emails"}),ne.length===0?e.jsx("p",{className:"text-sm text-gray-500",children:"No forwarded emails analyzed yet."}):e.jsx("div",{className:"space-y-2",children:ne.map(c=>{var E;return e.jsxs("div",{className:"flex items-center justify-between p-3 border border-gray-200 rounded-lg",children:[e.jsxs("div",{className:"mr-3 flex-1 min-w-0",children:[e.jsx("div",{className:"text-sm font-medium text-gray-800 truncate",children:c.subject||"Email"}),e.jsxs("div",{className:"text-xs text-gray-500 flex items-center gap-2",children:[e.jsx("span",{children:(E=c.scanned_at)==null?void 0:E.replace("T"," ").slice(0,16)}),typeof c.attachments=="number"&&e.jsxs("span",{children:["• ",c.attachments," attachment",c.attachments===1?"":"s"]})]}),c.preview&&e.jsx("div",{className:"text-xs text-gray-600 mt-1 line-clamp-2",children:c.preview}),Array.isArray(c.indicators)&&c.indicators.length>0&&e.jsx("div",{className:"mt-1 flex flex-wrap gap-1",children:c.indicators.map((j,L)=>e.jsx("span",{className:"text-[10px] px-2 py-0.5 rounded-full bg-yellow-100 text-yellow-700",children:j},L))}),Array.isArray(c.recommendations)&&c.recommendations.length>0&&e.jsx("ul",{className:"mt-2 list-disc list-inside text-[11px] text-gray-600 space-y-0.5",children:c.recommendations.map((j,L)=>e.jsx("li",{children:j},L))})]}),e.jsxs("span",{className:`text-xs px-2 py-1 rounded-full ${c.risk_level==="SCAM"?"bg-red-100 text-red-700":c.risk_level==="SUSPICIOUS"?"bg-yellow-100 text-yellow-700":"bg-green-100 text-green-700"}`,children:[c.risk_level," ",typeof c.risk_score=="number"?`(${c.risk_score})`:""]})]},c.id)})})]}),e.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-gray-100",children:[e.jsx("h2",{className:"text-lg font-semibold text-black mb-4",children:"How Scam Analysis Works"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"text-center p-4",children:[e.jsx("div",{className:"w-12 h-12 bg-[#21a1ce] bg-opacity-10 rounded-xl flex items-center justify-center mx-auto mb-3",children:e.jsx("span",{className:"text-[#21a1ce] font-bold text-lg",children:"1"})}),e.jsx("h3",{className:"font-medium text-gray-800 mb-2",children:"Input Content"}),e.jsx("p",{className:"text-gray-600 text-sm",children:"Paste suspicious messages, links, or forward email"})]}),e.jsxs("div",{className:"text-center p-4",children:[e.jsx("div",{className:"w-12 h-12 bg-[#21a1ce] bg-opacity-10 rounded-xl flex items-center justify-center mx-auto mb-3",children:e.jsx("span",{className:"text-[#21a1ce] font-bold text-lg",children:"2"})}),e.jsx("h3",{className:"font-medium text-gray-800 mb-2",children:"AI Analysis"}),e.jsx("p",{className:"text-gray-600 text-sm",children:"Advanced pattern recognition scans for threats"})]}),e.jsxs("div",{className:"text-center p-4",children:[e.jsx("div",{className:"w-12 h-12 bg-[#21a1ce] bg-opacity-10 rounded-xl flex items-center justify-center mx-auto mb-3",children:e.jsx("span",{className:"text-[#21a1ce] font-bold text-lg",children:"3"})}),e.jsx("h3",{className:"font-medium text-gray-800 mb-2",children:"Get Results"}),e.jsx("p",{className:"text-gray-600 text-sm",children:"Risk assessment and security recommendations"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-gray-100",children:[e.jsx("h2",{className:"text-lg font-semibold text-black mb-4",children:"Detection Capabilities"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center p-3 bg-red-50 rounded-lg border border-red-200",children:[e.jsx("svg",{className:"w-5 h-5 text-red-600 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})}),e.jsx("span",{className:"text-red-800 text-sm",children:"Phishing attempts and social engineering"})]}),e.jsxs("div",{className:"flex items-center p-3 bg-yellow-50 rounded-lg border border-yellow-200",children:[e.jsx("svg",{className:"w-5 h-5 text-yellow-600 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})}),e.jsx("span",{className:"text-yellow-800 text-sm",children:"Suspicious links and URLs"})]}),e.jsxs("div",{className:"flex items-center p-3 bg-purple-50 rounded-lg border border-purple-200",children:[e.jsx("svg",{className:"w-5 h-5 text-purple-600 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),e.jsx("span",{className:"text-yellow-800 text-sm",children:"Financial fraud and money scams"})]})]})]})]});case"chat":return e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"bg-white rounded-2xl p-4 shadow-sm border border-gray-100",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-10 h-10 bg-[#21a1ce] bg-opacity-10 rounded-full flex items-center justify-center mx-auto mb-2",children:e.jsx("svg",{className:"w-5 h-5 text-[#21a1ce]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})})}),e.jsx("p",{className:"text-gray-600 text-sm mb-2",children:"Your AI cybersecurity assistant for instant help and guidance"}),e.jsx("div",{className:"bg-[#21a1ce] bg-opacity-10 px-3 py-2 rounded-lg border border-[#21a1ce] border-opacity-20 inline-block",children:e.jsxs("p",{className:"text-[#21a1ce] text-xs font-medium",children:["💡 ",e.jsx("strong",{children:"Need human help?"}),' Send "connect me with a Remaleh Guardian"']})})]})}),e.jsx("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100",children:e.jsx(Gt,{setActiveTab:s})})]});case"learn":return e.jsx(na,{setActiveTab:s});case"admin":return e.jsx(fa,{setActiveTab:s});case"login":return e.jsx(ia,{onLoginSuccess:()=>s("home"),onSwitchToRegister:()=>s("register")});case"register":return e.jsx(ja,{onRegisterSuccess:()=>s("home"),onSwitchToLogin:()=>s("login")});case"profile":return e.jsx(ya,{setActiveTab:s});case"community":return e.jsx(ca,{setActiveTab:s});case"community_reports":return e.jsx(da,{setActiveTab:s});default:return e.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-gray-100",children:[e.jsx("h1",{className:"text-2xl font-bold text-black mb-4",children:"Welcome to Remaleh Protect"}),e.jsx("p",{className:"text-gray-700",children:"Your digital security companion"})]})}};return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("header",{className:"bg-[#21a1ce] px-6 py-4",style:{paddingTop:"env(safe-area-inset-top)"},children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex-1 text-center",children:e.jsx("img",{src:"/Remaleh-logo-full-2.jpg",alt:"Remaleh",className:"h-8 w-auto mx-auto"})}),e.jsxs("div",{className:"relative",children:[e.jsx("button",{onClick:Se,className:"w-8 h-8 bg-white rounded-full flex items-center justify-center shadow-sm hover:shadow-md transition-all duration-200 cursor-pointer",children:R?e.jsx("span",{className:"text-[#21a1ce] font-semibold text-sm",children:Te()}):e.jsx("svg",{className:"w-4 h-4 text-[#21a1ce]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 7a4 4 0 10-4 4m6 0a6 6 0 11-12 0 6 6 0 0112 0zm-3 4l6 6m0 0h-3m3 0v-3"})})}),ae&&e.jsx("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-xl shadow-lg border border-gray-200 py-2 z-50 profile-dropdown",children:R?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"px-4 py-2 border-b border-gray-100",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:(S==null?void 0:S.name)||"User"}),e.jsx("p",{className:"text-xs text-gray-500",children:S==null?void 0:S.email})]}),e.jsx("button",{onClick:()=>s("profile"),className:"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 transition-colors",children:"Profile Settings"}),((S==null?void 0:S.is_admin)||(S==null?void 0:S.role)==="ADMIN"||(S==null?void 0:S.role)==="MODERATOR")&&e.jsx("button",{onClick:()=>{s("admin"),h(!1)},className:"w-full text-left px-4 py-2 text-sm text-purple-700 hover:bg-purple-50 transition-colors border-t border-gray-100 bg-purple-50",children:e.jsxs("div",{className:"flex items-center",children:[e.jsxs("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756 2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a0 3 3 0 11-6 0 3 3 0 016 0z"})]}),(S==null?void 0:S.role)==="MODERATOR"&&!(S!=null&&S.is_admin)?"Go to Moderator Dashboard":"Go to Admin Dashboard"]})}),e.jsx("button",{onClick:te,className:"w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-red-50 transition-colors",children:"Sign Out"}),e.jsx("a",{href:"/privacy.html",className:"block w-full text-left px-4 py-2 text-xs text-gray-500 hover:bg-gray-50 transition-colors border-t border-gray-100",children:"Privacy Policy"})]}):e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>{s("login"),h(!1)},className:"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 transition-colors",children:"Sign In"}),e.jsx("button",{onClick:()=>{s("register"),h(!1)},className:"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 transition-colors",children:"Create Account"}),e.jsx("a",{href:"/privacy.html",className:"block w-full text-left px-4 py-2 text-xs text-gray-500 hover:bg-gray-50 transition-colors border-t border-gray-100",children:"Privacy Policy"})]})})]})]})}),e.jsx("main",{className:"px-6 py-6 pb-24 max-w-none",children:ue()}),B&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white rounded-2xl max-w-md w-full max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Password Generator"}),e.jsx("button",{onClick:()=>g(!1),className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsx(zt,{onUse:v})]})})}),e.jsx("nav",{className:"fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 px-6 py-4",style:{paddingBottom:"env(safe-area-inset-bottom)"},children:e.jsx("div",{className:"flex justify-around",children:de.filter(c=>c.id==="admin"?(S==null?void 0:S.is_admin)||(S==null?void 0:S.role)==="ADMIN"||(S==null?void 0:S.role)==="MODERATOR":!0).map(c=>e.jsx("button",{onClick:()=>s(c.id),className:`flex items-center justify-center w-12 h-12 rounded-2xl transition-all duration-200 ${t===c.id?"text-[#21a1ce] bg-[#21a1ce] bg-opacity-15 shadow-lg scale-110":"text-gray-500 hover:text-gray-700 hover:bg-gray-100"}`,children:e.jsx("span",{className:"text-2xl",children:c.icon})},c.id))})})]})}Fs.createRoot(document.getElementById("root")).render(e.jsx(ys.StrictMode,{children:e.jsx(ba,{})}));
//# sourceMappingURL=index-ecdc43ad.js.map
