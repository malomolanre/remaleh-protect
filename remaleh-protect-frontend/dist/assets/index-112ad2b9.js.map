{"version":3,"mappings":"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","names":["f","require$$0","k","l","m","n","p","q","c","a","g","b","d","e","h","reactJsxRuntime_production_min","jsxRuntimeModule","client","API","API_ENDPOINTS","apiCall","endpoint","options","token","defaultOptions","response","refreshToken","refreshResponse","access_token","error","apiGet","apiPost","data","apiPut","apiDelete","api","method","url","rest","MobileCard","children","className","padding","shadow","hover","onClick","interactive","props","classes","Component","jsx","MobileCardHeader","MobileCardContent","MobileInput","label","helperText","fullWidth","inputClasses","MobileTextarea","rows","textareaClasses","Button","variant","size","disabled","loading","baseClasses","variants","sizes","jsxs","defaultAttributes","toKebabCase","string","createLucideIcon","iconName","iconNode","forwardRef","color","strokeWidth","absoluteStrokeWidth","ref","createElement","tag","attrs","createLucideIcon$1","AlertTriangle","ArrowLeft","BookOpen","CheckCircle","Flag","Key","Lock","Mail","MessageSquare","PenLine","Plus","RefreshCw","Save","Search","Shield","Star","ThumbsDown","ThumbsUp","Trash2","TrendingUp","Trophy","User","Users","X","DEFAULT_LENGTH","CHARSETS","getRandomValues","len","arr","buildAlphabet","opts","alphabet","generatePassword","length","requiredPools","out","pool","r","remaining","rv","i","idx","estimateEntropy","N","StrengthBar","bits","pct","PasswordGenerator","onUse","setLength","useState","setOpts","value","setValue","copied","setCopied","inputRef","useRef","entropy","useMemo","toggle","key","prev","handleGenerate","password","handleCopy","handleUse","enabled","CYBER_KB","useChatAssistant","chatMessages","setChatMessages","inputMessage","setInputMessage","isTyping","setIsTyping","chatError","setChatError","text","userMessage","messageToProcess","responseFound","source","lowercaseInput","keywords","kbResponse","kbSource","apiResponse","botMessage","errorMessage","ChatAssistant","setActiveTab","formatChatMessage","handleChatSubmit","message","index","MobileButton","variantClasses","sizeClasses","widthClasses","useAuth","user","setUser","isAuthenticated","setIsAuthenticated","isLoading","setIsLoading","setError","refreshAuthToken","useCallback","responseData","newRefreshToken","err","checkAuth","userData","newUser","useEffect","handler","login","email","refresh_token","errorData","register","logout","updateProfile","profileData","updatedUser","changePassword","currentPassword","newPassword","debugUserState","id","moduleId","lessonId","FALLBACK_STORAGE_KEY","getAllModules","forceRefresh","fallbackData","getModuleById","getLessonById","module","getModuleProgress","localProgress","getOverallProgress","modules","completedModules","progress","getNextRecommendedLesson","overallProgress","_c","_b","_a","computeNextRecommendedLesson","completedSet","lessons","lesson","getLearningStats","total","searchLearningContent","query","results","searchTerm","getContentByDifficulty","difficulty","getQuickTips","tips","firstLesson","getContentUpdateInfo","createModule","moduleData","updateModule","deleteModule","addLesson","lessonData","uploadLessonMedia","file","formData","res","updateLesson","deleteLesson","updateLessonProgress","progressData","updateProgress","exportContent","importContent","contentData","LearnHub","selectedModule","setSelectedModule","selectedLesson","setSelectedLesson","setSearchTerm","difficultyFilter","setDifficultyFilter","completedLessons","setCompletedLessons","setModules","setOverallProgress","nextLesson","setNextLesson","setLoading","loadData","modulesData","backendCompletedKeys","record","backendCompletedSet","frontendCompletedSet","newKeys","updatedKeys","markLessonComplete","lessonKeyPre","__vitePreload","contentManager","result","backendKey","lessonKey","updatedRecords","targetModuleId","targetLessonId","existingIndex","completedCount","totalLessons","acc","percentage","next","refreshedProgress","localCompletedSet","mergedRecords","mIdStr","lIdStr","mId","lId","mergedCompletedCount","totalLessonsMerged","mergedPercentage","mergedProgress","fallbackKey","tentative","filteredModules","filtered","searchLower","LessonContent","_d","_f","_e","_h","_g","isCompleted","lessonCount","completedLessonsInModule","progressPercent","getContentStyle","style","renderContent","tip","sign","step","item","action","useCommunity","reports","setReports","trendingThreats","setTrendingThreats","communityStats","setCommunityStats","alerts","setAlerts","leaderboard","setLeaderboard","latestReports","setLatestReports","myStats","setMyStats","pagination","setPagination","hasMore","setHasMore","fetchReports","filters","append","queryParams","fetchTrendingThreats","fetchLatestReports","params","fetchReportById","reportId","fetchComments","page","per_page","deleteComment","commentId","fetchCommunityStats","fetchAlerts","fetchLeaderboard","fetchMyStats","createReport","reportData","payload","report","uploadReportMedia","fileOrUrl","media","deleteReport","voteOnReport","voteType","updatedReport","verifyReport","verificationData","addComment","commentData","newComment","createAlert","alertData","alert","loadAllData","clearError","MobileModal","isOpen","onClose","title","showCloseButton","fullScreen","hideOnDesktop","handleEscape","CommunityHub","activeTab","setActiveTabLocal","showNewReport","setShowNewReport","newReport","setNewReport","newReportFiles","setNewReportFiles","isSubmitting","setIsSubmitting","toast","setToast","lightboxOpen","setLightboxOpen","lightboxImages","setLightboxImages","lightboxIndex","setLightboxIndex","commentsModalOpen","setCommentsModalOpen","commentsReport","setCommentsReport","commentsPage","setCommentsPage","commentsHasMore","setCommentsHasMore","commentTexts","setCommentTexts","handleScroll","nextPage","resolveMediaUrl","isImageMedia","isVideoMedia","openLightbox","mediaList","startIndex","images","handleViewAllComments","handleLoadMoreComments","tabs","isLastAndExtra","extraCount","src","fallback","tab","Icon","up","CommunityReporting","showNewAlert","setShowNewAlert","newAlert","setNewAlert","commentText","setCommentText","handleSubmitReport","handleSubmitAlert","handleVote","handleVerify","handleAddComment","handleDeleteComment","isAuthError","threat","comment","Textarea","React","USER_ENDPOINTS","getAllUsers","getDeletedUsers","updateUserStatus","userId","newStatus","updateUserRole","newRole","updateUserInfo","updateUserPassword","deleteUser","createUser","getUserStats","users","u","restoreUser","CommunityReports","initialFilters","selectedReports","setSelectedReports","showReportModal","setShowReportModal","selectedReport","setSelectedReport","showBulkModal","setShowBulkModal","bulkAction","setBulkAction","setFilters","handleReportAction","actionMap","mapped","errData","handleBulkAction","handleReportSelect","handleSelectAll","updateFilters","newFilters","ReportRow","Fragment","ReportDetailModal","BulkActionModal","AdminDashboard","authLoading","activeSection","setActiveSection","showAddModule","setShowAddModule","showAddUser","setShowAddUser","editingModule","setEditingModule","editingUser","setEditingUser","actionLoading","setActionLoading","loadingUsers","setLoadingUsers","newModuleData","setNewModuleData","newUserData","setNewUserData","setUsers","deletedUsers","setDeletedUsers","userStats","setUserStats","dbConnectionStatus","setDbConnectionStatus","adminStats","setAdminStats","selectedModuleForLessons","setSelectedModuleForLessons","newLessonData","setNewLessonData","editingLesson","setEditingLesson","lessonActionLoading","setLessonActionLoading","lessonSuccessMessage","setLessonSuccessMessage","forceUpdate","setForceUpdate","timer","loadModules","loadUsers","usersData","loadDeletedUsers","deletedUsersData","loadUserStats","statsData","handleCreateModule","handleDeleteModule","handleUpdateUserStatus","handleUpdateUserRole","handleDeleteUser","handleRestoreUser","handleCreateUser","handleUpdateUser","userToUpdate","updatePromises","basicInfo","errors","handleUpdateModule","moduleToUpdate","handleAddLesson","updatedModules","updatedModule","_j","_i","handleUpdateLesson","handleDeleteLesson","checkDatabaseConnection","renderOverview","renderContentManagement","Edit3","renderUserManagement","renderDeletedUsers","_","type","ProfileSettings","isEditing","setIsEditing","isChangingPassword","setIsChangingPassword","setFormData","passwordData","setPasswordData","handleInputChange","name","handlePasswordChange","handleSaveProfile","handleChangePassword","Login","onLoginSuccess","onSwitchToRegister","handleSubmit","handleChange","Register","onRegisterSuccess","formErrors","setFormErrors","validateForm","App","greeting","setGreeting","breachEmail","setBreachEmail","breachResult","setBreachResult","isChecking","setIsChecking","breachError","setBreachError","showPasswordGenerator","setShowPasswordGenerator","showProfileDropdown","setShowProfileDropdown","handleGlobalLogout","hour","getUserInitials","names","handleProfileClick","handleLogout","handleClickOutside","event","handleEscapeKey","handleBreachCheck","handlePasswordUse","scamInput","setScamInput","scamType","setScamType","scamResult","setScamResult","isAnalyzing","setIsAnalyzing","scamError","setScamError","handleScamAnalysis","analysis","detectedContentType","contentTypeNote","urlPattern","containsUrls","analyzeLink","analyzeMessage","emailPattern","containsEmailHeaders","analyzeEmail","analyzeScamContent","emailContent","generateEmailRecommendations","riskLevel","indicators","recommendations","ind","messageContent","generateEnhancedRecommendations","patterns","rec","content","riskScore","pattern","matches","generateRecommendations","scam","breach","indicator","count","category","ReactDOM"],"sources":["../../node_modules/react/cjs/react-jsx-runtime.production.min.js","../../node_modules/react/jsx-runtime.js","../../node_modules/react-dom/client.js","../../src/lib/api.js","../../src/components/ui/mobile-card.jsx","../../src/components/ui/mobile-input.jsx","../../src/components/ui/button.jsx","../../node_modules/lucide-react/dist/esm/defaultAttributes.mjs","../../node_modules/lucide-react/dist/esm/createLucideIcon.mjs","../../node_modules/lucide-react/dist/esm/icons/alert-triangle.mjs","../../node_modules/lucide-react/dist/esm/icons/arrow-left.mjs","../../node_modules/lucide-react/dist/esm/icons/book-open.mjs","../../node_modules/lucide-react/dist/esm/icons/check-circle.mjs","../../node_modules/lucide-react/dist/esm/icons/flag.mjs","../../node_modules/lucide-react/dist/esm/icons/key.mjs","../../node_modules/lucide-react/dist/esm/icons/lock.mjs","../../node_modules/lucide-react/dist/esm/icons/mail.mjs","../../node_modules/lucide-react/dist/esm/icons/message-square.mjs","../../node_modules/lucide-react/dist/esm/icons/pen-line.mjs","../../node_modules/lucide-react/dist/esm/icons/plus.mjs","../../node_modules/lucide-react/dist/esm/icons/refresh-cw.mjs","../../node_modules/lucide-react/dist/esm/icons/save.mjs","../../node_modules/lucide-react/dist/esm/icons/search.mjs","../../node_modules/lucide-react/dist/esm/icons/shield.mjs","../../node_modules/lucide-react/dist/esm/icons/star.mjs","../../node_modules/lucide-react/dist/esm/icons/thumbs-down.mjs","../../node_modules/lucide-react/dist/esm/icons/thumbs-up.mjs","../../node_modules/lucide-react/dist/esm/icons/trash-2.mjs","../../node_modules/lucide-react/dist/esm/icons/trending-up.mjs","../../node_modules/lucide-react/dist/esm/icons/trophy.mjs","../../node_modules/lucide-react/dist/esm/icons/user.mjs","../../node_modules/lucide-react/dist/esm/icons/users.mjs","../../node_modules/lucide-react/dist/esm/icons/x.mjs","../../src/components/PasswordGenerator.jsx","../../src/hooks/useChatAssistant.js","../../src/components/ChatAssistant.jsx","../../src/components/ui/mobile-button.jsx","../../src/hooks/useAuth.js","../../src/utils/contentManager.js","../../src/components/LearnHub.jsx","../../src/hooks/useCommunity.js","../../src/components/MobileModal.jsx","../../src/components/CommunityHub.jsx","../../src/components/CommunityReporting.jsx","../../src/components/ui/textarea.jsx","../../src/utils/userManager.js","../../src/components/admin/CommunityReports.jsx","../../src/components/admin/AdminDashboard.jsx","../../src/components/ProfileSettings.jsx","../../src/components/Login.jsx","../../src/components/Register.jsx","../../src/App.jsx","../../src/main.jsx"],"sourcesContent":["/**\n * @license React\n * react-jsx-runtime.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n'use strict';var f=require(\"react\"),k=Symbol.for(\"react.element\"),l=Symbol.for(\"react.fragment\"),m=Object.prototype.hasOwnProperty,n=f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p={key:!0,ref:!0,__self:!0,__source:!0};\nfunction q(c,a,g){var b,d={},e=null,h=null;void 0!==g&&(e=\"\"+g);void 0!==a.key&&(e=\"\"+a.key);void 0!==a.ref&&(h=a.ref);for(b in a)m.call(a,b)&&!p.hasOwnProperty(b)&&(d[b]=a[b]);if(c&&c.defaultProps)for(b in a=c.defaultProps,a)void 0===d[b]&&(d[b]=a[b]);return{$$typeof:k,type:c,key:e,ref:h,props:d,_owner:n.current}}exports.Fragment=l;exports.jsx=q;exports.jsxs=q;\n","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./cjs/react-jsx-runtime.production.min.js');\n} else {\n  module.exports = require('./cjs/react-jsx-runtime.development.js');\n}\n","'use strict';\n\nvar m = require('react-dom');\nif (process.env.NODE_ENV === 'production') {\n  exports.createRoot = m.createRoot;\n  exports.hydrateRoot = m.hydrateRoot;\n} else {\n  var i = m.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;\n  exports.createRoot = function(c, o) {\n    i.usingClientEntryPoint = true;\n    try {\n      return m.createRoot(c, o);\n    } finally {\n      i.usingClientEntryPoint = false;\n    }\n  };\n  exports.hydrateRoot = function(c, h, o) {\n    i.usingClientEntryPoint = true;\n    try {\n      return m.hydrateRoot(c, h, o);\n    } finally {\n      i.usingClientEntryPoint = false;\n    }\n  };\n}\n","// Central API base for all fetch calls.\nexport const API = import.meta.env.VITE_API_BASE || import.meta.env.VITE_API_URL || \"https://api.remalehprotect.remaleh.com.au\";\n\n// Log the API base URL for debugging (remove in production)\nif (import.meta.env.DEV) {\n  console.log(' API Configuration - API Base URL:', API);\n  console.log(' API Configuration - Environment Variables:', {\n    VITE_API_BASE: import.meta.env.VITE_API_BASE,\n    VITE_API_URL: import.meta.env.VITE_API_URL,\n    NODE_ENV: import.meta.env.NODE_ENV,\n    MODE: import.meta.env.MODE\n  });\n} else {\n  console.log(' API Configuration - Production API Base URL:', API);\n}\n\n// API endpoints for all features\nexport const API_ENDPOINTS = {\n  // Authentication\n  AUTH: {\n    REGISTER: '/api/auth/register',\n    LOGIN: '/api/auth/login',\n    PROFILE: '/api/auth/profile',\n    REFRESH: '/api/auth/refresh',\n    LOGOUT: '/api/auth/logout',\n    CHANGE_PASSWORD: '/api/auth/change-password'\n  },\n  \n  // Admin\n  ADMIN: {\n    USERS: '/api/admin/users',\n    CREATE_USER: '/api/admin/users',\n    USER_DETAILS: '/api/admin/users',\n    USER_UPDATE: '/api/admin/users',\n    USER_SUSPEND: '/api/admin/users',\n    USER_ACTIVATE: '/api/admin/users',\n    USER_DELETE: '/api/admin/users',\n    USER_RESET_PASSWORD: '/api/admin/users',\n    BULK_ACTION: '/api/admin/users/bulk-action',\n    BULK_RESET_PASSWORD: '/api/admin/users/bulk-reset-password',\n    DASHBOARD: '/api/admin/dashboard',\n    MAINTENANCE: '/api/admin/maintenance',\n    COMMUNITY_REPORTS: '/api/admin/community-reports',\n    COMMUNITY_REPORTS_VERIFY: '/api/admin/community-reports',\n    COMMUNITY_REPORTS_REJECT: '/api/admin/community-reports',\n    COMMUNITY_REPORTS_ESCALATE: '/api/admin/community-reports',\n    COMMUNITY_REPORTS_DELETE: '/api/admin/community-reports',\n    COMMUNITY_REPORTS_BULK_ACTION: '/api/admin/community-reports/bulk-action'\n  },\n  \n  // Threat Intelligence\n  THREAT_INTELLIGENCE: {\n    DASHBOARD: '/api/threat_intelligence/dashboard',\n    THREATS: '/api/threat_intelligence/threats',\n    ALERTS: '/api/threat_intelligence/alerts',\n    TRENDS: '/api/threat_intelligence/stats/trends'\n  },\n  \n  // Risk Profile\n  RISK_PROFILE: {\n    PROFILE: '/api/risk_profile/profile',\n    SCANS: '/api/risk_profile/scans',\n    LEARNING: '/api/risk_profile/learning/modules',\n    RECOMMENDATIONS: '/api/risk_profile/recommendations'\n  },\n  \n  // Learning Content\n  LEARNING: {\n    MODULES: '/api/learning/modules',\n    PROGRESS: '/api/learning/progress',\n    NEXT_LESSON: '/api/learning/next-lesson'\n  },\n  \n\n  \n  // Community\n  COMMUNITY: {\n    REPORTS: '/api/community/reports',\n    TRENDING: '/api/community/trending',\n    STATS: '/api/community/stats',\n    ALERTS: '/api/community/alerts',\n    LEADERBOARD: '/api/community/leaderboard',\n    MY_STATS: '/api/community/my-stats'\n  },\n  \n  // Existing endpoints\n  SCAM: '/api/scam/comprehensive',\n  BREACH: '/api/breach/check',\n  LINK: '/api/link/analyze',\n  CHAT: '/api/chat/'\n};\n\n// Helper function to make authenticated API calls\nexport const apiCall = async (endpoint, options = {}) => {\n  const token = localStorage.getItem('authToken');\n  \n  console.log(' API Call - Endpoint:', endpoint);\n  console.log(' API Call - Token present:', !!token);\n  console.log(' API Call - Token value:', token ? `${token.substring(0, 20)}...` : 'None');\n  \n  const defaultOptions = {\n    headers: {\n      'Content-Type': 'application/json',\n      ...(token && { 'Authorization': `Bearer ${token}` })\n    },\n    ...options\n  };\n\n  console.log(' API Call - Request headers:', defaultOptions.headers);\n  console.log(' API Call - Full URL:', `${API}${endpoint}`);\n\n  try {\n    const response = await fetch(`${API}${endpoint}`, defaultOptions);\n    console.log(' API Call - Response status:', response.status);\n    console.log(' API Call - Response headers:', Object.fromEntries(response.headers.entries()));\n    \n    if (!response.ok) {\n      if (response.status === 401) {\n        console.log(' API Call - 401 Unauthorized, attempting token refresh...');\n        // Token expired, try to refresh\n        const refreshToken = localStorage.getItem('refreshToken');\n        if (refreshToken) {\n          console.log(' API Call - Refresh token found, attempting refresh...');\n          const refreshResponse = await fetch(`${API}${API_ENDPOINTS.AUTH.REFRESH}`, {\n            method: 'POST',\n            headers: { 'Content-Type': 'application/json' },\n            body: JSON.stringify({ refresh_token: refreshToken })\n          });\n          \n          if (refreshResponse.ok) {\n            const { access_token } = await refreshResponse.json();\n            console.log(' API Call - Token refresh successful, retrying request...');\n            localStorage.setItem('authToken', access_token);\n            \n            // Retry original request with new token\n            defaultOptions.headers.Authorization = `Bearer ${access_token}`;\n            const retryResponse = await fetch(`${API}${endpoint}`, defaultOptions);\n            return retryResponse;\n          } else {\n            console.log(' API Call - Token refresh failed, removing tokens');\n          }\n        }\n        // Redirect to login if refresh fails\n        localStorage.removeItem('authToken');\n        localStorage.removeItem('refreshToken');\n        // Don't redirect - let the component handle authentication failures\n        // window.location.href = '/login';\n      }\n      throw new Error(`HTTP error! status: ${response.status}`);\n    }\n    \n    return response;\n  } catch (error) {\n    console.error(' API Call - Request failed:', error);\n    throw error;\n  }\n};\n\n// Helper function for GET requests\nexport const apiGet = (endpoint) => apiCall(endpoint, { method: 'GET' });\n\n// Helper function for POST requests\nexport const apiPost = (endpoint, data) => apiCall(endpoint, {\n  method: 'POST',\n  body: JSON.stringify(data)\n});\n\n// Helper function for PUT requests\nexport const apiPut = (endpoint, data) => {\n  console.log(' apiPut called with:', { endpoint, data })\n  console.log(' HTTP method will be: PUT')\n  \n  return apiCall(endpoint, {\n    method: 'PUT',\n    body: JSON.stringify(data)\n  })\n};\n\n// Helper function for DELETE requests\nexport const apiDelete = (endpoint) => apiCall(endpoint, { method: 'DELETE' });\n\n// Create a unified API object for admin components\nexport const api = {\n  get: (endpoint) => apiGet(endpoint),\n  post: (endpoint, data) => apiPost(endpoint, data),\n  put: (endpoint, data) => apiPut(endpoint, data),\n  delete: (endpoint) => apiDelete(endpoint),\n  request: (options) => {\n    const { method = 'GET', url, data, ...rest } = options;\n    if (method === 'GET') {\n      return apiGet(url);\n    } else if (method === 'POST') {\n      return apiPost(url, data);\n    } else if (method === 'PUT') {\n      return apiPut(url, data);\n    } else if (method === 'DELETE') {\n      return apiDelete(url);\n    }\n    return apiCall(url, { method, body: data ? JSON.stringify(data) : undefined, ...rest });\n  }\n};\n","import React from 'react';\n\nexport function MobileCard({ \n  children, \n  className = '', \n  padding = 'p-4',\n  shadow = 'shadow-sm',\n  hover = false,\n  onClick,\n  interactive = false,\n  ...props \n}) {\n  const baseClasses = 'bg-white rounded-xl border border-gray-200'\n  const shadowClasses = shadow === 'shadow' ? 'shadow' : shadow === 'shadow-lg' ? 'shadow-lg' : 'shadow-sm'\n  const hoverClasses = hover ? 'hover:shadow-lg transition-all duration-200' : ''\n  const interactiveClasses = interactive ? 'active:scale-95 transition-transform duration-100' : ''\n  const classes = `${baseClasses} ${shadowClasses} ${hoverClasses} ${interactiveClasses} ${padding} ${className}`.trim()\n  \n  const Component = onClick ? 'button' : 'div'\n  \n  return (\n    <Component \n      className={classes}\n      onClick={onClick}\n      {...props}\n    >\n      {children}\n    </Component>\n  )\n}\n\nexport function MobileCardHeader({ children, className = '' }) {\n  return (\n    <div className={`mb-3 ${className}`}>\n      {children}\n    </div>\n  )\n}\n\nexport function MobileCardContent({ children, className = '' }) {\n  return (\n    <div className={className}>\n      {children}\n    </div>\n  )\n}\n\nexport function MobileCardFooter({ children, className = '' }) {\n  return (\n    <div className={`mt-3 pt-3 border-t border-gray-100 ${className}`}>\n      {children}\n    </div>\n  )\n}\n\n// Mobile-specific card variants\nexport function MobileActionCard({ \n  children, \n  icon, \n  title, \n  subtitle, \n  onClick, \n  className = '' \n}) {\n  return (\n    <MobileCard \n      onClick={onClick} \n      interactive={true}\n      className={`text-left ${className}`}\n    >\n      <div className=\"flex items-center space-x-3\">\n        {icon && (\n          <div className=\"flex-shrink-0\">\n            {icon}\n          </div>\n        )}\n        <div className=\"flex-1 min-w-0\">\n          <h3 className=\"text-sm font-medium text-gray-900 truncate\">{title}</h3>\n          {subtitle && (\n            <p className=\"text-xs text-gray-500 truncate\">{subtitle}</p>\n          )}\n        </div>\n        <div className=\"flex-shrink-0\">\n          <svg className=\"w-4 h-4 text-gray-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 5l7 7-7 7\" />\n          </svg>\n        </div>\n      </div>\n      {children}\n    </MobileCard>\n  )\n}\n\nexport function MobileStatsCard({ \n  title, \n  value, \n  subtitle, \n  icon, \n  trend, \n  trendDirection = 'up',\n  className = '' \n}) {\n  return (\n    <MobileCard className={`text-center ${className}`}>\n      <div className=\"flex flex-col items-center\">\n        {icon && (\n          <div className=\"mb-2 text-blue-600\">\n            {icon}\n          </div>\n        )}\n        <div className=\"text-2xl font-bold text-gray-900 mb-1\">{value}</div>\n        <div className=\"text-sm text-gray-600 mb-2\">{title}</div>\n        {subtitle && (\n          <div className=\"text-xs text-gray-500\">{subtitle}</div>\n        )}\n        {trend && (\n          <div className={`flex items-center text-xs ${\n            trendDirection === 'up' ? 'text-green-600' : 'text-red-600'\n          }`}>\n            <svg className={`w-3 h-3 mr-1 ${trendDirection === 'up' ? 'rotate-0' : 'rotate-180'}`} fill=\"currentColor\" viewBox=\"0 0 20 20\">\n              <path fillRule=\"evenodd\" d=\"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z\" clipRule=\"evenodd\" />\n            </svg>\n            {trend}\n          </div>\n        )}\n      </div>\n    </MobileCard>\n  )\n}\n","import React from 'react';\n\nexport function MobileInput({ \n  label,\n  error,\n  helperText,\n  fullWidth = false,\n  className = '',\n  ...props \n}) {\n  const inputClasses = `w-full px-4 py-3 text-base border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors duration-200 ${\n    error ? 'border-red-300 focus:ring-red-500 focus:border-red-500' : ''\n  } ${fullWidth ? 'w-full' : ''} ${className}`\n\n  return (\n    <div className={`${fullWidth ? 'w-full' : ''}`}>\n      {label && (\n        <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n          {label}\n        </label>\n      )}\n      <input \n        className={inputClasses}\n        {...props}\n      />\n      {error && (\n        <p className=\"mt-1 text-sm text-red-600\">{error}</p>\n      )}\n      {helperText && !error && (\n        <p className=\"mt-1 text-sm text-gray-500\">{helperText}</p>\n      )}\n    </div>\n  )\n}\n\nexport function MobileTextarea({ \n  label,\n  error,\n  helperText,\n  fullWidth = false,\n  rows = 4,\n  className = '',\n  ...props \n}) {\n  const textareaClasses = `w-full px-4 py-3 text-base border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors duration-200 resize-none ${\n    error ? 'border-red-300 focus:ring-red-500 focus:border-red-500' : ''\n  } ${fullWidth ? 'w-full' : ''} ${className}`\n\n  return (\n    <div className={`${fullWidth ? 'w-full' : ''}`}>\n      {label && (\n        <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n          {label}\n        </label>\n      )}\n      <textarea \n        className={textareaClasses}\n        rows={rows}\n        {...props}\n      />\n      {error && (\n        <p className=\"mt-1 text-sm text-red-600\">{error}</p>\n      )}\n      {helperText && !error && (\n        <p className=\"mt-1 text-sm text-gray-500\">{helperText}</p>\n      )}\n    </div>\n  )\n}\n\nexport function MobileSelect({ \n  label,\n  error,\n  helperText,\n  options = [],\n  fullWidth = false,\n  className = '',\n  ...props \n}) {\n  const selectClasses = `w-full px-4 py-3 text-base border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors duration-200 appearance-none bg-white ${\n    error ? 'border-red-300 focus:ring-red-500 focus:border-red-500' : ''\n  } ${fullWidth ? 'w-full' : ''} ${className}`\n\n  return (\n    <div className={`${fullWidth ? 'w-full' : ''} relative`}>\n      {label && (\n        <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n          {label}\n        </label>\n      )}\n      <select \n        className={selectClasses}\n        {...props}\n      >\n        {options.map((option) => (\n          <option key={option.value} value={option.value}>\n            {option.label}\n          </option>\n        ))}\n      </select>\n      \n      {/* Custom dropdown arrow */}\n      <div className=\"absolute inset-y-0 right-0 flex items-center pr-4 pointer-events-none\">\n        <svg className=\"w-4 h-4 text-gray-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M19 9l-7 7-7-7\" />\n        </svg>\n      </div>\n      \n      {error && (\n        <p className=\"mt-1 text-sm text-red-600\">{error}</p>\n      )}\n      {helperText && !error && (\n        <p className=\"mt-1 text-sm text-gray-500\">{helperText}</p>\n      )}\n    </div>\n  )\n}\n\nexport function MobileSearchInput({ \n  placeholder = 'Search...',\n  onSearch,\n  className = '',\n  ...props \n}) {\n  const [query, setQuery] = React.useState('')\n\n  const handleSubmit = (e) => {\n    e.preventDefault()\n    if (onSearch && query.trim()) {\n      onSearch(query.trim())\n    }\n  }\n\n  return (\n    <form onSubmit={handleSubmit} className={`relative ${className}`}>\n      <div className=\"relative\">\n        <input\n          type=\"text\"\n          value={query}\n          onChange={(e) => setQuery(e.target.value)}\n          placeholder={placeholder}\n          className=\"w-full pl-12 pr-4 py-3 text-base border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors duration-200\"\n          {...props}\n        />\n        <div className=\"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none\">\n          <svg className=\"w-5 h-5 text-gray-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z\" />\n          </svg>\n        </div>\n      </div>\n    </form>\n  )\n}\n","import React from 'react'\n\nexport function Button({ \n  variant = 'primary', \n  size = 'md',\n  children, \n  className = '',\n  disabled = false,\n  loading = false,\n  ...props \n}) {\n  const baseClasses = 'inline-flex items-center justify-center font-medium rounded-lg transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed'\n  \n  const variants = {\n    primary: 'bg-gradient-to-r from-[#21a1ce] to-[#1a80a3] text-white hover:shadow-lg focus:ring-[#21a1ce]',\n    secondary: 'bg-gray-200 text-gray-800 hover:bg-gray-300 focus:ring-gray-500',\n    danger: 'bg-red-600 text-white hover:bg-red-700 focus:ring-red-600',\n    success: 'bg-green-600 text-white hover:bg-green-700 focus:ring-green-600',\n    warning: 'bg-yellow-600 text-white hover:bg-yellow-700 focus:ring-yellow-600',\n    outline: 'border-2 border-[#21a1ce] text-[#21a1ce] hover:bg-[#21a1ce] hover:text-white focus:ring-[#21a1ce]'\n  }\n  \n  const sizes = {\n    sm: 'px-3 py-1.5 text-sm',\n    md: 'px-4 py-2 text-sm',\n    lg: 'px-6 py-3 text-base',\n    xl: 'px-8 py-4 text-lg'\n  }\n  \n  const classes = `${baseClasses} ${variants[variant]} ${sizes[size]} ${className}`.trim()\n  \n  return (\n    <button \n      className={classes}\n      disabled={disabled || loading}\n      {...props}\n    >\n      {loading && (\n        <svg className=\"animate-spin -ml-1 mr-2 h-4 w-4\" fill=\"none\" viewBox=\"0 0 24 24\">\n          <circle className=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"4\"></circle>\n          <path className=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"></path>\n        </svg>\n      )}\n      {children}\n    </button>\n  )\n} ","/**\n * lucide-react v0.0.1 - ISC\n */\n\nvar defaultAttributes = {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  width: 24,\n  height: 24,\n  viewBox: \"0 0 24 24\",\n  fill: \"none\",\n  stroke: \"currentColor\",\n  strokeWidth: 2,\n  strokeLinecap: \"round\",\n  strokeLinejoin: \"round\"\n};\n\nexport { defaultAttributes as default };\n//# sourceMappingURL=defaultAttributes.mjs.map\n","/**\n * lucide-react v0.0.1 - ISC\n */\n\nimport { forwardRef, createElement } from 'react';\nimport defaultAttributes from './defaultAttributes.mjs';\n\nconst toKebabCase = (string) => string.replace(/([a-z0-9])([A-Z])/g, \"$1-$2\").toLowerCase();\nconst createLucideIcon = (iconName, iconNode) => {\n  const Component = forwardRef(\n    ({ color = \"currentColor\", size = 24, strokeWidth = 2, absoluteStrokeWidth, children, ...rest }, ref) => createElement(\n      \"svg\",\n      {\n        ref,\n        ...defaultAttributes,\n        width: size,\n        height: size,\n        stroke: color,\n        strokeWidth: absoluteStrokeWidth ? Number(strokeWidth) * 24 / Number(size) : strokeWidth,\n        className: `lucide lucide-${toKebabCase(iconName)}`,\n        ...rest\n      },\n      [\n        ...iconNode.map(([tag, attrs]) => createElement(tag, attrs)),\n        ...(Array.isArray(children) ? children : [children]) || []\n      ]\n    )\n  );\n  Component.displayName = `${iconName}`;\n  return Component;\n};\nvar createLucideIcon$1 = createLucideIcon;\n\nexport { createLucideIcon$1 as default, toKebabCase };\n//# sourceMappingURL=createLucideIcon.mjs.map\n","/**\n * lucide-react v0.0.1 - ISC\n */\n\nimport createLucideIcon from '../createLucideIcon.mjs';\n\nconst AlertTriangle = createLucideIcon(\"AlertTriangle\", [\n  [\n    \"path\",\n    {\n      d: \"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z\",\n      key: \"c3ski4\"\n    }\n  ],\n  [\"path\", { d: \"M12 9v4\", key: \"juzpu7\" }],\n  [\"path\", { d: \"M12 17h.01\", key: \"p32p05\" }]\n]);\n\nexport { AlertTriangle as default };\n//# sourceMappingURL=alert-triangle.mjs.map\n","/**\n * lucide-react v0.0.1 - ISC\n */\n\nimport createLucideIcon from '../createLucideIcon.mjs';\n\nconst ArrowLeft = createLucideIcon(\"ArrowLeft\", [\n  [\"path\", { d: \"m12 19-7-7 7-7\", key: \"1l729n\" }],\n  [\"path\", { d: \"M19 12H5\", key: \"x3x0zl\" }]\n]);\n\nexport { ArrowLeft as default };\n//# sourceMappingURL=arrow-left.mjs.map\n","/**\n * lucide-react v0.0.1 - ISC\n */\n\nimport createLucideIcon from '../createLucideIcon.mjs';\n\nconst BookOpen = createLucideIcon(\"BookOpen\", [\n  [\"path\", { d: \"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z\", key: \"vv98re\" }],\n  [\"path\", { d: \"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z\", key: \"1cyq3y\" }]\n]);\n\nexport { BookOpen as default };\n//# sourceMappingURL=book-open.mjs.map\n","/**\n * lucide-react v0.0.1 - ISC\n */\n\nimport createLucideIcon from '../createLucideIcon.mjs';\n\nconst CheckCircle = createLucideIcon(\"CheckCircle\", [\n  [\"path\", { d: \"M22 11.08V12a10 10 0 1 1-5.93-9.14\", key: \"g774vq\" }],\n  [\"polyline\", { points: \"22 4 12 14.01 9 11.01\", key: \"6xbx8j\" }]\n]);\n\nexport { CheckCircle as default };\n//# sourceMappingURL=check-circle.mjs.map\n","/**\n * lucide-react v0.0.1 - ISC\n */\n\nimport createLucideIcon from '../createLucideIcon.mjs';\n\nconst Flag = createLucideIcon(\"Flag\", [\n  [\n    \"path\",\n    {\n      d: \"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z\",\n      key: \"i9b6wo\"\n    }\n  ],\n  [\"line\", { x1: \"4\", x2: \"4\", y1: \"22\", y2: \"15\", key: \"1cm3nv\" }]\n]);\n\nexport { Flag as default };\n//# sourceMappingURL=flag.mjs.map\n","/**\n * lucide-react v0.0.1 - ISC\n */\n\nimport createLucideIcon from '../createLucideIcon.mjs';\n\nconst Key = createLucideIcon(\"Key\", [\n  [\"circle\", { cx: \"7.5\", cy: \"15.5\", r: \"5.5\", key: \"yqb3hr\" }],\n  [\"path\", { d: \"m21 2-9.6 9.6\", key: \"1j0ho8\" }],\n  [\"path\", { d: \"m15.5 7.5 3 3L22 7l-3-3\", key: \"1rn1fs\" }]\n]);\n\nexport { Key as default };\n//# sourceMappingURL=key.mjs.map\n","/**\n * lucide-react v0.0.1 - ISC\n */\n\nimport createLucideIcon from '../createLucideIcon.mjs';\n\nconst Lock = createLucideIcon(\"Lock\", [\n  [\n    \"rect\",\n    {\n      width: \"18\",\n      height: \"11\",\n      x: \"3\",\n      y: \"11\",\n      rx: \"2\",\n      ry: \"2\",\n      key: \"1w4ew1\"\n    }\n  ],\n  [\"path\", { d: \"M7 11V7a5 5 0 0 1 10 0v4\", key: \"fwvmzm\" }]\n]);\n\nexport { Lock as default };\n//# sourceMappingURL=lock.mjs.map\n","/**\n * lucide-react v0.0.1 - ISC\n */\n\nimport createLucideIcon from '../createLucideIcon.mjs';\n\nconst Mail = createLucideIcon(\"Mail\", [\n  [\n    \"rect\",\n    { width: \"20\", height: \"16\", x: \"2\", y: \"4\", rx: \"2\", key: \"18n3k1\" }\n  ],\n  [\"path\", { d: \"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7\", key: \"1ocrg3\" }]\n]);\n\nexport { Mail as default };\n//# sourceMappingURL=mail.mjs.map\n","/**\n * lucide-react v0.0.1 - ISC\n */\n\nimport createLucideIcon from '../createLucideIcon.mjs';\n\nconst MessageSquare = createLucideIcon(\"MessageSquare\", [\n  [\n    \"path\",\n    {\n      d: \"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z\",\n      key: \"1lielz\"\n    }\n  ]\n]);\n\nexport { MessageSquare as default };\n//# sourceMappingURL=message-square.mjs.map\n","/**\n * lucide-react v0.0.1 - ISC\n */\n\nimport createLucideIcon from '../createLucideIcon.mjs';\n\nconst PenLine = createLucideIcon(\"PenLine\", [\n  [\"path\", { d: \"M12 20h9\", key: \"t2du7b\" }],\n  [\n    \"path\",\n    { d: \"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z\", key: \"ymcmye\" }\n  ]\n]);\n\nexport { PenLine as default };\n//# sourceMappingURL=pen-line.mjs.map\n","/**\n * lucide-react v0.0.1 - ISC\n */\n\nimport createLucideIcon from '../createLucideIcon.mjs';\n\nconst Plus = createLucideIcon(\"Plus\", [\n  [\"path\", { d: \"M5 12h14\", key: \"1ays0h\" }],\n  [\"path\", { d: \"M12 5v14\", key: \"s699le\" }]\n]);\n\nexport { Plus as default };\n//# sourceMappingURL=plus.mjs.map\n","/**\n * lucide-react v0.0.1 - ISC\n */\n\nimport createLucideIcon from '../createLucideIcon.mjs';\n\nconst RefreshCw = createLucideIcon(\"RefreshCw\", [\n  [\n    \"path\",\n    { d: \"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8\", key: \"v9h5vc\" }\n  ],\n  [\"path\", { d: \"M21 3v5h-5\", key: \"1q7to0\" }],\n  [\n    \"path\",\n    { d: \"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16\", key: \"3uifl3\" }\n  ],\n  [\"path\", { d: \"M8 16H3v5\", key: \"1cv678\" }]\n]);\n\nexport { RefreshCw as default };\n//# sourceMappingURL=refresh-cw.mjs.map\n","/**\n * lucide-react v0.0.1 - ISC\n */\n\nimport createLucideIcon from '../createLucideIcon.mjs';\n\nconst Save = createLucideIcon(\"Save\", [\n  [\n    \"path\",\n    {\n      d: \"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z\",\n      key: \"1owoqh\"\n    }\n  ],\n  [\"polyline\", { points: \"17 21 17 13 7 13 7 21\", key: \"1md35c\" }],\n  [\"polyline\", { points: \"7 3 7 8 15 8\", key: \"8nz8an\" }]\n]);\n\nexport { Save as default };\n//# sourceMappingURL=save.mjs.map\n","/**\n * lucide-react v0.0.1 - ISC\n */\n\nimport createLucideIcon from '../createLucideIcon.mjs';\n\nconst Search = createLucideIcon(\"Search\", [\n  [\"circle\", { cx: \"11\", cy: \"11\", r: \"8\", key: \"4ej97u\" }],\n  [\"path\", { d: \"m21 21-4.3-4.3\", key: \"1qie3q\" }]\n]);\n\nexport { Search as default };\n//# sourceMappingURL=search.mjs.map\n","/**\n * lucide-react v0.0.1 - ISC\n */\n\nimport createLucideIcon from '../createLucideIcon.mjs';\n\nconst Shield = createLucideIcon(\"Shield\", [\n  [\"path\", { d: \"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z\", key: \"3xmgem\" }]\n]);\n\nexport { Shield as default };\n//# sourceMappingURL=shield.mjs.map\n","/**\n * lucide-react v0.0.1 - ISC\n */\n\nimport createLucideIcon from '../createLucideIcon.mjs';\n\nconst Star = createLucideIcon(\"Star\", [\n  [\n    \"polygon\",\n    {\n      points: \"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2\",\n      key: \"8f66p6\"\n    }\n  ]\n]);\n\nexport { Star as default };\n//# sourceMappingURL=star.mjs.map\n","/**\n * lucide-react v0.0.1 - ISC\n */\n\nimport createLucideIcon from '../createLucideIcon.mjs';\n\nconst ThumbsDown = createLucideIcon(\"ThumbsDown\", [\n  [\"path\", { d: \"M17 14V2\", key: \"8ymqnk\" }],\n  [\n    \"path\",\n    {\n      d: \"M9 18.12 10 14H4.17a2 2 0 0 1-1.92-2.56l2.33-8A2 2 0 0 1 6.5 2H20a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-2.76a2 2 0 0 0-1.79 1.11L12 22h0a3.13 3.13 0 0 1-3-3.88Z\",\n      key: \"s6e0r\"\n    }\n  ]\n]);\n\nexport { ThumbsDown as default };\n//# sourceMappingURL=thumbs-down.mjs.map\n","/**\n * lucide-react v0.0.1 - ISC\n */\n\nimport createLucideIcon from '../createLucideIcon.mjs';\n\nconst ThumbsUp = createLucideIcon(\"ThumbsUp\", [\n  [\"path\", { d: \"M7 10v12\", key: \"1qc93n\" }],\n  [\n    \"path\",\n    {\n      d: \"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2h0a3.13 3.13 0 0 1 3 3.88Z\",\n      key: \"y3tblf\"\n    }\n  ]\n]);\n\nexport { ThumbsUp as default };\n//# sourceMappingURL=thumbs-up.mjs.map\n","/**\n * lucide-react v0.0.1 - ISC\n */\n\nimport createLucideIcon from '../createLucideIcon.mjs';\n\nconst Trash2 = createLucideIcon(\"Trash2\", [\n  [\"path\", { d: \"M3 6h18\", key: \"d0wm0j\" }],\n  [\"path\", { d: \"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6\", key: \"4alrt4\" }],\n  [\"path\", { d: \"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2\", key: \"v07s0e\" }],\n  [\"line\", { x1: \"10\", x2: \"10\", y1: \"11\", y2: \"17\", key: \"1uufr5\" }],\n  [\"line\", { x1: \"14\", x2: \"14\", y1: \"11\", y2: \"17\", key: \"xtxkd\" }]\n]);\n\nexport { Trash2 as default };\n//# sourceMappingURL=trash-2.mjs.map\n","/**\n * lucide-react v0.0.1 - ISC\n */\n\nimport createLucideIcon from '../createLucideIcon.mjs';\n\nconst TrendingUp = createLucideIcon(\"TrendingUp\", [\n  [\"polyline\", { points: \"22 7 13.5 15.5 8.5 10.5 2 17\", key: \"126l90\" }],\n  [\"polyline\", { points: \"16 7 22 7 22 13\", key: \"kwv8wd\" }]\n]);\n\nexport { TrendingUp as default };\n//# sourceMappingURL=trending-up.mjs.map\n","/**\n * lucide-react v0.0.1 - ISC\n */\n\nimport createLucideIcon from '../createLucideIcon.mjs';\n\nconst Trophy = createLucideIcon(\"Trophy\", [\n  [\"path\", { d: \"M6 9H4.5a2.5 2.5 0 0 1 0-5H6\", key: \"17hqa7\" }],\n  [\"path\", { d: \"M18 9h1.5a2.5 2.5 0 0 0 0-5H18\", key: \"lmptdp\" }],\n  [\"path\", { d: \"M4 22h16\", key: \"57wxv0\" }],\n  [\n    \"path\",\n    {\n      d: \"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22\",\n      key: \"1nw9bq\"\n    }\n  ],\n  [\n    \"path\",\n    {\n      d: \"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22\",\n      key: \"1np0yb\"\n    }\n  ],\n  [\"path\", { d: \"M18 2H6v7a6 6 0 0 0 12 0V2Z\", key: \"u46fv3\" }]\n]);\n\nexport { Trophy as default };\n//# sourceMappingURL=trophy.mjs.map\n","/**\n * lucide-react v0.0.1 - ISC\n */\n\nimport createLucideIcon from '../createLucideIcon.mjs';\n\nconst User = createLucideIcon(\"User\", [\n  [\"path\", { d: \"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2\", key: \"975kel\" }],\n  [\"circle\", { cx: \"12\", cy: \"7\", r: \"4\", key: \"17ys0d\" }]\n]);\n\nexport { User as default };\n//# sourceMappingURL=user.mjs.map\n","/**\n * lucide-react v0.0.1 - ISC\n */\n\nimport createLucideIcon from '../createLucideIcon.mjs';\n\nconst Users = createLucideIcon(\"Users\", [\n  [\"path\", { d: \"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2\", key: \"1yyitq\" }],\n  [\"circle\", { cx: \"9\", cy: \"7\", r: \"4\", key: \"nufk8\" }],\n  [\"path\", { d: \"M22 21v-2a4 4 0 0 0-3-3.87\", key: \"kshegd\" }],\n  [\"path\", { d: \"M16 3.13a4 4 0 0 1 0 7.75\", key: \"1da9ce\" }]\n]);\n\nexport { Users as default };\n//# sourceMappingURL=users.mjs.map\n","/**\n * lucide-react v0.0.1 - ISC\n */\n\nimport createLucideIcon from '../createLucideIcon.mjs';\n\nconst X = createLucideIcon(\"X\", [\n  [\"path\", { d: \"M18 6 6 18\", key: \"1bl5f8\" }],\n  [\"path\", { d: \"m6 6 12 12\", key: \"d8bk6v\" }]\n]);\n\nexport { X as default };\n//# sourceMappingURL=x.mjs.map\n","import React, { useMemo, useRef, useState } from \"react\";\nimport { MobileCard, MobileCardHeader, MobileCardContent } from './ui/mobile-card';\nimport { MobileInput } from './ui/mobile-input';\nimport { Button } from './ui/button';\nimport { Lock } from 'lucide-react';\n\n/* Cryptosafe password generator. Uses Web Crypto API for randomness. */\nconst DEFAULT_LENGTH = 16;\nconst CHARSETS = {\n  lower: \"abcdefghjkmnpqrstuvwxyz\",\n  upper: \"ABCDEFGHJKMNPQRSTUVWXYZ\",\n  digits: \"23456789\",\n  symbols: \"!@#$%^&*()-_=+[]{};:,.?/|~\",\n  similar: \"ilIoO01\",\n};\n\nfunction getRandomValues(len) {\n  const arr = new Uint32Array(len);\n  crypto.getRandomValues(arr);\n  return arr;\n}\n\nfunction buildAlphabet(opts) {\n  let alphabet = \"\";\n  if (opts.lower) alphabet += CHARSETS.lower + (opts.similar ? \"il\" : \"\");\n  if (opts.upper) alphabet += CHARSETS.upper + (opts.similar ? \"IO\" : \"\");\n  if (opts.digits) alphabet += (opts.similar ? \"01\" : \"\") + CHARSETS.digits;\n  if (opts.symbols) alphabet += CHARSETS.symbols;\n  if (opts.ambiguous) alphabet += \"{}[]()/\\\\\\\\'\\\\\\\"`~,;:.<>\";\n  if (!opts.similar) {\n    alphabet = [...alphabet].filter((c) => !CHARSETS.similar.includes(c)).join(\"\");\n  }\n  return alphabet;\n}\n\nfunction generatePassword(length, opts) {\n  const alphabet = buildAlphabet(opts);\n  if (!alphabet.length) throw new Error(\"No character sets selected\");\n\n  const requiredPools = [];\n  if (opts.lower) requiredPools.push(CHARSETS.lower);\n  if (opts.upper) requiredPools.push(CHARSETS.upper);\n  if (opts.digits) requiredPools.push(opts.similar ? CHARSETS.digits + \"01\" : CHARSETS.digits);\n  if (opts.symbols) requiredPools.push(CHARSETS.symbols);\n  if (opts.ambiguous) requiredPools.push(\"{}[]()/\\\\\\\\'\\\\\\\"`~,;:.<>\");\n\n  const out = [];\n  requiredPools.forEach((pool) => {\n    const r = getRandomValues(1)[0] % pool.length;\n    out.push(pool[r]);\n  });\n\n  const remaining = Math.max(length - out.length, 0);\n  const rv = getRandomValues(remaining);\n  for (let i = 0; i < remaining; i++) {\n    const idx = rv[i] % alphabet.length;\n    out.push(alphabet[idx]);\n  }\n\n  for (let i = out.length - 1; i > 0; i--) {\n    const r = getRandomValues(1)[0] % (i + 1);\n    [out[i], out[r]] = [out[r], out[i]];\n  }\n  return out.join(\"\");\n}\n\nfunction estimateEntropy(length, opts) {\n  const alphabet = buildAlphabet(opts);\n  const N = Math.max(alphabet.length, 1);\n  return Math.round(length * Math.log2(N));\n}\n\nfunction StrengthBar({ bits }) {\n  let label = \"Weak\", pct = 25;\n  if (bits >= 80) { label = \"Very strong\"; pct = 100; }\n  else if (bits >= 60) { label = \"Strong\"; pct = 75; }\n  else if (bits >= 40) { label = \"Okay\"; pct = 50; }\n\n  return (\n    <div className=\"mt-2\">\n      <div className=\"w-full h-2 bg-gray-200 rounded\">\n        <div\n          className={`h-2 rounded ${pct >= 75 ? \"bg-green-500\" : pct >= 50 ? \"bg-yellow-500\" : \"bg-red-500\"}`}\n          style={{ width: `${pct}%` }}\n        />\n      </div>\n      <div className=\"text-xs text-gray-600 mt-1\">Strength: {label} ({bits} bits)</div>\n    </div>\n  );\n}\n\nexport default function PasswordGenerator({ onUse }) {\n  const [length, setLength] = useState(DEFAULT_LENGTH);\n  const [opts, setOpts] = useState({\n    lower: true,\n    upper: true,\n    digits: true,\n    symbols: true,\n    ambiguous: false,\n    similar: false,\n  });\n  const [value, setValue] = useState(\"\");\n  const [copied, setCopied] = useState(false);\n  const inputRef = useRef(null);\n\n  const entropy = useMemo(() => estimateEntropy(length, opts), [length, opts]);\n\n  function toggle(key) {\n    setOpts(prev => ({ ...prev, [key]: !prev[key] }));\n  }\n\n  function handleGenerate() {\n    try {\n      const password = generatePassword(length, opts);\n      setValue(password);\n      setCopied(false);\n    } catch (error) {\n      console.error(\"Failed to generate password:\", error);\n    }\n  }\n\n  async function handleCopy() {\n    if (!value) return;\n    try {\n      await navigator.clipboard.writeText(value);\n      setCopied(true);\n      setTimeout(() => setCopied(false), 2000);\n    } catch (error) {\n      console.error(\"Failed to copy password:\", error);\n    }\n  }\n\n  function handleUse() {\n    if (onUse && value) {\n      onUse(value);\n    }\n  }\n\n  return (\n    <MobileCard className=\"mb-6\">\n      <MobileCardHeader>\n        <h3 className=\"text-lg font-semibold text-gray-900 flex items-center gap-2\">\n          <Lock className=\"w-5 h-5 text-blue-600\" />\n          Password Generator\n        </h3>\n        <p className=\"text-sm text-gray-600\">Generate secure, random passwords</p>\n      </MobileCardHeader>\n      \n      <MobileCardContent>\n        <div className=\"space-y-4\">\n          {/* Generated Password Display */}\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n              Generated Password\n            </label>\n            <div className=\"flex space-x-2\">\n              <MobileInput\n                ref={inputRef}\n                value={value}\n                readOnly\n                className=\"flex-1 font-mono text-sm\"\n                placeholder=\"Click 'Generate' to create a password\"\n              />\n              <Button\n                onClick={handleCopy}\n                variant=\"outline\"\n                size=\"sm\"\n                className=\"px-3\"\n              >\n                {copied ? 'Copied!' : 'Copy'}\n              </Button>\n            </div>\n            {value && <StrengthBar bits={entropy} />}\n          </div>\n\n          {/* Length Control */}\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n              Password Length: {length}\n            </label>\n            <input\n              type=\"range\"\n              min=\"8\"\n              max=\"64\"\n              value={length}\n              onChange={(e) => setLength(parseInt(e.target.value))}\n              className=\"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer\"\n            />\n            <div className=\"flex justify-between text-xs text-gray-500 mt-1\">\n              <span>8</span>\n              <span>16</span>\n              <span>32</span>\n              <span>64</span>\n            </div>\n          </div>\n\n          {/* Character Set Options */}\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n              Character Sets\n            </label>\n            <div className=\"grid grid-cols-2 gap-2\">\n              {Object.entries(opts).map(([key, enabled]) => (\n                <label key={key} className=\"flex items-center space-x-2\">\n                  <input\n                    type=\"checkbox\"\n                    checked={enabled}\n                    onChange={() => toggle(key)}\n                    className=\"rounded border-gray-300 text-blue-600 focus:ring-blue-500\"\n                  />\n                  <span className=\"text-sm text-gray-700 capitalize\">\n                    {key === 'lower' ? 'Lowercase' : \n                     key === 'upper' ? 'Uppercase' : \n                     key === 'digits' ? 'Numbers' : \n                     key === 'symbols' ? 'Symbols' : \n                     key === 'ambiguous' ? 'Ambiguous' : \n                     key === 'similar' ? 'Similar' : key}\n                  </span>\n                </label>\n              ))}\n            </div>\n          </div>\n\n          {/* Action Buttons */}\n          <div className=\"flex space-x-2\">\n            <Button\n              onClick={handleGenerate}\n              className=\"flex-1 bg-blue-600 hover:bg-blue-700 text-white\"\n            >\n              Generate Password\n            </Button>\n            {value && onUse && (\n              <Button\n                onClick={handleUse}\n                variant=\"outline\"\n                className=\"flex-1\"\n              >\n                Use This Password\n              </Button>\n            )}\n          </div>\n\n          {/* Security Tips */}\n          <div className=\"bg-blue-50 p-3 rounded-lg border border-blue-200\">\n            <h4 className=\"text-sm font-medium text-blue-900 mb-1\">Security Tips</h4>\n            <ul className=\"text-xs text-blue-800 space-y-1\">\n              <li> Use at least 16 characters for maximum security</li>\n              <li> Include uppercase, lowercase, numbers, and symbols</li>\n              <li> Avoid similar-looking characters (l, 1, I, O, 0)</li>\n              <li> Store passwords in a secure password manager</li>\n            </ul>\n          </div>\n        </div>\n      </MobileCardContent>\n    </MobileCard>\n  );\n}\n","import { useState } from 'react'\nimport { Shield } from 'lucide-react'\nimport { API } from '../lib/api'\n\nconst CYBER_KB = {\n  passwords: {\n    keywords: ['password', 'passwords', 'strong password', 'secure password', 'passphrase', 'password manager'],\n    response: `**Password Protection**\\n\\n Use at least 16 characters when possible\\n Combine uppercase letters, lowercase letters, numbers, and symbols\\n Avoid personal information (birthdays, names, etc.)\\n Don't use common words or patterns\\n Consider using passphrases (e.g., \"KangarooJumping2025!Sydney\")\\n Use a different password for each account\\n Consider using a password manager like LastPass, 1Password, or Bitwarden\\n Enable multi-factor authentication (MFA) whenever possible`,\n    source: 'Expert Knowledge'\n  },\n}\n\nexport function useChatAssistant() {\n  const [chatMessages, setChatMessages] = useState([])\n  const [inputMessage, setInputMessage] = useState('')\n  const [isTyping, setIsTyping] = useState(false)\n  const [chatError, setChatError] = useState(false)\n\n  const formatChatMessage = (text) => {\n    if (!text) return ''\n    return text\n      .replace(/\\*\\*(.*?)\\*\\*/g, '<strong>$1</strong>')\n      .replace(/^ /gm, '<br> ')\n      .replace(/^\\* /gm, '<br> ')\n      .replace(/^- /gm, '<br> ')\n      .replace(/^### (.*$)/gm, '<h4 style=\"margin: 15px 0 8px 0; color: #374151; font-size: 16px;\">$1</h4>')\n      .replace(/^## (.*$)/gm, '<h3 style=\"margin: 15px 0 10px 0; color: #1f2937; font-size: 18px;\">$1</h3>')\n      .replace(/^# (.*$)/gm, '<h2 style=\"margin: 15px 0 10px 0; color: #111827; font-size: 20px;\">$1</h2>')\n      .replace(/\\[([^\\]]+)\\]\\(([^)]+)\\)/g, '<a href=\"$2\" target=\"_blank\" rel=\"noopener noreferrer\" style=\"color: #21a1ce; text-decoration: underline;\">$1</a>')\n      .replace(/\\n\\n/g, '<br><br>')\n      .replace(/\\n/g, '<br>')\n  }\n\n  const handleChatSubmit = async (e) => {\n    e.preventDefault()\n    if (!inputMessage.trim()) return\n\n    setChatError(false)\n\n    const userMessage = { text: inputMessage, sender: 'user' }\n    setChatMessages(prev => [...prev, userMessage])\n\n    const messageToProcess = inputMessage\n\n    setInputMessage('')\n    setIsTyping(true)\n\n    try {\n      let responseFound = false\n      let response = ''\n      let source = ''\n      const lowercaseInput = messageToProcess.toLowerCase()\n\n      for (const key in CYBER_KB) {\n        const { keywords, response: kbResponse, source: kbSource } = CYBER_KB[key]\n        for (const k of keywords) {\n          if (lowercaseInput.includes(k.toLowerCase())) {\n            response = kbResponse\n            source = kbSource\n            responseFound = true\n            break\n          }\n        }\n        if (responseFound) break\n      }\n\n      if (!responseFound) {\n        try {\n          const apiResponse = await fetch(`${API}/api/chat/`, {\n            method: 'POST',\n            headers: { 'Content-Type': 'application/json' },\n            body: JSON.stringify({ message: messageToProcess })\n          })\n          if (!apiResponse.ok) throw new Error(`API status ${apiResponse.status}`)\n          const data = await apiResponse.json()\n          if (data.success) {\n            response = data.response\n            source = data.source === 'expert_knowledge' ? 'Expert Knowledge' : 'AI Analysis'\n            responseFound = true\n          }\n        } catch (apiError) {\n          // fallthrough to default\n        }\n      }\n\n      if (!responseFound) {\n        response = \"I don't have specific information about that topic yet. For complex cybersecurity questions, I recommend consulting with a security professional.\"\n        source = 'AI Analysis'\n      }\n\n      setTimeout(() => {\n        const botMessage = { text: response, sender: 'assistant', source }\n        setChatMessages(prev => [...prev, botMessage])\n        setIsTyping(false)\n      }, 600)\n    } catch (err) {\n      setChatError(true)\n      const errorMessage = { text: 'Sorry, I encountered an error processing your request. Please try again.', sender: 'assistant', source: 'System' }\n      setChatMessages(prev => [...prev, errorMessage])\n      setIsTyping(false)\n    }\n  }\n\n  return {\n    chatMessages,\n    inputMessage,\n    isTyping,\n    chatError,\n    setInputMessage,\n    formatChatMessage,\n    handleChatSubmit,\n  }\n}\n","import React, { useState, useRef, useEffect } from 'react'\nimport { Send, Bot, User, MessageSquare, Shield } from 'lucide-react'\nimport { MobileCard, MobileCardContent } from './ui/mobile-card'\nimport { MobileInput } from './ui/mobile-input'\nimport { Button } from './ui/button'\nimport { useChatAssistant } from '../hooks/useChatAssistant'\n\nexport default function ChatAssistant({ setActiveTab }) {\n  const {\n    chatMessages,\n    inputMessage,\n    isTyping,\n    chatError,\n    setInputMessage,\n    formatChatMessage,\n    handleChatSubmit,\n  } = useChatAssistant()\n\n  return (\n    <div className=\"p-2 md:p-4\">\n\n      <MobileCard className=\"mb-2\">\n        <MobileCardContent>\n          <div className=\"border border-gray-200 rounded-lg h-96 md:h-[32rem] flex flex-col\">\n            <div className=\"flex-1 p-4 overflow-y-auto space-y-4\">\n              {chatMessages.length === 0 && (\n                <div className=\"text-center text-gray-500 mt-8\">\n                  <MessageSquare className=\"mx-auto mb-2 text-gray-300\" size={48} />\n                  <p className=\"text-sm md:text-base\">Ask me anything about cybersecurity!</p>\n                  <p className=\"text-xs md:text-sm mt-2 text-gray-400\">Try asking about passwords, phishing, or device security.</p>\n                </div>\n              )}\n\n              {chatMessages.map((message, index) => (\n                <div key={index} className={`flex ${message.sender === 'user' ? 'justify-end' : 'justify-start'}`}>\n                  <div className={`max-w-[80%] px-3 py-2 rounded-lg ${\n                    message.sender === 'user' ? 'bg-[#21a1ce] text-white' : 'bg-gray-100 text-gray-800'\n                  }`}>\n                    {message.sender === 'assistant' && (\n                      <div className=\"flex items-center mb-1\">\n                        <Shield className=\"w-4 h-4 mr-1 text-[#21a1ce]\" />\n                        <span className=\"text-xs text-[#21a1ce] font-medium\">\n                          {message.source || 'AI Assistant'}\n                        </span>\n                      </div>\n                    )}\n                    <div\n                      className=\"text-sm\"\n                      dangerouslySetInnerHTML={{\n                        __html: message.sender === 'assistant' ? formatChatMessage(message.text) : message.text,\n                      }}\n                    />\n                  </div>\n                </div>\n              ))}\n\n              {isTyping && (\n                <div className=\"flex justify-start\">\n                  <div className=\"bg-gray-100 text-gray-800 px-3 py-2 rounded-lg\">\n                    <div className=\"flex items-center\">\n                      <Shield className=\"w-4 h-4 mr-1 text-[#21a1ce]\" />\n                      <span className=\"text-xs text-[#21a1ce] font-medium mr-2\">AI Assistant</span>\n                      <div className=\"flex space-x-1\">\n                        <div className=\"w-2 h-2 bg-gray-400 rounded-full animate-bounce\"></div>\n                        <div className=\"w-2 h-2 bg-gray-400 rounded-full animate-bounce\" style={{ animationDelay: '0.1s' }}></div>\n                        <div className=\"w-2 h-2 bg-gray-400 rounded-full animate-bounce\" style={{ animationDelay: '0.2s' }}></div>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              )}\n            </div>\n\n            <form onSubmit={handleChatSubmit} className=\"border-t border-gray-200 p-4\">\n              <div className=\"flex flex-col items-center space-y-3\">\n                <div className=\"flex w-full max-w-md space-x-2\">\n                  <MobileInput\n                    type=\"text\"\n                    value={inputMessage}\n                    onChange={(e) => setInputMessage(e.target.value)}\n                    placeholder=\"Type your cybersecurity question...\"\n                    disabled={isTyping}\n                    className=\"flex-1\"\n                  />\n                  <Button\n                    type=\"submit\"\n                    disabled={isTyping || !inputMessage.trim()}\n                    className=\"bg-[#21a1ce] hover:bg-[#1a80a3] text-white px-4 py-2 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed\"\n                  >\n                    Send\n                  </Button>\n                </div>\n                {chatError && <p className=\"text-red-500 text-sm\">Connection error. Please check your internet and try again.</p>}\n              </div>\n            </form>\n          </div>\n        </MobileCardContent>\n      </MobileCard>\n    </div>\n  )\n}\n","import React from 'react';\n\nexport function MobileButton({ \n  children, \n  variant = 'primary', \n  size = 'md',\n  fullWidth = false,\n  disabled = false,\n  loading = false,\n  className = '',\n  ...props \n}) {\n  const baseClasses = 'inline-flex items-center justify-center font-medium rounded-xl transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed disabled:active:scale-100'\n  \n  const variantClasses = {\n    primary: 'bg-blue-600 text-white hover:bg-blue-700 focus:ring-blue-500 shadow-sm',\n    secondary: 'bg-gray-100 text-gray-900 hover:bg-gray-200 focus:ring-gray-500',\n    outline: 'border border-gray-300 bg-white text-gray-700 hover:bg-gray-50 focus:ring-blue-500',\n    danger: 'bg-red-600 text-white hover:bg-red-700 focus:ring-red-500 shadow-sm',\n    success: 'bg-green-600 text-white hover:bg-green-700 focus:ring-green-500 shadow-sm',\n    ghost: 'bg-transparent text-gray-700 hover:bg-gray-100 focus:ring-gray-500'\n  }\n  \n  const sizeClasses = {\n    sm: 'px-3 py-2 text-sm min-h-[44px]',\n    md: 'px-4 py-3 text-base min-h-[48px]',\n    lg: 'px-6 py-4 text-lg min-h-[56px]',\n    xl: 'px-8 py-5 text-xl min-h-[64px]'\n  }\n  \n  const widthClasses = fullWidth ? 'w-full' : ''\n  \n  const classes = `${baseClasses} ${variantClasses[variant]} ${sizeClasses[size]} ${widthClasses} ${className}`.trim()\n  \n  return (\n    <button \n      className={classes}\n      disabled={disabled || loading}\n      {...props}\n    >\n      {loading && (\n        <svg className=\"animate-spin -ml-1 mr-2 h-4 w-4\" fill=\"none\" viewBox=\"0 0 24 24\">\n          <circle className=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"4\"></circle>\n          <path className=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"></path>\n        </svg>\n      )}\n      {children}\n    </button>\n  )\n}\n\n// Mobile-specific button variants\nexport function MobileIconButton({ \n  children, \n  variant = 'ghost',\n  size = 'md',\n  className = '',\n  ...props \n}) {\n  const baseClasses = 'inline-flex items-center justify-center rounded-full transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 active:scale-95'\n  \n  const variantClasses = {\n    primary: 'bg-blue-600 text-white hover:bg-blue-700 focus:ring-blue-500 shadow-sm',\n    secondary: 'bg-gray-100 text-gray-900 hover:bg-gray-200 focus:ring-gray-500',\n    outline: 'border border-gray-300 bg-white text-gray-700 hover:bg-gray-50 focus:ring-blue-500',\n    ghost: 'bg-transparent text-gray-700 hover:bg-gray-100 focus:ring-gray-500'\n  }\n  \n  const sizeClasses = {\n    sm: 'w-10 h-10',\n    md: 'w-12 h-12',\n    lg: 'w-14 h-14',\n    xl: 'w-16 h-16'\n  }\n  \n  const classes = `${baseClasses} ${variantClasses[variant]} ${sizeClasses[size]} ${className}`.trim()\n  \n  return (\n    <button \n      className={classes}\n      {...props}\n    >\n      {children}\n    </button>\n  )\n}\n\nexport function MobileFloatingButton({ \n  children, \n  variant = 'primary',\n  size = 'lg',\n  className = '',\n  ...props \n}) {\n  const baseClasses = 'fixed bottom-20 right-4 bg-blue-600 text-white rounded-full shadow-lg hover:shadow-xl transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 active:scale-95 z-40'\n  \n  const sizeClasses = {\n    sm: 'w-12 h-12',\n    md: 'w-14 h-14',\n    lg: 'w-16 h-16',\n    xl: 'w-20 h-20'\n  }\n  \n  const classes = `${baseClasses} ${sizeClasses[size]} ${className}`.trim()\n  \n  return (\n    <button \n      className={classes}\n      {...props}\n    >\n      {children}\n    </button>\n  )\n}\n","import { useState, useEffect, useCallback } from 'react';\nimport { API_ENDPOINTS, apiPost, apiGet, apiPut } from '../lib/api';\n\nexport const useAuth = () => {\n  const [user, setUser] = useState(null);\n  const [isAuthenticated, setIsAuthenticated] = useState(false);\n  const [isLoading, setIsLoading] = useState(true);\n  const [error, setError] = useState(null);\n\n  // Refresh auth token function (defined early to avoid TDZ in callbacks below)\n  const refreshAuthToken = useCallback(async () => {\n    try {\n      const refreshToken = localStorage.getItem('refreshToken');\n      if (!refreshToken) {\n        return { success: false, error: 'No refresh token available' };\n      }\n\n      const response = await apiPost(API_ENDPOINTS.AUTH.REFRESH, {\n        refresh_token: refreshToken\n      });\n\n      if (response.ok) {\n        const responseData = await response.json();\n        const { access_token, refresh_token: newRefreshToken } = responseData;\n        localStorage.setItem('authToken', access_token);\n        if (newRefreshToken) {\n          localStorage.setItem('refreshToken', newRefreshToken);\n        }\n        return { success: true };\n      } else {\n        return { success: false, error: 'Token refresh failed' };\n      }\n    } catch (err) {\n      console.error('Token refresh error:', err);\n      return { success: false, error: 'Token refresh failed' };\n    }\n  }, []);\n\n  // Central auth check function (reusable and event-driven)\n  const checkAuth = useCallback(async () => {\n    const token = localStorage.getItem('authToken');\n    if (token) {\n      try {\n        const response = await apiGet(API_ENDPOINTS.AUTH.PROFILE);\n        if (response.ok) {\n          const userData = await response.json();\n          const newUser = userData.user || userData;\n          setUser(newUser);\n          setIsAuthenticated(true);\n        } else if (response.status === 401) {\n          const refreshResult = await refreshAuthToken();\n          if (!refreshResult.success) {\n            localStorage.removeItem('authToken');\n            localStorage.removeItem('refreshToken');\n            setUser(null);\n            setIsAuthenticated(false);\n          }\n        } else {\n          localStorage.removeItem('authToken');\n          localStorage.removeItem('refreshToken');\n          setUser(null);\n          setIsAuthenticated(false);\n        }\n      } catch (_err) {\n        localStorage.removeItem('authToken');\n        localStorage.removeItem('refreshToken');\n        setUser(null);\n        setIsAuthenticated(false);\n      }\n    } else {\n      setUser(null);\n      setIsAuthenticated(false);\n    }\n    setIsLoading(false);\n  }, [refreshAuthToken]);\n\n  // On mount: check auth and subscribe to global auth change events\n  useEffect(() => {\n    checkAuth();\n    const handler = () => checkAuth();\n    window.addEventListener('remaleh-auth-changed', handler);\n    return () => window.removeEventListener('remaleh-auth-changed', handler);\n  }, [checkAuth]);\n\n  // Login function\n  const login = useCallback(async (email, password) => {\n    try {\n      setError(null);\n      setIsLoading(true);\n      \n      console.log('Attempting login to:', API_ENDPOINTS.AUTH.LOGIN);\n      \n      const response = await apiPost(API_ENDPOINTS.AUTH.LOGIN, {\n        email,\n        password\n      });\n      \n      if (response.ok) {\n        const responseData = await response.json();\n        console.log('Login response:', responseData);\n        \n        const { access_token, refresh_token, user: userData } = responseData;\n        \n        localStorage.setItem('authToken', access_token);\n        localStorage.setItem('refreshToken', refresh_token);\n        \n        // Ensure we have the user data with proper structure\n        const user = userData || responseData.user;\n        console.log('Setting user:', user);\n        console.log('User is_admin:', user?.is_admin);\n        console.log('User role:', user?.role);\n        \n        setUser(user);\n        setIsAuthenticated(true);\n        // Notify all hook instances (e.g., App) to refresh their state\n        window.dispatchEvent(new Event('remaleh-auth-changed'));\n        return { success: true };\n      } else {\n        const errorData = await response.json();\n        setError(errorData.message || 'Login failed');\n        return { success: false, error: errorData.message };\n      }\n    } catch (err) {\n      console.error('Login error details:', err);\n      \n      // Provide more specific error messages\n      let errorMessage = 'Network error occurred';\n      if (err.name === 'TypeError' && err.message.includes('fetch')) {\n        errorMessage = 'Cannot connect to server. Please check your internet connection or server status.';\n      } else if (err.message) {\n        errorMessage = err.message;\n      }\n      \n      setError(errorMessage);\n      return { success: false, error: errorMessage };\n    } finally {\n      setIsLoading(false);\n    }\n  }, []);\n\n  // Register function\n  const register = useCallback(async (userData) => {\n    try {\n      setError(null);\n      setIsLoading(true);\n      \n      const response = await apiPost(API_ENDPOINTS.AUTH.REGISTER, userData);\n      \n      if (response.ok) {\n        const { access_token, refresh_token, user: newUser } = await response.json();\n        \n        localStorage.setItem('authToken', access_token);\n        localStorage.setItem('refreshToken', refresh_token);\n        \n        setUser(newUser);\n        setIsAuthenticated(true);\n        window.dispatchEvent(new Event('remaleh-auth-changed'));\n        return { success: true };\n      } else {\n        const errorData = await response.json();\n        setError(errorData.message || 'Registration failed');\n        return { success: false, error: errorData.message };\n      }\n    } catch (err) {\n      setError('Network error occurred');\n      return { success: false, error: 'Network error occurred' };\n    } finally {\n      setIsLoading(false);\n    }\n  }, []);\n\n  // Logout function\n  const logout = useCallback(async () => {\n    try {\n      const token = localStorage.getItem('authToken');\n      if (token) {\n        await apiPost(API_ENDPOINTS.AUTH.LOGOUT);\n      }\n    } catch (err) {\n      console.error('Logout error:', err);\n    } finally {\n      localStorage.removeItem('authToken');\n      localStorage.removeItem('refreshToken');\n      setUser(null);\n      setIsAuthenticated(false);\n      window.dispatchEvent(new Event('remaleh-auth-changed'));\n    }\n  }, []);\n\n  // Update profile function\n  const updateProfile = useCallback(async (profileData) => {\n    try {\n      setError(null);\n      setIsLoading(true);\n      \n      const response = await apiPut(API_ENDPOINTS.AUTH.PROFILE, profileData);\n      \n      if (response.ok) {\n        const updatedUser = await response.json();\n        setUser(updatedUser);\n        return { success: true, user: updatedUser };\n      } else {\n        const errorData = await response.json();\n        setError(errorData.message || 'Profile update failed');\n        return { success: false, error: errorData.message };\n      }\n    } catch (err) {\n      setError('Network error occurred');\n      return { success: false, error: 'Network error occurred' };\n    } finally {\n      setIsLoading(false);\n    }\n  }, []);\n\n  \n\n  // Change password function\n  const changePassword = useCallback(async (currentPassword, newPassword) => {\n    try {\n      setError(null);\n      setIsLoading(true);\n      \n      const response = await apiPost(API_ENDPOINTS.AUTH.CHANGE_PASSWORD, {\n        current_password: currentPassword,\n        new_password: newPassword\n      });\n      \n      if (response.ok) {\n        return { success: true };\n      } else {\n        const errorData = await response.json();\n        setError(errorData.message || 'Password change failed');\n        return { success: false, error: errorData.message };\n      }\n    } catch (err) {\n      setError('Network error occurred');\n      return { success: false, error: 'Network error occurred' };\n    } finally {\n      setIsLoading(false);\n    }\n  }, []);\n\n  // Debug function to check user state\n  const debugUserState = useCallback(() => {\n    console.log('=== USER AUTH DEBUG ===');\n    console.log('User object:', user);\n    console.log('Is authenticated:', isAuthenticated);\n    console.log('Is loading:', isLoading);\n    console.log('User is_admin:', user?.is_admin);\n    console.log('User role:', user?.role);\n    console.log('User email:', user?.email);\n    console.log('Local storage token:', localStorage.getItem('authToken'));\n    console.log('========================');\n  }, [user, isAuthenticated, isLoading]);\n\n  return {\n    user,\n    isAuthenticated,\n    isLoading,\n    error,\n    login,\n    register,\n    logout,\n    updateProfile,\n    changePassword,\n    refreshAuthToken,\n    clearError: () => setError(null),\n    debugUserState\n  };\n};\n","/**\n * Content Management Utility for Remaleh Protect Learning Hub\n * This makes it easy to update learning content without code changes\n */\n\nimport { API, apiPost, apiGet, apiPut, apiDelete } from '../lib/api'\n\n// Backend API endpoints\nconst API_ENDPOINTS = {\n  MODULES: '/api/learning/modules',\n  MODULE: (id) => `/api/learning/modules/${id}`,\n  LESSONS: (moduleId) => `/api/learning/modules/${moduleId}/lessons`,\n  LESSON: (moduleId, lessonId) => `/api/learning/modules/${moduleId}/lessons/${lessonId}`,\n  PROGRESS: (moduleId) => `/api/learning/modules/${moduleId}/progress`,\n  PROGRESS_OVERVIEW: '/api/learning/progress/overview',\n  EXPORT: '/api/learning/content/export',\n  IMPORT: '/api/learning/content/import',\n  LEARNING_MEDIA: '/api/learning/media'\n}\n\n// Fallback to local storage if backend is unavailable\nconst FALLBACK_STORAGE_KEY = 'learning_content_fallback'\n\n// Get all learning modules from backend\nexport const getAllModules = async (forceRefresh = false) => {\n  try {\n    // Add cache-busting parameter if forceRefresh is true\n    const endpoint = forceRefresh ? `${API_ENDPOINTS.MODULES}?t=${Date.now()}` : API_ENDPOINTS.MODULES\n    console.log(' getAllModules called with forceRefresh:', forceRefresh, 'endpoint:', endpoint)\n    \n    const response = await apiGet(endpoint)\n    if (response.ok) {\n      const data = await response.json()\n      console.log(' getAllModules fresh data received:', data)\n      // Store in fallback storage\n      localStorage.setItem(FALLBACK_STORAGE_KEY, JSON.stringify(data))\n      return data.modules || []\n    }\n  } catch (error) {\n    console.warn('Backend unavailable, using fallback data:', error)\n  }\n  \n  // Only use fallback if not forcing refresh\n  if (!forceRefresh) {\n    try {\n      const fallbackData = localStorage.getItem(FALLBACK_STORAGE_KEY)\n      if (fallbackData) {\n        console.log(' getAllModules using fallback data')\n        return JSON.parse(fallbackData).modules || []\n      }\n    } catch (error) {\n      console.warn('Fallback data unavailable:', error)\n    }\n  }\n  \n  // Return empty array if no data available\n  return []\n}\n\n// Get specific module by ID\nexport const getModuleById = async (moduleId) => {\n  try {\n    const response = await apiGet(API_ENDPOINTS.MODULE(moduleId))\n    if (response.ok) {\n      const data = await response.json()\n      return data\n    }\n  } catch (error) {\n    console.warn('Backend unavailable, using fallback data:', error)\n  }\n  \n  // Fallback to local storage\n  try {\n    const fallbackData = localStorage.getItem(FALLBACK_STORAGE_KEY)\n    if (fallbackData) {\n      const modules = JSON.parse(fallbackData).modules || []\n      return modules.find(m => m.id === moduleId)\n    }\n  } catch (error) {\n    console.warn('Fallback data unavailable:', error)\n  }\n  \n  return null\n}\n\n// Get specific lesson by ID\nexport const getLessonById = async (moduleId, lessonId) => {\n  try {\n    const module = await getModuleById(moduleId)\n    if (module && module.content && module.content.lessons) {\n      return module.content.lessons.find(l => l.id === lessonId)\n    }\n  } catch (error) {\n    console.warn('Error getting lesson:', error)\n  }\n  \n  return null\n}\n\n// Get module progress for current user\nexport const getModuleProgress = async (moduleId) => {\n  try {\n    const response = await apiGet(API_ENDPOINTS.PROGRESS(moduleId))\n    if (response.ok) {\n      const data = await response.json()\n      return data\n    }\n  } catch (error) {\n    console.warn('Backend unavailable, using local progress:', error)\n  }\n  \n  // Fallback to local storage\n  try {\n    const localProgress = localStorage.getItem(`module_progress_${moduleId}`)\n    if (localProgress) {\n      return JSON.parse(localProgress)\n    }\n  } catch (error) {\n    console.warn('Local progress unavailable:', error)\n  }\n  \n  return {\n    module_id: moduleId,\n    completed: false,\n    score: 0,\n    started_at: null,\n    completed_at: null\n  }\n}\n\n// Get overall learning progress\nexport const getOverallProgress = async () => {\n  try {\n    const response = await apiGet(API_ENDPOINTS.PROGRESS_OVERVIEW)\n    if (response.ok) {\n      const data = await response.json()\n      return data\n    }\n  } catch (error) {\n    console.warn('Backend unavailable, using local progress:', error)\n  }\n  \n  // Fallback to local calculation\n  try {\n    const modules = await getAllModules()\n    const completedModules = modules.filter(m => {\n      const progress = localStorage.getItem(`module_progress_${m.id}`)\n      return progress && JSON.parse(progress).completed\n    }).length\n    \n    return {\n      total_modules: modules.length,\n      completed_modules: completedModules,\n      completion_percentage: modules.length > 0 ? (completedModules / modules.length * 100) : 0,\n      total_score: 0,\n      average_score: 0\n    }\n  } catch (error) {\n    console.warn('Local progress calculation failed:', error)\n    return {\n      total_modules: 0,\n      completed_modules: 0,\n      completion_percentage: 0,\n      total_score: 0,\n      average_score: 0\n    }\n  }\n}\n\n// Get next recommended lesson\nexport const getNextRecommendedLesson = async () => {\n  try {\n    const modules = await getAllModules()\n    const overallProgress = await getOverallProgress()\n    \n    // Find first incomplete module\n    for (const module of modules) {\n      const progress = await getModuleProgress(module.id)\n      if (!progress.completed) {\n        return {\n          module_id: module.id,\n          module_title: module.title,\n          lesson_id: 1, // Start with first lesson\n          lesson_title: module.content?.lessons?.[0]?.title || 'Introduction'\n        }\n      }\n    }\n    \n    return null // All modules completed\n  } catch (error) {\n    console.warn('Error getting next recommended lesson:', error)\n    return null\n  }\n}\n\n// Compute next recommended lesson without extra API calls\nexport const computeNextRecommendedLesson = (modules, overallProgress) => {\n  try {\n    if (!Array.isArray(modules) || !overallProgress) return null\n    const completedSet = new Set(\n      (overallProgress.lesson_progress_records || [])\n        .filter((r) => r.completed)\n        .map((r) => `${r.module_id}_${r.lesson_id}`)\n    )\n\n    for (const module of modules) {\n      const lessons = module?.content?.lessons || []\n      for (const lesson of lessons) {\n        const key = `${module.id}_${lesson.id}`\n        if (!completedSet.has(key)) {\n          return {\n            module_id: module.id,\n            module_title: module.title,\n            lesson_id: lesson.id,\n            lesson_title: lesson.title\n          }\n        }\n      }\n    }\n    return null\n  } catch (error) {\n    console.warn('Error computing next recommended lesson:', error)\n    return null\n  }\n}\n\n// Get learning statistics\nexport const getLearningStats = async () => {\n  try {\n    const overallProgress = await getOverallProgress()\n    const modules = await getAllModules()\n    \n    return {\n      ...overallProgress,\n      total_lessons: modules.reduce((total, m) => {\n        return total + (m.content?.lessons?.length || 0)\n      }, 0),\n      estimated_total_time: modules.reduce((total, m) => {\n        return total + (m.estimated_time || 0)\n      }, 0)\n    }\n  } catch (error) {\n    console.warn('Error getting learning stats:', error)\n    return {\n      total_modules: 0,\n      completed_modules: 0,\n      completion_percentage: 0,\n      total_lessons: 0,\n      estimated_total_time: 0\n    }\n  }\n}\n\n// Search learning content\nexport const searchLearningContent = async (query) => {\n  try {\n    const modules = await getAllModules()\n    const results = []\n    \n    const searchTerm = query.toLowerCase()\n    \n    for (const module of modules) {\n      // Search in module title and description\n      if (module.title.toLowerCase().includes(searchTerm) ||\n          module.description.toLowerCase().includes(searchTerm)) {\n        results.push({\n          type: 'module',\n          id: module.id,\n          title: module.title,\n          description: module.description,\n          difficulty: module.difficulty\n        })\n      }\n      \n      // Search in lesson content\n      if (module.content && module.content.lessons) {\n        for (const lesson of module.content.lessons) {\n          if (lesson.title.toLowerCase().includes(searchTerm) ||\n              lesson.content.toLowerCase().includes(searchTerm)) {\n            results.push({\n              type: 'lesson',\n              module_id: module.id,\n              module_title: module.title,\n              id: lesson.id,\n              title: lesson.title,\n              content: lesson.content.substring(0, 100) + '...'\n            })\n          }\n        }\n      }\n    }\n    \n    return results\n  } catch (error) {\n    console.warn('Error searching content:', error)\n    return []\n  }\n}\n\n// Get content by difficulty level\nexport const getContentByDifficulty = async (difficulty) => {\n  try {\n    const modules = await getAllModules()\n    return modules.filter(m => m.difficulty === difficulty)\n  } catch (error) {\n    console.warn('Error getting content by difficulty:', error)\n    return []\n  }\n}\n\n// Get quick tips (first lesson from each module)\nexport const getQuickTips = async () => {\n  try {\n    const modules = await getAllModules()\n    const tips = []\n    \n    for (const module of modules) {\n      if (module.content && module.content.lessons && module.content.lessons.length > 0) {\n        const firstLesson = module.content.lessons[0]\n        tips.push({\n          module_id: module.id,\n          module_title: module.title,\n          lesson_id: firstLesson.id,\n          lesson_title: firstLesson.title,\n          content: firstLesson.content.substring(0, 150) + '...',\n          difficulty: module.difficulty,\n          estimated_time: module.estimated_time\n        })\n      }\n    }\n    \n    return tips\n  } catch (error) {\n    console.warn('Error getting quick tips:', error)\n    return []\n  }\n}\n\n// Get content update information\nexport const getContentUpdateInfo = async () => {\n  try {\n    const response = await apiGet(API_ENDPOINTS.EXPORT)\n    if (response.ok) {\n      const data = await response.json()\n      return data.metadata\n    }\n  } catch (error) {\n    console.warn('Backend unavailable, using fallback data:', error)\n  }\n  \n  // Fallback to local storage\n  try {\n    const fallbackData = localStorage.getItem(FALLBACK_STORAGE_KEY)\n    if (fallbackData) {\n      const data = JSON.parse(fallbackData)\n      return data.metadata || {\n        version: '1.0',\n        last_updated: new Date().toISOString(),\n        total_modules: 0,\n        total_lessons: 0\n      }\n    }\n  } catch (error) {\n    console.warn('Fallback data unavailable:', error)\n  }\n  \n  return {\n    version: '1.0',\n    last_updated: new Date().toISOString(),\n    total_modules: 0,\n    total_lessons: 0\n  }\n}\n\n// Admin functions for content management\nexport const createModule = async (moduleData) => {\n  try {\n    const response = await apiPost(API_ENDPOINTS.MODULES, moduleData)\n    if (response.ok) {\n      const data = await response.json()\n      // Refresh local cache\n      await getAllModules()\n      return data\n    } else {\n      throw new Error('Failed to create module')\n    }\n  } catch (error) {\n    console.error('Error creating module:', error)\n    throw error\n  }\n}\n\nexport const updateModule = async (moduleId, moduleData) => {\n  try {\n    console.log(' updateModule called with:', { moduleId, moduleData })\n    console.log(' API endpoint:', API_ENDPOINTS.MODULE(moduleId))\n    \n    const response = await apiPut(API_ENDPOINTS.MODULE(moduleId), moduleData)\n    \n    console.log(' Response status:', response.status)\n    console.log(' Response ok:', response.ok)\n    \n    if (response.ok) {\n      const data = await response.json()\n      console.log(' Module updated successfully:', data)\n      // Refresh local cache\n      await getAllModules()\n      return data\n    } else {\n      console.error(' Failed to update module, status:', response.status)\n      throw new Error('Failed to update module')\n    }\n  } catch (error) {\n    console.error(' Error in updateModule:', error)\n    throw error\n  }\n}\n\nexport const deleteModule = async (moduleId) => {\n  try {\n    const response = await apiDelete(API_ENDPOINTS.MODULE(moduleId))\n    if (response.ok) {\n      // Refresh local cache\n      await getAllModules()\n      return { message: 'Module deleted successfully' }\n    } else {\n      throw new Error('Failed to delete module')\n    }\n  } catch (error) {\n    console.error('Error deleting module:', error)\n    throw error\n  }\n}\n\nexport const addLesson = async (moduleId, lessonData) => {\n  try {\n    console.log(' contentManager.addLesson called with:', { moduleId, lessonData })\n    console.log(' API endpoint:', API_ENDPOINTS.LESSONS(moduleId))\n    \n    const response = await apiPost(API_ENDPOINTS.LESSONS(moduleId), lessonData)\n    console.log(' API response received:', response)\n    console.log(' Response status:', response.status)\n    console.log(' Response ok:', response.ok)\n    \n    if (response.ok) {\n      const data = await response.json()\n      console.log(' Response data:', data)\n      // Refresh local cache\n      await getAllModules()\n      return data\n    } else {\n      console.log(' Response not ok, status:', response.status)\n      const errorData = await response.text()\n      console.log(' Error response body:', errorData)\n      throw new Error(`Failed to add lesson: ${response.status}`)\n    }\n  } catch (error) {\n    console.error(' Error in addLesson:', error)\n    throw error\n  }\n}\n\nexport const uploadLessonMedia = async (file) => {\n  try {\n    const token = localStorage.getItem('authToken')\n    const formData = new FormData()\n    formData.append('file', file)\n    const res = await fetch(`${API}${API_ENDPOINTS.LEARNING_MEDIA}`, {\n      method: 'POST',\n      headers: {\n        ...(token && { 'Authorization': `Bearer ${token}` })\n      },\n      body: formData\n    })\n\n    const text = await res.text()\n    let data = null\n    try { data = text ? JSON.parse(text) : null } catch {}\n\n    if (!res.ok) {\n      const message = (data && (data.error || data.message)) || `Upload failed (HTTP ${res.status})`\n      throw new Error(message)\n    }\n\n    if (!data || !data.url) {\n      throw new Error('Upload failed: unexpected response')\n    }\n    return data\n  } catch (error) {\n    console.error(' Error uploading lesson media:', error)\n    throw error\n  }\n}\n\nexport const updateLesson = async (moduleId, lessonId, lessonData) => {\n  try {\n    const response = await apiPut(API_ENDPOINTS.LESSON(moduleId, lessonId), lessonData)\n    if (response.ok) {\n      const data = await response.json()\n      // Refresh local cache\n      await getAllModules()\n      return data\n    } else {\n      throw new Error('Failed to update lesson')\n    }\n  } catch (error) {\n    console.error('Error updating lesson:', error)\n    throw error\n  }\n}\n\nexport const deleteLesson = async (moduleId, lessonId) => {\n  try {\n    console.log(' contentManager.deleteLesson called with:', { moduleId, lessonId })\n    console.log(' API endpoint:', API_ENDPOINTS.LESSON(moduleId, lessonId))\n    \n    const response = await apiDelete(API_ENDPOINTS.LESSON(moduleId, lessonId))\n    console.log(' API response received:', response)\n    console.log(' Response status:', response.status)\n    console.log(' Response ok:', response.ok)\n    \n    if (response.ok) {\n      console.log(' Lesson deleted successfully from API')\n      // Refresh local cache\n      await getAllModules()\n      return { message: 'Lesson deleted successfully' }\n    } else {\n      console.log(' API response not ok, status:', response.status)\n      const errorData = await response.json()\n      console.log(' Error response body:', errorData)\n      throw new Error(errorData.error || `HTTP error! status: ${response.status}`)\n    }\n  } catch (error) {\n    console.error(' Error in deleteLesson:', error)\n    throw error\n  }\n}\n\n// Update lesson progress (new function for lesson-level tracking)\nexport const updateLessonProgress = async (moduleId, lessonId, progressData) => {\n  try {\n    console.log(' contentManager.updateLessonProgress called with:', { moduleId, lessonId, progressData })\n    const endpoint = `/api/learning/modules/${moduleId}/lessons/${lessonId}/progress`\n    console.log(' API endpoint:', endpoint)\n    \n    const response = await apiPost(endpoint, progressData)\n    console.log(' API response received:', response)\n    console.log(' Response status:', response.status)\n    console.log(' Response ok:', response.ok)\n    \n    if (response.ok) {\n      const data = await response.json()\n      console.log(' Lesson progress updated successfully:', data)\n      return data\n    } else {\n      console.log(' API response not ok, status:', response.status)\n      const errorData = await response.json()\n      console.log(' Error response body:', errorData)\n      throw new Error(errorData.error || `HTTP error! status: ${response.status}`)\n    }\n  } catch (error) {\n    console.warn('Backend unavailable, storing progress locally:', error)\n    // Store locally as fallback\n    const localProgress = {\n      module_id: moduleId,\n      lesson_id: lessonId,\n      completed: progressData.completed || false,\n      score: progressData.score || 0,\n      started_at: new Date().toISOString(),\n      completed_at: progressData.completed ? new Date().toISOString() : null\n    }\n    localStorage.setItem(`lesson_progress_${moduleId}_${lessonId}`, JSON.stringify(localProgress))\n    return { progress: localProgress }\n  }\n}\n\n// Update user progress (kept for backward compatibility)\nexport const updateProgress = async (moduleId, progressData) => {\n  try {\n    const response = await apiPost(API_ENDPOINTS.PROGRESS(moduleId), progressData)\n    if (response.ok) {\n      const data = await response.json()\n      // Also store locally as backup\n      localStorage.setItem(`module_progress_${moduleId}`, JSON.stringify(data.progress))\n      return data\n    } else {\n      throw new Error('Failed to update progress')\n    }\n  } catch (error) {\n    console.warn('Backend unavailable, storing progress locally:', error)\n    // Store locally as fallback\n    const localProgress = {\n      module_id: moduleId,\n      completed: progressData.completed || false,\n      score: progressData.score || 0,\n      started_at: new Date().toISOString(),\n      completed_at: progressData.completed ? new Date().toISOString() : null\n    }\n    localStorage.setItem(`module_progress_${moduleId}`, JSON.stringify(localProgress))\n    return { progress: localProgress }\n  }\n}\n\n// Export content (admin only)\nexport const exportContent = async () => {\n  try {\n    const response = await apiGet(API_ENDPOINTS.EXPORT)\n    if (response.ok) {\n      const data = await response.json()\n      return data\n    } else {\n      throw new Error('Failed to export content')\n    }\n  } catch (error) {\n    console.error('Error exporting content:', error)\n    throw error\n  }\n}\n\n// Import content (admin only)\nexport const importContent = async (contentData) => {\n  try {\n    const response = await apiPost(API_ENDPOINTS.IMPORT, contentData)\n    if (response.ok) {\n      const data = await response.json()\n      // Refresh local cache\n      await getAllModules()\n      return data\n    } else {\n      throw new Error('Failed to import content')\n    }\n  } catch (error) {\n    console.error('Error importing content:', error)\n    throw error\n  }\n}\n","import React, { useState, useEffect } from 'react'\nimport { BookOpen, CheckCircle, Search, Shield, ArrowLeft, RefreshCw } from 'lucide-react'\nimport { MobileCard, MobileCardHeader, MobileCardContent } from './ui/mobile-card'\nimport { MobileButton } from './ui/mobile-button'\nimport { MobileInput } from './ui/mobile-input'\nimport { useAuth } from '../hooks/useAuth'\nimport { \n  getAllModules, \n  getOverallProgress,\n  computeNextRecommendedLesson\n} from '../utils/contentManager'\n\nexport default function LearnHub({ setActiveTab }) {\n  const { isAuthenticated } = useAuth()\n  const [selectedModule, setSelectedModule] = useState(null)\n  const [selectedLesson, setSelectedLesson] = useState(null)\n  const [searchTerm, setSearchTerm] = useState('')\n  const [difficultyFilter, setDifficultyFilter] = useState('all')\n  const [completedLessons, setCompletedLessons] = useState([])\n  const [showCompleted, setShowCompleted] = useState(false)\n  const [modules, setModules] = useState([])\n  const [overallProgress, setOverallProgress] = useState({ completed: 0, total: 0, progress: 0 })\n  const [nextLesson, setNextLesson] = useState(null)\n  const [loading, setLoading] = useState(true)\n  const [error, setError] = useState(null)\n  \n  // Load data from backend APIs\n  useEffect(() => {\n    if (isAuthenticated) {\n      loadData()\n    } else {\n      // Set loading to false for non-authenticated users\n      setLoading(false)\n    }\n  }, [isAuthenticated])\n  \n  const loadData = async () => {\n    try {\n      setLoading(true)\n      setError(null)\n      \n      // Load modules and progress in parallel\n      const [modulesData, progressData] = await Promise.all([\n        getAllModules(),\n        getOverallProgress()\n      ])\n      \n      setModules(modulesData)\n      setOverallProgress(progressData)\n      setNextLesson(computeNextRecommendedLesson(modulesData, progressData))\n      \n      // Avoid extra per-module progress calls; compute view state locally from overallProgress\n      \n    } catch (err) {\n      setError('Failed to load learning content. Please try again.')\n    } finally {\n      setLoading(false)\n    }\n  }\n  \n  // Load completed lessons from backend lesson progress data\n  useEffect(() => {\n    if (overallProgress.lesson_progress_records && overallProgress.lesson_progress_records.length > 0) {\n      // Extract completed lesson IDs from lesson progress records\n      // IMPORTANT: We need to create unique identifiers that combine module_id and lesson_id\n      // because lesson IDs are not globally unique across modules\n      const backendCompletedKeys = overallProgress.lesson_progress_records\n        .filter(record => record.completed)\n        .map(record => `${record.module_id}_${record.lesson_id}`)\n      \n      // Optional: detect mismatches between backend and frontend (no UI/log output)\n      const backendCompletedSet = new Set(backendCompletedKeys)\n      const frontendCompletedSet = new Set(completedLessons)\n      const missingInFrontend = backendCompletedKeys.filter(key => !frontendCompletedSet.has(key))\n      const extraInFrontend = completedLessons.filter(key => !backendCompletedSet.has(key))\n      \n      // Only update if backend has more completed lessons than local state\n      // This prevents overwriting local progress with stale backend data\n      if (backendCompletedKeys.length > completedLessons.length) {\n        setCompletedLessons(backendCompletedKeys)\n      } else if (backendCompletedKeys.length === completedLessons.length) {\n        // Check if there are any new keys in backend that aren't in local state\n        const newKeys = backendCompletedKeys.filter(key => !completedLessons.includes(key))\n        if (newKeys.length > 0) {\n          const updatedKeys = [...new Set([...completedLessons, ...newKeys])]\n          setCompletedLessons(updatedKeys)\n        }\n      }\n    }\n  }, [overallProgress])\n  \n  // Mark lesson as complete and update backend progress\n  const markLessonComplete = async (moduleId, lessonId) => {\n    try {\n      // Find the module by provided moduleId (avoid cross-module ID collisions)\n      const module = modules.find(m => String(m.id) === String(moduleId))\n      if (!module) {\n        return\n      }\n\n      // If already completed, skip backend call\n      const lessonKeyPre = `${String(module.id)}_${String(lessonId)}`\n      if (completedLessons.includes(lessonKeyPre)) {\n        return\n      }\n\n      // Update backend lesson progress\n      const progressData = {\n        completed: true,\n        score: 100, // Full score for completing lesson\n        completed_at: new Date().toISOString()\n      }\n\n      // Import updateLessonProgress function for lesson-level tracking\n      const { updateLessonProgress } = await import('../utils/contentManager')\n      const result = await updateLessonProgress(module.id, lessonId, progressData)\n      // Normalize backend response and ensure completed flag is true\n      const backendKey = `${String(result?.progress?.module_id ?? module.id)}_${String(result?.progress?.lesson_id ?? lessonId)}`\n      const backendCompleted = Boolean(result?.progress?.completed ?? true)\n\n      // Update local state - prefer backend key if present\n      const lessonKey = backendCompleted ? backendKey : `${String(module.id)}_${String(lessonId)}`\n      setCompletedLessons(prev => {\n        const updated = [...new Set([...prev, lessonKey])]\n        return updated\n      })\n      \n      // Optimistically update overall progress locally for instant UI feedback\n      setOverallProgress(prev => {\n        const prevRecords = Array.isArray(prev?.lesson_progress_records) ? prev.lesson_progress_records : []\n        const updatedRecords = [...prevRecords]\n        const targetModuleId = result?.progress?.module_id || module.id\n        const targetLessonId = result?.progress?.lesson_id || lessonId\n        const existingIndex = updatedRecords.findIndex(r => r.module_id === targetModuleId && r.lesson_id === targetLessonId)\n        if (existingIndex >= 0) {\n          updatedRecords[existingIndex] = { ...updatedRecords[existingIndex], completed: true, score: 100 }\n        } else {\n          updatedRecords.push({ module_id: targetModuleId, lesson_id: targetLessonId, completed: true, score: 100 })\n        }\n        const completedCount = updatedRecords.filter(r => r.completed).length\n        const totalLessons = prev?.total_lessons || (modules.reduce((acc, m) => acc + (m.content?.lessons?.length || 0), 0))\n        const percentage = totalLessons > 0 ? (completedCount / totalLessons) * 100 : prev?.completion_percentage || 0\n        const next = {\n          ...prev,\n          lesson_progress_records: updatedRecords,\n          completed_lessons: completedCount,\n          completion_percentage: percentage\n        }\n        // Also optimistically compute next lesson locally\n        setNextLesson(computeNextRecommendedLesson(modules, next))\n        return next\n      })\n\n      // Lightweight refresh: only fetch overall progress and recompute next lesson\n      const refreshedProgress = await getOverallProgress()\n      // Merge backend progress with local optimistic completion to avoid UI regression\n      const localCompletedSet = new Set([...(completedLessons || []), lessonKey])\n      const mergedRecords = Array.isArray(refreshedProgress?.lesson_progress_records)\n        ? [...refreshedProgress.lesson_progress_records]\n        : []\n      for (const key of localCompletedSet) {\n        const [mIdStr, lIdStr] = key.split('_')\n        const mId = Number(mIdStr)\n        const lId = Number(lIdStr)\n        const idx = mergedRecords.findIndex(r => r.module_id === mId && r.lesson_id === lId)\n        if (idx >= 0) {\n          mergedRecords[idx] = { ...mergedRecords[idx], completed: true, score: 100 }\n        } else {\n          mergedRecords.push({ module_id: mId, lesson_id: lId, completed: true, score: 100 })\n        }\n      }\n      const mergedCompletedCount = mergedRecords.filter(r => r.completed).length\n      const totalLessonsMerged = refreshedProgress?.total_lessons || (modules.reduce((acc, m) => acc + (m.content?.lessons?.length || 0), 0))\n      const mergedPercentage = totalLessonsMerged > 0 ? (mergedCompletedCount / totalLessonsMerged) * 100 : (refreshedProgress?.completion_percentage || 0)\n      const mergedProgress = {\n        ...refreshedProgress,\n        lesson_progress_records: mergedRecords,\n        completed_lessons: mergedCompletedCount,\n        completion_percentage: mergedPercentage\n      }\n      setOverallProgress(mergedProgress)\n      setNextLesson(computeNextRecommendedLesson(modules, mergedProgress))\n    } catch (error) {\n      // Fallback to local storage if backend fails\n      const fallbackKey = `${selectedModule?.id || 'unknown'}_${lessonId}`\n      setCompletedLessons(prev => {\n        const updated = [...new Set([...prev, fallbackKey])]\n        return updated\n      })\n      try {\n        const tentative = [...new Set([...completedLessons, fallbackKey])]\n        localStorage.setItem('remaleh-completed-lessons', JSON.stringify(tentative))\n      } catch {}\n    }\n  }\n  \n  // Get filtered modules based on search and difficulty\n  const getFilteredModules = () => {\n    let filtered = modules\n    \n    if (difficultyFilter !== 'all') {\n      filtered = filtered.filter(module => (module.difficulty || '').toLowerCase() === difficultyFilter)\n    }\n    \n    if (searchTerm) {\n      const searchLower = searchTerm.toLowerCase()\n      filtered = filtered.filter(module => \n        module.title.toLowerCase().includes(searchLower) ||\n        (module.description && module.description.toLowerCase().includes(searchLower))\n      )\n    }\n    \n    return filtered\n  }\n  \n  const filteredModules = getFilteredModules()\n\n  // Show authentication required message for non-authenticated users\n  if (!isAuthenticated) {\n    return (\n      <div className=\"space-y-6 p-4\">\n        <div className=\"bg-gradient-to-r from-[#21a1ce] to-[#1a8bb8] rounded-2xl p-6 text-white shadow-lg\">\n          <div className=\"text-center\">\n            <div className=\"flex items-center justify-center mb-4\">\n              <div className=\"bg-white bg-opacity-20 p-3 rounded-full mr-3\">\n                <BookOpen className=\"w-8 h-8 text-white\" />\n              </div>\n              <h1 className=\"text-3xl font-bold\">Learning Hub</h1>\n            </div>\n            \n            <div className=\"bg-white bg-opacity-10 rounded-xl p-4 mb-4 backdrop-blur-sm\">\n              <p className=\"text-white text-base leading-relaxed font-medium\">\n                Remaleh isn't just about learning it's about doing. Stuck or unsure? A Remaleh Guardian will guide you step-by-step until you're confident, capable, and ready to take action.\n              </p>\n            </div>\n            \n            <div className=\"bg-white bg-opacity-15 rounded-lg p-3 inline-block\">\n              <p className=\"text-white text-sm italic font-medium\">\n                 No one ever learns driving by reading alone - they were guided by an expert. Let us be your guide! \n              </p>\n            </div>\n          </div>\n        </div>\n\n        <MobileCard>\n          <div className=\"text-center py-8\">\n            <BookOpen className=\"w-16 h-16 text-gray-400 mx-auto mb-4\" />\n            <h2 className=\"text-xl font-semibold text-gray-900 mb-2\">Authentication Required</h2>\n            <p className=\"text-gray-600 mb-6\">Please log in to access the Learning Hub and track your progress.</p>\n            <MobileButton \n              onClick={() => setActiveTab('login')}\n              className=\"bg-[#21a1ce] hover:bg-[#1a8bb8] text-white\"\n            >\n              Go to Login\n            </MobileButton>\n          </div>\n        </MobileCard>\n      </div>\n    )\n  }\n\n  return (\n    <div className=\"space-y-4 p-4\">\n      {/* Header */}\n      <div className=\"bg-gradient-to-r from-[#21a1ce] to-[#1a8bb8] rounded-2xl p-6 mb-6 text-white shadow-lg\">\n        <div className=\"text-center\">\n          {/* Icon and Title */}\n          <div className=\"flex items-center justify-center mb-4\">\n            <div className=\"bg-white bg-opacity-20 p-3 rounded-full mr-3\">\n              <BookOpen className=\"w-8 h-8 text-white\" />\n            </div>\n            <h1 className=\"text-3xl font-bold\">Learning Hub</h1>\n            <button\n              onClick={loadData}\n              disabled={loading}\n              className=\"ml-4 bg-white bg-opacity-20 p-2 rounded-full hover:bg-opacity-30 transition-all disabled:opacity-50\"\n              title=\"Refresh content\"\n            >\n              <RefreshCw className={`w-5 h-5 text-white ${loading ? 'animate-spin' : ''}`} />\n            </button>\n          </div>\n          \n          {/* Main Message */}\n          <div className=\"bg-white bg-opacity-10 rounded-xl p-4 mb-4 backdrop-blur-sm\">\n            <p className=\"text-white text-base leading-relaxed font-medium\">\n              Remaleh isn't just about learning it's about doing. Stuck or unsure? A Remaleh Guardian will guide you step-by-step until you're confident, capable, and ready to take action.\n            </p>\n          </div>\n          \n          {/* Cheeky Driving Analogy */}\n          <div className=\"bg-white bg-opacity-15 rounded-lg p-3 inline-block\">\n            <p className=\"text-white text-sm italic font-medium\">\n               No one ever learns driving by reading alone - they were guided by an expert. Let us be your guide! \n            </p>\n          </div>\n        </div>\n      </div>\n\n      {/* Error Display */}\n      {error && (\n        <div className=\"bg-red-50 border border-red-200 rounded-lg p-4 mb-4\">\n          <p className=\"text-red-800\">{error}</p>\n          <button \n            onClick={loadData}\n            className=\"mt-2 text-sm text-red-600 hover:text-red-800 underline\"\n          >\n            Try again\n          </button>\n        </div>\n      )}\n\n      {/* Progress Overview */}\n      <MobileCard className=\"mb-4\">\n        <MobileCardHeader>\n          <div className=\"flex items-center justify-between\">\n            <h3 className=\"text-lg font-semibold\">Your Progress</h3>\n            <div className=\"text-sm text-gray-600\">\n              {loading ? 'Loading...' : `${overallProgress.completed_modules || 0}/${overallProgress.total_modules || 0} modules`}\n            </div>\n          </div>\n        </MobileCardHeader>\n        <MobileCardContent>\n          <div className=\"w-full bg-gray-200 rounded-full h-2 mb-2\">\n            <div \n              className=\"bg-[#21a1ce] h-2 rounded-full transition-all duration-300\" \n              style={{ width: `${overallProgress.completion_percentage || 0}%` }}\n            ></div>\n          </div>\n          <div className=\"flex items-center justify-between text-sm text-gray-600\">\n            <span>{loading ? 'Loading...' : `${Math.round(overallProgress.completion_percentage || 0)}% Complete`}</span>\n            \n            {/* Debug Progress Bar Values */}\n            \n            {nextLesson && (\n              <span className=\"text-sm text-[#21a1ce] font-medium\">\n                Next: {nextLesson.lesson_title}\n              </span>\n            )}\n          </div>\n          \n        </MobileCardContent>\n      </MobileCard>\n\n      {/* Remaleh Guardian Support */}\n      <MobileCard className=\"mb-4\">\n        <MobileCardHeader>\n          <div className=\"flex items-center space-x-3\">\n            <div className=\"w-10 h-10 bg-[#21a1ce] rounded-lg flex items-center justify-center\">\n              <Shield className=\"w-5 h-5 text-white\" />\n            </div>\n            <div>\n              <h3 className=\"text-lg font-semibold text-gray-900\">Need Help Implementing?</h3>\n              <p className=\"text-sm text-gray-600\">Don't struggle alone - get expert guidance</p>\n            </div>\n          </div>\n        </MobileCardHeader>\n        <MobileCardContent>\n          <p className=\"text-gray-700 mb-4 text-sm\">\n            Learning is just the first step. When you're ready to implement cybersecurity measures, our Remaleh Guardians are here to guide you through every step of the process.\n          </p>\n          <div className=\"space-y-3\">\n            <div className=\"flex items-start space-x-3\">\n              <div className=\"w-2 h-2 bg-[#21a1ce] rounded-full mt-2\"></div>\n              <div className=\"text-sm text-gray-700\">\n                <span className=\"font-medium\">Personal Guidance:</span> One-on-one support for your specific situation\n              </div>\n            </div>\n            <div className=\"flex items-start space-x-3\">\n              <div className=\"w-2 h-2 bg-[#21a1ce] rounded-full mt-2\"></div>\n              <div className=\"text-sm text-gray-700\">\n                <span className=\"font-medium\">Step-by-Step Implementation:</span> We'll walk you through each process\n              </div>\n            </div>\n            <div className=\"flex items-start space-x-3\">\n              <div className=\"w-2 h-2 bg-[#21a1ce] rounded-full mt-2\"></div>\n              <div className=\"text-sm text-gray-700\">\n                <span className=\"font-medium\">Ongoing Support:</span> We're here until you feel confident and empowered\n              </div>\n            </div>\n          </div>\n          <div className=\"mt-4 pt-4 border-t border-gray-200\">\n            <MobileButton \n              onClick={() => setActiveTab('chat')}\n              variant=\"primary\"\n              className=\"w-full\"\n            >\n              Connect with a Remaleh Guardian\n            </MobileButton>\n          </div>\n        </MobileCardContent>\n      </MobileCard>\n\n      {/* Search and Filters */}\n      <div className=\"space-y-3\">\n        <div className=\"relative\">\n          <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5\" />\n          <MobileInput\n            type=\"text\"\n            placeholder=\"Search learning content...\"\n            value={searchTerm}\n            onChange={(e) => setSearchTerm(e.target.value)}\n            className=\"pl-10\"\n          />\n        </div>\n        \n        <div className=\"flex space-x-2\">\n          <MobileButton\n            onClick={() => setDifficultyFilter('all')}\n            variant={difficultyFilter === 'all' ? 'primary' : 'secondary'}\n            className=\"text-sm px-3 py-2\"\n          >\n            All\n          </MobileButton>\n          <MobileButton\n            onClick={() => setDifficultyFilter('beginner')}\n            variant={difficultyFilter === 'beginner' ? 'primary' : 'secondary'}\n            className=\"text-sm px-3 py-2\"\n          >\n            Beginner\n          </MobileButton>\n          <MobileButton\n            onClick={() => setDifficultyFilter('intermediate')}\n            variant={difficultyFilter === 'intermediate' ? 'primary' : 'secondary'}\n            className=\"text-sm px-3 py-2\"\n          >\n            Intermediate\n          </MobileButton>\n          <MobileButton\n            onClick={() => setDifficultyFilter('advanced')}\n            variant={difficultyFilter === 'advanced' ? 'primary' : 'secondary'}\n            className=\"text-sm px-3 py-2\"\n          >\n            Advanced\n          </MobileButton>\n        </div>\n      </div>\n\n      {/* Main Content */}\n      {!selectedModule ? (\n        /* Module Selection View */\n        <div className=\"space-y-4\">\n          {loading ? (\n            <div className=\"text-center py-8\">\n              <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-[#21a1ce] mx-auto\"></div>\n              <p className=\"text-gray-600 mt-2\">Loading learning modules...</p>\n            </div>\n          ) : filteredModules.length === 0 ? (\n            <div className=\"text-center py-8\">\n              <BookOpen className=\"w-12 h-12 text-gray-400 mx-auto mb-4\" />\n              <p className=\"text-gray-600\">No learning modules found</p>\n              <p className=\"text-sm text-gray-500\">Check back later for new content</p>\n            </div>\n          ) : (\n            filteredModules.map(module => {\n              const lessonCount = module.content?.lessons?.length || 0\n              const completedLessonsInModule = module.content?.lessons?.filter(lesson => \n                completedLessons.includes(`${String(module.id)}_${String(lesson.id)}`)\n              ).length || 0\n              const progressPercent = lessonCount > 0 ? (completedLessonsInModule / lessonCount) * 100 : 0\n              \n              return (\n                <MobileCard key={module.id} className=\"cursor-pointer hover:shadow-md transition-shadow\" \n                           onClick={() => setSelectedModule(module)}>\n                  <MobileCardHeader>\n                    <div className=\"flex items-center justify-between\">\n                      <div className=\"flex items-center space-x-3\">\n                        <div className={`w-12 h-12 rounded-lg flex items-center justify-center text-white`} \n                             style={{ backgroundColor: module.color || '#21a1ce' }}>\n                          <BookOpen className=\"w-6 h-6\" />\n                        </div>\n                        <div>\n                          <h3 className=\"text-lg font-semibold text-gray-900\">{module.title}</h3>\n                          <p className=\"text-sm text-gray-600\">{module.description}</p>\n                          <div className=\"flex items-center space-x-4 text-xs text-gray-500 mt-1\">\n                            <span>{lessonCount} lessons</span>\n                            <span>{module.estimated_time} min</span>\n                            <span className=\"capitalize\">{module.difficulty}</span>\n                          </div>\n                        </div>\n                      </div>\n                      <div className=\"text-right\">\n                        <div className=\"text-sm font-medium text-[#21a1ce]\">{Math.round(progressPercent)}%</div>\n                        <div className=\"text-xs text-gray-500\">{completedLessonsInModule}/{lessonCount}</div>\n                      </div>\n                    </div>\n                  </MobileCardHeader>\n                  \n                  <MobileCardContent>\n                    <div className=\"w-full bg-gray-200 rounded-full h-2\">\n                      <div \n                        className=\"bg-[#21a1ce] h-2 rounded-full transition-all duration-300\" \n                        style={{ width: `${progressPercent}%` }}\n                      ></div>\n                    </div>\n                  </MobileCardContent>\n                </MobileCard>\n              )\n            })\n          )}\n        </div>\n      ) : !selectedLesson ? (\n        /* Lesson Selection View */\n        <div>\n          <div className=\"flex items-center mb-4\">\n            <button \n              onClick={() => setSelectedModule(null)}\n              className=\"flex items-center text-[#21a1ce] hover:underline text-sm\"\n            >\n              <ArrowLeft className=\"w-4 h-4 mr-1\" />\n              Back to modules\n            </button>\n          </div>\n          \n          <MobileCard>\n            <MobileCardHeader>\n              <div className=\"flex items-center space-x-3\">\n                <div className={`w-10 h-10 rounded-lg flex items-center justify-center text-white`} \n                     style={{ backgroundColor: selectedModule.color }}>\n                  <BookOpen className=\"w-5 h-5\" />\n                </div>\n                <div className=\"flex-1\">\n                  <h2 className=\"text-xl font-bold text-gray-900\">{selectedModule.title}</h2>\n                  <p className=\"text-gray-600\">{selectedModule.description}</p>\n                  \n                  {/* Module Progress Bar */}\n                  <div className=\"mt-3\">\n                    <div className=\"flex items-center justify-between text-sm text-gray-600 mb-1\">\n                      <span>Progress</span>\n                      <span>{selectedModule.content?.lessons?.filter(lesson => \n                        completedLessons.includes(`${String(selectedModule.id)}_${String(lesson.id)}`)\n                      ).length || 0}/{selectedModule.content?.lessons?.length || 0} lessons</span>\n                    </div>\n                    <div className=\"w-full bg-gray-200 rounded-full h-2\">\n                      <div \n                        className=\"bg-[#21a1ce] h-2 rounded-full transition-all duration-300\" \n                        style={{ \n                          width: `${selectedModule.content?.lessons?.length > 0 ? \n                            (selectedModule.content.lessons.filter(lesson => \n                              completedLessons.includes(`${String(selectedModule.id)}_${String(lesson.id)}`)\n                            ).length / selectedModule.content.lessons.length) * 100 : 0\n                          }%` \n                        }}\n                      ></div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </MobileCardHeader>\n            \n            <MobileCardContent>\n              <div className=\"space-y-3\">\n                {selectedModule.content?.lessons?.map(lesson => {\n                  const lessonKey = `${String(selectedModule.id)}_${String(lesson.id)}`\n                  const isCompleted = completedLessons.includes(lessonKey)\n                  \n                  return (\n                    <div \n                      key={lesson.id} \n                      className=\"flex items-center justify-between p-3 bg-gray-50 rounded-lg cursor-pointer hover:bg-gray-100 transition-colors\"\n                      onClick={() => setSelectedLesson(lesson)}\n                    >\n                      <div className=\"flex items-center space-x-3\">\n                        {isCompleted ? (\n                          <CheckCircle className=\"w-5 h-5 text-green-500\" />\n                        ) : (\n                          <div className=\"w-5 h-5 border-2 border-gray-300 rounded-full\"></div>\n                        )}\n                        <div>\n                          <h4 className=\"font-medium\">{lesson.title}</h4>\n                          <p className=\"text-sm text-gray-600\">{lesson.duration} min  {lesson.contentType}</p>\n                        </div>\n                      </div>\n                      <div className=\"flex items-center space-x-2\">\n                        {lesson.contentType === 'warning' && (\n                          <div className=\"w-2 h-2 bg-red-500 rounded-full\"></div>\n                        )}\n                        {lesson.contentType === 'example' && (\n                          <div className=\"w-2 h-2 bg-yellow-500 rounded-full\"></div>\n                        )}\n                        <ArrowLeft className=\"w-4 h-4 text-gray-400 transform rotate-180\" />\n                      </div>\n                      {/* Debug info for each lesson */}\n                      <div className=\"text-xs text-gray-400 ml-2\">\n                        {lessonKey}\n                      </div>\n                    </div>\n                  )\n                })}\n              </div>\n            </MobileCardContent>\n          </MobileCard>\n        </div>\n      ) : (\n        /* Lesson Content View */\n        <div>\n          <div className=\"flex items-center justify-between mb-4\">\n            <button \n              onClick={() => setSelectedLesson(null)}\n              className=\"flex items-center text-[#21a1ce] hover:underline text-sm\"\n            >\n              <ArrowLeft className=\"w-4 h-4 mr-1\" />\n              Back to lessons\n            </button>\n            {!completedLessons.includes(`${String(selectedModule.id)}_${String(selectedLesson.id)}`) && (\n              <MobileButton \n                onClick={() => markLessonComplete(selectedModule.id, selectedLesson.id)}\n                variant=\"primary\"\n                size=\"sm\"\n              >\n                Mark Complete\n              </MobileButton>\n            )}\n          </div>\n          \n          <MobileCard>\n            <MobileCardHeader>\n              <h2 className=\"text-xl font-bold text-gray-900\">{selectedLesson.title}</h2>\n              <div className=\"flex items-center space-x-2 text-sm text-gray-600\">\n                <span>{selectedLesson.duration}</span>\n                <span></span>\n                <span className=\"capitalize\">{selectedLesson.contentType}</span>\n              </div>\n            </MobileCardHeader>\n            \n            <MobileCardContent>\n              <LessonContent lesson={selectedLesson} />\n            </MobileCardContent>\n          </MobileCard>\n        </div>\n      )}\n    </div>\n  )\n}\n\n\n\n\n\n\n\n\n\n\n\n\n\nfunction LessonContent({ lesson }) {\n  const getContentStyle = (style) => {\n    switch (style) {\n      case 'blue':\n        return 'bg-blue-50 border-blue-200'\n      case 'yellow':\n        return 'bg-yellow-50 border-yellow-200'\n      case 'red':\n        return 'bg-red-50 border-red-200'\n      case 'green':\n        return 'bg-green-50 border-green-200'\n      default:\n        return 'bg-gray-50 border-gray-200'\n    }\n  }\n\n  const renderContent = () => {\n    switch (lesson.contentType) {\n      case 'tips':\n        return (\n          <div className=\"space-y-4\">\n            <div className=\"text-gray-700 whitespace-pre-line\">{lesson.content}</div>\n            <div className=\"space-y-3\">\n              {lesson.tips?.map((tip, index) => (\n                <div key={index} className=\"flex items-start\">\n                  <div className=\"p-1 rounded-full mr-3 mt-1 bg-green-100\">\n                    <div className=\"w-2 h-2 rounded-full bg-green-500\"></div>\n                  </div>\n                  <div>\n                    <p className=\"font-medium whitespace-pre-line\">{tip.title}</p>\n                    <p className=\"text-sm text-gray-600 whitespace-pre-line\">{tip.description}</p>\n                  </div>\n                </div>\n              ))}\n            </div>\n          </div>\n        )\n      \n      case 'warning-signs':\n        return (\n          <div className=\"space-y-4\">\n            <div className=\"text-gray-700 whitespace-pre-line\">{lesson.content}</div>\n            <div className=\"space-y-3\">\n              {lesson.signs?.map((sign, index) => (\n                <div key={index} className=\"flex items-start\">\n                  <div className={`p-1 rounded-full mr-3 mt-1 ${sign.danger ? 'bg-red-100' : 'bg-green-100'}`}>\n                    <div className={`w-2 h-2 rounded-full ${sign.danger ? 'bg-red-500' : 'bg-green-500'}`}></div>\n                  </div>\n                  <div>\n                    <p className=\"font-medium whitespace-pre-line\">{sign.title}</p>\n                    <p className=\"text-sm text-gray-600 whitespace-pre-line\">{sign.description}</p>\n                  </div>\n                </div>\n              ))}\n            </div>\n          </div>\n        )\n      \n      case 'steps':\n        return (\n          <div className=\"space-y-4\">\n            <div className=\"text-gray-700 whitespace-pre-line\">{lesson.content}</div>\n            <div className=\"space-y-2\">\n              {lesson.steps?.map((step, index) => (\n                <div key={index} className=\"flex items-start\">\n                  <div className=\"w-6 h-6 rounded-full bg-[#21a1ce] text-white text-sm font-bold flex items-center justify-center mr-3 mt-0.5\">\n                    {index + 1}\n                  </div>\n                  <p className=\"text-gray-700 whitespace-pre-line\">{step}</p>\n                </div>\n              ))}\n            </div>\n          </div>\n        )\n      \n      case 'list':\n        return (\n          <div className=\"space-y-4\">\n            <div className=\"text-gray-700 whitespace-pre-line\">{lesson.content}</div>\n            <ul className=\"space-y-2 ml-4\">\n              {lesson.items?.map((item, index) => (\n                <li key={index} className=\"text-gray-700 whitespace-pre-line\"> {item}</li>\n              ))}\n            </ul>\n          </div>\n        )\n      \n      case 'warning':\n      case 'warning-list':\n        return (\n          <div className={`p-4 rounded-lg border ${getContentStyle(lesson.contentStyle)}`}>\n            <h4 className=\"font-bold mb-2 text-red-800\">Important</h4>\n            <div className=\"text-red-700 mb-3 whitespace-pre-line\">{lesson.content}</div>\n            {lesson.items && (\n              <ul className=\"space-y-1 text-red-700\">\n                {lesson.items.map((item, index) => (\n                  <li key={index} className=\"whitespace-pre-line\"> {item}</li>\n                ))}\n              </ul>\n            )}\n          </div>\n        )\n      \n      case 'action-list':\n        return (\n          <div className={`p-4 rounded-lg border ${getContentStyle(lesson.contentStyle)}`}>\n            <h4 className=\"font-bold mb-2 text-green-800\">Actions to Take</h4>\n            <div className=\"text-green-700 mb-3 whitespace-pre-line\">{lesson.content}</div>\n            <ul className=\"space-y-1 text-green-700\">\n              {lesson.actions?.map((action, index) => (\n                <li key={index} className=\"whitespace-pre-line\"> {action}</li>\n              ))}\n            </ul>\n          </div>\n        )\n      \n      case 'example':\n        return (\n          <div className={`p-4 rounded-lg border ${getContentStyle(lesson.contentStyle)}`}>\n            <h4 className=\"font-bold mb-2\">Real-World Example</h4>\n            <div className=\"text-gray-700 whitespace-pre-line\">{lesson.content}</div>\n          </div>\n        )\n      \n      default:\n        return (\n          <div className={`p-4 rounded-lg border ${getContentStyle(lesson.contentStyle)}`}>\n            <div className=\"text-gray-700 whitespace-pre-line\">{lesson.content}</div>\n          </div>\n        )\n    }\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      {renderContent()}\n      {Array.isArray(lesson.media) && lesson.media.length > 0 && (\n        <div className=\"space-y-3\">\n          {lesson.media.map((item, idx) => (\n            <div key={idx} className=\"space-y-2\">\n              {item.type === 'image' ? (\n                <img\n                  src={item.url}\n                  alt={item.caption || lesson.title}\n                  className=\"w-full max-h-72 object-cover rounded-lg border border-gray-200\"\n                  loading=\"lazy\"\n                />\n              ) : item.type === 'video' ? (\n                <video\n                  controls\n                  className=\"w-full max-h-80 rounded-lg border border-gray-200\"\n                >\n                  <source src={item.url} />\n                  Your browser does not support the video tag.\n                </video>\n              ) : null}\n              {item.caption && (\n                <div className=\"text-xs text-gray-500\">{item.caption}</div>\n              )}\n            </div>\n          ))}\n        </div>\n      )}\n    </div>\n  )\n}\n\n\n","import { useState, useEffect, useCallback } from 'react';\nimport { API, API_ENDPOINTS, apiGet, apiPost, apiPut, apiDelete } from '../lib/api';\n\nexport const useCommunity = () => {\n  const [reports, setReports] = useState([]);\n  const [trendingThreats, setTrendingThreats] = useState([]);\n  const [communityStats, setCommunityStats] = useState(null);\n  const [alerts, setAlerts] = useState([]);\n  const [leaderboard, setLeaderboard] = useState([]);\n  const [latestReports, setLatestReports] = useState([]);\n  const [myStats, setMyStats] = useState(null);\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState(null);\n  const [pagination, setPagination] = useState(null);\n  const [hasMore, setHasMore] = useState(true);\n\n  // Fetch community reports\n  const fetchReports = useCallback(async (filters = {}, append = false) => {\n    try {\n      setIsLoading(true);\n      setError(null);\n      \n      const queryParams = new URLSearchParams(filters).toString();\n      const endpoint = `${API_ENDPOINTS.COMMUNITY.REPORTS}${queryParams ? `?${queryParams}` : ''}`;\n      \n      const response = await apiGet(endpoint);\n      if (response.ok) {\n        const data = await response.json();\n        \n        if (append && data.reports) {\n          setReports(prev => [...prev, ...data.reports]);\n        } else {\n          setReports(data.reports || data);\n        }\n        \n        if (data.pagination) {\n          setPagination(data.pagination);\n          setHasMore(data.pagination.has_next);\n        }\n        \n        return data;\n      } else {\n        throw new Error('Failed to fetch community reports');\n      }\n    } catch (err) {\n      setError(err.message);\n      console.error('Error fetching reports:', err);\n    } finally {\n      setIsLoading(false);\n    }\n  }, []);\n\n  // Fetch trending threats\n  const fetchTrendingThreats = useCallback(async () => {\n    try {\n      setIsLoading(true);\n      setError(null);\n      \n      const response = await apiGet(API_ENDPOINTS.COMMUNITY.TRENDING);\n      if (response.ok) {\n        const data = await response.json();\n        // Backend returns { trending_threats: [...] }\n        setTrendingThreats(data.trending_threats || data);\n        return data;\n      } else {\n        throw new Error('Failed to fetch trending threats');\n      }\n    } catch (err) {\n      setError(err.message);\n      console.error('Error fetching trending threats:', err);\n    } finally {\n      setIsLoading(false);\n    }\n  }, []);\n\n  // Fetch latest reports (10 most recent, approved or verified)\n  const fetchLatestReports = useCallback(async () => {\n    try {\n      setIsLoading(true);\n      setError(null);\n      const params = new URLSearchParams({ per_page: 10, sort: 'newest', verified_only: 'true' }).toString();\n      const response = await apiGet(`${API_ENDPOINTS.COMMUNITY.REPORTS}?${params}`);\n      if (response.ok) {\n        const data = await response.json();\n        setLatestReports(data.reports || []);\n        return data;\n      } else {\n        throw new Error('Failed to fetch latest reports');\n      }\n    } catch (err) {\n      setError(err.message);\n      console.error('Error fetching latest reports:', err);\n    } finally {\n      setIsLoading(false);\n    }\n  }, []);\n\n  // Fetch a single report with full details (including all comments)\n  const fetchReportById = useCallback(async (reportId) => {\n    try {\n      setIsLoading(true);\n      setError(null);\n      const response = await apiGet(`${API_ENDPOINTS.COMMUNITY.REPORTS}/${reportId}`);\n      if (response.ok) {\n        const data = await response.json();\n        return { success: true, report: data };\n      } else {\n        const errorData = await response.json();\n        throw new Error(errorData.message || 'Failed to fetch report');\n      }\n    } catch (err) {\n      setError(err.message);\n      return { success: false, error: err.message };\n    } finally {\n      setIsLoading(false);\n    }\n  }, []);\n\n  // List comments with pagination\n  const fetchComments = useCallback(async (reportId, { page = 1, per_page = 20 } = {}) => {\n    try {\n      setIsLoading(true);\n      setError(null);\n      const params = new URLSearchParams({ page, per_page }).toString();\n      const response = await apiGet(`${API_ENDPOINTS.COMMUNITY.REPORTS}/${reportId}/comments?${params}`);\n      if (response.ok) {\n        const data = await response.json();\n        return { success: true, ...data };\n      } else {\n        const errorData = await response.json();\n        throw new Error(errorData.message || 'Failed to fetch comments');\n      }\n    } catch (err) {\n      setError(err.message);\n      return { success: false, error: err.message };\n    } finally {\n      setIsLoading(false);\n    }\n  }, []);\n\n  // Delete a comment\n  const deleteComment = useCallback(async (commentId) => {\n    try {\n      setIsLoading(true);\n      setError(null);\n      const response = await apiDelete(`/api/community/comments/${commentId}`);\n      if (response.ok) {\n        return { success: true };\n      } else {\n        const errorData = await response.json();\n        throw new Error(errorData.message || 'Failed to delete comment');\n      }\n    } catch (err) {\n      setError(err.message);\n      return { success: false, error: err.message };\n    } finally {\n      setIsLoading(false);\n    }\n  }, []);\n\n  // Fetch community statistics\n  const fetchCommunityStats = useCallback(async () => {\n    try {\n      setIsLoading(true);\n      setError(null);\n      \n      const response = await apiGet(API_ENDPOINTS.COMMUNITY.STATS);\n      if (response.ok) {\n        const data = await response.json();\n        setCommunityStats(data);\n        return data;\n      } else {\n        throw new Error('Failed to fetch community statistics');\n      }\n    } catch (err) {\n      setError(err.message);\n      console.error('Error fetching community stats:', err);\n    } finally {\n      setIsLoading(false);\n    }\n  }, []);\n\n  // Fetch community alerts\n  const fetchAlerts = useCallback(async () => {\n    try {\n      setIsLoading(true);\n      setError(null);\n      \n      const response = await apiGet(API_ENDPOINTS.COMMUNITY.ALERTS);\n      if (response.ok) {\n        const data = await response.json();\n        // Backend returns { alerts: [...], pagination: { ... } }\n        setAlerts(data.alerts || data);\n        return data;\n      } else {\n        throw new Error('Failed to fetch community alerts');\n      }\n    } catch (err) {\n      setError(err.message);\n      console.error('Error fetching alerts:', err);\n    } finally {\n      setIsLoading(false);\n    }\n  }, []);\n\n  // Fetch leaderboard\n  const fetchLeaderboard = useCallback(async () => {\n    try {\n      setIsLoading(true);\n      setError(null);\n      const response = await apiGet(API_ENDPOINTS.COMMUNITY.LEADERBOARD);\n      if (response.ok) {\n        const data = await response.json();\n        setLeaderboard(data.leaderboard || data);\n        return data;\n      } else {\n        throw new Error('Failed to fetch leaderboard');\n      }\n    } catch (err) {\n      setError(err.message);\n      console.error('Error fetching leaderboard:', err);\n    } finally {\n      setIsLoading(false);\n    }\n  }, []);\n\n  // Fetch current user's reporting stats\n  const fetchMyStats = useCallback(async () => {\n    try {\n      setIsLoading(true);\n      setError(null);\n      const response = await apiGet(API_ENDPOINTS.COMMUNITY.MY_STATS);\n      if (response.ok) {\n        const data = await response.json();\n        setMyStats(data);\n        return data;\n      } else {\n        throw new Error('Failed to fetch my stats');\n      }\n    } catch (err) {\n      setError(err.message);\n      console.error('Error fetching my stats:', err);\n    } finally {\n      setIsLoading(false);\n    }\n  }, []);\n\n  // Create new report\n  const createReport = useCallback(async (reportData) => {\n    try {\n      setIsLoading(true);\n      setError(null);\n      \n      // Map UI fields to backend expected payload\n      const payload = {\n        threat_type: reportData.threat_type,\n        description: reportData.description,\n        location: reportData.location,\n        urgency: reportData.urgency || 'MEDIUM'\n      };\n      const response = await apiPost(API_ENDPOINTS.COMMUNITY.REPORTS, payload);\n      if (response.ok) {\n        const { report } = await response.json();\n        setReports(prev => [report, ...prev]);\n        return { success: true, report };\n      } else {\n        const errorData = await response.json();\n        throw new Error(errorData.message || 'Failed to create report');\n      }\n    } catch (err) {\n      setError(err.message);\n      return { success: false, error: err.message };\n    } finally {\n      setIsLoading(false);\n    }\n  }, []);\n\n  // Upload media to a report (accepts File or remote URL)\n  const uploadReportMedia = useCallback(async (reportId, fileOrUrl) => {\n    try {\n      setIsLoading(true);\n      setError(null);\n\n      let response;\n      if (fileOrUrl instanceof File) {\n        const token = localStorage.getItem('authToken');\n        const formData = new FormData();\n        formData.append('file', fileOrUrl);\n        response = await fetch(`${API}${API_ENDPOINTS.COMMUNITY.REPORTS}/${reportId}/media`, {\n          method: 'POST',\n          headers: {\n            ...(token && { 'Authorization': `Bearer ${token}` })\n          },\n          body: formData\n        });\n      } else {\n        response = await apiPost(`${API_ENDPOINTS.COMMUNITY.REPORTS}/${reportId}/media`, {\n          media_url: String(fileOrUrl),\n          media_type: 'image'\n        });\n      }\n\n      if (response.ok) {\n        const data = await response.json();\n        const media = data.media || data;\n        // Optionally update report media in local state\n        setReports(prev => prev.map(r => r.id === reportId ? { ...r, media: [...(r.media || []), media] } : r));\n        return { success: true, media };\n      } else {\n        const errorData = await response.json();\n        throw new Error(errorData.error || errorData.message || 'Failed to upload media');\n      }\n    } catch (err) {\n      setError(err.message);\n      return { success: false, error: err.message };\n    } finally {\n      setIsLoading(false);\n    }\n  }, [setReports]);\n\n  // Delete report (owner or admin)\n  const deleteReport = useCallback(async (reportId) => {\n    try {\n      setIsLoading(true);\n      setError(null);\n      const response = await apiDelete(`${API_ENDPOINTS.COMMUNITY.REPORTS}/${reportId}`);\n      if (response.ok) {\n        setReports(prev => prev.filter(r => r.id !== reportId));\n        return { success: true };\n      } else {\n        const errorData = await response.json();\n        throw new Error(errorData.message || 'Failed to delete report');\n      }\n    } catch (err) {\n      setError(err.message);\n      return { success: false, error: err.message };\n    } finally {\n      setIsLoading(false);\n    }\n  }, []);\n\n  // Vote on report\n  const voteOnReport = useCallback(async (reportId, voteType) => {\n    try {\n      setIsLoading(true);\n      setError(null);\n      \n      // voteType should be 'up' | 'down'\n      const response = await apiPost(`${API_ENDPOINTS.COMMUNITY.REPORTS}/${reportId}/vote`, {\n        vote_type: voteType\n      });\n      if (response.ok) {\n        const data = await response.json();\n        const updatedReport = data.report || data;\n        // Update the report in the list\n        setReports(prev => prev.map(r => \n          r.id === reportId ? { ...updatedReport } : r\n        ));\n        return { success: true, data: updatedReport };\n      } else {\n        const errorData = await response.json();\n        throw new Error(errorData.message || 'Failed to vote on report');\n      }\n    } catch (err) {\n      setError(err.message);\n      return { success: false, error: err.message };\n    } finally {\n      setIsLoading(false);\n    }\n  }, []);\n\n  // Verify report\n  const verifyReport = useCallback(async (reportId, verificationData) => {\n    try {\n      setIsLoading(true);\n      setError(null);\n      \n      const response = await apiPost(`${API_ENDPOINTS.COMMUNITY.REPORTS}/${reportId}/verify`, verificationData);\n      if (response.ok) {\n        const data = await response.json();\n        const updatedReport = data.report || data;\n        // Update the report in the list\n        setReports(prev => prev.map(r => \n          r.id === reportId ? { ...updatedReport } : r\n        ));\n        return { success: true, data: updatedReport };\n      } else {\n        const errorData = await response.json();\n        throw new Error(errorData.message || 'Failed to verify report');\n      }\n    } catch (err) {\n      setError(err.message);\n      return { success: false, error: err.message };\n    } finally {\n      setIsLoading(false);\n    }\n  }, []);\n\n  // Add comment to report\n  const addComment = useCallback(async (reportId, commentData) => {\n    try {\n      setIsLoading(true);\n      setError(null);\n      \n      const response = await apiPost(`${API_ENDPOINTS.COMMUNITY.REPORTS}/${reportId}/comment`, commentData);\n      if (response.ok) {\n        const result = await response.json();\n        const newComment = { id: result.comment_id, comment: commentData.comment };\n        // Update the report in the list (UI may render simple comments)\n        setReports(prev => prev.map(r => \n          r.id === reportId ? { ...r, comments: [...(r.comments || []), newComment] } : r\n        ));\n        return { success: true, comment: newComment };\n      } else {\n        const errorData = await response.json();\n        throw new Error(errorData.message || 'Failed to add comment');\n      }\n    } catch (err) {\n      setError(err.message);\n      return { success: false, error: err.message };\n    } finally {\n      setIsLoading(false);\n    }\n  }, []);\n\n  // Create alert\n  const createAlert = useCallback(async (alertData) => {\n    try {\n      setIsLoading(true);\n      setError(null);\n      // Map UI fields to backend expected payload\n      const payload = {\n        message: alertData.message,\n        severity: (alertData.priority || 'medium').toUpperCase(),\n        threat_type: alertData.title\n      };\n      const response = await apiPost(API_ENDPOINTS.COMMUNITY.ALERTS, payload);\n      if (response.ok) {\n        const { alert } = await response.json();\n        setAlerts(prev => [alert, ...prev]);\n        return { success: true, alert };\n      } else {\n        const errorData = await response.json();\n        throw new Error(errorData.message || 'Failed to create alert');\n      }\n    } catch (err) {\n      setError(err.message);\n      return { success: false, error: err.message };\n    } finally {\n      setIsLoading(false);\n    }\n  }, []);\n\n  // Load all data\n  const loadAllData = useCallback(async () => {\n    await Promise.all([\n      fetchReports({}, false), // Reset reports, don't append\n      fetchTrendingThreats(),\n      fetchLatestReports(),\n      fetchCommunityStats(),\n      fetchAlerts(),\n      fetchLeaderboard(),\n      fetchMyStats()\n    ]);\n  }, [fetchReports, fetchTrendingThreats, fetchLatestReports, fetchCommunityStats, fetchAlerts, fetchLeaderboard, fetchMyStats]);\n\n  // Clear error\n  const clearError = useCallback(() => setError(null), []);\n\n  return {\n    reports,\n    trendingThreats,\n    communityStats,\n    alerts,\n    leaderboard,\n    latestReports,\n    myStats,\n    isLoading,\n    error,\n    pagination,\n    hasMore,\n    fetchReports,\n    fetchTrendingThreats,\n    fetchLatestReports,\n    fetchComments,\n    deleteComment,\n    fetchReportById,\n    fetchCommunityStats,\n    fetchAlerts,\n    fetchLeaderboard,\n    fetchMyStats,\n    createReport,\n    voteOnReport,\n    verifyReport,\n    addComment,\n    createAlert,\n    uploadReportMedia,\n    deleteReport,\n    loadAllData,\n    clearError\n  };\n};\n","import React, { useEffect } from 'react';\nimport { X } from 'lucide-react';\nimport { Button } from './ui/button';\n\nexport default function MobileModal({ \n  isOpen, \n  onClose, \n  title, \n  children, \n  showCloseButton = true,\n  fullScreen = false,\n  hideOnDesktop = true\n}) {\n  // Close on escape key\n  useEffect(() => {\n    const handleEscape = (e) => {\n      if (e.key === 'Escape') {\n        onClose();\n      }\n    };\n\n    if (isOpen) {\n      document.addEventListener('keydown', handleEscape);\n      // Prevent body scroll on mobile\n      document.body.style.overflow = 'hidden';\n    }\n\n    return () => {\n      document.removeEventListener('keydown', handleEscape);\n      document.body.style.overflow = 'unset';\n    };\n  }, [isOpen, onClose]);\n\n  if (!isOpen) return null;\n\n  return (\n    <div className={`fixed inset-0 z-50 ${hideOnDesktop ? 'md:hidden' : ''}`}>\n      {/* Backdrop */}\n      <div \n        className=\"absolute inset-0 bg-black bg-opacity-50 backdrop-blur-sm\"\n        onClick={onClose}\n      />\n      \n      {/* Modal Content */}\n      <div className={`absolute inset-0 bg-white ${\n        fullScreen ? 'rounded-none' : 'rounded-t-3xl'\n      } transform transition-transform duration-300 ease-out ${\n        isOpen ? 'translate-y-0' : 'translate-y-full'\n      }`}>\n        {/* Header */}\n        <div className=\"flex items-center justify-between p-4 border-b border-gray-200\">\n          <h2 className=\"text-lg font-semibold text-gray-900\">{title}</h2>\n          {showCloseButton && (\n            <Button\n              variant=\"ghost\"\n              size=\"sm\"\n              onClick={onClose}\n              className=\"p-2 rounded-full hover:bg-gray-100\"\n            >\n              <X className=\"w-5 h-5 text-gray-600\" />\n            </Button>\n          )}\n        </div>\n\n        {/* Content */}\n        <div className=\"flex-1 overflow-y-auto p-4\">\n          {children}\n        </div>\n\n        {/* Bottom safe area for devices with home indicators */}\n        <div className=\"h-4 bg-white\" />\n      </div>\n    </div>\n  );\n}\n","import React, { useState, useEffect } from 'react';\nimport { Users, Flag, Trophy, TrendingUp, Plus, Star, CheckCircle, ThumbsUp, ThumbsDown, MessageSquare, Trash2 } from 'lucide-react';\nimport { MobileCard } from './ui/mobile-card';\nimport { MobileButton } from './ui/mobile-button';\nimport { useAuth } from '../hooks/useAuth';\nimport { useCommunity } from '../hooks/useCommunity';\nimport { Button } from './ui/button';\nimport { MobileInput } from './ui/mobile-input';\nimport { MobileTextarea } from './ui/mobile-input';\nimport { API } from '../lib/api';\nimport MobileModal from './MobileModal';\n\nexport default function CommunityHub({ setActiveTab }) {\n  const [activeTab, setActiveTabLocal] = useState('reports');\n  const { reports, latestReports, fetchLatestReports, fetchReports, leaderboard, trendingThreats, myStats, loadAllData, isLoading, pagination, hasMore, createReport, uploadReportMedia, deleteReport, voteOnReport, addComment, fetchReportById, fetchComments, deleteComment } = useCommunity();\n  const { user, isAuthenticated } = useAuth();\n\n  const [showNewReport, setShowNewReport] = useState(false);\n  const [newReport, setNewReport] = useState({\n    description: '',\n    threat_type: 'SCAM',\n    urgency: 'MEDIUM',\n    location: ''\n  });\n  const [newReportFiles, setNewReportFiles] = useState([]);\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const [toast, setToast] = useState(null); // { type: 'success' | 'error', message: string }\n\n  // Lightbox for media\n  const [lightboxOpen, setLightboxOpen] = useState(false);\n  const [lightboxImages, setLightboxImages] = useState([]);\n  const [lightboxIndex, setLightboxIndex] = useState(0);\n\n  // Comments modal\n  const [commentsModalOpen, setCommentsModalOpen] = useState(false);\n  const [commentsReport, setCommentsReport] = useState(null);\n  const [commentsPage, setCommentsPage] = useState(1);\n  const [commentsHasMore, setCommentsHasMore] = useState(false);\n\n  // Inline comment inputs per report\n  const [commentTexts, setCommentTexts] = useState({}); // { [reportId]: text }\n\n  useEffect(() => {\n    if (isAuthenticated) {\n      loadAllData();\n    }\n  }, [isAuthenticated, loadAllData]);\n\n  // Proper infinite scroll with pagination\n  useEffect(() => {\n    const handleScroll = () => {\n      if (activeTab !== 'feed') return;\n      const nearBottom = window.innerHeight + window.scrollY >= document.body.offsetHeight - 200;\n      if (nearBottom && !isLoading && hasMore && pagination) {\n        const nextPage = pagination.next_num;\n        if (nextPage) {\n          fetchReports({ page: nextPage }, true); // Append to existing reports\n        }\n      }\n    };\n    window.addEventListener('scroll', handleScroll);\n    return () => window.removeEventListener('scroll', handleScroll);\n  }, [activeTab, isLoading, hasMore, pagination, fetchReports]);\n\n  const resolveMediaUrl = (url) => {\n    if (!url) return '';\n    if (url.startsWith('http')) return url;\n    try {\n      // Use URL to safely join base and path, avoiding double slashes\n      return new URL(url, API).toString();\n    } catch (e) {\n      return `${API}${url}`;\n    }\n  };\n\n  const isImageMedia = (media) => {\n    if (!media || !media.media_type) return true; // default to image if unspecified\n    return media.media_type.toLowerCase().startsWith('image');\n  };\n\n  const isVideoMedia = (media) => {\n    if (!media || !media.media_type) return false;\n    return media.media_type.toLowerCase().startsWith('video');\n  };\n\n  const openLightbox = (mediaList, startIndex = 0) => {\n    const images = (mediaList || [])\n      .filter(isImageMedia)\n      .map(m => ({ id: m.id, src: resolveMediaUrl(m.media_url) }))\n      .filter(i => !!i.src);\n    if (images.length > 0) {\n      setLightboxImages(images);\n      setLightboxIndex(Math.max(0, Math.min(startIndex, images.length - 1)));\n      setLightboxOpen(true);\n    }\n  };\n\n  const handleViewAllComments = async (reportId) => {\n    setCommentsPage(1);\n    const res = await fetchComments(reportId, { page: 1, per_page: 20 });\n    if (res.success) {\n      setCommentsReport({ id: reportId, comments: res.comments || [] });\n      setCommentsHasMore((res.pagination?.page || 1) < (res.pagination?.pages || 1));\n      setCommentsModalOpen(true);\n    }\n  };\n\n  const handleLoadMoreComments = async () => {\n    if (!commentsReport) return;\n    const nextPage = commentsPage + 1;\n    const res = await fetchComments(commentsReport.id, { page: nextPage, per_page: 20 });\n    if (res.success) {\n      setCommentsReport(prev => ({ ...prev, comments: [...(prev.comments || []), ...(res.comments || [])] }));\n      setCommentsPage(nextPage);\n      setCommentsHasMore((res.pagination?.page || nextPage) < (res.pagination?.pages || nextPage));\n    }\n  };\n\n  const handleDeleteComment = async (commentId) => {\n    const res = await deleteComment(commentId);\n    if (res.success) {\n      setCommentsReport(prev => ({ ...prev, comments: (prev.comments || []).filter(c => c.id !== commentId) }));\n    }\n  };\n\n  const tabs = [\n    { id: 'reports', label: 'Report Scam', icon: Flag },\n    { id: 'feed', label: 'Community Reports', icon: Users },\n    { id: 'my_reports', label: 'My Reports', icon: CheckCircle },\n    { id: 'leaderboard', label: 'Leaderboard', icon: Trophy },\n    { id: 'latest', label: 'Latest Scams', icon: TrendingUp }\n  ];\n\n  const renderContent = () => {\n    switch (activeTab) {\n      case 'reports':\n        return (\n          <div className=\"space-y-4\">\n            <div className=\"text-center mb-4\">\n              <h3 className=\"text-lg font-semibold text-gray-900 mb-2\">Report a Scam</h3>\n              <p className=\"text-sm text-gray-600\">Help protect others by reporting scams you encounter</p>\n            </div>\n            \n            <MobileCard className=\"bg-blue-50 border-blue-200\">\n              <div className=\"p-4\">\n                <div className=\"flex items-center space-x-3 mb-3\">\n                  <div className=\"p-2 bg-blue-100 rounded-lg\">\n                    <Flag className=\"w-5 h-5 text-blue-600\" />\n                  </div>\n                  <div>\n                    <h4 className=\"font-semibold text-gray-900\">Your Reporting Stats</h4>\n                    <p className=\"text-sm text-gray-600\">Keep reporting to climb the leaderboard!</p>\n                  </div>\n                </div>\n                \n                <div className=\"grid grid-cols-3 gap-4 text-center\">\n                  <div>\n                    <div className=\"text-2xl font-bold text-blue-600\">{myStats?.report_count ?? 0}</div>\n                    <div className=\"text-xs text-gray-600\">Reports</div>\n                  </div>\n                  <div>\n                    <div className=\"text-2xl font-bold text-green-600\">{myStats?.points ?? 0}</div>\n                    <div className=\"text-xs text-gray-600\">Points</div>\n                  </div>\n                  <div>\n                    <div className=\"text-2xl font-bold text-orange-600\">{myStats?.rank ? `#${myStats.rank}` : ''}</div>\n                    <div className=\"text-xs text-gray-600\">Rank</div>\n                  </div>\n                </div>\n              </div>\n            </MobileCard>\n\n            <MobileButton\n              onClick={() => setShowNewReport(true)}\n              className=\"w-full bg-red-600 hover:bg-red-700 text-white py-3\"\n            >\n              <Plus className=\"w-5 h-5 mr-2\" />\n              Report New Scam\n            </MobileButton>\n          </div>\n        );\n\n      case 'feed':\n        return (\n          <div className=\"space-y-4\">\n            <div className=\"flex items-center justify-between mb-2\">\n              <div className=\"text-center flex-1\">\n                <h3 className=\"text-lg font-semibold text-gray-900\">Community Reports</h3>\n                <p className=\"text-sm text-gray-600\">Approved and verified reports from the community</p>\n              </div>\n              <div className=\"flex items-center gap-2\">\n                <select\n                  onChange={(e) => fetchReports({ sort: e.target.value }, false)}\n                  className=\"text-xs border border-gray-300 rounded px-2 py-1\"\n                  defaultValue=\"newest\"\n                >\n                  <option value=\"newest\">Newest</option>\n                  <option value=\"top\">Top</option>\n                  <option value=\"verified\">Verified first</option>\n                </select>\n                <Button onClick={() => fetchReports({}, false)} variant=\"outline\" size=\"sm\">Refresh</Button>\n              </div>\n            </div>\n            {/* Pagination info */}\n            {pagination && (\n              <div className=\"text-center text-xs text-gray-500 mb-2\">\n                Showing {reports?.length || 0} of {pagination.total} reports\n                {hasMore && <span className=\"ml-2\"> Scroll to load more</span>}\n              </div>\n            )}\n            <div className=\"space-y-3\">\n              {reports && reports.length > 0 ? (\n                reports.map((report) => (\n                  <MobileCard key={report.id} className=\"border-gray-200\">\n                    <div className=\"p-4\">\n                      <div className=\"flex items-start justify-between\">\n                        <div className=\"flex-1\">\n                          <div className=\"flex items-center gap-2 mb-1\">\n                            <span className=\"text-xs px-2 py-0.5 rounded-full bg-gray-100 text-gray-700\">{report.threat_type}</span>\n                            <span className=\"text-xs text-gray-500\">{report.created_at ? new Date(report.created_at).toLocaleDateString() : ''}</span>\n                            {report.verified && <CheckCircle className=\"w-3.5 h-3.5 text-green-600\" />}\n                          </div>\n                          <div className=\"text-xs text-gray-500 mb-1\">by {report.creator?.name || 'Anonymous'}</div>\n                          <p className=\"text-sm text-gray-800\">{report.description}</p>\n\n                          {report.media && report.media.length > 0 && (\n                            <div className=\"mt-2 grid grid-cols-3 gap-2\">\n                              {(report.media.filter(m => isImageMedia(m) || isVideoMedia(m)).slice(0, 3)).map((m, idx, arr) => {\n                                const isLastAndExtra = (idx === arr.length - 1) && (report.media.length > 3);\n                                const extraCount = report.media.length - 3;\n                                const src = resolveMediaUrl(m.media_url);\n                                return (\n                                  <button\n                                    key={m.id || idx}\n                                    type=\"button\"\n                                    onClick={() => openLightbox(report.media, idx)}\n                                    className=\"relative w-full h-24 bg-gray-100 rounded overflow-hidden focus:outline-none\"\n                                  >\n                                    {src && (\n                                      isVideoMedia(m) ? (\n                                        <video src={src} className=\"w-full h-full object-cover\" muted playsInline />\n                                      ) : (\n                                        <img\n                                          src={src}\n                                          alt=\"report media\"\n                                          className=\"w-full h-full object-cover\"\n                                          loading=\"lazy\"\n                                          onError={(e) => {\n                                            const fallback = m.media_url || '';\n                                            if (fallback && e.currentTarget.src !== fallback) {\n                                              e.currentTarget.src = fallback;\n                                            } else {\n                                              e.currentTarget.style.display = 'none';\n                                            }\n                                          }}\n                                        />\n                                      )\n                                    )}\n                                    {isLastAndExtra && extraCount > 0 && (\n                                      <div className=\"absolute inset-0 bg-black bg-opacity-40 flex items-center justify-center\">\n                                        <span className=\"text-white text-sm font-semibold\">+{extraCount}</span>\n                                      </div>\n                                    )}\n                                  </button>\n                                );\n                              })}\n                            </div>\n                          )}\n\n                          <div className=\"mt-3 flex items-center justify-between\">\n                            <div className=\"flex items-center gap-2\">\n                              <Button\n                                onClick={() => voteOnReport(report.id, 'up')}\n                                variant=\"ghost\"\n                                size=\"sm\"\n                                className={report.user_vote === 'up' ? 'text-green-600' : ''}\n                              >\n                                <ThumbsUp className=\"w-4 h-4 mr-1\" /> {report.votes_up || 0}\n                              </Button>\n                              <Button\n                                onClick={() => voteOnReport(report.id, 'down')}\n                                variant=\"ghost\"\n                                size=\"sm\"\n                                className={report.user_vote === 'down' ? 'text-red-600' : ''}\n                              >\n                                <ThumbsDown className=\"w-4 h-4 mr-1\" /> {report.votes_down || 0}\n                              </Button>\n                            </div>\n                            <div className=\"text-xs text-gray-500 flex items-center gap-1\">\n                              <MessageSquare className=\"w-3.5 h-3.5\" /> {report.comments?.length || 0}\n                            </div>\n                          </div>\n\n                          {report.comments && report.comments.length > 0 && (\n                            <div className=\"mt-2 space-y-1\">\n                              {report.comments.slice(0, 2).map((c, i) => (\n                                <div key={c.id || i} className=\"text-xs text-gray-700 bg-gray-50 p-2 rounded\">\n                                  <span className=\"font-medium\">{c.user_name || 'Anonymous'}:</span> {c.comment}\n                                </div>\n                              ))}\n                              <div>\n                                <Button variant=\"ghost\" size=\"sm\" onClick={() => handleViewAllComments(report.id)}>\n                                  View all comments\n                                </Button>\n                              </div>\n                            </div>\n                          )}\n\n                          <div className=\"mt-2 flex items-center gap-2\">\n                            <MobileInput\n                              placeholder=\"Add a comment...\"\n                              value={commentTexts[report.id] || ''}\n                              onChange={(e) => setCommentTexts(prev => ({ ...prev, [report.id]: e.target.value }))}\n                              className=\"flex-1\"\n                            />\n                            <Button\n                              size=\"sm\"\n                              disabled={!((commentTexts[report.id] || '').trim())}\n                              onClick={async () => {\n                                const text = (commentTexts[report.id] || '').trim();\n                                if (!text) return;\n                                await addComment(report.id, { comment: text });\n                                setCommentTexts(prev => ({ ...prev, [report.id]: '' }));\n                              }}\n                            >\n                              Comment\n                            </Button>\n                          </div>\n                          {/* Allow owner to delete their report */}\n                          {report.user_id === user?.id && (\n                            <div className=\"mt-2 text-right\">\n                              <Button\n                                variant=\"outline\"\n                                size=\"sm\"\n                                onClick={async () => {\n                                  if (confirm('Delete this report? This cannot be undone.')) {\n                                    const res = await deleteReport(report.id);\n                                    if (!res.success) alert(res.error || 'Failed to delete');\n                                  }\n                                }}\n                              >\n                                Delete report\n                              </Button>\n                            </div>\n                          )}\n                        </div>\n                      </div>\n                    </div>\n                  </MobileCard>\n                ))\n              ) : (\n                <p className=\"text-gray-500 text-center py-6\">No reports to display yet.</p>\n              )}\n              \n              {/* Loading indicator for pagination */}\n              {isLoading && hasMore && (\n                <div className=\"text-center py-4\">\n                  <div className=\"inline-block animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600\"></div>\n                  <p className=\"text-sm text-gray-500 mt-2\">Loading more reports...</p>\n                </div>\n              )}\n            </div>\n          </div>\n        );\n\n      case 'my_reports':\n        return (\n          <div className=\"space-y-4\">\n            <div className=\"text-center mb-4\">\n              <h3 className=\"text-lg font-semibold text-gray-900\">My Reports</h3>\n              <p className=\"text-sm text-gray-600\">See the status of your submitted reports</p>\n            </div>\n\n            <div className=\"space-y-3\">\n              {reports && reports.length > 0 ? (\n                reports\n                  .filter(r => r.user_id === user?.id)\n                  .map((report) => (\n                  <MobileCard key={report.id} className=\"border-gray-200\">\n                    <div className=\"p-4\">\n                      <div className=\"flex items-start justify-between\">\n                        <div className=\"flex-1 pr-3\">\n                          <div className=\"flex items-center gap-2 mb-1\">\n                            <span className={`text-xs px-2 py-1 rounded-full ${\n                              report.status === 'APPROVED' || report.status === 'VERIFIED' ? 'bg-green-100 text-green-700' :\n                              report.status === 'REJECTED' ? 'bg-red-100 text-red-700' :\n                              'bg-yellow-100 text-yellow-700'\n                            }`}>\n                              {report.status}\n                            </span>\n                            {report.verified && (\n                              <span className=\"text-xs px-2 py-1 rounded-full bg-blue-100 text-blue-700\">Verified</span>\n                            )}\n                          </div>\n                          <div className=\"text-xs text-gray-500 mb-1\">Submitted {new Date(report.created_at).toLocaleString()}</div>\n                          <p className=\"text-sm text-gray-800\">{report.description}</p>\n\n                          {report.media && report.media.length > 0 && (\n                            <div className=\"mt-2 grid grid-cols-3 gap-2\">\n                              {(report.media.filter(m => !m.media_type || m.media_type.startsWith('image')).slice(0, 3)).map((m, idx, arr) => {\n                                const isLastAndExtra = (idx === arr.length - 1) && (report.media.length > 3);\n                                const extraCount = report.media.length - 3;\n                                const src = m.media_url && (m.media_url.startsWith('http') ? m.media_url : `${API}${m.media_url}`);\n                                return (\n                                  <button\n                                    key={m.id || idx}\n                                    type=\"button\"\n                                    onClick={() => openLightbox(report.media, idx)}\n                                    className=\"relative w-full h-24 bg-gray-100 rounded overflow-hidden focus:outline-none\"\n                                  >\n                                    {src && (\n                                      <img src={src} alt=\"report media\" className=\"w-full h-full object-cover\" loading=\"lazy\" />\n                                    )}\n                                    {isLastAndExtra && extraCount > 0 && (\n                                      <div className=\"absolute inset-0 bg-black bg-opacity-40 flex items-center justify-center\">\n                                        <span className=\"text-white text-sm font-semibold\">+{extraCount}</span>\n                                      </div>\n                                    )}\n                                  </button>\n                                );\n                              })}\n                            </div>\n                          )}\n                        </div>\n                      </div>\n                    </div>\n                  </MobileCard>\n                ))\n              ) : (\n                <p className=\"text-gray-500 text-center py-6\">No reports found</p>\n              )}\n            </div>\n          </div>\n        );\n\n      case 'leaderboard':\n        return (\n          <div className=\"space-y-4\">\n            <div className=\"text-center mb-4\">\n              <h3 className=\"text-lg font-semibold text-gray-900 mb-2\">Top Reporters</h3>\n              <p className=\"text-sm text-gray-600\">Community heroes protecting others from scams</p>\n            </div>\n            \n            <div className=\"space-y-2\">\n              {leaderboard.map((user, index) => (\n                <MobileCard key={user.id} className=\"border-gray-200\">\n                  <div className=\"p-3\">\n                    <div className=\"flex items-center justify-between\">\n                      <div className=\"flex items-center space-x-3\">\n                        <div className={`w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold ${\n                          index === 0 ? 'bg-yellow-100 text-yellow-800' :\n                          index === 1 ? 'bg-gray-100 text-gray-800' :\n                          index === 2 ? 'bg-orange-100 text-orange-800' :\n                          'bg-blue-100 text-blue-800'\n                        }`}>\n                          {index === 0 ? '' : index === 1 ? '' : index === 2 ? '' : user.rank}\n                        </div>\n                        <div>\n                          <div className=\"font-semibold text-gray-900\">{user.username || user.name}</div>\n                          <div className=\"text-xs text-gray-600\">{user.reports} reports</div>\n                        </div>\n                      </div>\n                      {index < 3 && (\n                        <Star className=\"w-5 h-5 text-yellow-500\" />\n                      )}\n                    </div>\n                  </div>\n                </MobileCard>\n              ))}\n            </div>\n          </div>\n        );\n\n      case 'latest':\n        return (\n          <div className=\"space-y-4\">\n            <div className=\"text-center mb-4\">\n              <h3 className=\"text-lg font-semibold text-gray-900 mb-2\">Latest Scams</h3>\n              <p className=\"text-sm text-gray-600\">10 most recent approved or verified reports</p>\n            </div>\n            \n            <div className=\"space-y-3\">\n              {latestReports && latestReports.length > 0 ? (\n                latestReports.map((report) => (\n                  <MobileCard key={report.id} className=\"border-gray-200\">\n                    <div className=\"p-4\">\n                      <div className=\"flex items-start justify-between\">\n                        <div className=\"flex-1 pr-3\">\n                          <div className=\"flex items-center gap-2 mb-1\">\n                            <span className={`text-xs px-2 py-1 rounded-full ${\n                              report.status === 'APPROVED' || report.status === 'VERIFIED' ? 'bg-green-100 text-green-700' :\n                              report.status === 'REJECTED' ? 'bg-red-100 text-red-700' :\n                              'bg-yellow-100 text-yellow-700'\n                            }`}>\n                              {report.status}\n                            </span>\n                            {report.verified && (\n                              <span className=\"text-xs px-2 py-1 rounded-full bg-blue-100 text-blue-700\">Verified</span>\n                            )}\n                          </div>\n                          <div className=\"text-xs text-gray-500 mb-1\">by {report.creator?.name || 'Anonymous'}  {new Date(report.created_at).toLocaleString()}</div>\n                          <p className=\"text-sm text-gray-800\">{report.description}</p>\n\n                          {report.media && report.media.length > 0 && (\n                            <div className=\"mt-2 grid grid-cols-3 gap-2\">\n                              {(report.media.filter(m => !m.media_type || m.media_type.startsWith('image')).slice(0, 3)).map((m, idx, arr) => {\n                                const isLastAndExtra = (idx === arr.length - 1) && (report.media.length > 3);\n                                const extraCount = report.media.length - 3;\n                                const src = m.media_url && (m.media_url.startsWith('http') ? m.media_url : `${API}${m.media_url}`);\n                                return (\n                                  <button\n                                    key={m.id || idx}\n                                    type=\"button\"\n                                    onClick={() => openLightbox(report.media, idx)}\n                                    className=\"relative w-full h-24 bg-gray-100 rounded overflow-hidden focus:outline-none\"\n                                  >\n                                    {src && (\n                                      <img src={src} alt=\"report media\" className=\"w-full h-full object-cover\" loading=\"lazy\" />\n                                    )}\n                                    {isLastAndExtra && extraCount > 0 && (\n                                      <div className=\"absolute inset-0 bg-black bg-opacity-40 flex items-center justify-center\">\n                                        <span className=\"text-white text-sm font-semibold\">+{extraCount}</span>\n                                      </div>\n                                    )}\n                                  </button>\n                                );\n                              })}\n                            </div>\n                          )}\n                        </div>\n                      </div>\n                    </div>\n                  </MobileCard>\n                ))\n              ) : (\n                <p className=\"text-gray-500 text-center py-6\">No recent reports.</p>\n              )}\n            </div>\n          </div>\n        );\n\n      default:\n        return null;\n    }\n  };\n\n  return (\n    <div className=\"space-y-4 p-4\">\n      {/* Header */}\n      <div className=\"text-center mb-6\">\n        <div className=\"flex justify-center mb-3\">\n          <div className=\"p-3 bg-orange-100 rounded-full\">\n            <Users className=\"w-8 h-8 text-orange-600\" />\n          </div>\n        </div>\n        <h1 className=\"text-2xl font-bold text-gray-900 mb-2\">Community Hub</h1>\n        <p className=\"text-sm text-gray-600\">Report scams, track threats, and see top reporters</p>\n      </div>\n\n      {/* Navigation Tabs */}\n      <div className=\"flex space-x-1 bg-gray-100 p-1 rounded-lg\">\n        {tabs.map((tab) => {\n          const Icon = tab.icon;\n          return (\n            <button\n              key={tab.id}\n              onClick={() => setActiveTabLocal(tab.id)}\n              className={`flex-1 flex items-center justify-center space-x-2 py-2 px-3 rounded-md text-sm font-medium transition-colors ${\n                activeTab === tab.id\n                  ? 'bg-white text-blue-600 shadow-sm'\n                  : 'text-gray-600 hover:text-gray-800'\n              }`}\n            >\n              <Icon className=\"w-4 h-4\" />\n              <span className=\"hidden sm:inline\">{tab.label}</span>\n            </button>\n          );\n        })}\n      </div>\n\n      {/* Content */}\n      {renderContent()}\n\n      {/* Community Benefits */}\n      <div className=\"mt-6\">\n        <MobileCard className=\"bg-orange-50 border-orange-200\">\n          <div className=\"p-4\">\n            <h3 className=\"font-semibold text-gray-900 mb-2\"> Community Benefits</h3>\n            <ul className=\"text-sm text-gray-600 space-y-1\">\n              <li> Report scams to protect others</li>\n              <li> Earn points and climb the leaderboard</li>\n              <li> Stay updated on latest threats</li>\n              <li> Build a safer digital community</li>\n            </ul>\n          </div>\n        </MobileCard>\n      </div>\n\n      {/* New Report Modal */}\n      {showNewReport && (\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\n          <div className=\"bg-white rounded-lg p-6 w-full max-w-2xl mx-4\">\n            <h2 className=\"text-xl font-semibold mb-4\">Report New Threat</h2>\n            {!isAuthenticated ? (\n              <div className=\"text-center text-gray-600\">\n                Please log in to submit a community report.\n              </div>\n            ) : (\n              <form\n                onSubmit={async (e) => {\n                  e.preventDefault();\n                  try {\n                    setIsSubmitting(true);\n                    const result = await createReport(newReport);\n                    if (!result.success) {\n                      throw new Error(result.error || 'Failed to create report');\n                    }\n                    // Upload files\n                    for (const file of newReportFiles) {\n                      const up = await uploadReportMedia(result.report.id, file);\n                      if (!up.success) {\n                        throw new Error(up.error || 'Failed to upload media');\n                      }\n                    }\n                    setShowNewReport(false);\n                    setNewReport({ description: '', threat_type: 'SCAM', urgency: 'MEDIUM', location: '' });\n                    setNewReportFiles([]);\n                    setToast({ type: 'success', message: 'Report submitted successfully' });\n                    setTimeout(() => setToast(null), 3000);\n                    loadAllData();\n                  } catch (err) {\n                    setToast({ type: 'error', message: err.message || 'Submission failed' });\n                    setTimeout(() => setToast(null), 4000);\n                  } finally {\n                    setIsSubmitting(false);\n                  }\n                }}\n                className=\"space-y-4\"\n              >\n                <MobileTextarea\n                  placeholder=\"Detailed Description\"\n                  value={newReport.description}\n                  onChange={(e) => setNewReport({ ...newReport, description: e.target.value })}\n                  required\n                  rows={4}\n                />\n                <div className=\"grid grid-cols-2 gap-4\">\n                  <select\n                    value={newReport.threat_type}\n                    onChange={(e) => setNewReport({ ...newReport, threat_type: e.target.value })}\n                    className=\"border border-gray-300 rounded-md px-3 py-2\"\n                  >\n                    <option value=\"PHISHING\">Phishing</option>\n                    <option value=\"MALWARE\">Malware</option>\n                    <option value=\"SCAM\">Scam</option>\n                    <option value=\"SOCIAL_ENGINEERING\">Social Engineering</option>\n                    <option value=\"OTHER\">Other</option>\n                  </select>\n                  <select\n                    value={newReport.urgency}\n                    onChange={(e) => setNewReport({ ...newReport, urgency: e.target.value })}\n                    className=\"border border-gray-300 rounded-md px-3 py-2\"\n                  >\n                    <option value=\"LOW\">Low</option>\n                    <option value=\"MEDIUM\">Medium</option>\n                    <option value=\"HIGH\">High</option>\n                  </select>\n                </div>\n                <div>\n                  <label className=\"block text-sm text-gray-700 mb-1\">Attach Photos (optional)</label>\n                  <input\n                    type=\"file\"\n                    accept=\"image/*\"\n                    multiple\n                    onChange={(e) => setNewReportFiles(Array.from(e.target.files || []))}\n                    className=\"block w-full text-sm text-gray-700\"\n                  />\n                  {newReportFiles.length > 0 && (\n                    <div className=\"mt-2 text-xs text-gray-600\">{newReportFiles.length} file(s) selected</div>\n                  )}\n                </div>\n                <MobileInput\n                  placeholder=\"Location/URL\"\n                  value={newReport.location}\n                  onChange={(e) => setNewReport({ ...newReport, location: e.target.value })}\n                />\n                <div className=\"flex space-x-3\">\n                  <Button type=\"submit\" className=\"flex-1\" disabled={isSubmitting}>\n                    {isSubmitting ? 'Submitting...' : 'Submit Report'}\n                  </Button>\n                  <Button\n                    type=\"button\"\n                    variant=\"outline\"\n                    onClick={() => setShowNewReport(false)}\n                    className=\"flex-1\"\n                  >\n                    Cancel\n                  </Button>\n                </div>\n              </form>\n            )}\n          </div>\n        </div>\n      )}\n\n      {/* Toast Notification */}\n      {toast && (\n        <div className={`fixed bottom-6 left-1/2 -translate-x-1/2 px-4 py-3 rounded-lg shadow-md text-sm z-50 ${\n          toast.type === 'success' ? 'bg-green-600 text-white' : 'bg-red-600 text-white'\n        }`}>\n          {toast.message}\n        </div>\n      )}\n\n      {/* Lightbox Modal */}\n      <MobileModal isOpen={lightboxOpen} onClose={() => setLightboxOpen(false)} title=\"Preview\" fullScreen hideOnDesktop={false}>\n        {lightboxImages.length > 0 && (\n          <div className=\"flex flex-col items-center\">\n            <div className=\"w-full h-[60vh] bg-black flex items-center justify-center mb-3\">\n              <img\n                src={lightboxImages[lightboxIndex].src}\n                alt=\"preview\"\n                className=\"max-h-full max-w-full object-contain\"\n              />\n            </div>\n            <div className=\"flex items-center justify-between w-full\">\n              <Button onClick={() => setLightboxIndex(i => Math.max(0, i - 1))} disabled={lightboxIndex === 0} variant=\"outline\" size=\"sm\">Prev</Button>\n              <div className=\"text-sm text-gray-600\">{lightboxIndex + 1} / {lightboxImages.length}</div>\n              <Button onClick={() => setLightboxIndex(i => Math.min(lightboxImages.length - 1, i + 1))} disabled={lightboxIndex >= lightboxImages.length - 1} variant=\"outline\" size=\"sm\">Next</Button>\n            </div>\n          </div>\n        )}\n      </MobileModal>\n\n      {/* Full Comments Modal */}\n      <MobileModal isOpen={commentsModalOpen} onClose={() => setCommentsModalOpen(false)} title=\"All Comments\" hideOnDesktop={false}>\n        {commentsReport ? (\n          <div className=\"space-y-3\">\n            {commentsReport.comments && commentsReport.comments.length > 0 ? (\n              commentsReport.comments.map((c) => (\n                <div key={c.id} className=\"p-2 bg-gray-50 rounded border border-gray-200 flex items-start justify-between\">\n                  <div>\n                    <div className=\"text-sm text-gray-800\"><span className=\"font-medium\">{c.user_name || 'Anonymous'}:</span> {c.comment}</div>\n                    <div className=\"text-xs text-gray-500 mt-1\">{c.created_at ? new Date(c.created_at).toLocaleString() : ''}</div>\n                  </div>\n                  {/* Deletion allowed only if backend returns user_id; optional */}\n                </div>\n              ))\n            ) : (\n              <div className=\"text-sm text-gray-500\">No comments yet.</div>\n            )}\n\n            {commentsHasMore && (\n              <div className=\"pt-2\">\n                <Button onClick={handleLoadMoreComments} variant=\"outline\" size=\"sm\">Load more</Button>\n              </div>\n            )}\n          </div>\n        ) : (\n          <div className=\"text-sm text-gray-500\">Loading...</div>\n        )}\n      </MobileModal>\n    </div>\n  );\n}\n","import React, { useState, useEffect } from 'react';\nimport { MobileCard, MobileCardHeader, MobileCardContent } from './ui/mobile-card';\nimport { Badge } from './ui/badge';\nimport { Button } from './ui/button';\nimport { MobileTextarea } from './ui/mobile-input';\nimport { MobileInput } from './ui/mobile-input';\nimport { \n  AlertTriangle, \n  TrendingUp, \n  Users, \n  MessageSquare, \n  ThumbsUp, \n  ThumbsDown,\n  CheckCircle,\n  Star,\n  Lock,\n  ArrowLeft,\n  Trash2\n} from 'lucide-react';\nimport { useCommunity } from '../hooks/useCommunity';\nimport { useAuth } from '../hooks/useAuth';\nimport { API } from '../lib/api';\nimport MobileModal from './MobileModal';\n\nexport default function CommunityReporting({ setActiveTab }) {\n  const { isAuthenticated, user } = useAuth();\n  const {\n    reports,\n    trendingThreats,\n    communityStats,\n    alerts,\n    isLoading,\n    error,\n    loadAllData,\n    createReport,\n    voteOnReport,\n    verifyReport,\n    addComment,\n    createAlert,\n    uploadReportMedia,\n    fetchReportById,\n    fetchComments,\n    deleteComment,\n    clearError\n  } = useCommunity();\n\n  const [showNewReport, setShowNewReport] = useState(false);\n  const [showNewAlert, setShowNewAlert] = useState(false);\n  const [newReport, setNewReport] = useState({ description: '', threat_type: 'SCAM', urgency: 'MEDIUM', location: '' });\n  const [newAlert, setNewAlert] = useState({ title: '', message: '', priority: 'medium' });\n  const [commentText, setCommentText] = useState('');\n  const [newReportFiles, setNewReportFiles] = useState([]);\n\n  // Lightbox\n  const [lightboxOpen, setLightboxOpen] = useState(false);\n  const [lightboxImages, setLightboxImages] = useState([]);\n  const [lightboxIndex, setLightboxIndex] = useState(0);\n\n  // Full comments modal\n  const [commentsModalOpen, setCommentsModalOpen] = useState(false);\n  const [commentsReport, setCommentsReport] = useState(null);\n  const [commentsPage, setCommentsPage] = useState(1);\n  const [commentsHasMore, setCommentsHasMore] = useState(false);\n\n  useEffect(() => {\n    if (isAuthenticated) {\n      loadAllData();\n      const shouldOpen = (\n        (typeof localStorage !== 'undefined' && localStorage.getItem('openNewReport') === '1') ||\n        (typeof sessionStorage !== 'undefined' && sessionStorage.getItem('openNewReport') === '1') ||\n        (typeof window !== 'undefined' && window.__openNewReport === true)\n      );\n      if (shouldOpen) {\n        setShowNewReport(true);\n        try { localStorage.removeItem('openNewReport'); } catch (e) {}\n        try { sessionStorage.removeItem('openNewReport'); } catch (e) {}\n        try { delete window.__openNewReport; } catch (e) {}\n      }\n    }\n  }, [loadAllData, isAuthenticated]);\n\n  const handleSubmitReport = async (e) => {\n    e.preventDefault();\n    const result = await createReport(newReport);\n    if (result.success) {\n      // Upload any selected files\n      for (const file of newReportFiles) {\n        await uploadReportMedia(result.report.id, file);\n      }\n      setShowNewReport(false);\n      setNewReport({\n        description: '',\n        threat_type: 'SCAM',\n        urgency: 'MEDIUM',\n        location: ''\n      });\n      setNewReportFiles([]);\n    }\n  };\n\n  const handleSubmitAlert = async (e) => {\n    e.preventDefault();\n    const result = await createAlert(newAlert);\n    if (result.success) {\n      setShowNewAlert(false);\n      setNewAlert({\n        title: '',\n        message: '',\n        priority: 'medium'\n      });\n    }\n  };\n\n  const handleVote = async (reportId, voteType) => {\n    await voteOnReport(reportId, voteType);\n  };\n\n  const handleVerify = async (reportId) => {\n    await verifyReport(reportId, { verified: true });\n  };\n\n  const handleAddComment = async (reportId) => {\n    if (commentText.trim()) {\n      await addComment(reportId, { comment: commentText });\n      setCommentText('');\n    }\n  };\n\n  const handleViewAllComments = async (reportId) => {\n    setCommentsPage(1);\n    const res = await fetchComments(reportId, { page: 1, per_page: 20 });\n    if (res.success) {\n      setCommentsReport({ id: reportId, comments: res.comments || [] });\n      setCommentsHasMore((res.pagination?.page || 1) < (res.pagination?.pages || 1));\n      setCommentsModalOpen(true);\n    }\n  };\n\n  const handleLoadMoreComments = async () => {\n    if (!commentsReport) return;\n    const nextPage = commentsPage + 1;\n    const res = await fetchComments(commentsReport.id, { page: nextPage, per_page: 20 });\n    if (res.success) {\n      setCommentsReport(prev => ({ ...prev, comments: [...(prev.comments || []), ...(res.comments || [])] }));\n      setCommentsPage(nextPage);\n      setCommentsHasMore((res.pagination?.page || nextPage) < (res.pagination?.pages || nextPage));\n    }\n  };\n\n  const handleDeleteComment = async (commentId) => {\n    const res = await deleteComment(commentId);\n    if (res.success) {\n      setCommentsReport(prev => ({ ...prev, comments: (prev.comments || []).filter(c => c.id !== commentId) }));\n    }\n  };\n\n  const openLightbox = (mediaList, startIndex = 0) => {\n    const images = (mediaList || [])\n      .filter(m => !m.media_type || m.media_type === 'image')\n      .map(m => ({ id: m.id, src: m.media_url && (m.media_url.startsWith('http') ? m.media_url : `${API}${m.media_url}`) }))\n      .filter(i => !!i.src);\n    if (images.length > 0) {\n      setLightboxImages(images);\n      setLightboxIndex(Math.max(0, Math.min(startIndex, images.length - 1)));\n      setLightboxOpen(true);\n    }\n  };\n\n  // Show login prompt if not authenticated\n  if (!isAuthenticated) {\n    return (\n      <div className=\"flex items-center justify-center h-64\">\n        <div className=\"text-center\">\n          <Lock className=\"w-8 h-8 mx-auto mb-2 text-gray-400\" />\n          <p className=\"text-gray-600 mb-2\">Login required to access Community</p>\n          <p className=\"text-gray-500 text-sm\">Please log in to view and contribute to community reports</p>\n        </div>\n      </div>\n    )\n  }\n\n  if (isLoading) {\n    return (\n      <div className=\"flex items-center justify-center min-h-64\">\n        <div className=\"text-center\">\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4\"></div>\n          <p className=\"text-gray-600\">Loading community data...</p>\n        </div>\n      </div>\n    );\n  }\n\n  if (error) {\n    // Check if it's an authentication error\n    const isAuthError = error.includes('Token is missing') || error.includes('401') || error.includes('Unauthorized')\n    \n    return (\n      <div className=\"bg-red-50 border border-red-200 rounded-lg p-4 mb-6\">\n        <div className=\"flex items-center\">\n          <AlertTriangle className=\"h-5 w-5 text-red-400 mr-2\" />\n          <span className=\"text-red-800\">\n            {isAuthError ? 'Authentication Required' : error}\n          </span>\n        </div>\n        <p className=\"text-red-700 text-sm mt-2\">\n          {isAuthError \n            ? 'Please log in to access community features. Your session may have expired.'\n            : ''\n          }\n        </p>\n        <div className=\"flex gap-2 mt-3\">\n          {isAuthError ? (\n            <Button \n              onClick={() => window.location.reload()} \n              variant=\"outline\" \n              size=\"sm\"\n            >\n              Go to Login\n            </Button>\n          ) : (\n            <Button onClick={clearError} variant=\"outline\" size=\"sm\">\n              Dismiss\n            </Button>\n          )}\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-6 p-4\">\n      {/* Header with Back Button */}\n      <div className=\"flex items-center mb-6\">\n        <button\n          onClick={() => setActiveTab('community')}\n          className=\"p-2 mr-3 text-gray-600 hover:text-gray-800 transition-colors\"\n        >\n          <ArrowLeft className=\"w-5 h-5\" />\n        </button>\n        <div className=\"flex-1 text-center\">\n          <h1 className=\"text-2xl font-bold text-gray-900\">Community Reports</h1>\n          <p className=\"text-gray-600 text-sm\">Report and track security threats</p>\n        </div>\n      </div>\n\n      {/* Community Stats */}\n      {communityStats && (\n        <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4\">\n          <MobileCard className=\"p-4\">\n            <MobileCardHeader className=\"flex items-center\">\n              <Users className=\"h-8 w-8 text-blue-600 mr-3\" />\n              <div>\n                <p className=\"text-sm text-gray-600\">Total Reports</p>\n                <p className=\"text-2xl font-bold text-gray-900\">{communityStats.total_reports || 0}</p>\n              </div>\n            </MobileCardHeader>\n          </MobileCard>\n          <MobileCard className=\"p-4\">\n            <MobileCardHeader className=\"flex items-center\">\n              <AlertTriangle className=\"h-8 w-8 text-red-600 mr-3\" />\n              <div>\n                <p className=\"text-sm text-gray-600\">Verified</p>\n                <p className=\"text-2xl font-bold text-gray-900\">{(communityStats.status_breakdown && communityStats.status_breakdown.VERIFIED) || 0}</p>\n              </div>\n            </MobileCardHeader>\n          </MobileCard>\n          <MobileCard className=\"p-4\">\n            <MobileCardHeader className=\"flex items-center\">\n              <CheckCircle className=\"h-8 w-8 text-green-600 mr-3\" />\n              <div>\n                <p className=\"text-sm text-gray-600\">Pending</p>\n                <p className=\"text-2xl font-bold text-gray-900\">{(communityStats.status_breakdown && communityStats.status_breakdown.PENDING) || 0}</p>\n              </div>\n            </MobileCardHeader>\n          </MobileCard>\n          <MobileCard className=\"p-4\">\n            <MobileCardHeader className=\"flex items-center\">\n              <Users className=\"h-8 w-8 text-purple-600 mr-3\" />\n              <div>\n                <p className=\"text-sm text-gray-600\">Top Reporter</p>\n                <p className=\"text-2xl font-bold text-gray-900\">{(communityStats.top_contributors && communityStats.top_contributors[0]?.name) || ''}</p>\n              </div>\n            </MobileCardHeader>\n          </MobileCard>\n        </div>\n      )}\n\n      {/* Trending Threats */}\n      <MobileCard className=\"p-6\">\n        <MobileCardHeader className=\"flex items-center justify-between mb-4\">\n          <h2 className=\"text-xl font-semibold text-gray-900\">Trending Threats</h2>\n          <TrendingUp className=\"h-5 w-5 text-orange-500\" />\n        </MobileCardHeader>\n        <MobileCardContent>\n          <div className=\"space-y-3\">\n            {trendingThreats && trendingThreats.length > 0 ? (\n              trendingThreats.map((threat, idx) => (\n                <div key={idx} className=\"flex items-center justify-between p-3 bg-gray-50 rounded-lg\">\n                  <div className=\"flex items-center space-x-3\">\n                    <Star className=\"h-4 w-4 text-yellow-500\" />\n                    <div>\n                      <p className=\"font-medium text-gray-900\">{threat.threat_type}</p>\n                      <p className=\"text-sm text-gray-600\">Reports: {threat.report_count}  Trend: {threat.trend}  Urgency score: {threat.urgency_score}</p>\n                    </div>\n                  </div>\n                </div>\n              ))\n            ) : (\n              <p className=\"text-gray-500 text-center py-4\">No trending threats at the moment</p>\n            )}\n          </div>\n        </MobileCardContent>\n      </MobileCard>\n\n      {/* Recent Reports */}\n      <MobileCard className=\"p-6\">\n        <MobileCardHeader className=\"flex items-center justify-between mb-4\">\n          <h2 className=\"text-xl font-semibold text-gray-900\">Recent Reports</h2>\n          <div className=\"flex items-center gap-2\">\n            <Button onClick={() => setShowNewReport(true)} size=\"sm\">\n              Report New Scam\n            </Button>\n            <Button onClick={loadAllData} variant=\"outline\" size=\"sm\">\n              Refresh\n            </Button>\n          </div>\n        </MobileCardHeader>\n        <MobileCardContent>\n          <div className=\"space-y-4\">\n            {reports && reports.length > 0 ? (\n              reports.map((report) => (\n                <div key={report.id} className=\"border border-gray-200 rounded-lg p-4\">\n                  <div className=\"flex items-start justify-between mb-3\">\n                    <div>\n                      <h3 className=\"font-medium text-gray-900\">{report.threat_type}</h3>\n                      <p className=\"text-sm text-gray-600 mb-2\">{report.description}</p>\n                      {report.media && report.media.length > 0 && (\n                        <div className=\"mt-2 grid grid-cols-3 gap-2\">\n                          {(report.media.filter(m => !m.media_type || m.media_type === 'image').slice(0, 3)).map((m, idx, arr) => {\n                            const isLastAndExtra = (idx === arr.length - 1) && (report.media.length > 3);\n                            const extraCount = report.media.length - 3;\n                            const src = m.media_url && (m.media_url.startsWith('http') ? m.media_url : `${API}${m.media_url}`);\n                            return (\n                              <button\n                                key={m.id || idx}\n                                type=\"button\"\n                                onClick={() => openLightbox(report.media, idx)}\n                                className=\"relative w-full h-20 bg-gray-100 rounded overflow-hidden focus:outline-none\"\n                              >\n                                {src && (\n                                  <img\n                                    src={src}\n                                    alt=\"report media\"\n                                    className=\"w-full h-full object-cover\"\n                                    loading=\"lazy\"\n                                  />\n                                )}\n                                {isLastAndExtra && extraCount > 0 && (\n                                  <div className=\"absolute inset-0 bg-black bg-opacity-40 flex items-center justify-center\">\n                                    <span className=\"text-white text-sm font-semibold\">+{extraCount}</span>\n                                  </div>\n                                )}\n                              </button>\n                            );\n                          })}\n                        </div>\n                      )}\n                      <div className=\"flex items-center space-x-4 text-sm text-gray-500\">\n                        <span>Urgency: {report.urgency}</span>\n                        <span>Location: {report.location || 'N/A'}</span>\n                        <span>Reported: {report.created_at ? new Date(report.created_at).toLocaleDateString() : 'N/A'}</span>\n                      </div>\n                    </div>\n                    <div className=\"flex items-center space-x-2\">\n                      {report.verified && (\n                        <CheckCircle className=\"h-4 w-4 text-green-500\" />\n                      )}\n                    </div>\n                  </div>\n                  \n                  <div className=\"flex items-center justify-between\">\n                    <div className=\"flex items-center space-x-4\">\n                      <div className=\"flex items-center space-x-2\">\n                        <Button\n                          onClick={() => handleVote(report.id, 'up')}\n                          variant=\"ghost\"\n                          size=\"sm\"\n                          className={report.user_vote === 'up' ? 'text-green-600' : ''}\n                        >\n                          <ThumbsUp className=\"h-4 w-4 mr-1\" />\n                          {report.votes_up || 0}\n                        </Button>\n                        <Button\n                          onClick={() => handleVote(report.id, 'down')}\n                          variant=\"ghost\"\n                          size=\"sm\"\n                          className={report.user_vote === 'down' ? 'text-red-600' : ''}\n                        >\n                          <ThumbsDown className=\"h-4 w-4 mr-1\" />\n                          {report.votes_down || 0}\n                        </Button>\n                      </div>\n                      {/* Show verify button only for admins */}\n                      {user?.is_admin && !report.verified && (\n                        <Button\n                          onClick={() => handleVerify(report.id)}\n                          variant=\"outline\"\n                          size=\"sm\"\n                        >\n                          <CheckCircle className=\"h-4 w-4 mr-1\" />\n                          Verify\n                        </Button>\n                      )}\n                    </div>\n                    <div className=\"text-sm text-gray-500\">\n                      {report.creator?.name || 'Anonymous'}\n                    </div>\n                  </div>\n\n                  {/* Comments */}\n                  {report.comments && report.comments.length > 0 && (\n                    <div className=\"mt-3 pt-3 border-t border-gray-200\">\n                      <h4 className=\"text-sm font-medium text-gray-700 mb-2\">Comments</h4>\n                      <div className=\"space-y-2\">\n                        {report.comments.map((comment, index) => (\n                          <div key={index} className=\"text-sm text-gray-600 bg-gray-50 p-2 rounded\">\n                            <span className=\"font-medium\">{comment.user_name || 'Anonymous'}:</span> {comment.comment}\n                          </div>\n                        ))}\n                      </div>\n                      <div className=\"mt-2\">\n                        <Button variant=\"ghost\" size=\"sm\" onClick={() => handleViewAllComments(report.id)}>\n                          View all comments\n                        </Button>\n                      </div>\n                    </div>\n                  )}\n\n                  {/* Add Comment */}\n                  <div className=\"mt-3 pt-3 border-t border-gray-200\">\n                    <div className=\"flex space-x-2\">\n                      <MobileInput\n                        placeholder=\"Add a comment...\"\n                        value={commentText}\n                        onChange={(e) => setCommentText(e.target.value)}\n                        className=\"flex-1\"\n                      />\n                      <Button\n                        onClick={() => handleAddComment(report.id)}\n                        size=\"sm\"\n                        disabled={!commentText.trim()}\n                      >\n                        Comment\n                      </Button>\n                    </div>\n                  </div>\n                </div>\n              ))\n            ) : (\n              <p className=\"text-gray-500 text-center py-8\">No reports yet. Be the first to report a threat!</p>\n            )}\n          </div>\n        </MobileCardContent>\n      </MobileCard>\n\n      {/* Community Alerts */}\n      <MobileCard className=\"p-6\">\n        <MobileCardHeader className=\"flex items-center justify-between mb-4\">\n          <h2 className=\"text-xl font-semibold text-gray-900\">Community Alerts</h2>\n        </MobileCardHeader>\n        <MobileCardContent>\n          <div className=\"space-y-3\">\n            {alerts && alerts.length > 0 ? (\n              alerts.map((alert) => (\n                <div key={alert.id} className=\"flex items-start space-x-3 p-3 bg-blue-50 border border-blue-200 rounded-lg\">\n                  <MessageSquare className=\"h-5 w-5 text-blue-600 mt-0.5\" />\n                  <div className=\"flex-1\">\n                    <h4 className=\"font-medium text-blue-900\">{alert.threat_type || 'Community Alert'}</h4>\n                    <p className=\"text-sm text-blue-800\">{alert.message}</p>\n                    <div className=\"flex items-center space-x-4 mt-2 text-xs text-blue-600\">\n                      <span>Severity: {alert.severity}</span>\n                      <span>{alert.created_at ? new Date(alert.created_at).toLocaleDateString() : ''}</span>\n                    </div>\n                  </div>\n                </div>\n              ))\n            ) : (\n              <p className=\"text-gray-500 text-center py-4\">No active alerts</p>\n            )}\n          </div>\n        </MobileCardContent>\n      </MobileCard>\n\n      {/* New Report Modal */}\n      {showNewReport && (\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\n          <div className=\"bg-white rounded-lg p-6 w-full max-w-2xl mx-4\">\n            <h2 className=\"text-xl font-semibold mb-4\">Report New Threat</h2>\n            <form onSubmit={handleSubmitReport} className=\"space-y-4\">\n              <MobileTextarea\n                placeholder=\"Detailed Description\"\n                value={newReport.description}\n                onChange={(e) => setNewReport({...newReport, description: e.target.value})}\n                required\n                rows={4}\n              />\n              <div className=\"grid grid-cols-2 gap-4\">\n                <select\n                  value={newReport.threat_type}\n                  onChange={(e) => setNewReport({...newReport, threat_type: e.target.value})}\n                  className=\"border border-gray-300 rounded-md px-3 py-2\"\n                >\n                  <option value=\"PHISHING\">Phishing</option>\n                  <option value=\"MALWARE\">Malware</option>\n                  <option value=\"SCAM\">Scam</option>\n                  <option value=\"SOCIAL_ENGINEERING\">Social Engineering</option>\n                  <option value=\"OTHER\">Other</option>\n                </select>\n                <select\n                  value={newReport.urgency}\n                  onChange={(e) => setNewReport({...newReport, urgency: e.target.value})}\n                  className=\"border border-gray-300 rounded-md px-3 py-2\"\n                >\n                  <option value=\"LOW\">Low</option>\n                  <option value=\"MEDIUM\">Medium</option>\n                  <option value=\"HIGH\">High</option>\n                </select>\n              </div>\n              <div>\n                <label className=\"block text-sm text-gray-700 mb-1\">Attach Photos (optional)</label>\n                <input\n                  type=\"file\"\n                  accept=\"image/*\"\n                  multiple\n                  onChange={(e) => setNewReportFiles(Array.from(e.target.files || []))}\n                  className=\"block w-full text-sm text-gray-700\"\n                />\n                {newReportFiles.length > 0 && (\n                  <div className=\"mt-2 text-xs text-gray-600\">{newReportFiles.length} file(s) selected</div>\n                )}\n              </div>\n              <MobileInput\n                placeholder=\"Location/URL\"\n                value={newReport.location}\n                onChange={(e) => setNewReport({...newReport, location: e.target.value})}\n              />\n              <div className=\"flex space-x-3\">\n                <Button type=\"submit\" className=\"flex-1\">\n                  Submit Report\n                </Button>\n                <Button\n                  type=\"button\"\n                  variant=\"outline\"\n                  onClick={() => setShowNewReport(false)}\n                  className=\"flex-1\"\n                >\n                  Cancel\n                </Button>\n              </div>\n            </form>\n          </div>\n        </div>\n      )}\n\n      {/* New Alert Modal */}\n      {showNewAlert && (\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\n          <div className=\"bg-white rounded-lg p-6 w-full max-w-lg mx-4\">\n            <h2 className=\"text-xl font-semibold mb-4\">Create Community Alert</h2>\n            <form onSubmit={handleSubmitAlert} className=\"space-y-4\">\n              <MobileInput\n                placeholder=\"Alert Title\"\n                value={newAlert.title}\n                onChange={(e) => setNewAlert({...newAlert, title: e.target.value})}\n                required\n              />\n              <MobileTextarea\n                placeholder=\"Alert Message\"\n                value={newAlert.message}\n                onChange={(e) => setNewAlert({...newAlert, message: e.target.value})}\n                required\n                rows={4}\n              />\n              <select\n                value={newAlert.priority}\n                onChange={(e) => setNewAlert({...newAlert, priority: e.target.value})}\n                className=\"border border-gray-300 rounded-md px-3 py-2 w-full\"\n              >\n                <option value=\"low\">Low Priority</option>\n                <option value=\"medium\">Medium Priority</option>\n                <option value=\"high\">High Priority</option>\n                <option value=\"urgent\">Urgent</option>\n              </select>\n              <div className=\"flex space-x-3\">\n                <Button type=\"submit\" className=\"flex-1\">\n                  Create Alert\n                </Button>\n                <Button\n                  type=\"button\"\n                  variant=\"outline\"\n                  onClick={() => setShowNewAlert(false)}\n                  className=\"flex-1\"\n                >\n                  Cancel\n                </Button>\n              </div>\n            </form>\n          </div>\n        </div>\n      )}\n\n      {/* Full Comments Modal */}\n      <MobileModal isOpen={commentsModalOpen} onClose={() => setCommentsModalOpen(false)} title=\"All Comments\">\n        {commentsReport ? (\n          <div className=\"space-y-3\">\n            {commentsReport.comments && commentsReport.comments.length > 0 ? (\n              commentsReport.comments.map((c) => (\n                <div key={c.id} className=\"p-2 bg-gray-50 rounded border border-gray-200 flex items-start justify-between\">\n                  <div>\n                    <div className=\"text-sm text-gray-800\"><span className=\"font-medium\">{c.user_name || 'Anonymous'}:</span> {c.comment}</div>\n                    <div className=\"text-xs text-gray-500 mt-1\">{c.created_at ? new Date(c.created_at).toLocaleString() : ''}</div>\n                  </div>\n                  {(user?.id === c.user_id || user?.is_admin) && (\n                    <Button variant=\"ghost\" size=\"sm\" onClick={() => handleDeleteComment(c.id)} title=\"Delete comment\">\n                      <Trash2 className=\"w-4 h-4 text-red-600\" />\n                    </Button>\n                  )}\n                </div>\n              ))\n            ) : (\n              <div className=\"text-sm text-gray-500\">No comments yet.</div>\n            )}\n\n            {commentsHasMore && (\n              <div className=\"pt-2\">\n                <Button onClick={handleLoadMoreComments} variant=\"outline\" size=\"sm\">Load more</Button>\n              </div>\n            )}\n          </div>\n        ) : (\n          <div className=\"text-sm text-gray-500\">Loading...</div>\n        )}\n      </MobileModal>\n\n      {/* Lightbox Modal */}\n      <MobileModal isOpen={lightboxOpen} onClose={() => setLightboxOpen(false)} title=\"Preview\" fullScreen>\n        {lightboxImages.length > 0 && (\n          <div className=\"flex flex-col items-center\">\n            <div className=\"w-full h-[60vh] bg-black flex items-center justify-center mb-3\">\n              <img\n                src={lightboxImages[lightboxIndex].src}\n                alt=\"preview\"\n                className=\"max-h-full max-w-full object-contain\"\n              />\n            </div>\n            <div className=\"flex items-center justify-between w-full\">\n              <Button\n                onClick={() => setLightboxIndex(i => Math.max(0, i - 1))}\n                disabled={lightboxIndex === 0}\n                variant=\"outline\"\n                size=\"sm\"\n              >\n                Prev\n              </Button>\n              <div className=\"text-sm text-gray-600\">{lightboxIndex + 1} / {lightboxImages.length}</div>\n              <Button\n                onClick={() => setLightboxIndex(i => Math.min(lightboxImages.length - 1, i + 1))}\n                disabled={lightboxIndex >= lightboxImages.length - 1}\n                variant=\"outline\"\n                size=\"sm\"\n              >\n                Next\n              </Button>\n            </div>\n          </div>\n        )}\n      </MobileModal>\n    </div>\n  );\n}\n","import React from 'react'\n\nconst Textarea = React.forwardRef(({ className = '', ...props }, ref) => {\n  const baseClasses = 'flex min-h-[80px] w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm placeholder:text-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:cursor-not-allowed disabled:opacity-50'\n  \n  const classes = `${baseClasses} ${className}`\n\n  return (\n    <textarea\n      className={classes}\n      ref={ref}\n      {...props}\n    />\n  )\n})\n\nTextarea.displayName = 'Textarea'\n\nexport { Textarea }\n","/**\n * User Management Utility for Remaleh Protect Admin Dashboard\n * Handles all user-related API calls and operations\n */\n\nimport { apiGet, apiPost, apiPut, apiDelete } from '../lib/api'\n\n// Backend API endpoints for user management\nconst USER_ENDPOINTS = {\n  USERS: '/api/admin/users',\n  USER: (id) => `/api/admin/users/${id}`,\n  UPDATE_STATUS: (id) => `/api/admin/users/${id}/status`,\n  UPDATE_ROLE: (id) => `/api/admin/users/${id}/role`,\n  DELETE_USER: (id) => `/api/admin/users/${id}`,\n  DELETED_USERS: '/api/admin/users/deleted',\n}\n\n// Get all users with optional filtering\nexport const getAllUsers = async (filters = {}) => {\n  try {\n    const queryParams = new URLSearchParams()\n    \n    if (filters.page) queryParams.append('page', filters.page)\n    if (filters.per_page) queryParams.append('per_page', filters.per_page)\n    if (filters.status) queryParams.append('status', filters.status)\n    if (filters.role) queryParams.append('role', filters.role)\n    \n    const url = `${USER_ENDPOINTS.USERS}?${queryParams.toString()}`\n    const response = await apiGet(url)\n    \n    if (response.ok) {\n      const data = await response.json()\n      return {\n        users: data.users || [],\n        pagination: data.pagination || {},\n        success: true\n      }\n    } else {\n      throw new Error(`HTTP error! status: ${response.status}`)\n    }\n  } catch (error) {\n    console.error('Error fetching users:', error)\n    return {\n      users: [],\n      pagination: {},\n      success: false,\n      error: error.message\n    }\n  }\n}\n\n// Get deleted users\nexport const getDeletedUsers = async () => {\n  try {\n    const response = await apiGet(USER_ENDPOINTS.DELETED_USERS)\n    \n    if (response.ok) {\n      const data = await response.json()\n      return {\n        users: data.users || [],\n        success: true\n      }\n    } else {\n      throw new Error(`HTTP error! status: ${response.status}`)\n    }\n  } catch (error) {\n    console.error('Error fetching deleted users:', error)\n    return {\n      users: [],\n      success: false,\n      error: error.message\n    }\n  }\n}\n\n// Get specific user by ID\nexport const getUserById = async (userId) => {\n  try {\n    const response = await apiGet(USER_ENDPOINTS.USER(userId))\n    \n    if (response.ok) {\n      const userData = await response.json()\n      return {\n        user: userData,\n        success: true\n      }\n    } else {\n      throw new Error(`HTTP error! status: ${response.status}`)\n    }\n  } catch (error) {\n    console.error('Error fetching user:', error)\n    return {\n      user: null,\n      success: false,\n      error: error.message\n    }\n  }\n}\n\n// Update user status\nexport const updateUserStatus = async (userId, newStatus) => {\n  try {\n    console.log(' userManager.updateUserStatus called with:', { userId, newStatus })\n    console.log(' API endpoint:', USER_ENDPOINTS.UPDATE_STATUS(userId))\n    \n    const response = await apiPut(USER_ENDPOINTS.UPDATE_STATUS(userId), {\n      status: newStatus\n    })\n    console.log(' API response received:', response)\n    console.log(' Response status:', response.status)\n    console.log(' Response ok:', response.ok)\n    \n    if (response.ok) {\n      const data = await response.json()\n      console.log(' Response data:', data)\n      return {\n        success: true,\n        message: data.message || 'User status updated successfully',\n        user: data.user\n      }\n    } else {\n      console.log(' Response not ok, status:', response.status)\n      const errorData = await response.json()\n      console.log(' Error response body:', errorData)\n      throw new Error(errorData.error || `HTTP error! status: ${response.status}`)\n    }\n  } catch (error) {\n    console.error(' Error in updateUserStatus:', error)\n    return {\n      success: false,\n      error: error.message\n    }\n  }\n}\n\n// Update user role\nexport const updateUserRole = async (userId, newRole) => {\n  try {\n    console.log(' userManager.updateUserRole called with:', { userId, newRole })\n    console.log(' API endpoint:', USER_ENDPOINTS.UPDATE_ROLE(userId))\n    \n    const response = await apiPut(USER_ENDPOINTS.UPDATE_ROLE(userId), {\n      role: newRole\n    })\n    console.log(' API response received:', response)\n    console.log(' Response status:', response.status)\n    console.log(' Response ok:', response.ok)\n    \n    if (response.ok) {\n      const data = await response.json()\n      console.log(' Response data:', data)\n      return {\n        success: true,\n        message: data.message || 'User role updated successfully',\n        user: data.user\n      }\n    } else {\n      console.log(' Response not ok, status:', response.status)\n      const errorData = await response.json()\n      console.log(' Error response body:', errorData)\n      throw new Error(errorData.error || `HTTP error! status: ${response.status}`)\n    }\n  } catch (error) {\n    console.error(' Error in updateUserRole:', error)\n    return {\n      success: false,\n      error: error.message\n    }\n  }\n}\n\n// Update user information (first name, last name, email)\nexport const updateUserInfo = async (userId, userData) => {\n  try {\n    const response = await apiPut(USER_ENDPOINTS.USER(userId), userData)\n    \n    if (response.ok) {\n      const data = await response.json()\n      return {\n        success: true,\n        message: data.message || 'User information updated successfully',\n        user: data.user\n      }\n    } else {\n      const errorData = await response.json()\n      throw new Error(errorData.error || `HTTP error! status: ${response.status}`)\n    }\n  } catch (error) {\n    console.error('Error updating user information:', error)\n    return {\n      success: false,\n      error: error.message\n    }\n  }\n}\n\n// Update user password\nexport const updateUserPassword = async (userId, newPassword) => {\n  try {\n    const response = await apiPut(`${USER_ENDPOINTS.USER(userId)}/password`, {\n      password: newPassword\n    })\n    \n    if (response.ok) {\n      const data = await response.json()\n      return {\n        success: true,\n        message: data.message || 'User password updated successfully'\n      }\n    } else {\n      const errorData = await response.json()\n      throw new Error(errorData.error || `HTTP error! status: ${response.status}`)\n    }\n  } catch (error) {\n    console.error('Error updating user password:', error)\n    return {\n      success: false,\n      error: error.message\n    }\n  }\n}\n\n// Delete user (soft delete)\nexport const deleteUser = async (userId) => {\n  try {\n    const response = await apiDelete(USER_ENDPOINTS.DELETE_USER(userId))\n    \n    if (response.ok) {\n      const data = await response.json()\n      return {\n        success: true,\n        message: data.message || 'User deleted successfully'\n      }\n    } else {\n      const errorData = await response.json()\n      throw new Error(errorData.error || `HTTP error! status: ${response.status}`)\n    }\n  } catch (error) {\n    console.error('Error deleting user:', error)\n    return {\n      success: false,\n      error: error.message\n    }\n  }\n}\n\n// Create new user (if endpoint exists)\nexport const createUser = async (userData) => {\n  try {\n    const response = await apiPost(USER_ENDPOINTS.USERS, userData)\n    \n    if (response.ok) {\n      const data = await response.json()\n      return {\n        success: true,\n        message: data.message || 'User created successfully',\n        user: data.user\n      }\n    } else {\n      const errorData = await response.json()\n      throw new Error(errorData.error || `HTTP error! status: ${response.status}`)\n    }\n  } catch (error) {\n    console.error('Error creating user:', error)\n    return {\n      success: false,\n      error: error.message\n    }\n  }\n}\n\n// Get user statistics\nexport const getUserStats = async () => {\n  try {\n    const response = await apiGet(USER_ENDPOINTS.USERS)\n    \n    if (response.ok) {\n      const data = await response.json()\n      const users = data.users || []\n      \n      const stats = {\n        total: users.length,\n        active: users.filter(u => u.status === 'ACTIVE').length,\n        suspended: users.filter(u => u.status === 'SUSPENDED').length,\n        banned: users.filter(u => u.status === 'BANNED').length,\n        admins: users.filter(u => u.is_admin || u.role === 'ADMIN').length,\n        moderators: users.filter(u => u.role === 'MODERATOR').length,\n        regular: users.filter(u => u.role === 'USER').length\n      }\n      \n      return {\n        stats,\n        success: true\n      }\n    } else {\n      throw new Error(`HTTP error! status: ${response.status}`)\n    }\n  } catch (error) {\n    console.error('Error fetching user stats:', error)\n    return {\n      stats: {\n        total: 0,\n        active: 0,\n        suspended: 0,\n        banned: 0,\n        admins: 0,\n        moderators: 0,\n        regular: 0\n      },\n      success: false,\n      error: error.message\n    }\n  }\n}\n\n// Restore deleted user\nexport const restoreUser = async (userId) => {\n  try {\n    console.log(' userManager.restoreUser called with:', { userId })\n    console.log(' API endpoint:', USER_ENDPOINTS.USER(userId) + '/restore')\n    \n    const response = await apiPut(`${USER_ENDPOINTS.USER(userId)}/restore`, {})\n    console.log(' API response received:', response)\n    console.log(' Response status:', response.status)\n    console.log(' Response ok:', response.ok)\n    \n    if (response.ok) {\n      const data = await response.json()\n      console.log(' Response data:', data)\n      return {\n        success: true,\n        message: data.message || 'User restored successfully',\n        user: data.user\n      }\n    } else {\n      console.log(' Response not ok, status:', response.status)\n      const errorData = await response.json()\n      console.log(' Error response body:', errorData)\n      throw new Error(errorData.error || `HTTP error! status: ${response.status}`)\n    }\n  } catch (error) {\n    console.error(' Error in restoreUser:', error)\n    return {\n      success: false,\n      error: error.message\n    }\n  }\n}\n\n// Search users\nexport const searchUsers = async (searchTerm, filters = {}) => {\n  try {\n    // For now, we'll filter on the frontend since the backend doesn't have search\n    // In the future, this could be enhanced with backend search\n    const allUsers = await getAllUsers(filters)\n    \n    if (!allUsers.success) {\n      return allUsers\n    }\n    \n    const searchLower = searchTerm.toLowerCase()\n    const filteredUsers = allUsers.users.filter(user => \n      user.email?.toLowerCase().includes(searchLower) ||\n      user.first_name?.toLowerCase().includes(searchLower) ||\n      user.last_name?.toLowerCase().includes(searchLower) ||\n      user.role?.toLowerCase().includes(searchLower)\n    )\n    \n    return {\n      users: filteredUsers,\n      pagination: allUsers.pagination,\n      success: true\n    }\n  } catch (error) {\n    console.error('Error searching users:', error)\n    return {\n      users: [],\n      pagination: {},\n      success: false,\n      error: error.message\n    }\n  }\n}\n","import React, { useState, useEffect } from 'react';\nimport { api } from '../../lib/api';\nimport MobileModal from '../MobileModal';\nimport { API } from '../../lib/api';\n\nconst CommunityReports = ({ initialFilters }) => {\n  const [reports, setReports] = useState([]);\n  const [pagination, setPagination] = useState({});\n  const [isLoading, setIsLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [selectedReports, setSelectedReports] = useState([]);\n  const [showReportModal, setShowReportModal] = useState(false);\n  const [selectedReport, setSelectedReport] = useState(null);\n  const [showBulkModal, setShowBulkModal] = useState(false);\n  const [bulkAction, setBulkAction] = useState('');\n\n  // Filters\n  const [filters, setFilters] = useState({\n    page: 1,\n    per_page: 20,\n    status: '',\n    urgency: '',\n    threat_type: '',\n    verified: ''\n  });\n\n  // Apply initial filters on mount\n  useEffect(() => {\n    if (initialFilters && Object.keys(initialFilters).length > 0) {\n      setFilters(prev => ({ ...prev, ...initialFilters, page: 1 }));\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  useEffect(() => {\n    fetchReports();\n  }, [filters]);\n\n  const fetchReports = async () => {\n    try {\n      setIsLoading(true);\n      const params = new URLSearchParams();\n      Object.entries(filters).forEach(([key, value]) => {\n        if (value) params.append(key, value);\n      });\n\n      const response = await api.get(`/api/admin/reports?${params}`);\n      const data = await response.json();\n      setReports(data.reports || []);\n      setPagination(data.pagination || {});\n      setError(null);\n    } catch (err) {\n      setError('Failed to load community reports');\n      console.error('Reports error:', err);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const handleReportAction = async (reportId, action) => {\n    try {\n      let response;\n      if (action === 'verify') {\n        // Use community verify endpoint to set verified=true and status=VERIFIED\n        response = await api.request({\n          method: 'POST',\n          url: `/api/community/reports/${reportId}/verify`\n        });\n      } else {\n        const actionMap = {\n          reject: 'REJECTED',\n          escalate: 'FLAGGED',\n          approve: 'APPROVED'\n        };\n        const mapped = actionMap[action] || actionMap['approve'];\n        response = await api.request({\n          method: 'PUT',\n          url: `/api/admin/reports/${reportId}/moderate`,\n          data: { action: mapped }\n        });\n      }\n      if (!response.ok) {\n        const errData = await response.json().catch(() => ({}));\n        throw new Error(errData.error || `Failed to ${action} report`);\n      }\n\n      // Refresh reports list\n      fetchReports();\n      setSelectedReports([]);\n    } catch (err) {\n      console.error('Report action error:', err);\n      alert(`Failed to ${action} report: ${err.response?.data?.error || err.message}`);\n    }\n  };\n\n  const handleBulkAction = async () => {\n    if (!bulkAction || selectedReports.length === 0) return;\n\n    try {\n      if (bulkAction === 'verify') {\n        await Promise.all(selectedReports.map(async (id) => {\n          const response = await api.request({ method: 'POST', url: `/api/community/reports/${id}/verify` });\n          if (!response.ok) {\n            const errData = await response.json().catch(() => ({}));\n            throw new Error(errData.error || `Failed to verify report ${id}`);\n          }\n        }));\n      } else {\n        const actionMap = { reject: 'REJECTED', escalate: 'FLAGGED', approve: 'APPROVED' };\n        const mapped = actionMap[bulkAction] || actionMap['approve'];\n        await Promise.all(selectedReports.map(async (id) => {\n          const response = await api.request({\n            method: 'PUT',\n            url: `/api/admin/reports/${id}/moderate`,\n            data: { action: mapped }\n          });\n          if (!response.ok) {\n            const errData = await response.json().catch(() => ({}));\n            throw new Error(errData.error || `Failed to ${bulkAction} report ${id}`);\n          }\n        }));\n      }\n\n      // Refresh reports list\n      fetchReports();\n      setSelectedReports([]);\n      setShowBulkModal(false);\n      setBulkAction('');\n    } catch (err) {\n      console.error('Bulk action error:', err);\n      alert(`Failed to perform bulk action: ${err.response?.data?.error || err.message}`);\n    }\n  };\n\n  const handleReportSelect = (reportId) => {\n    setSelectedReports(prev => \n      prev.includes(reportId) \n        ? prev.filter(id => id !== reportId)\n        : [...prev, reportId]\n    );\n  };\n\n  const handleSelectAll = () => {\n    if (selectedReports.length === reports.length) {\n      setSelectedReports([]);\n    } else {\n      setSelectedReports(reports.map(report => report.id));\n    }\n  };\n\n  const updateFilters = (newFilters) => {\n    setFilters(prev => ({ ...prev, ...newFilters, page: 1 }));\n  };\n\n  const ReportRow = ({ report }) => (\n    <div className=\"bg-white border rounded-lg p-4 mb-3\">\n      <div className=\"flex items-center justify-between\">\n        <div className=\"flex items-center space-x-3\">\n          <input\n            type=\"checkbox\"\n            checked={selectedReports.includes(report.id)}\n            onChange={() => handleReportSelect(report.id)}\n            className=\"rounded border-gray-300 text-blue-600 focus:ring-blue-500\"\n          />\n          <div className=\"flex-1\">\n            <div className=\"flex items-center space-x-2 mb-2\">\n              <span className={`px-2 py-1 text-xs rounded-full ${\n                report.urgency === 'HIGH' ? 'bg-red-100 text-red-800' :\n                report.urgency === 'MEDIUM' ? 'bg-yellow-100 text-yellow-800' :\n                'bg-green-100 text-green-800'\n              }`}>\n                {report.urgency}\n              </span>\n              <span className={`px-2 py-1 text-xs rounded-full ${\n                report.status === 'PENDING' ? 'bg-yellow-100 text-yellow-800' :\n                report.status === 'VERIFIED' ? 'bg-green-100 text-green-800' :\n                report.status === 'REJECTED' ? 'bg-red-100 text-red-800' :\n                'bg-gray-100 text-gray-800'\n              }`}>\n                {report.status}\n              </span>\n              {report.verified && (\n                <span className=\"px-2 py-1 text-xs rounded-full bg-blue-100 text-blue-800\">\n                   Verified\n                </span>\n              )}\n            </div>\n            <h4 className=\"font-medium text-gray-900\">{report.threat_type}</h4>\n            <p className=\"text-sm text-gray-600 mt-1 line-clamp-2\">{report.description}</p>\n            <div className=\"flex items-center space-x-4 mt-2 text-xs text-gray-500\">\n              <span>Location: {report.location || 'N/A'}</span>\n              <span>Votes: +{report.votes_up} / -{report.votes_down}</span>\n              <span>Created: {new Date(report.created_at).toLocaleDateString()}</span>\n            </div>\n          </div>\n        </div>\n        \n        <div className=\"flex items-center space-x-2\">\n          <button\n            onClick={() => {\n              setSelectedReport(report);\n              setShowReportModal(true);\n            }}\n            className=\"text-blue-600 hover:text-blue-800 text-sm font-medium\"\n          >\n            View\n          </button>\n          <div className=\"relative\">\n            <select\n              onChange={(e) => handleReportAction(report.id, e.target.value)}\n              className=\"text-sm border rounded px-2 py-1\"\n              defaultValue=\"\"\n            >\n              <option value=\"\" disabled>Actions</option>\n              {report.status === 'PENDING' && (\n                <>\n                  <option value=\"approve\">Approve</option>\n                  <option value=\"verify\">Verify</option>\n                  <option value=\"reject\">Reject</option>\n                  <option value=\"escalate\">Flag</option>\n                </>\n              )}\n              {report.status === 'APPROVED' && (\n                <>\n                  <option value=\"verify\">Verify</option>\n                </>\n              )}\n            </select>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n\n  const ReportDetailModal = () => (\n    <MobileModal\n      isOpen={showReportModal}\n      onClose={() => setShowReportModal(false)}\n      title=\"Report Details\"\n      hideOnDesktop={false}\n    >\n      {selectedReport && (\n        <div className=\"space-y-4\">\n          <div className=\"grid grid-cols-2 gap-4\">\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700\">Threat Type</label>\n              <p className=\"text-gray-900\">{selectedReport.threat_type}</p>\n            </div>\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700\">Urgency</label>\n              <p className=\"text-gray-900\">{selectedReport.urgency}</p>\n            </div>\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700\">Status</label>\n              <p className=\"text-gray-900\">{selectedReport.status}</p>\n            </div>\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700\">Verified</label>\n              <p className=\"text-gray-900\">{selectedReport.verified ? 'Yes' : 'No'}</p>\n            </div>\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700\">Location</label>\n              <p className=\"text-gray-900\">{selectedReport.location || 'N/A'}</p>\n            </div>\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700\">Created</label>\n              <p className=\"text-gray-900\">\n                {new Date(selectedReport.created_at).toLocaleString()}\n              </p>\n            </div>\n          </div>\n          \n          <div>\n            <label className=\"block text-sm font-medium text-gray-700\">Description</label>\n            <p className=\"text-gray-900\">{selectedReport.description}</p>\n          </div>\n\n          {selectedReport.media && selectedReport.media.length > 0 && (\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">Attachments</label>\n              <div className=\"grid grid-cols-3 gap-2\">\n                {selectedReport.media.map((m, idx) => {\n                  const url = m.media_url?.startsWith('http') ? m.media_url : `${API}${m.media_url}`;\n                  return (\n                    <a\n                      key={m.id || idx}\n                      href={url}\n                      target=\"_blank\"\n                      rel=\"noreferrer\"\n                      className=\"block w-full h-24 bg-gray-100 rounded overflow-hidden\"\n                    >\n                      <img\n                        src={url}\n                        alt=\"attachment\"\n                        className=\"w-full h-full object-cover\"\n                        onError={(e) => { e.currentTarget.style.display = 'none'; }}\n                      />\n                    </a>\n                  );\n                })}\n              </div>\n            </div>\n          )}\n          \n          <div className=\"grid grid-cols-2 gap-4\">\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700\">Up Votes</label>\n              <p className=\"text-gray-900\">{selectedReport.votes_up}</p>\n            </div>\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700\">Down Votes</label>\n              <p className=\"text-gray-900\">{selectedReport.votes_down}</p>\n            </div>\n          </div>\n          \n          <div className=\"pt-4 border-t\">\n            <h4 className=\"font-medium text-gray-900 mb-2\">Quick Actions</h4>\n            <div className=\"flex space-x-2\">\n              {selectedReport.status === 'PENDING' && (\n                <>\n                  <button\n                    onClick={() => {\n                      handleReportAction(selectedReport.id, 'approve');\n                      setShowReportModal(false);\n                    }}\n                    className=\"bg-green-600 text-white px-3 py-2 rounded text-sm hover:bg-green-700\"\n                  >\n                    Approve\n                  </button>\n                  <button\n                    onClick={() => {\n                      handleReportAction(selectedReport.id, 'verify');\n                      setShowReportModal(false);\n                    }}\n                    className=\"bg-blue-600 text-white px-3 py-2 rounded text-sm hover:bg-blue-700\"\n                  >\n                    Verify\n                  </button>\n                  <button\n                    onClick={() => {\n                      handleReportAction(selectedReport.id, 'reject');\n                      setShowReportModal(false);\n                    }}\n                    className=\"bg-red-600 text-white px-3 py-2 rounded text-sm hover:bg-red-700\"\n                  >\n                    Reject\n                  </button>\n                  <button\n                    onClick={() => {\n                      handleReportAction(selectedReport.id, 'escalate');\n                      setShowReportModal(false);\n                    }}\n                    className=\"bg-yellow-600 text-white px-3 py-2 rounded text-sm hover:bg-yellow-700\"\n                  >\n                    Escalate\n                  </button>\n                </>\n              )}\n              {selectedReport.status === 'APPROVED' && (\n                <button\n                  onClick={() => {\n                    handleReportAction(selectedReport.id, 'verify');\n                    setShowReportModal(false);\n                  }}\n                  className=\"bg-blue-600 text-white px-3 py-2 rounded text-sm hover:bg-blue-700\"\n                >\n                  Verify\n                </button>\n              )}\n              <button\n                onClick={async () => {\n                  if (!confirm('Delete this report?')) return;\n                  try {\n                    const response = await api.request({ method: 'DELETE', url: `/api/admin/reports/${selectedReport.id}` });\n                    if (!response.ok) throw new Error('Delete failed');\n                    setShowReportModal(false);\n                    fetchReports();\n                  } catch (e) {\n                    alert('Failed to delete report');\n                  }\n                }}\n                className=\"bg-gray-600 text-white px-3 py-2 rounded text-sm hover:bg-gray-700\"\n              >\n                Delete\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n    </MobileModal>\n  );\n\n  const BulkActionModal = () => (\n    <MobileModal\n      isOpen={showBulkModal}\n      onClose={() => setShowBulkModal(false)}\n      title=\"Bulk Actions\"\n    >\n      <div className=\"space-y-4\">\n        <div>\n          <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n            Action for {selectedReports.length} selected reports\n          </label>\n          <select\n            value={bulkAction}\n            onChange={(e) => setBulkAction(e.target.value)}\n            className=\"w-full border rounded-lg px-3 py-2\"\n          >\n            <option value=\"\">Select action...</option>\n            <option value=\"verify\">Approve</option>\n            <option value=\"reject\">Reject</option>\n            <option value=\"escalate\">Flag</option>\n          </select>\n        </div>\n        \n        <div className=\"pt-4 border-t\">\n          <div className=\"flex space-x-2\">\n            <button\n              onClick={handleBulkAction}\n              disabled={!bulkAction}\n              className=\"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 disabled:bg-gray-400\"\n            >\n              Apply Action\n            </button>\n            <button\n              onClick={() => setShowBulkModal(false)}\n              className=\"bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700\"\n            >\n              Cancel\n            </button>\n          </div>\n        </div>\n      </div>\n    </MobileModal>\n  );\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Header */}\n      <div className=\"bg-white rounded-lg shadow p-6\">\n        <div className=\"flex flex-col sm:flex-row sm:items-center sm:justify-between\">\n          <div>\n            <h1 className=\"text-2xl font-bold text-gray-900\">Community Reports</h1>\n            <p className=\"text-gray-600\">Manage and moderate community threat reports</p>\n          </div>\n          <div className=\"mt-4 sm:mt-0 flex space-x-2\">\n            {selectedReports.length > 0 && (\n              <button\n                onClick={() => setShowBulkModal(true)}\n                className=\"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700\"\n              >\n                Bulk Actions ({selectedReports.length})\n              </button>\n            )}\n            <button\n              onClick={fetchReports}\n              className=\"bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700\"\n            >\n              Refresh\n            </button>\n          </div>\n        </div>\n      </div>\n\n      {/* Filters */}\n      <div className=\"bg-white rounded-lg shadow p-6\">\n        <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">Filters</h3>\n        <div className=\"grid grid-cols-1 md:grid-cols-5 gap-4\">\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-1\">Status</label>\n            <select\n              value={filters.status}\n              onChange={(e) => updateFilters({ status: e.target.value })}\n              className=\"w-full border rounded-lg px-3 py-2\"\n            >\n              <option value=\"\">All Statuses</option>\n              <option value=\"PENDING\">Pending</option>\n              <option value=\"VERIFIED\">Verified</option>\n              <option value=\"REJECTED\">Rejected</option>\n              <option value=\"ESCALATED\">Escalated</option>\n            </select>\n          </div>\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-1\">Urgency</label>\n            <select\n              value={filters.urgency}\n              onChange={(e) => updateFilters({ urgency: e.target.value })}\n              className=\"w-full border rounded-lg px-3 py-2\"\n            >\n              <option value=\"\">All Urgencies</option>\n              <option value=\"HIGH\">High</option>\n              <option value=\"MEDIUM\">Medium</option>\n              <option value=\"LOW\">Low</option>\n            </select>\n          </div>\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-1\">Threat Type</label>\n            <select\n              value={filters.threat_type}\n              onChange={(e) => updateFilters({ threat_type: e.target.value })}\n              className=\"w-full border rounded-lg px-3 py-2\"\n            >\n              <option value=\"\">All Types</option>\n              <option value=\"PHISHING\">Phishing</option>\n              <option value=\"MALWARE\">Malware</option>\n              <option value=\"SCAM\">Scam</option>\n              <option value=\"SOCIAL_ENGINEERING\">Social Engineering</option>\n              <option value=\"OTHER\">Other</option>\n            </select>\n          </div>\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-1\">Verified</label>\n            <select\n              value={filters.verified}\n              onChange={(e) => updateFilters({ verified: e.target.value })}\n              className=\"w-full border rounded-lg px-3 py-2\"\n            >\n              <option value=\"\">All</option>\n              <option value=\"true\">Verified Only</option>\n              <option value=\"false\">Unverified Only</option>\n            </select>\n          </div>\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-1\">Per Page</label>\n            <select\n              value={filters.per_page}\n              onChange={(e) => updateFilters({ per_page: parseInt(e.target.value) })}\n              className=\"w-full border rounded-lg px-3 py-2\"\n            >\n              <option value={10}>10</option>\n              <option value={20}>20</option>\n              <option value={50}>50</option>\n            </select>\n          </div>\n        </div>\n      </div>\n\n      {/* Reports List */}\n      <div className=\"bg-white rounded-lg shadow\">\n        <div className=\"p-6 border-b\">\n          <div className=\"flex items-center justify-between\">\n            <h3 className=\"text-lg font-semibold text-gray-900\">\n              Reports ({pagination.total || 0})\n            </h3>\n            <div className=\"flex items-center space-x-2\">\n              <input\n                type=\"checkbox\"\n                checked={selectedReports.length === reports.length && reports.length > 0}\n                onChange={handleSelectAll}\n                className=\"rounded border-gray-300 text-blue-600 focus:ring-blue-500\"\n              />\n              <span className=\"text-sm text-gray-600\">Select All</span>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"p-6\">\n          {isLoading ? (\n            <div className=\"flex items-center justify-center py-12\">\n              <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600\"></div>\n            </div>\n          ) : error ? (\n            <div className=\"text-center py-12\">\n              <div className=\"text-red-500 mb-4\"> {error}</div>\n              <button\n                onClick={fetchReports}\n                className=\"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700\"\n              >\n                Retry\n              </button>\n            </div>\n          ) : reports.length === 0 ? (\n            <div className=\"text-center py-12 text-gray-500\">\n              No reports found matching your criteria\n            </div>\n          ) : (\n            <div>\n              {reports.map(report => (\n                <ReportRow key={report.id} report={report} />\n              ))}\n            </div>\n          )}\n        </div>\n      </div>\n\n      {/* Pagination */}\n      {pagination.pages > 1 && (\n        <div className=\"bg-white rounded-lg shadow p-6\">\n          <div className=\"flex items-center justify-between\">\n            <div className=\"text-sm text-gray-700\">\n              Showing {((pagination.page - 1) * pagination.per_page) + 1} to{' '}\n              {Math.min(pagination.page * pagination.per_page, pagination.total)} of{' '}\n              {pagination.total} results\n            </div>\n            <div className=\"flex space-x-2\">\n              <button\n                onClick={() => updateFilters({ page: pagination.page - 1 })}\n                disabled={pagination.page <= 1}\n                className=\"px-3 py-2 border rounded-lg disabled:bg-gray-100 disabled:text-gray-400\"\n              >\n                Previous\n              </button>\n              <span className=\"px-3 py-2 text-gray-700\">\n                Page {pagination.page} of {pagination.pages}\n              </span>\n              <button\n                onClick={() => updateFilters({ page: pagination.page + 1 })}\n                disabled={pagination.page >= pagination.pages}\n                className=\"px-3 py-2 border rounded-lg disabled:bg-gray-100 disabled:text-gray-400\"\n              >\n                Next\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Modals */}\n      <ReportDetailModal />\n      <BulkActionModal />\n    </div>\n  );\n};\n\nexport default CommunityReports;\n","import React, { useState } from 'react'\nimport { useAuth } from '../../hooks/useAuth'\nimport { \n  BookOpen, \n  Users, \n  MessageSquare, \n  Settings, \n  Shield,\n  Plus,\n  Edit3,\n  Trash2,\n  Eye,\n  BarChart3,\n  RefreshCw\n} from 'lucide-react'\nimport { MobileCard } from '../ui/mobile-card'\nimport { MobileButton } from '../ui/mobile-button'\nimport { MobileInput } from '../ui/mobile-input'\nimport { Textarea } from '../ui/textarea'\nimport { createModule, getAllModules, updateModule, deleteModule, addLesson, updateLesson, deleteLesson, uploadLessonMedia } from '../../utils/contentManager'\nimport { getAllUsers, updateUserStatus, updateUserRole, deleteUser, getUserStats, createUser, updateUserInfo, updateUserPassword, restoreUser, getDeletedUsers } from '../../utils/userManager'\nimport CommunityReports from './CommunityReports'\nimport { apiGet } from '../../lib/api'\n\nexport default function AdminDashboard({ setActiveTab }) {\n  const { user, isAuthenticated, isLoading: authLoading } = useAuth()\n  const [activeSection, setActiveSection] = useState('overview')\n  const [showAddModule, setShowAddModule] = useState(false)\n  const [showAddUser, setShowAddUser] = useState(false)\n  const [editingModule, setEditingModule] = useState(null)\n  const [editingUser, setEditingUser] = useState(null)\n  const [actionLoading, setActionLoading] = useState(false)\n  const [loadingUsers, setLoadingUsers] = useState(false)\n  \n  // Form state for new module\n  const [newModuleData, setNewModuleData] = useState({\n    title: '',\n    description: '',\n    difficulty: 'BEGINNER',\n    estimated_time: 10\n  })\n  \n  // Form state for new user\n  const [newUserData, setNewUserData] = useState({\n    first_name: '',\n    last_name: '',\n    email: '',\n    role: 'USER',\n    password: ''\n  })\n  \n  // Real data state\n  const [modules, setModules] = useState([])\n  const [users, setUsers] = useState([])\n  const [deletedUsers, setDeletedUsers] = useState([])\n  const [userStats, setUserStats] = useState({\n    total: 0,\n    active: 0,\n    suspended: 0,\n    banned: 0,\n    admins: 0,\n    moderators: 0,\n    regular: 0\n  })\n  \n  // Error state\n  const [error, setError] = useState(null)\n  const [dbConnectionStatus, setDbConnectionStatus] = useState('checking')\n  \n  // Admin stats (includes reports totals)\n  const [adminStats, setAdminStats] = useState(null)\n  \n  // Lesson management state\n  const [selectedModuleForLessons, setSelectedModuleForLessons] = useState(null)\n  const [newLessonData, setNewLessonData] = useState({\n    title: '',\n    type: 'info',\n    content: '',\n    contentType: 'info',\n    contentStyle: 'default',\n    duration: 5,\n    media: []\n  })\n  const [editingLesson, setEditingLesson] = useState(null)\n  \n  // Lesson operation loading states\n  const [lessonActionLoading, setLessonActionLoading] = useState(false)\n  const [lessonSuccessMessage, setLessonSuccessMessage] = useState('')\n  \n  // Force re-render mechanism\n  const [forceUpdate, setForceUpdate] = useState(0)\n  \n  // Auto-hide success messages\n  React.useEffect(() => {\n    if (lessonSuccessMessage) {\n      const timer = setTimeout(() => {\n        setLessonSuccessMessage('')\n      }, 3000) // Hide after 3 seconds\n      \n      return () => clearTimeout(timer)\n    }\n  }, [lessonSuccessMessage])\n  \n  // Debug: Monitor selectedModuleForLessons state changes\n  React.useEffect(() => {\n    console.log(' selectedModuleForLessons state changed:', selectedModuleForLessons)\n    if (selectedModuleForLessons) {\n      console.log(' New selectedModuleForLessons lessons:', selectedModuleForLessons.content?.lessons)\n      console.log(' New selectedModuleForLessons lesson count:', selectedModuleForLessons.content?.lessons?.length || 0)\n    }\n  }, [selectedModuleForLessons])\n  \n  // Load modules from backend\n  const loadModules = async () => {\n    try {\n      setError(null)\n      const modulesData = await getAllModules()\n      setModules(modulesData)\n    } catch (error) {\n      console.error('Failed to load modules:', error)\n      setError(`Failed to load modules: ${error.message}`)\n      // Check if it's a connection issue\n      if (error.message.includes('Failed to fetch') || error.message.includes('NetworkError')) {\n        setDbConnectionStatus('disconnected')\n      }\n    }\n  }\n  \n  // Load users from backend\n  const loadUsers = async () => {\n    try {\n      setLoadingUsers(true)\n      setError(null)\n      console.log(' loadUsers called')\n      \n      const usersData = await getAllUsers()\n      console.log(' getAllUsers result:', usersData)\n      \n      if (usersData.success) {\n        console.log(' Setting users state with:', usersData.users)\n        setUsers(usersData.users)\n      } else {\n        console.error(' Failed to load users:', usersData.error)\n        setError(`Failed to load users: ${usersData.error}`)\n      }\n    } catch (error) {\n      console.error(' Error in loadUsers:', error)\n      setError(`Failed to load users: ${error.message}`)\n      // Check if it's a connection issue\n      if (error.message.includes('Failed to fetch') || error.message.includes('NetworkError')) {\n        setDbConnectionStatus('disconnected')\n      }\n    } finally {\n      setLoadingUsers(false)\n    }\n  }\n\n  // Load deleted users from backend\n  const loadDeletedUsers = async () => {\n    try {\n      console.log(' loadDeletedUsers called')\n      \n      const deletedUsersData = await getDeletedUsers()\n      console.log(' getDeletedUsers result:', deletedUsersData)\n      \n      if (deletedUsersData.success) {\n        console.log(' Setting deletedUsers state with:', deletedUsersData.users)\n        setDeletedUsers(deletedUsersData.users)\n      } else {\n        console.error(' Failed to load deleted users:', deletedUsersData.error)\n      }\n    } catch (error) {\n      console.error(' Error in loadDeletedUsers:', error)\n    }\n  }\n  \n  // Load user statistics\n  const loadUserStats = async () => {\n    try {\n      setError(null)\n      const statsData = await getUserStats()\n      if (statsData.success) {\n        setUserStats(statsData.stats)\n      } else {\n        console.error('Failed to load user stats:', statsData.error)\n        setError(`Failed to load user stats: ${statsData.error}`)\n      }\n    } catch (error) {\n      console.error('Failed to load user stats:', error)\n      setError(`Failed to load user stats: ${error.message}`)\n      // Check if it's a connection issue\n      if (error.message.includes('Failed to fetch') || error.message.includes('NetworkError')) {\n        setDbConnectionStatus('disconnected')\n      }\n    }\n  }\n  \n  // Handle module creation\n  const handleCreateModule = async () => {\n    if (!newModuleData.title.trim() || !newModuleData.description.trim()) {\n      alert('Please fill in all required fields')\n      return\n    }\n    \n    try {\n      setActionLoading(true)\n      \n      // Prepare module data with content structure\n      const moduleData = {\n        ...newModuleData,\n        content: {\n          lessons: []\n        }\n      }\n      \n      await createModule(moduleData)\n      \n      // Reset form and close modal\n      setNewModuleData({\n        title: '',\n        description: '',\n        difficulty: 'BEGINNER',\n        estimated_time: 10\n      })\n      setShowAddModule(false)\n      \n      // Reload modules\n      await loadModules()\n      \n      alert('Module created successfully!')\n    } catch (error) {\n      console.error('Failed to create module:', error)\n      alert(`Failed to create module: ${error.message}`)\n    } finally {\n      setActionLoading(false)\n    }\n  }\n\n  // Handle module deletion\n  const handleDeleteModule = async (moduleId) => {\n    if (!confirm('Are you sure you want to delete this module? This will also delete all lessons within it. This action cannot be undone.')) {\n      return\n    }\n    \n    try {\n      setActionLoading(true)\n      \n      await deleteModule(moduleId)\n      \n      alert('Module deleted successfully!')\n      \n      // Reload modules\n      await loadModules()\n      \n    } catch (error) {\n      console.error('Failed to delete module:', error)\n      alert(`Failed to delete module: ${error.message}`)\n    } finally {\n      setActionLoading(false)\n    }\n  }\n  \n  // Handle user status update\n  const handleUpdateUserStatus = async (userId, newStatus) => {\n    try {\n      setActionLoading(true)\n      console.log(' Updating user status:', { userId, newStatus })\n      \n      const result = await updateUserStatus(userId, newStatus)\n      console.log(' updateUserStatus result:', result)\n      \n      if (result.success) {\n        console.log(' User status updated successfully')\n        alert('User status updated successfully!')\n        await loadUsers() // Reload users\n        await loadUserStats() // Reload stats\n      } else {\n        console.log(' User status update failed:', result.error)\n        alert(`Failed to update user status: ${result.error}`)\n      }\n    } catch (error) {\n      console.error(' Error updating user status:', error)\n      alert(`Failed to update user status: ${error.message}`)\n    } finally {\n      setActionLoading(false)\n    }\n  }\n  \n  // Handle user role update\n  const handleUpdateUserRole = async (userId, newRole) => {\n    try {\n      setActionLoading(true)\n      console.log(' Updating user role:', { userId, newRole })\n      \n      const result = await updateUserRole(userId, newRole)\n      console.log(' updateUserRole result:', result)\n      \n      if (result.success) {\n        console.log(' User role updated successfully')\n        alert('User role updated successfully!')\n        await loadUsers() // Reload users\n        await loadUserStats() // Reload stats\n      } else {\n        console.log(' User role update failed:', result.error)\n        alert(`Failed to update user role: ${result.error}`)\n      }\n    } catch (error) {\n      console.error(' Error updating user role:', error)\n      alert(`Failed to update user role: ${error.message}`)\n    } finally {\n      setActionLoading(false)\n    }\n  }\n  \n  // Handle user deletion\n  const handleDeleteUser = async (userId) => {\n    if (!confirm('Are you sure you want to delete this user? This action cannot be undone.')) {\n      return\n    }\n    \n    try {\n      setActionLoading(true)\n      const result = await deleteUser(userId)\n      \n      if (result.success) {\n        alert('User deleted successfully!')\n        await loadUsers() // Reload users\n        await loadDeletedUsers() // Reload deleted users\n        await loadUserStats() // Reload stats\n      } else {\n        alert(`Failed to delete user: ${result.error}`)\n      }\n    } catch (error) {\n      console.error('Failed to delete user:', error)\n      alert(`Failed to delete user: ${error.message}`)\n    } finally {\n      setActionLoading(false)\n    }\n  }\n\n  // Handle user restoration\n  const handleRestoreUser = async (userId) => {\n    if (!confirm('Are you sure you want to restore this user? They will be able to access the system again.')) {\n      return\n    }\n    \n    try {\n      setActionLoading(true)\n      const result = await restoreUser(userId)\n      \n      if (result.success) {\n        alert('User restored successfully!')\n        await loadUsers() // Reload users\n        await loadDeletedUsers() // Reload deleted users\n        await loadUserStats() // Reload stats\n      } else {\n        alert(`Failed to restore user: ${result.error}`)\n      }\n    } catch (error) {\n      console.error('Failed to restore user:', error)\n      alert(`Failed to restore user: ${error.message}`)\n    } finally {\n      setActionLoading(false)\n    }\n  }\n  \n  // Handle user creation\n  const handleCreateUser = async () => {\n    if (!newUserData.first_name.trim() || !newUserData.last_name.trim() || !newUserData.email.trim() || !newUserData.password.trim()) {\n      alert('Please fill in all required fields')\n      return\n    }\n    \n    try {\n      setActionLoading(true)\n      setError(null)\n      \n      const result = await createUser(newUserData)\n      \n      if (result.success) {\n        alert('User created successfully!')\n        \n        // Reset form and close modal\n        setNewUserData({\n          first_name: '',\n          last_name: '',\n          email: '',\n          role: 'USER',\n          password: ''\n        })\n        setShowAddUser(false)\n        \n        // Reload users and stats\n        await loadUsers()\n        await loadUserStats()\n      } else {\n        setError(result.error || 'Failed to create user')\n      }\n    } catch (error) {\n      console.error('Failed to create user:', error)\n      setError(error.message || 'Failed to create user')\n    } finally {\n      setActionLoading(false)\n    }\n  }\n  \n  // Handle user update\n  const handleUpdateUser = async (userId) => {\n    try {\n      setActionLoading(true)\n      setError(null)\n      \n      // Find the user being edited\n      const userToUpdate = editingUser\n      \n      // Update user information\n      const updatePromises = []\n      \n      // Update basic user info if changed\n      const basicInfoChanged = \n        userToUpdate.first_name !== users.find(u => u.id === userId)?.first_name ||\n        userToUpdate.last_name !== users.find(u => u.id === userId)?.last_name ||\n        userToUpdate.email !== users.find(u => u.id === userId)?.email\n      \n      if (basicInfoChanged) {\n        const basicInfo = {\n          first_name: userToUpdate.first_name,\n          last_name: userToUpdate.last_name,\n          email: userToUpdate.email\n        }\n        updatePromises.push(updateUserInfo(userId, basicInfo))\n      }\n      \n      // Update role if changed\n      if (userToUpdate.role && userToUpdate.role !== users.find(u => u.id === userId)?.role) {\n        updatePromises.push(updateUserRole(userId, userToUpdate.role))\n      }\n      \n      // Update status if changed\n      if (userToUpdate.status && userToUpdate.status !== users.find(u => u.id === userId)?.status) {\n        updatePromises.push(updateUserStatus(userId, userToUpdate.status))\n      }\n      \n      // Update password if changed\n      if (userToUpdate.newPassword) {\n        updatePromises.push(updateUserPassword(userId, userToUpdate.newPassword))\n      }\n      \n      // Execute all updates\n      if (updatePromises.length > 0) {\n        const results = await Promise.all(updatePromises)\n        const hasErrors = results.some(result => !result.success)\n        \n        if (hasErrors) {\n          const errors = results.filter(r => !r.success).map(r => r.error).join(', ')\n          setError(`Failed to update user: ${errors}`)\n          return\n        }\n      }\n      \n      alert('User updated successfully!')\n      \n      // Close modal and reload data\n      setEditingUser(null)\n      await loadUsers()\n      await loadUserStats()\n      \n    } catch (error) {\n      console.error('Failed to update user:', error)\n      setError(error.message || 'Failed to update user')\n    } finally {\n      setActionLoading(false)\n    }\n  }\n  \n  // Handle module update\n  const handleUpdateModule = async (moduleId) => {\n    try {\n      console.log(' handleUpdateModule called with moduleId:', moduleId)\n      console.log(' editingModule state:', editingModule)\n      \n      setActionLoading(true)\n      setError(null)\n      \n      // Find the module being edited\n      const moduleToUpdate = editingModule\n      console.log(' moduleToUpdate:', moduleToUpdate)\n      \n      // Prepare module data\n      const moduleData = {\n        title: moduleToUpdate.title,\n        description: moduleToUpdate.description,\n        difficulty: moduleToUpdate.difficulty,\n        estimated_time: moduleToUpdate.estimated_time\n      }\n      console.log(' moduleData to send:', moduleData)\n      \n      // Update module using contentManager\n      console.log(' Calling updateModule from contentManager...')\n      await updateModule(moduleId, moduleData)\n      \n      alert('Module updated successfully!')\n      \n      // Close modal and reload data\n      setEditingModule(null)\n      await loadModules()\n      \n    } catch (error) {\n      console.error(' Failed to update module:', error)\n      setError(error.message || 'Failed to update module')\n    } finally {\n      setActionLoading(false)\n    }\n  }\n\n  // Lesson management functions\n  const handleAddLesson = async (moduleId) => {\n    try {\n      setLessonActionLoading(true)\n      setLessonSuccessMessage('')\n      console.log(' Adding lesson with data:', { moduleId, newLessonData })\n      \n      const response = await addLesson(moduleId, newLessonData)\n      console.log(' addLesson response:', response)\n      \n      if (response && response.message) {\n        console.log(' Lesson added successfully, response:', response)\n        setNewLessonData({\n          title: '',\n          type: 'info',\n          content: '',\n          contentType: 'info',\n          contentStyle: 'default',\n          duration: 5,\n          media: []\n        })\n        \n        // Refresh both the modules list and the selected module data\n        await loadModules()\n        console.log(' After loadModules, modules state:', modules)\n        \n        // Refresh the modules data\n        const updatedModules = await getAllModules(true) // Force refresh to get latest data\n        console.log(' getAllModules result:', updatedModules)\n        console.log(' All modules content:', updatedModules.map(m => ({ id: m.id, title: m.title, content: m.content, lessons: m.content?.lessons })))\n        \n        // Find the updated module\n        const updatedModule = updatedModules.find(m => m.id === moduleId)\n        console.log(' Found updated module:', updatedModule)\n        console.log(' Module content:', updatedModule?.content)\n        console.log(' Module lessons:', updatedModule?.content?.lessons)\n        console.log(' Lesson count:', updatedModule?.content?.lessons?.length || 0)\n        \n        // Also check the current selectedModuleForLessons state\n        console.log(' Current selectedModuleForLessons state:', selectedModuleForLessons)\n        console.log(' Current selectedModuleForLessons lessons:', selectedModuleForLessons?.content?.lessons)\n        console.log(' Current selectedModuleForLessons lesson count:', selectedModuleForLessons?.content?.lessons?.length || 0)\n        \n        if (updatedModule) {\n          console.log(' Setting selectedModuleForLessons to:', updatedModule)\n          console.log(' Current lesson count before update:', selectedModuleForLessons?.content?.lessons?.length || 0)\n          console.log(' New lesson count after update:', updatedModule?.content?.lessons?.length || 0)\n          \n          setSelectedModuleForLessons(updatedModule)\n          \n          // Also update the modules state to ensure consistency\n          setModules(updatedModules)\n          \n          // Force a re-render to ensure UI updates\n          setForceUpdate(prev => prev + 1)\n          \n          // Debug: Check state after setting\n          setTimeout(() => {\n            console.log(' After state update - selectedModuleForLessons:', selectedModuleForLessons)\n            console.log(' After state update - modules state:', modules)\n            console.log(' After state update - forceUpdate value:', forceUpdate)\n          }, 100)\n        } else {\n          console.log(' Could not find updated module with ID:', moduleId)\n        }\n        \n        setLessonSuccessMessage('Lesson added successfully!')\n      } else {\n        console.log(' Lesson add failed, response:', response)\n        setError(response?.error || 'Failed to add lesson')\n      }\n    } catch (error) {\n      console.error(' Error adding lesson:', error)\n      setError('Failed to add lesson')\n    } finally {\n      setLessonActionLoading(false)\n    }\n  }\n\n  const handleUpdateLesson = async (moduleId, lessonId, lessonData) => {\n    try {\n      setLessonActionLoading(true)\n      setLessonSuccessMessage('')\n      const response = await updateLesson(moduleId, lessonId, lessonData)\n      \n      if (response && response.message) {\n        setEditingLesson(null)\n        \n        // Refresh both the modules list and the selected module data\n        await loadModules()\n        \n        // Update the selected module with fresh data\n        const updatedModules = await getAllModules(true) // Force refresh to get latest data\n        const updatedModule = updatedModules.find(m => m.id === moduleId)\n        if (updatedModule) {\n          setSelectedModuleForLessons(updatedModule)\n          \n          // Also update the modules state to ensure consistency\n          setModules(updatedModules)\n          \n          // Force a re-render to ensure UI updates\n          setForceUpdate(prev => prev + 1)\n        }\n        \n        setLessonSuccessMessage('Lesson updated successfully!')\n      } else {\n        setError(response?.error || 'Failed to update lesson')\n      }\n    } catch (error) {\n      console.error('Error updating lesson:', error)\n      setError('Failed to update lesson')\n    } finally {\n      setLessonActionLoading(false)\n    }\n  }\n\n  const handleDeleteLesson = async (moduleId, lessonId) => {\n    if (!window.confirm('Are you sure you want to delete this lesson?')) {\n      return\n    }\n    \n    try {\n      setLessonActionLoading(true)\n      setLessonSuccessMessage('')\n      console.log(' handleDeleteLesson called with:', { moduleId, lessonId })\n      \n      const response = await deleteLesson(moduleId, lessonId)\n      console.log(' deleteLesson response:', response)\n      \n      if (response && response.message) {\n        console.log(' Lesson deleted successfully, refreshing data...')\n        \n        // Refresh both the modules list and the selected module data\n        await loadModules()\n        \n        // Update the selected module with fresh data\n        const updatedModules = await getAllModules(true) // Force refresh to get latest data\n        const updatedModule = updatedModules.find(m => m.id === moduleId)\n        if (updatedModule) {\n          console.log(' Found updated module:', updatedModule)\n          console.log(' Module content:', updatedModule.content)\n          console.log(' Module lessons:', updatedModule.content?.lessons)\n          console.log(' Lesson count:', updatedModule.content?.lessons?.length || 0)\n          setSelectedModuleForLessons(updatedModule)\n          \n          // Also update the modules state to ensure consistency\n          setModules(updatedModules)\n          \n          // Force a re-render to ensure UI updates\n          setForceUpdate(prev => prev + 1)\n        }\n        \n        setLessonSuccessMessage('Lesson deleted successfully!')\n      } else {\n        console.log(' Failed to delete lesson:', response?.error)\n        setError(response?.error || 'Failed to delete lesson')\n      }\n    } catch (error) {\n      console.error(' Error deleting lesson:', error)\n      setError('Failed to delete lesson')\n    } finally {\n      setLessonActionLoading(false)\n    }\n  }\n  \n  // Check database connectivity\n  const checkDatabaseConnection = async () => {\n    try {\n      setDbConnectionStatus('checking')\n      const apiBase = import.meta.env.VITE_API_BASE || 'http://localhost:10000'\n      const response = await fetch(`${apiBase}/api/health`, {\n        method: 'GET',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        // Add timeout for the request\n        signal: AbortSignal.timeout(10000) // 10 second timeout\n      })\n      \n      if (response.ok) {\n        const data = await response.json()\n        console.log('Health check response:', data)\n        setDbConnectionStatus(data.database === 'healthy' ? 'connected' : 'disconnected')\n        \n        if (data.database !== 'healthy') {\n          setError(`Database status: ${data.database}`)\n        } else {\n          setError(null)\n        }\n      } else {\n        console.error('Health check failed with status:', response.status)\n        setDbConnectionStatus('disconnected')\n        setError(`Backend health check failed: ${response.status}`)\n      }\n    } catch (error) {\n      console.error('Database connection check failed:', error)\n      setDbConnectionStatus('disconnected')\n      \n      if (error.name === 'AbortError') {\n        setError('Backend connection timeout - service may be unavailable')\n      } else if (error.message.includes('Failed to fetch')) {\n        setError('Cannot connect to backend - check if service is running')\n      } else {\n        setError(`Connection error: ${error.message}`)\n      }\n    }\n  }\n  \n  // Load data on component mount\n  React.useEffect(() => {\n    loadModules()\n    loadUsers()\n    loadDeletedUsers()\n    loadUserStats()\n    checkDatabaseConnection() // Check DB connection on mount\n    // Load admin dashboard stats (includes reports totals)\n    ;(async () => {\n      try {\n        const res = await apiGet('/api/admin/stats')\n        if (res.ok) {\n          const data = await res.json()\n          setAdminStats(data)\n        }\n      } catch (e) {\n        // ignore\n      }\n    })()\n  }, [])\n  \n  // Authentication check\n  if (authLoading) {\n    return (\n      <div className=\"flex items-center justify-center min-h-screen\">\n        <div className=\"text-center\">\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-[#21a1ce] mx-auto mb-4\"></div>\n          <p className=\"text-gray-600\">Checking authentication...</p>\n        </div>\n      </div>\n    )\n  }\n  \n  if (!isAuthenticated) {\n    return (\n      <div className=\"space-y-6 p-4\">\n        <div className=\"bg-gradient-to-r from-[#21a1ce] to-[#1a8bb8] rounded-2xl p-6 text-white shadow-lg\">\n          <div className=\"text-center\">\n            <Shield className=\"w-16 h-16 mx-auto mb-4\" />\n            <h1 className=\"text-3xl font-bold mb-2\">Authentication Required</h1>\n            <p className=\"text-white text-lg\">Please log in to access the Admin Dashboard.</p>\n          </div>\n        </div>\n        <MobileCard>\n          <div className=\"text-center py-8\">\n            <Shield className=\"w-16 h-16 text-gray-400 mx-auto mb-4\" />\n            <h2 className=\"text-xl font-semibold text-gray-900 mb-2\">Access Denied</h2>\n            <p className=\"text-gray-600 mb-6\">You must be logged in to access the admin panel.</p>\n            <MobileButton\n              onClick={() => setActiveTab('login')}\n              className=\"bg-[#21a1ce] hover:bg-[#1a8bb8] text-white\"\n            >\n              Go to Login\n            </MobileButton>\n          </div>\n        </MobileCard>\n      </div>\n    )\n  }\n  \n  if (!user?.is_admin && user?.role !== 'ADMIN' && user?.role !== 'MODERATOR') {\n    return (\n      <div className=\"space-y-6 p-4\">\n        <div className=\"bg-gradient-to-r from-red-500 to-red-600 rounded-2xl p-6 text-white shadow-lg\">\n          <div className=\"text-center\">\n            <Shield className=\"w-16 h-16 mx-auto mb-4\" />\n            <h1 className=\"text-3xl font-bold mb-2\">Access Denied</h1>\n            <p className=\"text-white text-lg\">You don't have permission to access the Admin Dashboard.</p>\n          </div>\n        </div>\n        <MobileCard>\n          <div className=\"text-center py-8\">\n            <Shield className=\"w-16 h-16 text-red-400 mx-auto mb-4\" />\n            <h2 className=\"text-xl font-semibold text-gray-900 mb-2\">Insufficient Privileges</h2>\n            <p className=\"text-gray-600 mb-6\">Only administrators can access this panel.</p>\n            <MobileButton\n              onClick={() => setActiveTab('home')}\n              className=\"bg-[#21a1ce] hover:bg-[#1a8bb8] text-white\"\n            >\n              Return to Home\n            </MobileButton>\n          </div>\n        </MobileCard>\n      </div>\n    )\n  }\n\n  const renderOverview = () => (\n    <div className=\"space-y-6\">\n      {/* Database Connection Status */}\n      <MobileCard>\n        <div className=\"p-4\">\n          <div className=\"flex items-center justify-between\">\n            <h3 className=\"text-lg font-semibold text-gray-900\">Database Status</h3>\n            <div className={`flex items-center space-x-2 ${\n              dbConnectionStatus === 'connected' ? 'text-green-600' : \n              dbConnectionStatus === 'disconnected' ? 'text-red-600' : 'text-yellow-600'\n            }`}>\n              <div className={`w-3 h-3 rounded-full ${\n                dbConnectionStatus === 'connected' ? 'bg-green-500' : \n                dbConnectionStatus === 'disconnected' ? 'bg-red-500' : 'bg-yellow-500'\n              }`}></div>\n              <span className=\"text-sm font-medium capitalize\">\n                {dbConnectionStatus === 'connected' ? 'Connected' : \n                 dbConnectionStatus === 'disconnected' ? 'Disconnected' : 'Checking...'}\n              </span>\n            </div>\n          </div>\n          {dbConnectionStatus === 'disconnected' && (\n            <div className=\"mt-2\">\n              <p className=\"text-sm text-red-600 mb-2\">\n                Warning: Database connection failed. Some features may not work properly.\n              </p>\n              {error && (\n                <p className=\"text-xs text-red-500 bg-red-50 p-2 rounded\">\n                  Error: {error}\n                </p>\n              )}\n            </div>\n          )}\n          <button\n            onClick={checkDatabaseConnection}\n            className=\"mt-2 text-sm text-blue-600 hover:text-blue-800 underline\"\n          >\n            Check Connection\n          </button>\n        </div>\n      </MobileCard>\n\n      <MobileCard>\n        <div className=\"p-6\">\n          <h2 className=\"text-xl font-semibold text-gray-900 mb-4\">System Overview</h2>\n          <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4\">\n            <MobileCard>\n              <div className=\"text-center p-4\">\n                <BookOpen className=\"w-8 h-8 text-blue-500 mx-auto mb-2\" />\n                <h3 className=\"text-lg font-semibold text-gray-900\">{modules.length}</h3>\n                <p className=\"text-sm text-gray-600\">Learning Modules</p>\n              </div>\n            </MobileCard>\n            <MobileCard>\n              <div className=\"text-center p-4\">\n                <Users className=\"w-8 h-8 text-green-500 mx-auto mb-2\" />\n                <h3 className=\"text-lg font-semibold text-gray-900\">{userStats.total}</h3>\n                <p className=\"text-sm text-gray-600\">Total Users</p>\n                <div className=\"text-xs text-gray-500 mt-1\">\n                  {userStats.active} active, {userStats.admins} admins\n                </div>\n              </div>\n            </MobileCard>\n            <MobileCard>\n              <div className=\"text-center p-4\">\n                <MessageSquare className=\"w-8 h-8 text-orange-500 mx-auto mb-2\" />\n                <h3 className=\"text-lg font-semibold text-gray-900\">{adminStats?.reports?.total ?? 0}</h3>\n                <p className=\"text-sm text-gray-600\">Community Reports</p>\n                {adminStats?.reports && (\n                  <div className=\"text-xs text-gray-500 mt-1\">\n                    {adminStats.reports.pending} pending, {adminStats.reports.approved} approved\n                  </div>\n                )}\n                <div className=\"mt-3 flex items-center justify-center gap-2\">\n                  <MobileButton\n                    onClick={() => setActiveSection('reports')}\n                    className=\"bg-orange-600 hover:bg-orange-700 text-white px-3 py-1 text-xs\"\n                  >\n                    Go to Reports\n                  </MobileButton>\n                  {adminStats?.reports?.pending > 0 && (\n                    <MobileButton\n                      onClick={() => {\n                        setActiveSection('reports');\n                        window.__ADMIN_REPORTS_INITIAL_FILTERS__ = { status: 'PENDING' };\n                      }}\n                      className=\"bg-yellow-600 hover:bg-yellow-700 text-white px-3 py-1 text-xs\"\n                    >\n                      Review Pending\n                    </MobileButton>\n                  )}\n                </div>\n              </div>\n            </MobileCard>\n            <MobileCard>\n              <div className=\"text-center p-4\">\n                <Shield className=\"w-8 h-8 text-purple-500 mx-auto mb-2\" />\n                <h3 className=\"text-lg font-semibold text-gray-900\">Active</h3>\n                <p className=\"text-sm text-gray-600\">System Status</p>\n              </div>\n            </MobileCard>\n          </div>\n          \n          <div className=\"mt-6 space-y-3\">\n            <MobileButton\n              onClick={() => setActiveSection('content')}\n              className=\"bg-[#21a1ce] hover:bg-[#1a8bb8] text-white\"\n            >\n              <BookOpen className=\"w-4 h-4 mr-2\" />\n              Manage Content\n            </MobileButton>\n            \n            <MobileButton\n              onClick={() => setActiveSection('users')}\n              className=\"bg-green-600 hover:bg-green-700 text-white\"\n            >\n              <Users className=\"w-4 h-4 mr-2\" />\n              Manage Users\n            </MobileButton>\n            \n            <MobileButton\n              onClick={() => setActiveSection('reports')}\n              className=\"bg-orange-600 hover:bg-orange-700 text-white\"\n            >\n              <MessageSquare className=\"w-4 h-4 mr-2\" />\n              View Reports\n            </MobileButton>\n          </div>\n        </div>\n      </MobileCard>\n    </div>\n  )\n\n  const renderContentManagement = () => (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center justify-between\">\n        <h2 className=\"text-xl font-semibold text-gray-900\">Learning Content Management</h2>\n        <MobileButton\n          onClick={() => setShowAddModule(true)}\n          className=\"bg-[#21a1ce] hover:bg-[#1a8bb8] text-white\"\n        >\n          <Plus className=\"w-4 h-4 mr-2\" />\n          Add Module\n        </MobileButton>\n      </div>\n\n      <div className=\"space-y-4\">\n        {modules.length === 0 ? (\n          <MobileCard>\n            <div className=\"text-center py-8\">\n              <BookOpen className=\"w-16 h-16 text-gray-400 mx-auto mb-4\" />\n              <h3 className=\"text-lg font-semibold text-gray-900 mb-2\">No Modules Yet</h3>\n              <p className=\"text-gray-600 mb-4\">Create your first learning module to get started.</p>\n              <MobileButton\n                onClick={() => setShowAddModule(true)}\n                className=\"bg-[#21a1ce] hover:bg-[#1a8bb8] text-white\"\n              >\n                <Plus className=\"w-4 h-4 mr-2\" />\n                Create First Module\n              </MobileButton>\n            </div>\n          </MobileCard>\n        ) : (\n          modules.map((module) => (\n            <MobileCard key={module.id}>\n              <div className=\"p-4\">\n                <div className=\"flex items-center justify-between mb-2\">\n                  <h3 className=\"font-semibold text-gray-900\">{module.title}</h3>\n                  <div className=\"flex space-x-2\">\n                    <button\n                      onClick={() => setSelectedModuleForLessons(module)}\n                      className=\"p-2 text-green-600 hover:bg-green-50 rounded-lg transition-colors\"\n                      title=\"Manage Lessons\"\n                    >\n                      <BookOpen className=\"w-4 h-4\" />\n                    </button>\n                    <button\n                      onClick={() => setEditingModule(module)}\n                      className=\"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors\"\n                      title=\"Edit Module\"\n                    >\n                      <Edit3 className=\"w-4 h-4\" />\n                    </button>\n                    <button\n                      onClick={() => handleDeleteModule(module.id)}\n                      disabled={actionLoading}\n                      className=\"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors disabled:opacity-50\"\n                      title=\"Delete Module\"\n                    >\n                      <Trash2 className=\"w-4 h-4\" />\n                    </button>\n                  </div>\n                </div>\n                <p className=\"text-gray-600 text-sm mb-2\">{module.description}</p>\n                <div className=\"flex items-center space-x-4 text-sm text-gray-500\">\n                  <span>{module.content?.lessons?.length || 0} lessons</span>\n                  <span className=\"px-2 py-1 rounded-full text-xs bg-blue-100 text-blue-800\">\n                    {module.difficulty}\n                  </span>\n                  <span className=\"px-2 py-1 rounded-full text-xs bg-green-100 text-green-800\">\n                    {module.estimated_time} min\n                  </span>\n                </div>\n              </div>\n            </MobileCard>\n          ))\n        )}\n      </div>\n    </div>\n  )\n\n  const renderUserManagement = () => (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center justify-between\">\n        <h2 className=\"text-xl font-semibold text-gray-900\">User Management</h2>\n        <div className=\"flex space-x-2\">\n          <MobileButton\n            onClick={loadUsers}\n            disabled={actionLoading}\n            className=\"bg-gray-600 hover:bg-gray-700 text-white\"\n          >\n            <RefreshCw className={`w-4 h-4 mr-2 ${actionLoading ? 'animate-spin' : ''}`} />\n            Refresh\n          </MobileButton>\n          <MobileButton\n            onClick={() => setShowAddUser(true)}\n            className=\"bg-green-600 hover:bg-green-700 text-white\"\n          >\n            <Plus className=\"w-4 h-4 mr-2\" />\n            Add User\n          </MobileButton>\n        </div>\n      </div>\n\n      {loadingUsers ? (\n        <div className=\"flex items-center justify-center py-8\">\n          <div className=\"text-center\">\n            <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-[#21a1ce] mx-auto mb-4\"></div>\n            <p className=\"text-gray-600\">Loading users...</p>\n          </div>\n        </div>\n      ) : users.length === 0 ? (\n        <MobileCard>\n          <div className=\"text-center py-8\">\n            <Users className=\"w-16 h-16 text-gray-400 mx-auto mb-4\" />\n            <h3 className=\"text-lg font-semibold text-gray-900 mb-2\">No Users Found</h3>\n            <p className=\"text-gray-600 mb-4\">There are no users in the system yet.</p>\n          </div>\n        </MobileCard>\n      ) : (\n        <div className=\"space-y-4\">\n          {users.map((user) => (\n            <MobileCard key={user.id}>\n              <div className=\"p-4\">\n                <div className=\"flex items-center justify-between mb-2\">\n                  <div>\n                    <h3 className=\"font-semibold text-gray-900\">\n                      {user.first_name && user.last_name \n                        ? `${user.first_name} ${user.last_name}` \n                        : user.email?.split('@')[0] || 'Unknown User'\n                      }\n                    </h3>\n                    <p className=\"text-sm text-gray-600\">{user.email}</p>\n                    {user.created_at && (\n                      <p className=\"text-xs text-gray-500\">\n                        Joined: {new Date(user.created_at).toLocaleDateString()}\n                      </p>\n                    )}\n                  </div>\n                  <div className=\"flex space-x-2\">\n                    <button\n                      onClick={() => setEditingUser(user)}\n                      className=\"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors\"\n                      title=\"Edit User\"\n                    >\n                      <Edit3 className=\"w-4 h-4\" />\n                    </button>\n                    <button\n                      onClick={() => handleDeleteUser(user.id)}\n                      disabled={actionLoading}\n                      className=\"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors disabled:opacity-50\"\n                      title=\"Delete User\"\n                    >\n                      <Trash2 className=\"w-4 h-4\" />\n                    </button>\n                  </div>\n                </div>\n                \n                <div className=\"flex items-center space-x-4 text-sm mb-3\">\n                  <span className={`px-2 py-1 rounded-full text-xs ${\n                    user.is_admin || user.role === 'ADMIN' \n                      ? 'bg-purple-100 text-purple-800' \n                      : user.role === 'MODERATOR'\n                      ? 'bg-orange-100 text-orange-800'\n                      : 'bg-blue-100 text-blue-800'\n                  }`}>\n                    {user.role || 'USER'}\n                  </span>\n                  <span className={`px-2 py-1 rounded-full text-xs ${\n                    user.status === 'ACTIVE' \n                      ? 'bg-green-100 text-green-800' \n                      : user.status === 'SUSPENDED'\n                      ? 'bg-yellow-100 text-yellow-800'\n                      : user.status === 'BANNED'\n                      ? 'bg-red-100 text-red-800'\n                      : 'bg-gray-100 text-gray-800'\n                  }`}>\n                    {user.status || 'UNKNOWN'}\n                  </span>\n                </div>\n                \n                {/* Quick Actions */}\n                <div className=\"flex flex-wrap gap-2\">\n                  {/* Status Update */}\n                  <select\n                    value={user.status || 'ACTIVE'}\n                    onChange={(e) => handleUpdateUserStatus(user.id, e.target.value)}\n                    disabled={actionLoading}\n                    className=\"px-2 py-1 text-xs border border-gray-300 rounded-md focus:ring-1 focus:ring-blue-500 disabled:opacity-50\"\n                  >\n                    <option value=\"ACTIVE\">Active</option>\n                    <option value=\"SUSPENDED\">Suspended</option>\n                    <option value=\"BANNED\">Banned</option>\n                  </select>\n                  \n                  {/* Role Update */}\n                  <select\n                    value={user.role || 'USER'}\n                    onChange={(e) => handleUpdateUserRole(user.id, e.target.value)}\n                    disabled={actionLoading}\n                    className=\"px-2 py-1 text-xs border border-gray-300 rounded-md focus:ring-1 focus:ring-blue-500 disabled:opacity-50\"\n                  >\n                    <option value=\"USER\">User</option>\n                    <option value=\"MODERATOR\">Moderator</option>\n                    <option value=\"ADMIN\">Admin</option>\n                  </select>\n                </div>\n              </div>\n            </MobileCard>\n          ))}\n        </div>\n      )}\n    </div>\n  )\n\n  const renderDeletedUsers = () => (\n    <div className=\"space-y-6\">\n      <h2 className=\"text-xl font-semibold text-gray-900\">Deleted Users</h2>\n      <div className=\"space-y-4\">\n        {deletedUsers.map((user) => (\n          <MobileCard key={user.id}>\n            <div className=\"p-4\">\n              <div className=\"flex items-center justify-between mb-3\">\n                <div>\n                  <h4 className=\"font-medium text-gray-900\">\n                    {user.first_name && user.last_name \n                      ? `${user.first_name} ${user.last_name}`\n                      : user.email?.split('@')[0] || 'Unknown User'\n                    }\n                  </h4>\n                  <p className=\"text-sm text-gray-600\">{user.email}</p>\n                  {user.created_at && (\n                    <p className=\"text-xs text-gray-500\">\n                      Joined: {new Date(user.created_at).toLocaleDateString()}\n                    </p>\n                  )}\n                </div>\n                <div className=\"flex space-x-2\">\n                  <button\n                    onClick={() => handleRestoreUser(user.id)}\n                    disabled={actionLoading}\n                    className=\"p-2 text-green-600 hover:bg-green-50 rounded-lg transition-colors disabled:opacity-50\"\n                    title=\"Restore User\"\n                  >\n                    <RefreshCw className=\"w-4 h-4\" />\n                  </button>\n                </div>\n              </div>\n              \n              <div className=\"flex items-center space-x-4 text-sm\">\n                <span className=\"px-2 py-1 rounded-full text-xs bg-gray-100 text-gray-800\">\n                  {user.role || 'USER'}\n                </span>\n                <span className=\"px-2 py-1 rounded-full text-xs bg-red-100 text-red-800\">\n                  DELETED\n                </span>\n              </div>\n            </div>\n          </MobileCard>\n        ))}\n        \n        {deletedUsers.length === 0 && (\n          <div className=\"text-center py-8 text-gray-500\">\n            <p>No deleted users</p>\n          </div>\n        )}\n      </div>\n    </div>\n  )\n\n  const renderCommunityReports = () => (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center justify-between\">\n        <h2 className=\"text-xl font-semibold text-gray-900\">Community Reports</h2>\n        <MobileButton\n          onClick={() => {/* Refresh reports */}}\n          className=\"bg-orange-600 hover:bg-orange-700 text-white\"\n        >\n          <BarChart3 className=\"w-4 h-4 mr-2\" />\n          Refresh\n        </MobileButton>\n      </div>\n\n      <div className=\"space-y-4\">\n        {reports.map((report) => (\n          <MobileCard key={report.id}>\n            <div className=\"p-4\">\n              <div className=\"flex items-center justify-between mb-2\">\n                <h3 className=\"font-semibold text-gray-900 capitalize\">{report.type} Report</h3>\n                <span className={`px-2 py-1 rounded-full text-xs ${\n                  report.status === 'pending' ? 'bg-yellow-100 text-yellow-800' :\n                  report.status === 'investigating' ? 'bg-blue-100 text-blue-800' :\n                  'bg-green-100 text-green-800'\n                }`}>\n                  {report.status}\n                </span>\n              </div>\n              <p className=\"text-gray-600 text-sm mb-2\">{report.description}</p>\n              <div className=\"flex items-center justify-between text-sm text-gray-500\">\n                <span>Reported by: {report.reporter}</span>\n                <button className=\"text-[#21a1ce] hover:underline\">View Details</button>\n              </div>\n            </div>\n          </MobileCard>\n        ))}\n      </div>\n    </div>\n  )\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Header */}\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h1 className=\"text-2xl font-bold text-gray-900\">{((user?.role || '').toUpperCase() === 'MODERATOR' && !user?.is_admin) ? 'Moderator Dashboard' : 'Admin Dashboard'}</h1>\n          <p className=\"text-gray-600\">Welcome back, {user?.name || (((user?.role || '').toUpperCase() === 'MODERATOR') ? 'Moderator' : 'Admin')}</p>\n          <div className=\"flex items-center space-x-2 mt-1\">\n            <span className=\"text-sm text-gray-500\">Backend:</span>\n            <div className={`flex items-center space-x-1 ${\n              dbConnectionStatus === 'connected' ? 'text-green-600' : \n              dbConnectionStatus === 'disconnected' ? 'text-red-600' : 'text-yellow-600'\n            }`}>\n              <div className={`w-2 h-2 rounded-full ${\n                dbConnectionStatus === 'connected' ? 'bg-green-500' : \n                dbConnectionStatus === 'disconnected' ? 'bg-red-500' : 'bg-yellow-500'\n              }`}></div>\n              <span className=\"text-xs font-medium capitalize\">\n                {dbConnectionStatus === 'connected' ? 'Connected' : \n                 dbConnectionStatus === 'disconnected' ? 'Disconnected' : 'Checking...'}\n              </span>\n            </div>\n          </div>\n        </div>\n        <button\n          onClick={() => setActiveTab('home')}\n          className=\"p-2 text-gray-400 hover:text-gray-600 transition-colors\"\n        >\n          <svg className=\"w-6 h-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\n          </svg>\n        </button>\n      </div>\n\n      {/* Navigation Tabs */}\n      <div className=\"flex space-x-1 bg-gray-100 p-1 rounded-xl\">\n        {(user?.is_admin || user?.role === 'ADMIN') && (\n          <button\n            onClick={() => setActiveSection('overview')}\n            className={`flex-1 py-2 px-4 rounded-lg text-sm font-medium transition-colors ${\n              activeSection === 'overview'\n                ? 'bg-white text-[#21a1ce] shadow-sm'\n                : 'text-gray-600 hover:text-gray-900'\n            }`}\n          >\n            Overview\n          </button>\n        )}\n        <button\n          onClick={() => setActiveSection('content')}\n          className={`flex-1 py-2 px-4 rounded-lg text-sm font-medium transition-colors ${\n            activeSection === 'content'\n              ? 'bg-white text-[#21a1ce] shadow-sm'\n              : 'text-gray-600 hover:text-gray-900'\n          }`}\n        >\n          Content\n        </button>\n        {(user?.is_admin || user?.role === 'ADMIN') && (\n        <button\n          onClick={() => setActiveSection('users')}\n          className={`flex-1 py-2 px-4 rounded-lg text-sm font-medium transition-colors ${\n            activeSection === 'users'\n              ? 'bg-white text-[#21a1ce] shadow-sm'\n              : 'text-gray-600 hover:text-gray-900'\n          }`}\n        >\n          Users\n        </button>\n        )}\n        <button\n          onClick={() => setActiveSection('reports')}\n          className={`flex-1 py-2 px-4 rounded-lg text-sm font-medium transition-colors ${\n            activeSection === 'reports'\n              ? 'bg-white text-[#21a1ce] shadow-sm'\n              : 'text-gray-600 hover:text-gray-900'\n          }`}\n        >\n          Reports\n        </button>\n      </div>\n\n      {/* Content Sections */}\n      {(user?.is_admin || user?.role === 'ADMIN') && activeSection === 'overview' && renderOverview()}\n      {activeSection === 'content' && renderContentManagement()}\n      {(user?.is_admin || user?.role === 'ADMIN') && activeSection === 'users' && (\n        <>\n          {renderUserManagement()}\n          {renderDeletedUsers()}\n        </>\n      )}\n      {activeSection === 'reports' && (\n        window.__ADMIN_REPORTS_INITIAL_FILTERS__ ? (\n          (() => {\n            const filters = window.__ADMIN_REPORTS_INITIAL_FILTERS__\n            delete window.__ADMIN_REPORTS_INITIAL_FILTERS__\n            return <CommunityReports initialFilters={filters} />\n          })()\n        ) : (\n          <CommunityReports />\n        )\n      )}\n\n      {/* Add Module Modal */}\n      {showAddModule && (\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\n          <div className=\"bg-white rounded-2xl max-w-md w-full max-h-[90vh] overflow-y-auto\">\n            <div className=\"p-6\">\n              <div className=\"flex items-center justify-between mb-4\">\n                <h2 className=\"text-xl font-bold text-gray-900\">Add New Module</h2>\n                <button \n                  onClick={() => setShowAddModule(false)}\n                  className=\"text-gray-400 hover:text-gray-600 transition-colors\"\n                >\n                  <svg className=\"w-6 h-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\n                  </svg>\n                </button>\n              </div>\n              \n              <div className=\"space-y-4\">\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">Module Title *</label>\n                  <MobileInput\n                    type=\"text\"\n                    value={newModuleData.title}\n                    onChange={(e) => setNewModuleData(prev => ({ ...prev, title: e.target.value }))}\n                    placeholder=\"Enter module title\"\n                    className=\"w-full\"\n                  />\n                </div>\n                \n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">Description *</label>\n                  <Textarea\n                    value={newModuleData.description}\n                    onChange={(e) => setNewModuleData(prev => ({ ...prev, description: e.target.value }))}\n                    placeholder=\"Enter module description\"\n                    className=\"w-full\"\n                    rows={3}\n                  />\n                </div>\n                \n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">Difficulty</label>\n                  <select\n                    value={newModuleData.difficulty}\n                    onChange={(e) => setNewModuleData(prev => ({ ...prev, difficulty: e.target.value }))}\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#21a1ce] focus:border-transparent\"\n                  >\n                    <option value=\"BEGINNER\">Beginner</option>\n                    <option value=\"INTERMEDIATE\">Intermediate</option>\n                    <option value=\"ADVANCED\">Advanced</option>\n                  </select>\n                </div>\n                \n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">Estimated Time (minutes)</label>\n                  <MobileInput\n                    type=\"number\"\n                    value={newModuleData.estimated_time}\n                    onChange={(e) => setNewModuleData(prev => ({ ...prev, estimated_time: parseInt(e.target.value) || 10 }))}\n                    placeholder=\"10\"\n                    min=\"1\"\n                    max=\"120\"\n                    className=\"w-full\"\n                  />\n                </div>\n                \n                <div className=\"flex space-x-3\">\n                  <MobileButton\n                    onClick={() => setShowAddModule(false)}\n                    className=\"flex-1 bg-gray-600 hover:bg-gray-700 text-white\"\n                  >\n                    Cancel\n                  </MobileButton>\n                  <MobileButton\n                    onClick={handleCreateModule}\n                    disabled={actionLoading}\n                    className=\"flex-1 bg-[#21a1ce] hover:bg-[#1a8bb8] text-white\"\n                  >\n                    {actionLoading ? 'Creating...' : 'Create Module'}\n                  </MobileButton>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Add User Modal */}\n      {showAddUser && (\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\n          <div className=\"bg-white rounded-2xl max-w-md w-full max-h-[90vh] overflow-y-auto\">\n            <div className=\"p-6\">\n              <div className=\"flex items-center justify-between mb-4\">\n                <h2 className=\"text-xl font-bold text-gray-900\">Add New User</h2>\n                <button \n                  onClick={() => setShowAddUser(false)}\n                  className=\"text-gray-400 hover:text-gray-600 transition-colors\"\n                >\n                  <svg className=\"w-6 h-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\n                  </svg>\n                </button>\n              </div>\n              \n              <div className=\"space-y-4\">\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">Full Name</label>\n                  <MobileInput\n                    type=\"text\"\n                    placeholder=\"Enter full name\"\n                    value={newUserData.first_name}\n                    onChange={(e) => setNewUserData(prev => ({ ...prev, first_name: e.target.value }))}\n                    className=\"w-full\"\n                  />\n                </div>\n                \n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">Email</label>\n                  <MobileInput\n                    type=\"email\"\n                    placeholder=\"Enter email address\"\n                    value={newUserData.email}\n                    onChange={(e) => setNewUserData(prev => ({ ...prev, email: e.target.value }))}\n                    className=\"w-full\"\n                  />\n                </div>\n                \n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">Role</label>\n                  <select \n                    value={newUserData.role}\n                    onChange={(e) => setNewUserData(prev => ({ ...prev, role: e.target.value }))}\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#21a1ce] focus:border-transparent\"\n                  >\n                    <option value=\"USER\">User</option>\n                    <option value=\"MODERATOR\">Moderator</option>\n                    <option value=\"ADMIN\">Admin</option>\n                  </select>\n                </div>\n                \n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">Password</label>\n                  <MobileInput\n                    type=\"password\"\n                    placeholder=\"Enter password\"\n                    value={newUserData.password}\n                    onChange={(e) => setNewUserData(prev => ({ ...prev, password: e.target.value }))}\n                    className=\"w-full\"\n                  />\n                </div>\n                \n                <div className=\"flex space-x-3\">\n                  <MobileButton\n                    onClick={() => setShowAddUser(false)}\n                    className=\"flex-1 bg-gray-600 hover:bg-gray-700 text-white\"\n                  >\n                    Cancel\n                  </MobileButton>\n                  <MobileButton\n                    onClick={handleCreateUser}\n                    disabled={actionLoading}\n                    className=\"flex-1 bg-green-600 hover:bg-green-700 text-white\"\n                  >\n                    {actionLoading ? 'Creating...' : 'Create User'}\n                  </MobileButton>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Edit User Modal */}\n      {editingUser && (\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\n          <div className=\"bg-white rounded-2xl max-w-md w-full max-h-[90vh] overflow-y-auto\">\n            <div className=\"p-6\">\n              <div className=\"flex items-center justify-between mb-4\">\n                <h2 className=\"text-xl font-bold text-gray-900\">Edit User</h2>\n                <button \n                  onClick={() => setEditingUser(null)}\n                  className=\"text-gray-400 hover:text-gray-600 transition-colors\"\n                >\n                  <svg className=\"w-6 h-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\n                  </svg>\n                </button>\n              </div>\n              \n              <div className=\"space-y-4\">\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">First Name</label>\n                  <MobileInput\n                    type=\"text\"\n                    placeholder=\"Enter first name\"\n                    value={editingUser.first_name || ''}\n                    onChange={(e) => setEditingUser(prev => ({ ...prev, first_name: e.target.value }))}\n                    className=\"w-full\"\n                  />\n                </div>\n                \n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">Last Name</label>\n                  <MobileInput\n                    type=\"text\"\n                    placeholder=\"Enter last name\"\n                    value={editingUser.last_name || ''}\n                    onChange={(e) => setEditingUser(prev => ({ ...prev, last_name: e.target.value }))}\n                    className=\"w-full\"\n                  />\n                </div>\n                \n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">Email</label>\n                  <MobileInput\n                    type=\"email\"\n                    placeholder=\"Enter email address\"\n                    value={editingUser.email || ''}\n                    onChange={(e) => setEditingUser(prev => ({ ...prev, email: e.target.value }))}\n                    className=\"w-full\"\n                  />\n                </div>\n                \n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">Role</label>\n                  <select \n                    value={editingUser.role || 'USER'}\n                    onChange={(e) => setEditingUser(prev => ({ ...prev, role: e.target.value }))}\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#21a1ce] focus:border-transparent\"\n                  >\n                    <option value=\"USER\">User</option>\n                    <option value=\"MODERATOR\">Moderator</option>\n                    <option value=\"ADMIN\">Admin</option>\n                  </select>\n                </div>\n                \n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">Status</label>\n                  <select \n                    value={editingUser.status || 'ACTIVE'}\n                    onChange={(e) => setEditingUser(prev => ({ ...prev, status: e.target.value }))}\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#21a1ce] focus:border-transparent\"\n                  >\n                    <option value=\"ACTIVE\">Active</option>\n                    <option value=\"SUSPENDED\">Suspended</option>\n                    <option value=\"BANNED\">Banned</option>\n                  </select>\n                </div>\n                \n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">New Password (leave blank to keep current)</label>\n                  <MobileInput\n                    type=\"password\"\n                    placeholder=\"Enter new password\"\n                    value={editingUser.newPassword || ''}\n                    onChange={(e) => setEditingUser(prev => ({ ...prev, newPassword: e.target.value }))}\n                    className=\"w-full\"\n                  />\n                </div>\n                \n                <div className=\"flex space-x-3\">\n                  <MobileButton\n                    onClick={() => setEditingUser(null)}\n                    className=\"flex-1 bg-gray-600 hover:bg-gray-700 text-white\"\n                  >\n                    Cancel\n                  </MobileButton>\n                  <MobileButton\n                    onClick={() => handleUpdateUser(editingUser.id)}\n                    disabled={actionLoading}\n                    className=\"flex-1 bg-blue-600 hover:bg-blue-700 text-white\"\n                  >\n                    {actionLoading ? 'Updating...' : 'Update User'}\n                  </MobileButton>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Edit Module Modal */}\n      {editingModule && (\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\n          <div className=\"bg-white rounded-2xl max-w-md w-full max-h-[90vh] overflow-y-auto\">\n            <div className=\"p-6\">\n              <div className=\"flex items-center justify-between mb-4\">\n                <h2 className=\"text-xl font-bold text-gray-900\">Edit Module</h2>\n                <button \n                  onClick={() => setEditingModule(null)}\n                  className=\"text-gray-400 hover:text-gray-600 transition-colors\"\n                >\n                  <svg className=\"w-6 h-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\n                  </svg>\n                </button>\n              </div>\n              \n              <div className=\"space-y-4\">\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">Title</label>\n                  <MobileInput\n                    type=\"text\"\n                    placeholder=\"Enter module title\"\n                    value={editingModule.title || ''}\n                    onChange={(e) => setEditingModule(prev => ({ ...prev, title: e.target.value }))}\n                    className=\"w-full\"\n                  />\n                </div>\n                \n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">Description</label>\n                  <Textarea\n                    placeholder=\"Enter module description\"\n                    value={editingModule.description || ''}\n                    onChange={(e) => setEditingModule(prev => ({ ...prev, description: e.target.value }))}\n                    className=\"w-full\"\n                    rows={3}\n                  />\n                </div>\n                \n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">Difficulty</label>\n                  <select\n                    value={editingModule.difficulty || 'BEGINNER'}\n                    onChange={(e) => setEditingModule(prev => ({ ...prev, difficulty: e.target.value }))}\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#21a1ce] focus:border-transparent\"\n                  >\n                    <option value=\"BEGINNER\">Beginner</option>\n                    <option value=\"INTERMEDIATE\">Intermediate</option>\n                    <option value=\"ADVANCED\">Advanced</option>\n                  </select>\n                </div>\n                \n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">Estimated Time (minutes)</label>\n                  <MobileInput\n                    type=\"number\"\n                    placeholder=\"10\"\n                    value={editingModule.estimated_time || 10}\n                    onChange={(e) => setEditingModule(prev => ({ ...prev, estimated_time: parseInt(e.target.value) || 10 }))}\n                    min=\"1\"\n                    max=\"120\"\n                    className=\"w-full\"\n                  />\n                </div>\n                \n                <div className=\"flex space-x-3\">\n                  <MobileButton\n                    onClick={() => setEditingModule(null)}\n                    className=\"flex-1 bg-gray-600 hover:bg-gray-700 text-white\"\n                  >\n                    Cancel\n                  </MobileButton>\n                  <MobileButton\n                    onClick={() => handleUpdateModule(editingModule.id)}\n                    disabled={actionLoading}\n                    className=\"flex-1 bg-blue-600 hover:bg-blue-700 text-white\"\n                  >\n                    {actionLoading ? 'Updating...' : 'Update Module'}\n                  </MobileButton>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Lesson Management Modal */}\n      {selectedModuleForLessons && (\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\n          <div className=\"bg-white rounded-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto\">\n            <div className=\"p-6\">\n              <div className=\"flex items-center justify-between mb-4\">\n                <h2 className=\"text-xl font-bold text-gray-900\">\n                  Manage Lessons: {selectedModuleForLessons.title}\n                </h2>\n                <div className=\"text-sm text-gray-500\">\n                  Last updated: {new Date().toLocaleTimeString()} (Render: {forceUpdate})\n                </div>\n                <button \n                  onClick={() => setSelectedModuleForLessons(null)}\n                  className=\"text-gray-400 hover:text-gray-600 transition-colors\"\n                >\n                  <svg className=\"w-6 h-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\n                  </svg>\n                </button>\n              </div>\n\n              {/* Add New Lesson Form */}\n              <div className=\"bg-gray-50 rounded-lg p-4 mb-6\">\n                <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">Add New Lesson</h3>\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">Title</label>\n                    <MobileInput\n                      type=\"text\"\n                      placeholder=\"Enter lesson title\"\n                      value={newLessonData.title}\n                      onChange={(e) => setNewLessonData(prev => ({ ...prev, title: e.target.value }))}\n                      className=\"w-full\"\n                    />\n                  </div>\n                  \n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">Type</label>\n                    <select\n                      value={newLessonData.type}\n                      onChange={(e) => setNewLessonData(prev => ({ ...prev, type: e.target.value }))}\n                      className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#21a1ce] focus:border-transparent\"\n                    >\n                      <option value=\"info\">Information</option>\n                      <option value=\"quiz\">Quiz</option>\n                      <option value=\"video\">Video</option>\n                      <option value=\"interactive\">Interactive</option>\n                    </select>\n                  </div>\n                  \n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">Content Type</label>\n                    <select\n                      value={newLessonData.contentType}\n                      onChange={(e) => setNewLessonData(prev => ({ ...prev, contentType: e.target.value }))}\n                      className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#21a1ce] focus:border-transparent\"\n                    >\n                      <option value=\"info\">Text</option>\n                      <option value=\"html\">HTML</option>\n                      <option value=\"markdown\">Markdown</option>\n                    </select>\n                  </div>\n                  \n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">Duration (minutes)</label>\n                    <MobileInput\n                      type=\"number\"\n                      placeholder=\"5\"\n                      value={newLessonData.duration}\n                      onChange={(e) => setNewLessonData(prev => ({ ...prev, duration: parseInt(e.target.value) || 5 }))}\n                      min=\"1\"\n                      max=\"60\"\n                      className=\"w-full\"\n                    />\n                  </div>\n                  \n                  <div className=\"md:col-span-2\">\n                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">Content</label>\n                    <Textarea\n                      placeholder=\"Enter lesson content\"\n                      value={newLessonData.content}\n                      onChange={(e) => setNewLessonData(prev => ({ ...prev, content: e.target.value }))}\n                      className=\"w-full\"\n                      rows={4}\n                    />\n                  </div>\n\n                  {/* Media attachments */}\n                  <div className=\"md:col-span-2\">\n                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">Media (optional)</label>\n                    <div className=\"space-y-3\">\n                      {(newLessonData.media || []).map((item, idx) => (\n                        <div key={idx} className=\"grid grid-cols-1 md:grid-cols-4 gap-2 items-center\">\n                          <select\n                            value={item.type || 'image'}\n                            onChange={(e) => setNewLessonData(prev => {\n                              const media = [...(prev.media || [])]\n                              media[idx] = { ...media[idx], type: e.target.value }\n                              return { ...prev, media }\n                            })}\n                            className=\"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#21a1ce] focus:border-transparent\"\n                          >\n                            <option value=\"image\">Image</option>\n                            <option value=\"video\">Video</option>\n                          </select>\n                          <input\n                            type=\"url\"\n                            placeholder=\"https://cdn.example.com/path/to/media\"\n                            value={item.url || ''}\n                            onChange={(e) => setNewLessonData(prev => {\n                              const media = [...(prev.media || [])]\n                              media[idx] = { ...media[idx], url: e.target.value }\n                              return { ...prev, media }\n                            })}\n                            className=\"md:col-span-2 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#21a1ce] focus:border-transparent\"\n                          />\n                          <input\n                            type=\"text\"\n                            placeholder=\"Caption (optional)\"\n                            value={item.caption || ''}\n                            onChange={(e) => setNewLessonData(prev => {\n                              const media = [...(prev.media || [])]\n                              media[idx] = { ...media[idx], caption: e.target.value }\n                              return { ...prev, media }\n                            })}\n                            className=\"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#21a1ce] focus:border-transparent\"\n                          />\n                          <button\n                            type=\"button\"\n                            onClick={() => setNewLessonData(prev => ({\n                              ...prev,\n                              media: (prev.media || []).filter((_, i) => i !== idx)\n                            }))}\n                            className=\"text-red-600 text-sm hover:underline\"\n                          >\n                            Remove\n                          </button>\n                        </div>\n                      ))}\n                      <button\n                        type=\"button\"\n                        onClick={() => setNewLessonData(prev => ({\n                          ...prev,\n                          media: [...(prev.media || []), { type: 'image', url: '', caption: '' }]\n                        }))}\n                        className=\"text-[#21a1ce] text-sm hover:underline\"\n                      >\n                        + Add media\n                      </button>\n                      <div className=\"flex items-center gap-3\">\n                        <input\n                          type=\"file\"\n                          accept=\"image/*,video/*\"\n                          onChange={async (e) => {\n                            const file = e.target.files?.[0]\n                            if (!file) return\n                            try {\n                              setLessonActionLoading(true)\n                              const res = await uploadLessonMedia(file)\n                              const url = res.url\n                              const type = res.resource_type || 'image'\n                              setNewLessonData(prev => ({\n                                ...prev,\n                                media: [...(prev.media || []), { type, url, caption: '' }]\n                              }))\n                            } catch (err) {\n                              alert('Upload failed: ' + (err.message || 'Unknown error'))\n                            } finally {\n                              setLessonActionLoading(false)\n                              e.target.value = ''\n                            }\n                          }}\n                          className=\"text-sm\"\n                        />\n                        <span className=\"text-xs text-gray-500\">Upload to Cloudinary and auto-add to list</span>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n                \n                <div className=\"mt-4\">\n                  <MobileButton\n                    onClick={() => handleAddLesson(selectedModuleForLessons.id)}\n                    disabled={lessonActionLoading}\n                    className=\"bg-[#21a1ce] hover:bg-[#1a8bb8] text-white\"\n                  >\n                    {lessonActionLoading ? 'Adding...' : 'Add Lesson'}\n                  </MobileButton>\n                  {lessonSuccessMessage && (\n                    <div className=\"mt-3 p-3 bg-green-50 border border-green-200 rounded-lg\">\n                      <div className=\"flex items-center\">\n                        <svg className=\"w-5 h-5 text-green-600 mr-2\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                          <path fillRule=\"evenodd\" d=\"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z\" clipRule=\"evenodd\" />\n                        </svg>\n                        <span className=\"text-sm text-green-800 font-medium\">{lessonSuccessMessage}</span>\n                      </div>\n                    </div>\n                  )}\n                </div>\n              </div>\n\n              {/* Existing Lessons List */}\n              <div>\n                <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">Existing Lessons</h3>\n                {lessonActionLoading && (\n                  <div className=\"mb-4 p-3 bg-blue-50 border border-blue-200 rounded-lg\">\n                    <div className=\"flex items-center\">\n                      <RefreshCw className=\"w-4 h-4 text-blue-600 mr-2 animate-spin\" />\n                      <span className=\"text-sm text-blue-800\">Updating lessons...</span>\n                    </div>\n                  </div>\n                )}\n                {selectedModuleForLessons.content?.lessons?.length > 0 ? (\n                  <div className=\"space-y-3\">\n                    {selectedModuleForLessons.content.lessons.map((lesson) => (\n                      <div key={lesson.id} className=\"border border-gray-200 rounded-lg p-4\">\n                        <div className=\"flex items-center justify-between mb-2\">\n                          <h4 className=\"font-medium text-gray-900\">{lesson.title}</h4>\n                          <div className=\"flex space-x-2\">\n                            <button\n                              onClick={() => setEditingLesson(lesson)}\n                              className=\"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors\"\n                              title=\"Edit Lesson\"\n                            >\n                              <Edit3 className=\"w-4 h-4\" />\n                            </button>\n                            <button\n                              onClick={() => handleDeleteLesson(selectedModuleForLessons.id, lesson.id)}\n                              disabled={lessonActionLoading}\n                              className=\"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors disabled:opacity-50\"\n                              title=\"Delete Lesson\"\n                            >\n                              <Trash2 className=\"w-4 h-4\" />\n                            </button>\n                          </div>\n                        </div>\n                        <div className=\"text-sm text-gray-600 mb-2\">\n                          <span className=\"px-2 py-1 rounded-full text-xs bg-blue-100 text-blue-800 mr-2\">\n                            {lesson.type}\n                          </span>\n                          <span className=\"px-2 py-1 rounded-full text-xs bg-green-100 text-green-800 mr-2\">\n                            {lesson.duration} min\n                          </span>\n                          <span className=\"px-2 py-1 rounded-full text-xs bg-purple-100 text-purple-800\">\n                            {lesson.contentType}\n                          </span>\n                        </div>\n                        <p className=\"text-gray-700 text-sm line-clamp-2\">{lesson.content}</p>\n                      </div>\n                    ))}\n                  </div>\n                ) : (\n                  <div className=\"text-center py-8 text-gray-500\">\n                    <BookOpen className=\"w-16 h-16 text-gray-300 mx-auto mb-4\" />\n                    <p>No lessons yet. Add your first lesson above!</p>\n                  </div>\n                )}\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Edit Lesson Modal */}\n      {editingLesson && (\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\n          <div className=\"bg-white rounded-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto\">\n            <div className=\"p-6\">\n              <div className=\"flex items-center justify-between mb-4\">\n                <h2 className=\"text-xl font-bold text-gray-900\">Edit Lesson</h2>\n                <button \n                  onClick={() => setEditingLesson(null)}\n                  className=\"text-gray-400 hover:text-gray-600 transition-colors\"\n                >\n                  <svg className=\"w-6 h-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\n                  </svg>\n                </button>\n              </div>\n              \n              <div className=\"space-y-4\">\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">Title</label>\n                  <MobileInput\n                    type=\"text\"\n                    placeholder=\"Enter lesson title\"\n                    value={editingLesson.title || ''}\n                    onChange={(e) => setEditingLesson(prev => ({ ...prev, title: e.target.value }))}\n                    className=\"w-full\"\n                  />\n                </div>\n                \n                <div className=\"grid grid-cols-2 gap-4\">\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">Type</label>\n                    <select\n                      value={editingLesson.type || 'info'}\n                      onChange={(e) => setEditingLesson(prev => ({ ...prev, type: e.target.value }))}\n                      className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#21a1ce] focus:border-transparent\"\n                    >\n                      <option value=\"info\">Information</option>\n                      <option value=\"quiz\">Quiz</option>\n                      <option value=\"video\">Video</option>\n                      <option value=\"interactive\">Interactive</option>\n                    </select>\n                  </div>\n                  \n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">Duration (minutes)</label>\n                    <MobileInput\n                      type=\"number\"\n                      placeholder=\"5\"\n                      value={editingLesson.duration || 5}\n                      onChange={(e) => setEditingLesson(prev => ({ ...prev, duration: parseInt(e.target.value) || 5 }))}\n                      min=\"1\"\n                      max=\"60\"\n                      className=\"w-full\"\n                    />\n                  </div>\n                </div>\n                \n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">Content</label>\n                  <Textarea\n                    placeholder=\"Enter lesson content\"\n                    value={editingLesson.content || ''}\n                    onChange={(e) => setEditingLesson(prev => ({ ...prev, content: e.target.value }))}\n                    className=\"w-full\"\n                    rows={6}\n                  />\n                </div>\n                \n                <div className=\"flex space-x-3\">\n                  <MobileButton\n                    onClick={() => setEditingLesson(null)}\n                    className=\"flex-1 bg-gray-600 hover:bg-gray-700 text-white\"\n                  >\n                    Cancel\n                  </MobileButton>\n                  <MobileButton\n                    onClick={() => handleUpdateLesson(selectedModuleForLessons.id, editingLesson.id, editingLesson)}\n                    disabled={lessonActionLoading}\n                    className=\"flex-1 bg-blue-600 hover:bg-blue-700 text-white\"\n                  >\n                    {lessonActionLoading ? 'Updating...' : 'Update Lesson'}\n                  </MobileButton>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  )\n}\n","import React, { useState } from 'react'\nimport { useAuth } from '../hooks/useAuth'\nimport { User, Mail, Shield, ArrowLeft, Save, Key } from 'lucide-react'\nimport { MobileCard } from './ui/mobile-card'\nimport { MobileButton } from './ui/mobile-button'\nimport { MobileInput } from './ui/mobile-input'\nimport { Textarea } from './ui/textarea'\n\nexport default function ProfileSettings({ setActiveTab }) {\n  const { user, updateProfile, changePassword } = useAuth()\n  const [isEditing, setIsEditing] = useState(false)\n  const [isChangingPassword, setIsChangingPassword] = useState(false)\n  const [loading, setLoading] = useState(false)\n  \n  // Form state\n  const [formData, setFormData] = useState({\n    name: user?.name || '',\n    email: user?.email || '',\n    bio: user?.bio || ''\n  })\n  \n  const [passwordData, setPasswordData] = useState({\n    currentPassword: '',\n    newPassword: '',\n    confirmPassword: ''\n  })\n\n  const handleInputChange = (e) => {\n    const { name, value } = e.target\n    setFormData(prev => ({\n      ...prev,\n      [name]: value\n    }))\n  }\n\n  const handlePasswordChange = (e) => {\n    const { name, value } = e.target\n    setPasswordData(prev => ({\n      ...prev,\n      [name]: value\n    }))\n  }\n\n  const handleSaveProfile = async () => {\n    setLoading(true)\n    try {\n      await updateProfile(formData)\n      setIsEditing(false)\n    } catch (error) {\n      console.error('Failed to update profile:', error)\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  const handleChangePassword = async () => {\n    if (passwordData.newPassword !== passwordData.confirmPassword) {\n      alert('New passwords do not match')\n      return\n    }\n    \n    setLoading(true)\n    try {\n      await changePassword(passwordData.currentPassword, passwordData.newPassword)\n      setIsChangingPassword(false)\n      setPasswordData({ currentPassword: '', newPassword: '', confirmPassword: '' })\n    } catch (error) {\n      console.error('Failed to change password:', error)\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  if (!user) {\n    return (\n      <div className=\"space-y-6\">\n        <MobileCard>\n          <div className=\"text-center py-8\">\n            <User className=\"w-16 h-16 text-gray-400 mx-auto mb-4\" />\n            <h2 className=\"text-xl font-semibold text-gray-900 mb-2\">Profile Not Found</h2>\n            <p className=\"text-gray-600 mb-6\">Please log in to access your profile.</p>\n            <MobileButton \n              onClick={() => setActiveTab('login')}\n              className=\"bg-[#21a1ce] hover:bg-[#1a8bb8] text-white\"\n            >\n              Go to Login\n            </MobileButton>\n          </div>\n        </MobileCard>\n      </div>\n    )\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Header */}\n      <div className=\"flex items-center justify-between\">\n        <div className=\"flex items-center space-x-3\">\n          <button\n            onClick={() => setActiveTab('home')}\n            className=\"p-2 text-gray-400 hover:text-gray-600 transition-colors\"\n          >\n            <ArrowLeft className=\"w-5 h-5\" />\n          </button>\n          <div>\n            <h1 className=\"text-2xl font-bold text-gray-900\">Profile Settings</h1>\n            <p className=\"text-gray-600\">Manage your account information</p>\n          </div>\n        </div>\n      </div>\n\n      {/* Profile Information */}\n      <MobileCard>\n        <div className=\"p-6\">\n          <div className=\"flex items-center justify-between mb-6\">\n            <h2 className=\"text-lg font-semibold text-gray-900\">Profile Information</h2>\n            <MobileButton\n              onClick={() => setIsEditing(!isEditing)}\n              variant={isEditing ? 'secondary' : 'primary'}\n              className=\"bg-[#21a1ce] hover:bg-[#1a8bb8] text-white\"\n            >\n              {isEditing ? 'Cancel' : 'Edit Profile'}\n            </MobileButton>\n          </div>\n\n          {isEditing ? (\n            <div className=\"space-y-4\">\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">Full Name</label>\n                <MobileInput\n                  type=\"text\"\n                  name=\"name\"\n                  value={formData.name}\n                  onChange={handleInputChange}\n                  placeholder=\"Enter your full name\"\n                  className=\"w-full\"\n                />\n              </div>\n              \n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">Email</label>\n                <MobileInput\n                  type=\"email\"\n                  name=\"email\"\n                  value={formData.email}\n                  onChange={handleInputChange}\n                  placeholder=\"Enter your email\"\n                  className=\"w-full\"\n                />\n              </div>\n              \n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">Bio</label>\n                <Textarea\n                  name=\"bio\"\n                  value={formData.bio}\n                  onChange={handleInputChange}\n                  placeholder=\"Tell us about yourself\"\n                  rows={3}\n                  className=\"w-full\"\n                />\n              </div>\n              \n              <MobileButton\n                onClick={handleSaveProfile}\n                disabled={loading}\n                loading={loading}\n                className=\"w-full bg-[#21a1ce] hover:bg-[#1a8bb8] text-white\"\n              >\n                <Save className=\"w-4 h-4 mr-2\" />\n                Save Changes\n              </MobileButton>\n            </div>\n          ) : (\n            <div className=\"space-y-4\">\n              <div className=\"flex items-center space-x-3\">\n                <User className=\"w-5 h-5 text-gray-400\" />\n                <div>\n                  <p className=\"text-sm text-gray-500\">Name</p>\n                  <p className=\"font-medium text-gray-900\">{user.name || 'Not set'}</p>\n                </div>\n              </div>\n              \n              <div className=\"flex items-center space-x-3\">\n                <Mail className=\"w-5 h-5 text-gray-400\" />\n                <div>\n                  <p className=\"text-sm text-gray-500\">Email</p>\n                  <p className=\"font-medium text-gray-900\">{user.email}</p>\n                </div>\n              </div>\n              \n              {user.bio && (\n                <div className=\"flex items-start space-x-3\">\n                  <User className=\"w-5 h-5 text-gray-400 mt-1\" />\n                  <div>\n                    <p className=\"text-sm text-gray-500\">Bio</p>\n                    <p className=\"font-medium text-gray-900\">{user.bio}</p>\n                  </div>\n                </div>\n              )}\n            </div>\n          )}\n        </div>\n      </MobileCard>\n\n      {/* Security Settings */}\n      <MobileCard>\n        <div className=\"p-6\">\n          <div className=\"flex items-center justify-between mb-6\">\n            <h2 className=\"text-lg font-semibold text-gray-900\">Security</h2>\n            <MobileButton\n              onClick={() => setIsChangingPassword(!isChangingPassword)}\n              variant={isChangingPassword ? 'secondary' : 'primary'}\n              className=\"bg-green-600 hover:bg-green-700 text-white\"\n            >\n              {isChangingPassword ? 'Cancel' : 'Change Password'}\n            </MobileButton>\n          </div>\n\n          {isChangingPassword ? (\n            <div className=\"space-y-4\">\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">Current Password</label>\n                <MobileInput\n                  type=\"password\"\n                  name=\"currentPassword\"\n                  value={passwordData.currentPassword}\n                  onChange={handlePasswordChange}\n                  placeholder=\"Enter current password\"\n                  className=\"w-full\"\n                />\n              </div>\n              \n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">New Password</label>\n                <MobileInput\n                  type=\"password\"\n                  name=\"newPassword\"\n                  value={passwordData.newPassword}\n                  onChange={handlePasswordChange}\n                  placeholder=\"Enter new password\"\n                  className=\"w-full\"\n                />\n              </div>\n              \n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">Confirm New Password</label>\n                <MobileInput\n                  type=\"password\"\n                  name=\"confirmPassword\"\n                  value={passwordData.confirmPassword}\n                  onChange={handlePasswordChange}\n                  placeholder=\"Confirm new password\"\n                  className=\"w-full\"\n                />\n              </div>\n              \n              <MobileButton\n                onClick={handleChangePassword}\n                disabled={loading}\n                loading={loading}\n                className=\"w-full bg-green-600 hover:bg-green-700 text-white\"\n              >\n                <Key className=\"w-4 h-4 mr-2\" />\n                Update Password\n              </MobileButton>\n            </div>\n          ) : (\n            <div className=\"flex items-center space-x-3\">\n              <Shield className=\"w-5 h-5 text-gray-400\" />\n              <div>\n                <p className=\"text-sm text-gray-500\">Password</p>\n                <p className=\"font-medium text-gray-900\"></p>\n              </div>\n            </div>\n          )}\n        </div>\n      </MobileCard>\n\n      {/* Account Status */}\n      <MobileCard>\n        <div className=\"p-6\">\n          <h2 className=\"text-lg font-semibold text-gray-900 mb-4\">Account Status</h2>\n          <div className=\"space-y-3\">\n            <div className=\"flex items-center justify-between\">\n              <span className=\"text-sm text-gray-600\">Account Type</span>\n              <span className={`px-2 py-1 rounded-full text-xs font-medium ${\n                user.is_admin || user.role === 'ADMIN' \n                  ? 'bg-purple-100 text-purple-800' \n                  : 'bg-blue-100 text-blue-800'\n              }`}>\n                {user.is_admin || user.role === 'ADMIN' ? 'Admin' : 'User'}\n              </span>\n            </div>\n            \n            <div className=\"flex items-center justify-between\">\n              <span className=\"text-sm text-gray-600\">Status</span>\n              <span className=\"px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800\">\n                Active\n              </span>\n            </div>\n            \n            <div className=\"flex items-center justify-between\">\n              <span className=\"text-sm text-gray-600\">Member Since</span>\n              <span className=\"text-sm font-medium text-gray-900\">\n                {user.created_at ? new Date(user.created_at).toLocaleDateString() : 'Unknown'}\n              </span>\n            </div>\n          </div>\n        </div>\n      </MobileCard>\n    </div>\n  )\n}\n","import React, { useState, useEffect } from 'react';\nimport { useAuth } from '../hooks/useAuth';\n\nconst Login = ({ onLoginSuccess, onSwitchToRegister }) => {\n  const [formData, setFormData] = useState({\n    email: '',\n    password: ''\n  });\n  const [isLoading, setIsLoading] = useState(false);\n  const { login, error, user, isAuthenticated } = useAuth();\n\n  // Watch for authentication changes and redirect accordingly\n  useEffect(() => {\n    if (isAuthenticated && user && onLoginSuccess) {\n      onLoginSuccess();\n    }\n  }, [isAuthenticated, user, onLoginSuccess]);\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    \n    // Basic validation\n    if (!formData.email.trim() || !formData.password.trim()) {\n      return;\n    }\n    \n    setIsLoading(true);\n    \n    try {\n      const result = await login(formData.email, formData.password);\n      \n      if (!result.success) {\n        // Error is already set in useAuth hook\n        console.error('Login failed:', result.error);\n      }\n    } catch (error) {\n      console.error('Login error:', error);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const handleChange = (e) => {\n    setFormData({\n      ...formData,\n      [e.target.name]: e.target.value\n    });\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8\">\n      <div className=\"sm:mx-auto sm:w-full sm:max-w-md\">\n        <div className=\"flex justify-center\">\n          <img \n            src=\"/remaleh-logo.png\" \n            alt=\"Remaleh Protect\" \n            className=\"h-12 w-auto\"\n          />\n        </div>\n        <h2 className=\"mt-6 text-center text-3xl font-extrabold text-gray-900\">\n          Sign in to your account\n        </h2>\n        <p className=\"mt-2 text-center text-sm text-gray-600\">\n          Access your digital security dashboard\n        </p>\n      </div>\n\n      <div className=\"mt-8 sm:mx-auto sm:w-full sm:max-w-md\">\n        <div className=\"bg-white py-8 px-4 shadow sm:rounded-lg sm:px-10\">\n          <form className=\"space-y-6\" onSubmit={handleSubmit}>\n            {error && (\n              <div className=\"bg-red-50 border border-red-200 rounded-md p-4\">\n                <div className=\"flex\">\n                  <div className=\"flex-shrink-0\">\n                    <svg className=\"h-5 w-5 text-red-400\" viewBox=\"0 0 20 20\" fill=\"currentColor\">\n                      <path fillRule=\"evenodd\" d=\"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z\" clipRule=\"evenodd\" />\n                    </svg>\n                  </div>\n                  <div className=\"ml-3\">\n                    <p className=\"text-sm text-red-800\">{error}</p>\n                  </div>\n                </div>\n              </div>\n            )}\n\n            <div>\n              <label htmlFor=\"email\" className=\"block text-sm font-medium text-gray-700\">\n                Email address\n              </label>\n              <div className=\"mt-1\">\n                <input\n                  id=\"email\"\n                  name=\"email\"\n                  type=\"email\"\n                  autoComplete=\"email\"\n                  required\n                  value={formData.email}\n                  onChange={handleChange}\n                  className=\"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm\"\n                  placeholder=\"Enter your email\"\n                />\n              </div>\n            </div>\n\n            <div>\n              <label htmlFor=\"password\" className=\"block text-sm font-medium text-gray-700\">\n                Password\n              </label>\n              <div className=\"mt-1\">\n                <input\n                  id=\"password\"\n                  name=\"password\"\n                  type=\"password\"\n                  autoComplete=\"current-password\"\n                  required\n                  value={formData.password}\n                  onChange={handleChange}\n                  className=\"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm\"\n                  placeholder=\"Enter your password\"\n                />\n              </div>\n            </div>\n\n            <div className=\"flex items-center justify-between\">\n              <div className=\"flex items-center\">\n                <input\n                  id=\"remember-me\"\n                  name=\"remember-me\"\n                  type=\"checkbox\"\n                  className=\"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded\"\n                />\n                <label htmlFor=\"remember-me\" className=\"ml-2 block text-sm text-gray-900\">\n                  Remember me\n                </label>\n              </div>\n\n              <div className=\"text-sm\">\n                <a href=\"#\" className=\"font-medium text-blue-600 hover:text-blue-500\">\n                  Forgot your password?\n                </a>\n              </div>\n            </div>\n\n            <div>\n              <button\n                type=\"submit\"\n                disabled={isLoading}\n                className=\"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed\"\n              >\n                {isLoading ? (\n                  <div className=\"flex items-center\">\n                    <svg className=\"animate-spin -ml-1 mr-3 h-5 w-5 text-white\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\">\n                      <circle className=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"4\"></circle>\n                      <path className=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"></path>\n                    </svg>\n                    Signing in...\n                  </div>\n                ) : (\n                  'Sign in'\n                )}\n              </button>\n            </div>\n          </form>\n\n          <div className=\"mt-6\">\n            <div className=\"relative\">\n              <div className=\"absolute inset-0 flex items-center\">\n                <div className=\"w-full border-t border-gray-300\" />\n              </div>\n              <div className=\"relative flex justify-center text-sm\">\n                <span className=\"px-2 bg-white text-gray-500\">New to Remaleh Protect?</span>\n              </div>\n            </div>\n\n            <div className=\"mt-6\">\n              <button\n                onClick={() => {\n                  if (onSwitchToRegister) {\n                    onSwitchToRegister();\n                  }\n                }}\n                className=\"w-full flex justify-center py-2 px-4 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500\"\n              >\n                Create an account\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Login;\n","import React, { useState, useEffect } from 'react';\nimport { useAuth } from '../hooks/useAuth';\n\nconst Register = ({ onRegisterSuccess }) => {\n  const [formData, setFormData] = useState({\n    first_name: '',\n    last_name: '',\n    email: '',\n    password: '',\n    confirm_password: ''\n  });\n  const [formErrors, setFormErrors] = useState({});\n  const [isLoading, setIsLoading] = useState(false);\n  const { register, error, user, isAuthenticated } = useAuth();\n\n  // Watch for authentication changes and redirect accordingly\n  useEffect(() => {\n    if (isAuthenticated && user && onRegisterSuccess) {\n      onRegisterSuccess();\n    }\n  }, [isAuthenticated, user, onRegisterSuccess]);\n\n  const validateForm = () => {\n    const errors = {};\n    \n    if (!formData.first_name.trim()) {\n      errors.first_name = 'First name is required';\n    }\n    \n    if (!formData.last_name.trim()) {\n      errors.last_name = 'Last name is required';\n    }\n    \n    if (!formData.email.trim()) {\n      errors.email = 'Email is required';\n    } else if (!/\\S+@\\S+\\.\\S+/.test(formData.email)) {\n      errors.email = 'Email is invalid';\n    }\n    \n    if (!formData.password) {\n      errors.password = 'Password is required';\n    } else if (formData.password.length < 8) {\n      errors.password = 'Password must be at least 8 characters';\n    }\n    \n    if (formData.password !== formData.confirm_password) {\n      errors.confirm_password = 'Passwords do not match';\n    }\n    \n    setFormErrors(errors);\n    return Object.keys(errors).length === 0;\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    \n    if (!validateForm()) {\n      return;\n    }\n    \n    setIsLoading(true);\n    \n    try {\n      const userData = {\n        first_name: formData.first_name.trim(),\n        last_name: formData.last_name.trim(),\n        email: formData.email.trim().toLowerCase(),\n        password: formData.password\n      };\n      \n      const result = await register(userData);\n      \n      if (!result.success) {\n        // Error is already set in useAuth hook\n        console.error('Registration failed:', result.error);\n      }\n    } catch (error) {\n      console.error('Registration error:', error);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const handleChange = (e) => {\n    setFormData({\n      ...formData,\n      [e.target.name]: e.target.value\n    });\n    \n    // Clear error when user starts typing\n    if (formErrors[e.target.name]) {\n      setFormErrors({\n        ...formErrors,\n        [e.target.name]: ''\n      });\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8\">\n      <div className=\"sm:mx-auto sm:w-full sm:max-w-md\">\n        <div className=\"flex justify-center\">\n          <img \n            src=\"/remaleh-logo.png\" \n            alt=\"Remaleh Protect\" \n            className=\"h-12 w-auto\"\n          />\n        </div>\n        <h2 className=\"mt-6 text-center text-3xl font-extrabold text-gray-900\">\n          Create your account\n        </h2>\n        <p className=\"mt-2 text-center text-sm text-gray-600\">\n          Join Remaleh Protect for enhanced digital security\n        </p>\n      </div>\n\n      <div className=\"mt-8 sm:mx-auto sm:w-full sm:max-w-md\">\n        <div className=\"bg-white py-8 px-4 shadow sm:rounded-lg sm:px-10\">\n          <form className=\"space-y-6\" onSubmit={handleSubmit}>\n            {error && (\n              <div className=\"bg-red-50 border border-red-200 rounded-md p-4\">\n                <div className=\"flex\">\n                  <div className=\"flex-shrink-0\">\n                    <svg className=\"h-5 w-5 text-red-400\" viewBox=\"0 0 20 20\" fill=\"currentColor\">\n                      <path fillRule=\"evenodd\" d=\"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z\" clipRule=\"evenodd\" />\n                    </svg>\n                  </div>\n                  <div className=\"ml-3\">\n                    <p className=\"text-sm text-red-800\">{error}</p>\n                  </div>\n                </div>\n              </div>\n            )}\n\n            <div className=\"grid grid-cols-1 gap-6 sm:grid-cols-2\">\n              <div>\n                <label htmlFor=\"first_name\" className=\"block text-sm font-medium text-gray-700\">\n                  First name\n                </label>\n                <div className=\"mt-1\">\n                  <input\n                    id=\"first_name\"\n                    name=\"first_name\"\n                    type=\"text\"\n                    autoComplete=\"given-name\"\n                    required\n                    value={formData.first_name}\n                    onChange={handleChange}\n                    className={`appearance-none block w-full px-3 py-2 border rounded-md placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm ${\n                      formErrors.first_name ? 'border-red-300' : 'border-gray-300'\n                    }`}\n                    placeholder=\"Enter your first name\"\n                  />\n                </div>\n                {formErrors.first_name && (\n                  <p className=\"mt-1 text-sm text-red-600\">{formErrors.first_name}</p>\n                )}\n              </div>\n\n              <div>\n                <label htmlFor=\"last_name\" className=\"block text-sm font-medium text-gray-700\">\n                  Last name\n                </label>\n                <div className=\"mt-1\">\n                  <input\n                    id=\"last_name\"\n                    name=\"last_name\"\n                    type=\"text\"\n                    autoComplete=\"family-name\"\n                    required\n                    value={formData.last_name}\n                    onChange={handleChange}\n                    className={`appearance-none block w-full px-3 py-2 border rounded-md placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm ${\n                      formErrors.last_name ? 'border-red-300' : 'border-gray-300'\n                    }`}\n                    placeholder=\"Enter your last name\"\n                  />\n                </div>\n                {formErrors.last_name && (\n                  <p className=\"mt-1 text-sm text-red-600\">{formErrors.last_name}</p>\n                )}\n              </div>\n            </div>\n\n            <div>\n              <label htmlFor=\"email\" className=\"block text-sm font-medium text-gray-700\">\n                Email address\n              </label>\n              <div className=\"mt-1\">\n                <input\n                  id=\"email\"\n                  name=\"email\"\n                  type=\"email\"\n                  autoComplete=\"email\"\n                  required\n                  value={formData.email}\n                  onChange={handleChange}\n                  className={`appearance-none block w-full px-3 py-2 border rounded-md placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm ${\n                    formErrors.email ? 'border-red-300' : 'border-gray-300'\n                  }`}\n                  placeholder=\"Enter your email address\"\n                />\n              </div>\n              {formErrors.email && (\n                <p className=\"mt-1 text-sm text-red-600\">{formErrors.email}</p>\n              )}\n            </div>\n\n            <div>\n              <label htmlFor=\"password\" className=\"block text-sm font-medium text-gray-700\">\n                Password\n              </label>\n              <div className=\"mt-1\">\n                <input\n                  id=\"password\"\n                  name=\"password\"\n                  type=\"password\"\n                  autoComplete=\"new-password\"\n                  required\n                  value={formData.password}\n                  onChange={handleChange}\n                  className={`appearance-none block w-full px-3 py-2 border rounded-md placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm ${\n                    formErrors.password ? 'border-red-300' : 'border-gray-300'\n                  }`}\n                  placeholder=\"Create a strong password\"\n                />\n              </div>\n              {formErrors.password && (\n                <p className=\"mt-1 text-sm text-red-600\">{formErrors.password}</p>\n              )}\n              <p className=\"mt-1 text-xs text-gray-500\">\n                Must be at least 8 characters long\n              </p>\n            </div>\n\n            <div>\n              <label htmlFor=\"confirm_password\" className=\"block text-sm font-medium text-gray-700\">\n                Confirm password\n              </label>\n              <div className=\"mt-1\">\n                <input\n                  id=\"confirm_password\"\n                  name=\"confirm_password\"\n                  type=\"password\"\n                  autoComplete=\"new-password\"\n                  required\n                  value={formData.confirm_password}\n                  onChange={handleChange}\n                  className={`appearance-none block w-full px-3 py-2 border rounded-md placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm ${\n                    formErrors.confirm_password ? 'border-red-300' : 'border-gray-300'\n                  }`}\n                  placeholder=\"Confirm your password\"\n                />\n              </div>\n              {formErrors.confirm_password && (\n                <p className=\"mt-1 text-sm text-red-600\">{formErrors.confirm_password}</p>\n              )}\n            </div>\n\n            <div>\n              <button\n                type=\"submit\"\n                disabled={isLoading}\n                className=\"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed\"\n              >\n                {isLoading ? (\n                  <div className=\"flex items-center\">\n                    <svg className=\"animate-spin -ml-1 mr-3 h-5 w-5 text-white\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\">\n                      <circle className=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"4\"></circle>\n                      <path className=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"></path>\n                    </svg>\n                    Creating account...\n                  </div>\n                ) : (\n                  'Create account'\n                )}\n              </button>\n            </div>\n          </form>\n\n          <div className=\"mt-6\">\n            <div className=\"relative\">\n              <div className=\"absolute inset-0 flex items-center\">\n                <div className=\"w-full border-t border-gray-300\" />\n              </div>\n              <div className=\"relative flex justify-center text-sm\">\n                <span className=\"px-2 bg-white text-gray-500\">Already have an account?</span>\n              </div>\n            </div>\n\n            <div className=\"mt-6\">\n              <button\n                onClick={() => onRegisterSuccess()}\n                className=\"w-full flex justify-center py-2 px-4 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500\"\n              >\n                Sign in instead\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Register;\n","import React, { useState, useEffect } from 'react'\nimport './App.css'\nimport { apiPost, API_ENDPOINTS, API } from './lib/api'\nimport PasswordGenerator from './components/PasswordGenerator'\nimport ChatAssistant from './components/ChatAssistant'\nimport LearnHub from './components/LearnHub'\nimport CommunityHub from './components/CommunityHub'\nimport CommunityReporting from './components/CommunityReporting'\nimport AdminDashboard from './components/admin/AdminDashboard'\nimport ProfileSettings from './components/ProfileSettings'\nimport Login from './components/Login'\nimport Register from './components/Register'\nimport { useAuth } from './hooks/useAuth'\n\nfunction App() {\n  const [activeTab, setActiveTab] = useState('home')\n  const [greeting, setGreeting] = useState('')\n  \n  // Breach checker state\n  const [breachEmail, setBreachEmail] = useState('')\n  const [breachResult, setBreachResult] = useState(null)\n  const [isChecking, setIsChecking] = useState(false)\n  const [breachError, setBreachError] = useState('')\n  \n  // Password generator modal state\n  const [showPasswordGenerator, setShowPasswordGenerator] = useState(false)\n  \n  // Profile dropdown state\n  const [showProfileDropdown, setShowProfileDropdown] = useState(false)\n  \n  // Get authentication state\n  const { user, isAuthenticated, logout } = useAuth()\n\n  // Global logout function\n  const handleGlobalLogout = async () => {\n    try {\n      // Clear local storage\n      localStorage.removeItem('authToken');\n      localStorage.removeItem('refreshToken');\n      \n      // Reset to home tab\n      setActiveTab('home');\n      \n      // Reload the page to clear all state\n      window.location.reload();\n    } catch (error) {\n      console.error('Global logout error:', error);\n      // Force reload even if there's an error\n      window.location.reload();\n    }\n  };\n\n  // Make logout function globally available\n  useEffect(() => {\n    window.logoutUser = handleGlobalLogout;\n    \n    // Cleanup on unmount\n    return () => {\n      delete window.logoutUser;\n    };\n  }, []);\n\n  // Dynamic greeting based on time of day\n  useEffect(() => {\n    const getGreeting = () => {\n      const hour = new Date().getHours()\n      if (hour < 12) return 'Good morning!'\n      if (hour < 17) return 'Good afternoon!'\n      return 'Good evening!'\n    }\n    setGreeting(getGreeting())\n  }, [])\n  \n  // Get user initials for profile icon\n  const getUserInitials = () => {\n    if (user?.name) {\n      const names = user.name.split(' ')\n      if (names.length >= 2) {\n        return `${names[0][0]}${names[names.length - 1][0]}`.toUpperCase()\n      }\n      return names[0][0].toUpperCase()\n    }\n    if (user?.email) {\n      return user.email[0].toUpperCase()\n    }\n    return 'U' // Default user icon\n  }\n  \n  // Handle profile icon click\n  const handleProfileClick = () => {\n    setShowProfileDropdown(!showProfileDropdown)\n  }\n  \n  // Handle logout\n  const handleLogout = () => {\n    logout()\n    setShowProfileDropdown(false)\n    setActiveTab('home')\n  }\n  \n  // Close dropdown when clicking outside or pressing escape\n  useEffect(() => {\n    const handleClickOutside = (event) => {\n      if (showProfileDropdown && !event.target.closest('.profile-dropdown')) {\n        setShowProfileDropdown(false)\n      }\n    }\n    \n    const handleEscapeKey = (event) => {\n      if (event.key === 'Escape' && showProfileDropdown) {\n        setShowProfileDropdown(false)\n      }\n    }\n    \n    document.addEventListener('mousedown', handleClickOutside)\n    document.addEventListener('keydown', handleEscapeKey)\n    \n    return () => {\n      document.removeEventListener('mousedown', handleClickOutside)\n      document.removeEventListener('keydown', handleEscapeKey)\n    }\n  }, [showProfileDropdown])\n\n  const tabs = [\n    { \n      id: 'home', \n      icon: (\n        <svg className=\"w-6 h-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6\" />\n        </svg>\n      )\n    },\n    { \n      id: 'breach', \n      icon: (\n        <svg className=\"w-6 h-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z\" />\n        </svg>\n      )\n    },\n    { \n      id: 'scam', \n      icon: (\n        <svg className=\"w-6 h-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z\" />\n        </svg>\n      )\n    },\n    { \n      id: 'learn', \n      icon: (\n        <svg className=\"w-6 h-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253\" />\n        </svg>\n      ),\n      label: 'Learning Hub'\n    },\n    { \n      id: 'community', \n      icon: (\n        <svg className=\"w-6 h-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z\" />\n        </svg>\n      )\n    },\n    { \n      id: 'chat', \n      icon: (\n        <svg className=\"w-6 h-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z\" />\n        </svg>\n      )\n    },\n    { \n      id: 'admin', \n      icon: (\n        <svg className=\"w-6 h-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756 2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z\" />\n          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15 12a0 3 3 0 11-6 0 3 3 0 016 0z\" />\n        </svg>\n      ),\n      label: 'Admin'\n    }\n  ]\n\n  // Breach checking function\n  const handleBreachCheck = async () => {\n    if (!breachEmail || !breachEmail.includes('@')) {\n      setBreachError('Please enter a valid email address')\n      return\n    }\n    \n    setIsChecking(true)\n    setBreachError('')\n    setBreachResult(null)\n    \n    try {\n      const response = await apiPost(API_ENDPOINTS.BREACH, { email: breachEmail })\n      const data = await response.json()\n      \n      if (response.ok) {\n        setBreachResult(data)\n      } else {\n        setBreachError(data.error || 'Failed to check for breaches')\n      }\n    } catch (error) {\n      console.error('Breach check error:', error)\n      setBreachError('Network error. Please try again.')\n    } finally {\n      setIsChecking(false)\n    }\n  }\n\n  // Handle password generation modal\n  const handlePasswordUse = (password) => {\n    // You could store the generated password or show it in the breach results\n    console.log('Generated password:', password)\n    setShowPasswordGenerator(false)\n  }\n\n  // Scam analysis state\n  const [scamInput, setScamInput] = useState('')\n  const [scamType, setScamType] = useState('message')\n  const [scamResult, setScamResult] = useState(null)\n  const [isAnalyzing, setIsAnalyzing] = useState(false)\n  const [scamError, setScamError] = useState('')\n\n  // Scam analysis function\n  const handleScamAnalysis = async () => {\n    if (!scamInput.trim()) {\n      setScamError('Please enter content to analyze')\n      return\n    }\n    \n    setIsAnalyzing(true)\n    setScamError('')\n    setScamResult(null)\n    \n    try {\n      let analysis\n      let detectedContentType = scamType\n      let contentTypeNote = ''\n      \n      // Intelligent content detection and routing\n      if (scamType === 'link') {\n        // Check if user actually pasted a URL or a message\n        const urlPattern = /^https?:\\/\\/[^\\s]+$/i\n        const containsUrls = /https?:\\/\\/[^\\s]+/gi.test(scamInput)\n        \n        if (urlPattern.test(scamInput.trim())) {\n          // Single URL - use link analysis\n          analysis = await analyzeLink(scamInput)\n          contentTypeNote = 'Analyzed as single URL'\n        } else if (containsUrls) {\n          // Message containing URLs - use enhanced scam analysis for better detection\n          analysis = await analyzeMessage(scamInput)\n          detectedContentType = 'message'\n          contentTypeNote = 'Detected message with URLs - used Enhanced Scam Detection Engine'\n        } else {\n          // No URLs found - use enhanced scam analysis\n          analysis = await analyzeMessage(scamInput)\n          detectedContentType = 'message'\n          contentTypeNote = 'No URLs detected - analyzed with Enhanced Scam Detection Engine'\n        }\n      } else if (scamType === 'email') {\n        // Check if content looks like an email\n        const emailPattern = /^[^\\s]+@[^\\s]+\\.[^\\s]+/i\n        const containsEmailHeaders = /^(from|to|subject|date):/im.test(scamInput)\n        \n        if (emailPattern.test(scamInput.split('\\n')[0]) || containsEmailHeaders) {\n          // Looks like email - use enhanced scam API\n          analysis = await analyzeEmail(scamInput)\n          contentTypeNote = 'Analyzed as email content'\n        } else {\n          // Doesn't look like email - use enhanced scam analysis\n          analysis = await analyzeMessage(scamInput)\n          detectedContentType = 'message'\n          contentTypeNote = 'Content doesn\\'t appear to be email - used Enhanced Scam Detection Engine'\n        }\n      } else {\n        // General message analysis - use enhanced scam detection\n        analysis = await analyzeMessage(scamInput)\n        contentTypeNote = 'Analyzed with Enhanced Scam Detection Engine'\n      }\n      \n      // Add content type detection note to results\n      if (contentTypeNote) {\n        analysis.contentTypeNote = contentTypeNote\n        analysis.detectedContentType = detectedContentType\n      }\n      \n      setScamResult(analysis)\n    } catch (error) {\n      console.error('Scam analysis error:', error)\n      if (error.message.includes('Failed to fetch')) {\n        setScamError('Unable to connect to security APIs. Please check your internet connection and try again.')\n      } else if (error.message.includes('HTTP error')) {\n        setScamError('Security API temporarily unavailable. Please try again later.')\n      } else {\n        setScamError('Analysis failed. Please try again.')\n      }\n    } finally {\n      setIsAnalyzing(false)\n    }\n  }\n\n  // Link analysis using link_analysis.py\n  const analyzeLink = async (url) => {\n    try {\n      const response = await fetch(`${API}/api/link/analyze-url`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({ url: url })\n      })\n      \n      if (!response.ok) {\n        throw new Error(`HTTP error! status: ${response.status}`)\n      }\n      \n      const data = await response.json()\n      \n      if (!data.success) {\n        throw new Error(data.error || 'Link analysis failed')\n      }\n      \n      const result = data.result\n      \n      // Transform link analysis response to match our format\n      return {\n        riskLevel: result.risk_level?.toLowerCase() || 'medium',\n        riskScore: result.risk_score || 50,\n        indicators: result.indicators || [],\n        recommendations: result.recommendations || [\n          'Be cautious of this link',\n          'Verify the destination before clicking',\n          'Check for HTTPS and legitimate domain'\n        ],\n        analysis: url.substring(0, 100) + (url.length > 100 ? '...' : ''),\n        linkDetails: result\n      }\n    } catch (error) {\n      console.error('Link analysis error:', error)\n      // Fallback to local analysis\n      return analyzeScamContent(url, 'link')\n    }\n  }\n\n  // Email analysis using enhanced_scam.py\n  const analyzeEmail = async (emailContent) => {\n    try {\n      const response = await fetch(`${API}/api/enhanced-scam/analyze`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({ text: emailContent })\n      })\n      \n      if (!response.ok) {\n        throw new Error(`HTTP error! status: ${response.status}`)\n      }\n      \n      const data = await response.json()\n      \n      if (!data.success) {\n        throw new Error(data.error || 'Email analysis failed')\n      }\n      \n      const result = data.result\n      \n      // Transform enhanced scam response to match our format\n      return {\n        riskLevel: result.risk_level?.toLowerCase() || 'medium',\n        riskScore: Math.round(result.risk_score * 100) || 50,\n        indicators: result.indicators || [],\n        recommendations: generateEmailRecommendations(result.risk_level, result.indicators),\n        analysis: emailContent.substring(0, 100) + (emailContent.length > 100 ? '...' : ''),\n        emailDetails: result\n      }\n    } catch (error) {\n      console.error('Email analysis error:', error)\n      // Fallback to local analysis\n      return analyzeScamContent(emailContent, 'email')\n    }\n  }\n\n  // Generate email-specific recommendations\n  const generateEmailRecommendations = (riskLevel, indicators) => {\n    const recommendations = []\n    \n    if (riskLevel === 'SCAM') {\n      recommendations.push('Do not respond to this email')\n      recommendations.push('Delete immediately and contact Remaleh Guardians')\n      recommendations.push('Do not click any links or attachments')\n      recommendations.push('If you clicked any links, reach out to Remaleh Guardians via chat immediately')\n    } else if (riskLevel === 'SUSPICIOUS') {\n      recommendations.push('Exercise extreme caution with this email')\n      recommendations.push('Verify sender authenticity before responding')\n      recommendations.push('Do not share personal information')\n      recommendations.push('Contact Remaleh Guardians if you need assistance')\n    } else {\n      recommendations.push('Review this email carefully')\n      recommendations.push('Check sender authenticity')\n      recommendations.push('Avoid clicking suspicious links')\n    }\n    \n    // Add specific recommendations based on indicators\n    if (indicators.some(ind => ind.includes('financial'))) {\n      recommendations.push('Never send money or financial information via email')\n      recommendations.push('Contact Remaleh Guardians if you have financial concerns')\n    }\n    if (indicators.some(ind => ind.includes('urgency'))) {\n      recommendations.push('Be cautious of urgent requests - legitimate organizations rarely pressure you')\n    }\n    \n    return recommendations\n  }\n\n  // Message analysis using enhanced_scam.py for better detection\n  const analyzeMessage = async (messageContent) => {\n    try {\n      const response = await fetch(`${API}/api/enhanced-scam/analyze`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({ \n          text: messageContent\n        })\n      })\n      \n      if (!response.ok) {\n        throw new Error(`HTTP error! status: ${response.status}`)\n      }\n      \n      const data = await response.json()\n      \n      if (!data.success) {\n        throw new Error(data.error || 'Enhanced scam analysis failed')\n      }\n      \n      const result = data.result\n      \n      // Transform enhanced scam response to match our format\n      return {\n        riskLevel: result.risk_level?.toLowerCase() || 'medium',\n        riskScore: Math.round(result.risk_score * 100) || 50,\n        indicators: result.indicators || [],\n        recommendations: generateEnhancedRecommendations(result.risk_level, result.indicators, result.patterns),\n        analysis: messageContent.substring(0, 100) + (messageContent.length > 100 ? '...' : ''),\n        messageDetails: result\n      }\n    } catch (error) {\n      console.error('Enhanced message analysis error:', error)\n      // Fallback to local analysis\n      return analyzeScamContent(messageContent, 'message')\n    }\n  }\n\n  // Generate enhanced recommendations based on enhanced scam detection\n  const generateEnhancedRecommendations = (riskLevel, indicators, patterns) => {\n    const recommendations = []\n    \n    if (riskLevel === 'SCAM') {\n      recommendations.push('Do not respond to this message')\n      recommendations.push('Delete immediately and contact Remaleh Guardians')\n      recommendations.push('Do not click any links or attachments')\n      recommendations.push('If you clicked any links, reach out to Remaleh Guardians via chat immediately')\n    } else if (riskLevel === 'SUSPICIOUS') {\n      recommendations.push('Exercise extreme caution with this message')\n      recommendations.push('Verify authenticity before responding')\n      recommendations.push('Do not share personal information')\n      recommendations.push('Contact Remaleh Guardians if you need assistance')\n    } else if (riskLevel === 'SAFE') {\n      recommendations.push('Content appears safe - no obvious threats detected')\n      recommendations.push('Continue to exercise normal caution')\n      recommendations.push('If you have concerns, contact Remaleh Guardians via chat')\n    } else {\n      recommendations.push('Review this message carefully')\n      recommendations.push('Check sender authenticity')\n      recommendations.push('Avoid clicking suspicious links')\n    }\n    \n    // Add specific recommendations based on patterns\n    if (patterns && patterns.includes('suspicious_domain')) {\n      recommendations.push('Contains suspicious domain (.buzz, .tk, etc.) - high risk')\n    }\n    if (patterns && patterns.includes('url')) {\n      recommendations.push('Contains URLs - verify before clicking')\n    }\n    if (patterns && patterns.includes('phone_number')) {\n      recommendations.push('Contains phone numbers - do not call unknown numbers')\n    }\n    \n    // Add Remaleh Guardians contact info only once\n    if (!recommendations.some(rec => rec.includes('Remaleh Guardians'))) {\n      recommendations.push('Contact Remaleh Guardians via chat for immediate assistance')\n    }\n    \n    // Remove any duplicate recommendations\n    const uniqueRecommendations = [...new Set(recommendations)]\n    \n    return uniqueRecommendations\n  }\n\n  // Generate recommendations from detected threats\n  const generateRecommendationsFromThreats = (threats) => {\n    const recommendations = []\n    \n    threats.forEach(threat => {\n      if (threat.includes('Urgency')) {\n        recommendations.push('Be cautious of urgent requests - legitimate organizations rarely pressure you')\n      }\n      if (threat.includes('Financial')) {\n        recommendations.push('Never send money to unknown sources or for urgent requests')\n      }\n      if (threat.includes('Personal')) {\n        recommendations.push('Never share passwords, SSN, or other sensitive information via message')\n      }\n      if (threat.includes('Suspicious')) {\n        recommendations.push('Avoid clicking suspicious links or responding to unknown contacts')\n      }\n    })\n    \n    if (recommendations.length === 0) {\n      recommendations.push('Review the content carefully before taking any action')\n    }\n    \n    // Add Remaleh Guardians contact info only once\n    if (!recommendations.some(rec => rec.includes('Remaleh Guardians'))) {\n      recommendations.push('Contact Remaleh Guardians via chat for immediate assistance')\n    }\n    \n    // Remove any duplicate recommendations\n    const uniqueRecommendations = [...new Set(recommendations)]\n    \n    return uniqueRecommendations\n  }\n\n  // Scam content analysis logic\n  const analyzeScamContent = (content, type) => {\n    const indicators = {\n      urgency: /(urgent|immediate|now|quick|fast|hurry|deadline|limited time|expires|last chance)/gi,\n      money: /(\\$[\\d,]+|money|payment|bank|account|credit card|paypal|bitcoin|crypto|investment|profit|return)/gi,\n      personal: /(password|login|verify|confirm|update|social security|ssn|birthday|address|phone)/gi,\n      threats: /(suspended|blocked|locked|deleted|expired|legal action|police|fbi|irs|tax)/gi,\n      suspicious: /(click here|verify now|login|password|bank|urgent|free|winner|prize|lottery)/gi\n    }\n    \n    const results = {}\n    let riskScore = 0\n    \n    Object.entries(indicators).forEach(([key, pattern]) => {\n      const matches = content.match(pattern)\n      if (matches) {\n        results[key] = matches.length\n        riskScore += matches.length * 2\n      }\n    })\n    \n    // Additional analysis based on type\n    if (type === 'link') {\n      if (content.includes('bit.ly') || content.includes('tinyurl')) riskScore += 5\n      if (content.includes('http://') && !content.includes('https://')) riskScore += 3\n    }\n    \n    if (type === 'email') {\n      if (content.includes('@') && !content.includes('@gmail.com') && !content.includes('@yahoo.com')) riskScore += 2\n    }\n    \n    const riskLevel = riskScore < 10 ? 'safe' : riskScore < 20 ? 'suspicious' : 'scam'\n    \n    return {\n      riskLevel,\n      riskScore,\n      indicators: results,\n      recommendations: generateRecommendations(riskLevel, results, type),\n      analysis: content.substring(0, 100) + (content.length > 100 ? '...' : '')\n    }\n  }\n\n  const generateRecommendations = (riskLevel, indicators, type) => {\n    const recommendations = []\n    \n    if (riskLevel === 'scam') {\n      recommendations.push('Do not click any links or provide personal information')\n      recommendations.push('Contact Remaleh Guardians immediately')\n      recommendations.push('Delete the message immediately')\n      recommendations.push('If you clicked any links, reach out to Remaleh Guardians via chat')\n    }\n    \n    if (indicators.urgency) {\n      recommendations.push('Be cautious of urgent requests - legitimate organizations rarely pressure you')\n    }\n    \n    if (indicators.money) {\n      recommendations.push('Never send money to unknown sources or for urgent requests')\n    }\n    \n    if (indicators.personal) {\n      recommendations.push('Never share passwords, SSN, or other sensitive information via message')\n    }\n    \n    if (type === 'link') {\n      recommendations.push('Hover over links to verify the actual destination')\n      recommendations.push('Use link scanning tools before clicking')\n    }\n    \n    // Add Remaleh Guardians contact info only once\n    if (!recommendations.some(rec => rec.includes('Remaleh Guardians'))) {\n      recommendations.push('Contact Remaleh Guardians via chat for immediate assistance')\n    }\n    \n    // Remove any duplicate recommendations\n    const uniqueRecommendations = [...new Set(recommendations)]\n    \n    return uniqueRecommendations\n  }\n\n\n\n  const renderContent = () => {\n    switch (activeTab) {\n      case 'home':\n        return (\n          <div className=\"space-y-6\">\n            {/* Welcome Message */}\n            <div className=\"text-center\">\n              <h1 className=\"text-3xl font-bold text-black mb-2\">{greeting}</h1>\n              <p className=\"text-gray-600\">Welcome to Remaleh Protect</p>\n            </div>\n\n            {/* For You Today Section */}\n            <div className=\"bg-white rounded-2xl p-6 shadow-sm border border-gray-100\">\n              <h2 className=\"text-xl font-bold text-black mb-4\">Latest Community Scam Reports</h2>\n              \n              {/* Horizontal Carousel Container */}\n              <div className=\"relative\">\n                <div className=\"flex gap-4 overflow-x-auto pb-4 scrollbar-hide\">\n                  {/* Sample scam reports - in real app, these would come from your backend */}\n                  {[\n                    {\n                      id: 1,\n                      type: \"Phishing\",\n                      description: \"Fake bank email asking for login details\",\n                      time: \"2 hours ago\",\n                      severity: \"high\",\n                      reporter: \"Sarah M.\"\n                    },\n                    {\n                      id: 2,\n                      type: \"Investment Scam\",\n                      description: \"Promises of 500% returns in crypto trading\",\n                      time: \"4 hours ago\",\n                      severity: \"high\",\n                      reporter: \"Mike R.\"\n                    },\n                    {\n                      id: 3,\n                      type: \"Tech Support\",\n                      description: \"Call claiming computer has virus\",\n                      time: \"6 hours ago\",\n                      severity: \"medium\",\n                      reporter: \"Lisa K.\"\n                    },\n                    {\n                      id: 4,\n                      type: \"Romance Scam\",\n                      description: \"Online dating profile asking for money\",\n                      time: \"8 hours ago\",\n                      severity: \"medium\",\n                      reporter: \"David L.\"\n                    },\n                    {\n                      id: 5,\n                      type: \"Lottery Scam\",\n                      description: \"Email claiming you won $1M prize\",\n                      time: \"12 hours ago\",\n                      severity: \"low\",\n                      reporter: \"Emma T.\"\n                    }\n                  ].map((scam, index) => (\n                    <div \n                      key={scam.id}\n                      className=\"flex-shrink-0 w-80 bg-gradient-to-r from-red-50 to-orange-50 border-l-4 border-red-400 p-4 rounded-xl hover:shadow-md transition-all duration-200 cursor-pointer\"\n                    >\n                      <div className=\"flex items-start justify-between h-full\">\n                        <div className=\"flex-1\">\n                          <div className=\"flex items-center gap-2 mb-2\">\n                            <span className={`px-2 py-1 rounded-full text-xs font-medium ${\n                              scam.severity === 'high' ? 'bg-red-100 text-red-700' :\n                              scam.severity === 'medium' ? 'bg-yellow-100 text-yellow-700' :\n                              'bg-green-100 text-green-700'\n                            }`}>\n                              {scam.severity.toUpperCase()}\n                            </span>\n                            <span className=\"text-gray-500 text-xs\">{scam.time}</span>\n                          </div>\n                          <h3 className=\"font-semibold text-gray-800 mb-1\">{scam.type}</h3>\n                          <p className=\"text-gray-600 text-sm mb-2\">{scam.description}</p>\n                          <p className=\"text-gray-500 text-xs\">Reported by {scam.reporter}</p>\n                        </div>\n                        <div className=\"text-red-400 ml-3\">\n                          <svg className=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                            <path fillRule=\"evenodd\" d=\"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z\" clipRule=\"evenodd\" />\n                          </svg>\n                        </div>\n                      </div>\n                    </div>\n                  ))}\n                </div>\n                \n                {/* Scroll Indicator */}\n                <div className=\"flex justify-center mt-4 space-x-2\">\n                  {[1, 2, 3, 4, 5].map((_, index) => (\n                    <div \n                      key={index}\n                      className=\"w-2 h-2 rounded-full bg-gray-300\"\n                    />\n                  ))}\n                </div>\n              </div>\n              \n              <div className=\"mt-4 text-center\">\n                <button className=\"text-[#21a1ce] text-sm font-medium hover:underline\">\n                  View All Reports \n                </button>\n              </div>\n            </div>\n\n            {/* Quick Action Icons */}\n            <div className=\"grid grid-cols-1 gap-4\">\n              <div className=\"bg-white rounded-2xl p-5 shadow-sm border border-gray-100 hover:shadow-md transition-shadow cursor-pointer\">\n                <div className=\"flex items-center\">\n                  <div className=\"w-12 h-12 bg-[#21a1ce] rounded-xl flex items-center justify-center mr-4\">\n                    <svg className=\"w-6 h-6 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z\" />\n                    </svg>\n                  </div>\n                  <div className=\"flex-1\">\n                    <h3 className=\"text-lg font-semibold text-black mb-1\">Breach Check</h3>\n                    <p className=\"text-gray-600 text-sm\">Check if your email has been compromised in data breaches</p>\n                  </div>\n                  <div className=\"text-gray-400\">\n                    <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 5l7 7-7 7\" />\n                    </svg>\n                  </div>\n                </div>\n              </div>\n\n              <div className=\"bg-white rounded-2xl p-5 shadow-sm border border-gray-100 hover:shadow-md transition-shadow cursor-pointer\">\n                <div className=\"flex items-center\">\n                  <div className=\"w-12 h-12 bg-[#21a1ce] rounded-xl flex items-center justify-center mr-4\">\n                    <svg className=\"w-6 h-6 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z\" />\n                    </svg>\n                  </div>\n                  <div className=\"flex-1\">\n                    <h3 className=\"text-lg font-semibold text-black mb-1\">Scam Analysis</h3>\n                    <p className=\"text-gray-600 text-sm\">Analyze suspicious messages and links for potential scams</p>\n                  </div>\n                  <div className=\"text-gray-400\">\n                    <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 5l7 7-7 7\" />\n                    </svg>\n                  </div>\n                </div>\n              </div>\n\n              <div className=\"bg-white rounded-2xl p-5 shadow-sm border border-gray-100 hover:shadow-md transition-shadow cursor-pointer\">\n                <div className=\"flex items-center\">\n                  <div className=\"w-12 h-12 bg-[#21a1ce] rounded-xl flex items-center justify-center mr-4\">\n                    <svg className=\"w-6 h-6 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253\" />\n                    </svg>\n                  </div>\n                  <div className=\"flex-1\">\n                    <h3 className=\"text-lg font-semibold text-black mb-1\">Learn Hub</h3>\n                    <p className=\"text-gray-600 text-sm\">Educational content to improve your digital security</p>\n                  </div>\n                  <div className=\"text-gray-400\">\n                    <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 5l7 7-7 7\" />\n                    </svg>\n                  </div>\n                </div>\n              </div>\n\n              <div className=\"bg-white rounded-2xl p-5 shadow-sm border border-gray-100 hover:shadow-md transition-shadow cursor-pointer\">\n                <div className=\"flex items-center\">\n                  <div className=\"w-12 h-12 bg-[#21a1ce] rounded-xl flex items-center justify-center mr-4\">\n                    <svg className=\"w-6 h-6 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z\" />\n                    </svg>\n                  </div>\n                  <div className=\"flex-1\">\n                    <h3 className=\"text-lg font-semibold text-black mb-1\">Community</h3>\n                    <p className=\"text-gray-600 text-sm\">Report scams and stay updated on latest threats</p>\n                  </div>\n                  <div className=\"text-gray-400\">\n                    <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 5l7 7-7 7\" />\n                    </svg>\n                  </div>\n                </div>\n              </div>\n\n              <div className=\"bg-white rounded-2xl p-5 shadow-sm border border-gray-100 hover:shadow-md transition-shadow cursor-pointer\">\n                <div className=\"flex items-center\">\n                  <div className=\"w-12 h-12 bg-[#21a1ce] rounded-xl flex items-center justify-center mr-4\">\n                    <svg className=\"w-6 h-6 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z\" />\n                    </svg>\n                  </div>\n                  <div className=\"flex-1\">\n                    <h3 className=\"text-lg font-semibold text-black mb-1\">Chat</h3>\n                    <p className=\"text-gray-600 text-sm\">Get instant help and answers to security questions</p>\n                  </div>\n                  <div className=\"text-gray-400\">\n                    <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 5l7 7-7 7\" />\n                    </svg>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        )\n      case 'breach':\n        return (\n          <div className=\"space-y-6\">\n            {/* Header Section */}\n            <div className=\"bg-white rounded-2xl p-6 shadow-sm border border-gray-100\">\n              <div className=\"flex items-center mb-4\">\n                <div className=\"w-12 h-12 bg-[#21a1ce] rounded-xl flex items-center justify-center mr-4\">\n                  <svg className=\"w-6 h-6 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z\" />\n                  </svg>\n                </div>\n                <div>\n                  <h1 className=\"text-2xl font-bold text-black\">Breach Checker</h1>\n                  <p className=\"text-gray-600\">Secure email verification</p>\n                </div>\n              </div>\n              \n              <p className=\"text-gray-700 mb-6\">Check if your email has been compromised in data breaches and get personalized security recommendations.</p>\n            </div>\n\n            {/* Email Input Section */}\n            <div className=\"bg-white rounded-2xl p-6 shadow-sm border border-gray-100\">\n              <h2 className=\"text-lg font-semibold text-black mb-4\">Check Your Email</h2>\n              \n              <div className=\"space-y-4\">\n                <div>\n                  <label htmlFor=\"email\" className=\"block text-sm font-medium text-gray-700 mb-2\">\n                    Email Address\n                  </label>\n                  <div className=\"relative\">\n                    <div className=\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\">\n                      <svg className=\"h-5 w-5 text-gray-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M16 12a4 4 0 10-8 0 4 4 0 008 0zm0 0v1.5a2.5 2.5 0 005 0V12a9 9 0 10-9 9m4.5-1.206a8.959 8.959 0 01-4.5 1.207\" />\n                      </svg>\n                    </div>\n                    <input\n                      type=\"email\"\n                      id=\"email\"\n                      value={breachEmail}\n                      onChange={(e) => setBreachEmail(e.target.value)}\n                      onKeyDown={(e) => {\n                        if (e.key === 'Enter' && !isChecking && breachEmail && breachEmail.includes('@')) {\n                          handleBreachCheck()\n                        }\n                      }}\n                      placeholder=\"Enter your email address\"\n                      className=\"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-[#21a1ce] focus:border-transparent transition-all duration-200\"\n                      disabled={isChecking}\n                    />\n                  </div>\n                </div>\n                \n                {/* Error Display */}\n                {breachError && (\n                  <div className=\"p-3 bg-red-50 border border-red-200 rounded-lg\">\n                    <div className=\"flex items-center\">\n                      <svg className=\"w-5 h-5 text-red-600 mr-2\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z\" />\n                      </svg>\n                      <span className=\"text-red-800 text-sm\">{breachError}</span>\n                    </div>\n                  </div>\n                )}\n                \n                <button \n                  onClick={handleBreachCheck}\n                  disabled={isChecking || !breachEmail}\n                  className=\"w-full bg-[#21a1ce] text-white py-3 px-6 rounded-xl font-medium hover:bg-[#1a8bb8] transition-all duration-200 shadow-sm hover:shadow-md flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed\"\n                >\n                  {isChecking ? (\n                    <>\n                      <svg className=\"animate-spin -ml-1 mr-3 h-5 w-5 text-white\" fill=\"none\" viewBox=\"0 0 24 24\">\n                        <circle className=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"4\"></circle>\n                        <path className=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"></path>\n                      </svg>\n                      Checking...\n                    </>\n                  ) : (\n                    <>\n                      <svg className=\"w-5 h-5 mr-2\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z\" />\n                      </svg>\n                      Check for Breaches\n                    </>\n                  )}\n                </button>\n              </div>\n            </div>\n\n            {/* Results Display */}\n            {breachResult && (\n              <div className=\"bg-white rounded-2xl p-6 shadow-sm border border-gray-100\">\n                <div className=\"flex items-center mb-4\">\n                  {breachResult.breached ? (\n                    <div className=\"w-12 h-12 bg-red-100 rounded-xl flex items-center justify-center mr-4\">\n                      <svg className=\"w-6 h-6 text-red-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z\" />\n                      </svg>\n                    </div>\n                  ) : (\n                    <div className=\"w-12 h-12 bg-green-100 rounded-xl flex items-center justify-center mr-4\">\n                      <svg className=\"w-6 h-6 text-green-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z\" />\n                      </svg>\n                    </div>\n                  )}\n                  <div className=\"flex-1\">\n                    <h2 className=\"text-xl font-bold text-black\">\n                      {breachResult.breached ? 'Breaches Found' : 'No Breaches Detected'}\n                    </h2>\n                    <p className=\"text-gray-600\">\n                      {breachResult.breached ? `${breachResult.breach_count} breach(es) found` : 'Your email is secure'}\n                    </p>\n                    <p className=\"text-sm text-gray-500 mt-1\">\n                      Checked: {breachEmail}\n                    </p>\n                  </div>\n                </div>\n\n                <div className=\"mb-4\">\n                  <p className={`text-lg ${breachResult.breached ? 'text-red-700' : 'text-green-700'}`}>\n                    {breachResult.message}\n                  </p>\n                </div>\n\n                {breachResult.breached && breachResult.breaches && breachResult.breaches.length > 0 && (\n                  <div className=\"space-y-3\">\n                    <h3 className=\"font-semibold text-gray-800\">Affected Services:</h3>\n                    {breachResult.breaches.map((breach, index) => (\n                      <div key={index} className=\"p-4 bg-red-50 border border-red-200 rounded-lg\">\n                        <div className=\"flex items-start justify-between\">\n                          <div className=\"flex-1\">\n                            <h4 className=\"font-medium text-red-800 mb-1\">{breach.name}</h4>\n                            <p className=\"text-red-700 text-sm mb-2\">{breach.domain}</p>\n                            <div className=\"flex items-center gap-2 mb-2\">\n                              <span className=\"text-red-600 text-xs\">Breached: {breach.date}</span>\n                              <span className=\"text-red-600 text-xs\"></span>\n                              <span className=\"text-red-600 text-xs\">{breach.data.join(', ')}</span>\n                            </div>\n                          </div>\n                          <div className=\"text-red-400 ml-3\">\n                            <svg className=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                              <path fillRule=\"evenodd\" d=\"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z\" clipRule=\"evenodd\" />\n                            </svg>\n                          </div>\n                        </div>\n                      </div>\n                    ))}\n                  </div>\n                )}\n\n                {breachResult.demo_mode && (\n                  <div className=\"mt-4 p-3 bg-blue-50 border border-blue-200 rounded-lg\">\n                    <div className=\"flex items-center\">\n                      <svg className=\"w-5 h-5 text-blue-600 mr-2\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\" />\n                      </svg>\n                      <span className=\"text-blue-800 text-sm\">Demo mode - Results are simulated for testing purposes</span>\n                    </div>\n                  </div>\n                )}\n\n                {/* Security Recommendations */}\n                <div className=\"mt-6 pt-4 border-t border-gray-200\">\n                  <h3 className=\"text-lg font-semibold text-black mb-4\">Security Recommendations</h3>\n                  \n                  <div className=\"space-y-4\">\n                    {/* MFA Recommendation */}\n                    <div className=\"p-4 bg-blue-50 border border-blue-200 rounded-lg\">\n                      <div className=\"flex items-start\">\n                        <div className=\"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center mr-3 flex-shrink-0\">\n                          <svg className=\"w-5 h-5 text-blue-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z\" />\n                          </svg>\n                        </div>\n                        <div className=\"flex-1\">\n                          <h4 className=\"font-medium text-blue-800 mb-1\">Enable Multi-Factor Authentication (MFA)</h4>\n                          <p className=\"text-blue-700 text-sm mb-3\">Add an extra layer of security to your accounts with MFA apps like Google Authenticator, Authy, or Microsoft Authenticator.</p>\n                          <div className=\"flex flex-wrap gap-2\">\n                            <span className=\"px-2 py-1 bg-blue-100 text-blue-700 text-xs rounded-full\">Google Authenticator</span>\n                            <span className=\"px-2 py-1 bg-blue-100 text-blue-700 text-xs rounded-full\">Authy</span>\n                            <span className=\"px-2 py-1 bg-blue-100 text-blue-700 text-xs rounded-full\">Microsoft Authenticator</span>\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n\n                    {/* Password Security */}\n                    <div className=\"p-4 bg-green-50 border border-green-200 rounded-lg\">\n                      <div className=\"flex items-start\">\n                        <div className=\"w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center mr-3 flex-shrink-0\">\n                          <svg className=\"w-5 h-5 text-green-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z\" />\n                          </svg>\n                        </div>\n                        <div className=\"flex-1\">\n                          <h4 className=\"font-medium text-green-800 mb-1\">Use Strong, Unique Passwords</h4>\n                          <p className=\"text-green-700 text-sm mb-3\">Generate secure passwords for each account to prevent credential stuffing attacks.</p>\n                          <button \n                            onClick={() => setShowPasswordGenerator(true)}\n                            className=\"inline-flex items-center px-3 py-2 bg-green-600 text-white text-sm font-medium rounded-lg hover:bg-green-700 transition-colors\"\n                          >\n                            <svg className=\"w-4 h-4 mr-2\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z\" />\n                            </svg>\n                            Generate Secure Password\n                          </button>\n                        </div>\n                      </div>\n                    </div>\n\n                    {/* Regular Monitoring */}\n                    <div className=\"p-4 bg-purple-50 border border-purple-200 rounded-lg\">\n                      <div className=\"flex items-start\">\n                        <div className=\"w-10 h-10 bg-purple-100 rounded-lg flex items-center justify-center mr-3 flex-shrink-0\">\n                          <svg className=\"w-5 h-5 text-purple-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M13 10V3L4 14h7v7l9-11h-7z\" />\n                          </svg>\n                        </div>\n                        <div className=\"flex-1\">\n                          <h4 className=\"font-medium text-purple-800 mb-1\">Monitor Your Accounts Regularly</h4>\n                          <p className=\"text-purple-700 text-sm mb-3\">Use Remaleh Protect regularly to check for new breaches and stay updated on security threats.</p>\n                          <div className=\"flex items-center text-purple-600 text-sm\">\n                            <svg className=\"w-4 h-4 mr-1\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z\" />\n                            </svg>\n                            Check back monthly for new breaches\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n\n                    {/* Password Manager */}\n                    <div className=\"p-4 bg-orange-50 border border-orange-200 rounded-lg\">\n                      <div className=\"flex items-start\">\n                        <div className=\"w-10 h-10 bg-orange-100 rounded-lg flex items-center justify-center mr-3 flex-shrink-0\">\n                          <svg className=\"w-5 h-5 text-orange-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10\" />\n                          </svg>\n                        </div>\n                        <div className=\"flex-1\">\n                          <h4 className=\"font-medium text-orange-800 mb-1\">Use a Password Manager</h4>\n                          <p className=\"text-orange-700 text-sm mb-3\">Store and manage your passwords securely with trusted password managers.</p>\n                          <div className=\"flex flex-wrap gap-2\">\n                            <span className=\"px-2 py-1 bg-orange-100 text-orange-700 text-xs rounded-full\">Bitwarden</span>\n                            <span className=\"px-2 py-1 bg-orange-100 text-orange-700 text-xs rounded-full\">1Password</span>\n                            <span className=\"px-2 py-1 bg-orange-100 text-orange-700 text-xs rounded-full\">LastPass</span>\n                            <span className=\"px-2 py-1 bg-orange-100 text-orange-700 text-xs rounded-full\">Dashlane</span>\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n\n                <div className=\"mt-6 pt-4 border-t border-gray-200\">\n                  <button \n                    onClick={() => {\n                      setBreachEmail('')\n                      setBreachResult(null)\n                      setBreachError('')\n                    }}\n                    className=\"w-full bg-gray-100 text-gray-700 py-3 px-6 rounded-xl font-medium hover:bg-gray-200 transition-all duration-200\"\n                  >\n                    Check Another Email\n                  </button>\n                </div>\n              </div>\n            )}\n\n            {/* How It Works Section */}\n            <div className=\"bg-white rounded-2xl p-6 shadow-sm border border-gray-100\">\n              <h2 className=\"text-lg font-semibold text-black mb-4\">How It Works</h2>\n              \n              <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n                <div className=\"text-center p-4\">\n                  <div className=\"w-12 h-12 bg-[#21a1ce] bg-opacity-10 rounded-xl flex items-center justify-center mx-auto mb-3\">\n                    <span className=\"text-[#21a1ce] font-bold text-lg\">1</span>\n                  </div>\n                  <h3 className=\"font-medium text-gray-800 mb-2\">Enter Email</h3>\n                  <p className=\"text-gray-600 text-sm\">Provide your email address securely</p>\n                </div>\n                \n                <div className=\"text-center p-4\">\n                  <div className=\"w-12 h-12 bg-[#21a1ce] bg-opacity-10 rounded-xl flex items-center justify-center mx-auto mb-3\">\n                    <span className=\"text-[#21a1ce] font-bold text-lg\">2</span>\n                  </div>\n                  <h3 className=\"font-medium text-gray-800 mb-2\">Scan Database</h3>\n                  <p className=\"text-gray-600 text-sm\">We check against known breaches</p>\n                </div>\n                \n                <div className=\"text-center p-4\">\n                  <div className=\"w-12 h-12 bg-[#21a1ce] bg-opacity-10 rounded-xl flex items-center justify-center mx-auto mb-3\">\n                    <span className=\"text-[#21a1ce] font-bold text-lg\">3</span>\n                  </div>\n                  <h3 className=\"font-medium text-gray-800 mb-2\">Get Results</h3>\n                  <p className=\"text-gray-600 text-sm\">Instant results and recommendations</p>\n                </div>\n              </div>\n            </div>\n\n            {/* Security Features */}\n            <div className=\"bg-white rounded-2xl p-6 shadow-sm border border-gray-100\">\n              <h2 className=\"text-lg font-semibold text-black mb-4\">Security Features</h2>\n              \n              <div className=\"space-y-3\">\n                <div className=\"flex items-center p-3 bg-green-50 rounded-lg border border-green-200\">\n                  <svg className=\"w-5 h-5 text-green-600 mr-3\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z\" />\n                  </svg>\n                  <span className=\"text-green-800 text-sm\">Your data is never stored or shared</span>\n                </div>\n                \n                <div className=\"flex items-center p-3 bg-blue-50 rounded-lg border border-blue-200\">\n                  <svg className=\"w-5 h-5 text-blue-600 mr-3\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z\" />\n                  </svg>\n                  <span className=\"text-blue-800 text-sm\">Real-time breach database updates</span>\n                </div>\n                \n                <div className=\"flex items-center p-3 bg-purple-50 rounded-lg border border-purple-200\">\n                  <svg className=\"w-5 h-5 text-purple-600 mr-3\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M13 10V3L4 14h7v7l9-11h-7z\" />\n                  </svg>\n                  <span className=\"text-purple-800 text-sm\">Instant results and notifications</span>\n                </div>\n              </div>\n            </div>\n          </div>\n        )\n      case 'scam':\n        return (\n          <div className=\"space-y-6\">\n            {/* Header Section */}\n            <div className=\"bg-white rounded-2xl p-6 shadow-sm border border-gray-100\">\n              <div className=\"flex items-center mb-4\">\n                <div className=\"w-12 h-12 bg-[#21a1ce] rounded-xl flex items-center justify-center mr-4\">\n                  <svg className=\"w-6 h-6 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z\" />\n                  </svg>\n                </div>\n                <div>\n                  <h1 className=\"text-2xl font-bold text-black\">Scam Analysis</h1>\n                  <p className=\"text-gray-600\">Advanced threat detection</p>\n                </div>\n              </div>\n              \n              <p className=\"text-gray-700 mb-6\">Analyze suspicious messages, links, and emails for potential scams using advanced pattern recognition and threat intelligence.</p>\n              \n              {/* API Status Indicator */}\n              <div className=\"flex items-center space-x-2 text-sm\">\n                <div className=\"w-2 h-2 bg-green-500 rounded-full animate-pulse\"></div>\n                <span className=\"text-gray-600\">Connected to Remaleh Protect Security Engine</span>\n                <button \n                  onClick={async () => {\n                    try {\n                      const response = await fetch(`${API}/api/security/status`)\n                      if (response.ok) {\n                        const data = await response.json()\n                        console.log('Security Engine Status:', data)\n                        alert(`Security Engine Status: ${data.status}\\nVersion: ${data.version}\\nServices: ${Object.keys(data.available_services).length} available`)\n                      }\n                    } catch (error) {\n                      console.error('Status check failed:', error)\n                      alert('Unable to check Security Engine status')\n                    }\n                  }}\n                  className=\"ml-2 text-xs text-[#21a1ce] hover:text-[#1a8bb8] underline cursor-pointer\"\n                >\n                  Check Status\n                </button>\n              </div>\n            </div>\n\n            {/* Input Section */}\n            <div className=\"bg-white rounded-2xl p-6 shadow-sm border border-gray-100\">\n              <h2 className=\"text-lg font-semibold text-black mb-4\">Analyze Content</h2>\n              \n              <div className=\"space-y-4\">\n                {/* Content Type Selection */}\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                    Content Type\n                  </label>\n                  <div className=\"grid grid-cols-3 gap-3\">\n                    {[\n                      { id: 'message', label: 'Message', icon: '' },\n                      { id: 'link', label: 'Link', icon: '' },\n                      { id: 'email', label: 'Email', icon: '' }\n                    ].map((type) => (\n                      <button\n                        key={type.id}\n                        onClick={() => setScamType(type.id)}\n                        className={`p-3 rounded-xl border-2 transition-all duration-200 ${\n                          scamType === type.id\n                            ? 'border-[#21a1ce] bg-[#21a1ce] bg-opacity-10'\n                            : 'border-gray-200 hover:border-gray-300'\n                        }`}\n                      >\n                        <div className=\"text-center\">\n                          <div className=\"text-2xl mb-1\">{type.icon}</div>\n                          <div className=\"text-sm font-medium text-gray-700\">{type.label}</div>\n                        </div>\n                      </button>\n                    ))}\n                  </div>\n                </div>\n\n                {/* Content Input */}\n                <div>\n                  <label htmlFor=\"scamInput\" className=\"block text-sm font-medium text-gray-700 mb-2\">\n                    {scamType === 'message' ? 'Message Content' : scamType === 'link' ? 'URL or Link' : 'Email Content'}\n                  </label>\n                  <div className=\"relative\">\n                    {scamType === 'link' ? (\n                      <div className=\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\">\n                        <svg className=\"h-5 w-5 text-gray-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1\" />\n                        </svg>\n                      </div>\n                    ) : scamType === 'email' ? (\n                      <div className=\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\">\n                        <svg className=\"h-5 w-5 text-gray-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M16 12a4 4 0 10-8 0 4 4 0 008 0zm0 0v1.5a2.5 2.5 0 005 0V12a9 9 0 10-9 9m4.5-1.206a8.959 8.959 0 01-4.5 1.207\" />\n                        </svg>\n                      </div>\n                    ) : (\n                      <div className=\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\">\n                        <svg className=\"h-5 w-5 text-gray-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z\" />\n                        </svg>\n                      </div>\n                    )}\n                    <textarea\n                      id=\"scamInput\"\n                      value={scamInput}\n                      onChange={(e) => setScamInput(e.target.value)}\n                      onKeyDown={(e) => {\n                        if (e.key === 'Enter' && e.ctrlKey && !isAnalyzing && scamInput.trim()) {\n                          handleScamAnalysis()\n                        }\n                      }}\n                      placeholder={\n                        scamType === 'message' \n                          ? 'Paste the suspicious message here...' \n                          : scamType === 'link' \n                          ? 'Enter the URL or link to analyze...' \n                          : 'Paste the email content here...'\n                      }\n                      rows={4}\n                      className=\"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-[#21a1ce] focus:border-transparent transition-all duration-200 resize-none\"\n                      disabled={isAnalyzing}\n                    />\n                  </div>\n                  <p className=\"text-xs text-gray-500 mt-1\">\n                    Press Ctrl+Enter to analyze quickly\n                  </p>\n                  <div className=\"mt-2 p-2 bg-gray-50 rounded-lg border border-gray-200\">\n                    <p className=\"text-xs text-gray-600\">\n                      <strong>Content Guide:</strong> {\n                        scamType === 'link' \n                          ? 'Paste a single URL (e.g., https://example.com) or a message containing URLs'\n                          : scamType === 'email' \n                          ? 'Paste email content with headers (From:, To:, Subject:) or email body text'\n                          : 'Paste any suspicious message, text, or content for analysis'\n                      }\n                    </p>\n                    <p className=\"text-xs text-gray-500 mt-1\">\n                       <strong>Smart Detection:</strong> The system automatically detects content type and routes to the best analysis method\n                    </p>\n                  </div>\n                </div>\n\n                {/* Error Display */}\n                {scamError && (\n                  <div className=\"p-3 bg-red-50 border border-red-200 rounded-lg\">\n                    <div className=\"flex items-center\">\n                      <svg className=\"w-5 h-5 text-red-600 mr-2\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z\" />\n                      </svg>\n                      <span className=\"text-red-800 text-sm\">{scamError}</span>\n                    </div>\n                  </div>\n                )}\n\n                {/* Analyze Button */}\n                <button \n                  onClick={handleScamAnalysis}\n                  disabled={isAnalyzing || !scamInput.trim()}\n                  className=\"w-full bg-[#21a1ce] text-white py-3 px-6 rounded-xl font-medium hover:bg-[#1a8bb8] transition-all duration-200 shadow-sm hover:shadow-md flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed\"\n                >\n                  {isAnalyzing ? (\n                    <>\n                      <svg className=\"animate-spin -ml-1 mr-3 h-5 w-5 text-white\" fill=\"none\" viewBox=\"0 0 24 24\">\n                        <circle className=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"4\"></circle>\n                        <path className=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"></path>\n                      </svg>\n                      Analyzing with {scamType === 'link' ? 'Link Analysis Engine' : scamType === 'email' ? 'Enhanced Scam Detection Engine' : 'Comprehensive Scam Analysis Engine'}...\n                    </>\n                  ) : (\n                    <>\n                      <svg className=\"w-5 h-5 mr-2\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z\" />\n                      </svg>\n                      Analyze for Scams\n                    </>\n                  )}\n                </button>\n              </div>\n            </div>\n\n            {/* Results Display */}\n            {scamResult && (\n              <div className=\"bg-white rounded-2xl p-6 shadow-sm border border-gray-100\">\n                <div className=\"flex items-center mb-4\">\n                  <div className={`w-12 h-12 rounded-xl flex items-center justify-center mr-4 ${\n                    scamResult.riskLevel === 'scam' ? 'bg-red-100' :\n                    scamResult.riskLevel === 'suspicious' ? 'bg-yellow-100' :\n                    scamResult.riskLevel === 'safe' ? 'bg-green-100' :\n                    'bg-green-100'\n                  }`}>\n                    <svg className={`w-6 h-6 ${\n                      scamResult.riskLevel === 'scam' ? 'text-red-600' :\n                      scamResult.riskLevel === 'suspicious' ? 'text-yellow-600' :\n                      scamResult.riskLevel === 'safe' ? 'text-green-600' :\n                      'text-green-600'\n                    }`} fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z\" />\n                    </svg>\n                  </div>\n                  <div>\n                    <h2 className=\"text-xl font-bold text-black\">\n                      Risk Level: {scamResult.riskLevel === 'safe' ? 'Safe ' : \n                                  scamResult.riskLevel === 'scam' ? 'Scam ' :\n                                  scamResult.riskLevel === 'suspicious' ? 'Suspicious ' :\n                                  scamResult.riskLevel.charAt(0).toUpperCase() + scamResult.riskLevel.slice(1)}\n                      {scamResult.riskLevel === 'scam' ? ' - IMMEDIATE ACTION REQUIRED' : ''}\n                      {scamResult.riskLevel === 'safe' ? ' - No threats detected' : ''}\n                      {scamResult.riskLevel === 'suspicious' ? ' - Exercise caution' : ''}\n                    </h2>\n                    <p className=\"text-gray-600\">\n                      Risk Score: {scamResult.riskScore}/100\n                      {scamResult.riskScore >= 70 ? ' - IMMEDIATE ACTION REQUIRED' : ''}\n                      {scamResult.riskLevel === 'safe' ? ' - Content appears safe' : ''}\n                      {scamResult.riskLevel === 'suspicious' ? ' - Review carefully' : ''}\n                    </p>\n                    <p className=\"text-xs text-gray-500 mt-1\">\n                      Analyzed with {scamType === 'link' ? 'Link Analysis Engine' : scamType === 'email' ? 'Enhanced Scam Detection Engine' : 'Comprehensive Scam Analysis Engine'}\n                    </p>\n                    {scamResult.contentTypeNote && (\n                      <div className=\"mt-2 p-2 bg-blue-50 rounded-lg border border-blue-200\">\n                        <div className=\"flex items-center\">\n                          <svg className=\"w-4 h-4 text-blue-600 mr-2\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\" />\n                          </svg>\n                          <span className=\"text-blue-800 text-xs\">\n                            <strong>Content Detection:</strong> {scamResult.contentTypeNote}\n                          </span>\n                        </div>\n                      </div>\n                    )}\n                  </div>\n                </div>\n\n                {/* Scam Warning */}\n                {(scamResult.riskLevel === 'scam' || scamResult.riskScore >= 70) && (\n                  <div className=\"mb-4 p-4 bg-red-50 border-2 border-red-300 rounded-xl\">\n                    <div className=\"flex items-center mb-3\">\n                      <svg className=\"w-6 h-6 text-red-600 mr-2\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z\" />\n                      </svg>\n                      <h3 className=\"text-lg font-bold text-red-800\"> SCAM DETECTED</h3>\n                    </div>\n                    <div className=\"space-y-2 text-red-700\">\n                      <p className=\"font-medium\">This content shows multiple signs of being a scam:</p>\n                      <ul className=\"list-disc list-inside space-y-1 text-sm\">\n                        {scamResult.riskLevel === 'scam' && <li>Scam risk level - immediate action required</li>}\n                        {scamResult.riskScore >= 70 && <li>Very high risk score ({scamResult.riskScore}/100)</li>}\n                        {scamResult.indicators && scamResult.indicators.length > 0 && <li>Multiple suspicious indicators detected</li>}\n                        <li>Do NOT click any links or respond to this message</li>\n                        <li>Contact Remaleh Guardians via chat immediately</li>\n                      </ul>\n                    </div>\n                  </div>\n                )}\n\n                {/* Suspicious Content Warning */}\n                {scamResult.riskLevel === 'suspicious' && (\n                  <div className=\"mb-4 p-4 bg-yellow-50 border-2 border-yellow-300 rounded-xl\">\n                    <div className=\"flex items-center mb-3\">\n                      <svg className=\"w-6 h-6 text-yellow-600 mr-2\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z\" />\n                      </svg>\n                      <h3 className=\"text-lg font-bold text-yellow-800\"> SUSPICIOUS CONTENT DETECTED</h3>\n                    </div>\n                    <div className=\"space-y-2 text-yellow-700\">\n                      <p className=\"font-medium\">This content shows some concerning signs:</p>\n                      <ul className=\"list-disc list-inside space-y-1 text-sm\">\n                        <li>Exercise caution with this content</li>\n                        <li>Verify authenticity before responding</li>\n                        <li>Do not share personal information</li>\n                        <li>Contact Remaleh Guardians via chat if you need assistance</li>\n                      </ul>\n                    </div>\n                  </div>\n                )}\n\n                {/* Safe Content Message */}\n                {scamResult.riskLevel === 'safe' && (\n                  <div className=\"mb-4 p-4 bg-green-50 border-2 border-green-300 rounded-xl\">\n                    <div className=\"flex items-center mb-3\">\n                      <svg className=\"w-6 h-6 text-green-600 mr-2\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z\" />\n                      </svg>\n                      <h3 className=\"text-lg font-bold text-green-800\"> CONTENT APPEARS SAFE</h3>\n                    </div>\n                    <div className=\"space-y-2 text-green-700\">\n                      <p className=\"font-medium\">This content shows no obvious signs of being a scam:</p>\n                      <ul className=\"list-disc list-inside space-y-1 text-sm\">\n                        <li>Low risk score ({scamResult.riskScore}/100)</li>\n                        <li>No suspicious patterns detected</li>\n                        <li>Continue to exercise normal caution</li>\n                        <li>If you have concerns, contact Remaleh Guardians via chat</li>\n                      </ul>\n                    </div>\n                  </div>\n                )}\n\n                {/* Risk Indicators - Handle both object and array formats */}\n                {scamResult.indicators && (\n                  <div className=\"mb-4\">\n                    <h3 className=\"font-semibold text-gray-800 mb-2\">Detected Indicators:</h3>\n                    \n                    {/* Object format indicators (with counts) */}\n                    {Object.keys(scamResult.indicators).length > 0 && !Array.isArray(scamResult.indicators) && (\n                      <div className=\"grid grid-cols-2 gap-2\">\n                        {Object.entries(scamResult.indicators).map(([indicator, count]) => (\n                          <div key={indicator} className=\"p-2 bg-gray-50 rounded-lg border border-gray-200\">\n                            <div className=\"flex items-center justify-between\">\n                              <span className=\"text-sm font-medium text-gray-700 capitalize\">\n                                {indicator.replace(/([A-Z])/g, ' $1').trim()}\n                              </span>\n                              <span className=\"text-xs bg-[#21a1ce] text-white px-2 py-1 rounded-full\">\n                                {count}\n                              </span>\n                            </div>\n                          </div>\n                        ))}\n                      </div>\n                    )}\n                    \n                    {/* Array format indicators (link analysis, enhanced scam) */}\n                    {Array.isArray(scamResult.indicators) && scamResult.indicators.length > 0 && (\n                      <div className=\"space-y-2\">\n                        {scamResult.indicators.map((indicator, index) => (\n                          <div key={index} className=\"p-3 bg-yellow-50 rounded-lg border border-yellow-200\">\n                            <div className=\"flex items-center\">\n                              <svg className=\"w-4 h-4 text-yellow-600 mr-2\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z\" />\n                              </svg>\n                              <span className=\"text-yellow-800 text-sm\">{indicator}</span>\n                            </div>\n                          </div>\n                        ))}\n                      </div>\n                    )}\n                    \n                    {/* No indicators case */}\n                    {(!scamResult.indicators || \n                      (Array.isArray(scamResult.indicators) && scamResult.indicators.length === 0) ||\n                      (!Array.isArray(scamResult.indicators) && Object.keys(scamResult.indicators).length === 0)) && (\n                      <div className=\"p-3 bg-green-50 rounded-lg border border-green-200\">\n                        <div className=\"flex items-center\">\n                          <svg className=\"w-4 h-4 text-green-600 mr-2\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z\" />\n                          </svg>\n                          <span className=\"text-green-800 text-sm\">No suspicious indicators detected</span>\n                        </div>\n                      </div>\n                    )}\n                  </div>\n                )}\n\n                {/* Threats Detected section removed - now handled in consolidated indicators above */}\n\n                {/* Link Analysis Details */}\n                {scamResult.linkDetails && (\n                  <div className=\"mb-4\">\n                    <h3 className=\"font-semibold text-gray-800 mb-2\">Link Analysis Details:</h3>\n                    <div className=\"space-y-2\">\n                      {scamResult.linkDetails.indicators && scamResult.linkDetails.indicators.map((indicator, index) => (\n                        <div key={index} className=\"p-2 bg-yellow-50 rounded-lg border border-yellow-200\">\n                          <span className=\"text-yellow-800 text-sm\">{indicator}</span>\n                        </div>\n                      ))}\n                    </div>\n                  </div>\n                )}\n\n                {/* Email Analysis Details */}\n                {scamResult.emailDetails && (\n                  <div className=\"mb-4\">\n                    <h3 className=\"font-semibold text-gray-800 mb-2\">Email Analysis Details:</h3>\n                    <div className=\"space-y-2\">\n                      {scamResult.emailDetails.scam_categories && scamResult.emailDetails.scam_categories.map((category, index) => (\n                        <div key={index} className=\"p-2 bg-purple-50 rounded-lg border border-purple-200\">\n                          <span className=\"text-purple-800 text-sm\">{category}</span>\n                        </div>\n                      ))}\n                    </div>\n                  </div>\n                )}\n\n                {/* Recommendations */}\n                <div className=\"mb-4\">\n                  <h3 className=\"font-semibold text-gray-800 mb-2\">Security Recommendations:</h3>\n                  <div className=\"space-y-2\">\n                    {scamResult.recommendations.map((rec, index) => (\n                      <div key={index} className=\"flex items-start p-3 bg-blue-50 rounded-lg border border-blue-200\">\n                        <svg className=\"w-4 h-4 text-blue-600 mr-2 mt-0.5 flex-shrink-0\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\" />\n                        </svg>\n                        <span className=\"text-blue-800 text-sm\">{rec}</span>\n                      </div>\n                    ))}\n                  </div>\n                </div>\n\n                {/* Reset Button */}\n                <div className=\"pt-4 border-t border-gray-200\">\n                  <button \n                    onClick={() => {\n                      setScamInput('')\n                      setScamResult(null)\n                      setScamError('')\n                    }}\n                    className=\"w-full bg-gray-100 text-gray-700 py-3 px-6 rounded-xl font-medium hover:bg-gray-200 transition-all duration-200\"\n                  >\n                    Analyze Another Item\n                  </button>\n                </div>\n              </div>\n            )}\n\n            {/* How It Works Section */}\n            <div className=\"bg-white rounded-2xl p-6 shadow-sm border border-gray-100\">\n              <h2 className=\"text-lg font-semibold text-black mb-4\">How Scam Analysis Works</h2>\n              \n              <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n                <div className=\"text-center p-4\">\n                  <div className=\"w-12 h-12 bg-[#21a1ce] bg-opacity-10 rounded-xl flex items-center justify-center mx-auto mb-3\">\n                    <span className=\"text-[#21a1ce] font-bold text-lg\">1</span>\n                  </div>\n                  <h3 className=\"font-medium text-gray-800 mb-2\">Input Content</h3>\n                  <p className=\"text-gray-600 text-sm\">Paste suspicious messages, links, or emails</p>\n                </div>\n                \n                <div className=\"text-center p-4\">\n                  <div className=\"w-12 h-12 bg-[#21a1ce] bg-opacity-10 rounded-xl flex items-center justify-center mx-auto mb-3\">\n                    <span className=\"text-[#21a1ce] font-bold text-lg\">2</span>\n                  </div>\n                  <h3 className=\"font-medium text-gray-800 mb-2\">AI Analysis</h3>\n                  <p className=\"text-gray-600 text-sm\">Advanced pattern recognition scans for threats</p>\n                </div>\n                \n                <div className=\"text-center p-4\">\n                  <div className=\"w-12 h-12 bg-[#21a1ce] bg-opacity-10 rounded-xl flex items-center justify-center mx-auto mb-3\">\n                    <span className=\"text-[#21a1ce] font-bold text-lg\">3</span>\n                  </div>\n                  <h3 className=\"font-medium text-gray-800 mb-2\">Get Results</h3>\n                  <p className=\"text-gray-600 text-sm\">Risk assessment and security recommendations</p>\n                </div>\n              </div>\n            </div>\n\n            {/* Security Features */}\n            <div className=\"bg-white rounded-2xl p-6 shadow-sm border border-gray-100\">\n              <h2 className=\"text-lg font-semibold text-black mb-4\">Detection Capabilities</h2>\n              \n              <div className=\"space-y-3\">\n                <div className=\"flex items-center p-3 bg-red-50 rounded-lg border border-red-200\">\n                  <svg className=\"w-5 h-5 text-red-600 mr-3\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z\" />\n                  </svg>\n                  <span className=\"text-red-800 text-sm\">Phishing attempts and social engineering</span>\n                </div>\n                \n                <div className=\"flex items-center p-3 bg-yellow-50 rounded-lg border border-yellow-200\">\n                  <svg className=\"w-5 h-5 text-yellow-600 mr-3\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M13 10V3L4 14h7v7l9-11h-7z\" />\n                  </svg>\n                  <span className=\"text-yellow-800 text-sm\">Suspicious links and URLs</span>\n                </div>\n                \n                <div className=\"flex items-center p-3 bg-purple-50 rounded-lg border border-purple-200\">\n                  <svg className=\"w-5 h-5 text-purple-600 mr-3\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z\" />\n                  </svg>\n                  <span className=\"text-yellow-800 text-sm\">Financial fraud and money scams</span>\n                </div>\n              </div>\n            </div>\n          </div>\n        )\n      case 'chat':\n        return (\n          <div className=\"space-y-4\">\n            {/* Chat Header */}\n            <div className=\"bg-white rounded-2xl p-4 shadow-sm border border-gray-100\">\n              <div className=\"text-center\">\n                <div className=\"w-10 h-10 bg-[#21a1ce] bg-opacity-10 rounded-full flex items-center justify-center mx-auto mb-2\">\n                  <svg className=\"w-5 h-5 text-[#21a1ce]\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z\" />\n                  </svg>\n                </div>\n                <p className=\"text-gray-600 text-sm mb-2\">Your AI cybersecurity assistant for instant help and guidance</p>\n                <div className=\"bg-[#21a1ce] bg-opacity-10 px-3 py-2 rounded-lg border border-[#21a1ce] border-opacity-20 inline-block\">\n                  <p className=\"text-[#21a1ce] text-xs font-medium\">\n                     <strong>Need human help?</strong> Send \"connect me with a Remaleh Guardian\"\n                  </p>\n                </div>\n              </div>\n            </div>\n\n            {/* Chat Interface */}\n            <div className=\"bg-white rounded-2xl shadow-sm border border-gray-100\">\n              <ChatAssistant setActiveTab={setActiveTab} />\n            </div>\n          </div>\n        )\n      case 'learn':\n        return <LearnHub setActiveTab={setActiveTab} />\n      case 'admin':\n        return <AdminDashboard setActiveTab={setActiveTab} />\n      case 'login':\n        return <Login onLoginSuccess={() => setActiveTab('home')} onSwitchToRegister={() => setActiveTab('register')} />\n      case 'register':\n        return <Register onRegisterSuccess={() => setActiveTab('home')} />\n      case 'profile':\n        return <ProfileSettings setActiveTab={setActiveTab} />\n      case 'community':\n        return <CommunityHub setActiveTab={setActiveTab} />\n      case 'community_reports':\n        return <CommunityReporting setActiveTab={setActiveTab} />\n      default:\n        return (\n          <div className=\"bg-white rounded-2xl p-6 shadow-sm border border-gray-100\">\n            <h1 className=\"text-2xl font-bold text-black mb-4\">Welcome to Remaleh Protect</h1>\n            <p className=\"text-gray-700\">Your digital security companion</p>\n          </div>\n        )\n    }\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gray-50\">\n      {/* Header with Profile Icon */}\n      <header className=\"bg-[#21a1ce] px-6 py-4\">\n        <div className=\"flex items-center justify-between\">\n          <div className=\"flex-1 text-center\">\n            <img \n              src=\"/Remaleh-logo-full-2.jpg\" \n              alt=\"Remaleh\" \n              className=\"h-8 w-auto mx-auto\"\n            />\n          </div>\n          \n          {/* Profile Icon - Clickable */}\n          <div className=\"relative\">\n            <button\n              onClick={handleProfileClick}\n              className=\"w-8 h-8 bg-white rounded-full flex items-center justify-center shadow-sm hover:shadow-md transition-all duration-200 cursor-pointer\"\n            >\n              {isAuthenticated ? (\n                <span className=\"text-[#21a1ce] font-semibold text-sm\">\n                  {getUserInitials()}\n                </span>\n              ) : (\n                <svg className=\"w-4 h-4 text-[#21a1ce]\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15 7a4 4 0 10-4 4m6 0a6 6 0 11-12 0 6 6 0 0112 0zm-3 4l6 6m0 0h-3m3 0v-3\" />\n                </svg>\n              )}\n            </button>\n            \n            {/* Profile Dropdown */}\n            {showProfileDropdown && (\n              <div className=\"absolute right-0 mt-2 w-48 bg-white rounded-xl shadow-lg border border-gray-200 py-2 z-50 profile-dropdown\">\n                {isAuthenticated ? (\n                  <>\n                    <div className=\"px-4 py-2 border-b border-gray-100\">\n                      <p className=\"text-sm font-medium text-gray-900\">{user?.name || 'User'}</p>\n                      <p className=\"text-xs text-gray-500\">{user?.email}</p>\n                    </div>\n                    \n                    <button\n                      onClick={() => setActiveTab('profile')}\n                      className=\"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 transition-colors\"\n                    >\n                      Profile Settings\n                    </button>\n                    \n                    {/* Admin Dashboard Link - Only show for admin users */}\n                    {(user?.is_admin || user?.role === 'ADMIN' || user?.role === 'MODERATOR') && (\n                      <button\n                        onClick={() => {\n                          setActiveTab('admin')\n                          setShowProfileDropdown(false)\n                        }}\n                        className=\"w-full text-left px-4 py-2 text-sm text-purple-700 hover:bg-purple-50 transition-colors border-t border-gray-100 bg-purple-50\"\n                      >\n                        <div className=\"flex items-center\">\n                          <svg className=\"w-4 h-4 mr-2\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756 2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z\" />\n                            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15 12a0 3 3 0 11-6 0 3 3 0 016 0z\" />\n                          </svg>\n                          {user?.role === 'MODERATOR' && !user?.is_admin ? 'Go to Moderator Dashboard' : 'Go to Admin Dashboard'}\n                        </div>\n                      </button>\n                    )}\n                    \n                    <button\n                      onClick={handleLogout}\n                      className=\"w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-red-50 transition-colors\"\n                    >\n                      Sign Out\n                    </button>\n                  </>\n                ) : (\n                  <>\n                    <button\n                      onClick={() => {\n                        setActiveTab('login')\n                        setShowProfileDropdown(false)\n                      }}\n                      className=\"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 transition-colors\"\n                    >\n                      Sign In\n                    </button>\n                    \n                    <button\n                      onClick={() => {\n                        setActiveTab('register')\n                        setShowProfileDropdown(false)\n                      }}\n                      className=\"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 transition-colors\"\n                    >\n                      Create Account\n                    </button>\n                  </>\n                )}\n              </div>\n            )}\n          </div>\n        </div>\n      </header>\n\n      {/* Main Content */}\n      <main className=\"px-6 py-6 pb-24\">\n        {renderContent()}\n      </main>\n\n      {/* Password Generator Modal */}\n      {showPasswordGenerator && (\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\n          <div className=\"bg-white rounded-2xl max-w-md w-full max-h-[90vh] overflow-y-auto\">\n            <div className=\"p-6\">\n              <div className=\"flex items-center justify-between mb-4\">\n                <h2 className=\"text-xl font-bold text-gray-900\">Password Generator</h2>\n                <button \n                  onClick={() => setShowPasswordGenerator(false)}\n                  className=\"text-gray-400 hover:text-gray-600 transition-colors\"\n                >\n                  <svg className=\"w-6 h-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\n                  </svg>\n                </button>\n              </div>\n              <PasswordGenerator onUse={handlePasswordUse} />\n            </div>\n          </div>\n        </div>\n      )}\n\n\n\n      {/* Bottom Navigation */}\n      <nav className=\"fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 px-6 py-4\">\n        <div className=\"flex justify-around\">\n          {tabs\n            .filter(tab => {\n              // Hide admin tab for non-admin/moderator users\n              if (tab.id === 'admin') {\n                return user?.is_admin || user?.role === 'ADMIN' || user?.role === 'MODERATOR'\n              }\n              return true\n            })\n            .map((tab) => (\n              <button\n                key={tab.id}\n                onClick={() => setActiveTab(tab.id)}\n                className={`flex items-center justify-center w-12 h-12 rounded-2xl transition-all duration-200 ${\n                  activeTab === tab.id\n                    ? 'text-[#21a1ce] bg-[#21a1ce] bg-opacity-15 shadow-lg scale-110'\n                    : 'text-gray-500 hover:text-gray-700 hover:bg-gray-100'\n                }`}\n              >\n                <span className=\"text-2xl\">{tab.icon}</span>\n              </button>\n            ))}\n        </div>\n      </nav>\n    </div>\n  )\n}\n\nexport default App\n\n","import React from 'react'\nimport ReactDOM from 'react-dom/client'\nimport App from './App.jsx'\nimport './index.css'\n\nReactDOM.createRoot(document.getElementById('root')).render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n)\n\n"],"file":"assets/index-112ad2b9.js"}