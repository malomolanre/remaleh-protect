import{r as o,a as qs,R as ss}from"./vendor-b1791c80.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))r(l);new MutationObserver(l=>{for(const c of l)if(c.type==="childList")for(const b of c.addedNodes)b.tagName==="LINK"&&b.rel==="modulepreload"&&r(b)}).observe(document,{childList:!0,subtree:!0});function a(l){const c={};return l.integrity&&(c.integrity=l.integrity),l.referrerPolicy&&(c.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?c.credentials="include":l.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function r(l){if(l.ep)return;l.ep=!0;const c=a(l);fetch(l.href,c)}})();var Rs={exports:{}},xs={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ys=o,Ks=Symbol.for("react.element"),Js=Symbol.for("react.fragment"),Zs=Object.prototype.hasOwnProperty,Qs=Ys.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Xs={key:!0,ref:!0,__self:!0,__source:!0};function Ms(t,s,a){var r,l={},c=null,b=null;a!==void 0&&(c=""+a),s.key!==void 0&&(c=""+s.key),s.ref!==void 0&&(b=s.ref);for(r in s)Zs.call(s,r)&&!Xs.hasOwnProperty(r)&&(l[r]=s[r]);if(t&&t.defaultProps)for(r in s=t.defaultProps,s)l[r]===void 0&&(l[r]=s[r]);return{$$typeof:Ks,type:t,key:c,ref:b,props:l,_owner:Qs.current}}xs.Fragment=Js;xs.jsx=Ms;xs.jsxs=Ms;Rs.exports=xs;var e=Rs.exports,js={},vs=qs;js.createRoot=vs.createRoot,js.hydrateRoot=vs.hydrateRoot;const we="https://api.remalehprotect.remaleh.com.au";console.log("ðŸŒ API Configuration - Production API Base URL:",we);const ce={AUTH:{REGISTER:"/api/auth/register",LOGIN:"/api/auth/login",PROFILE:"/api/auth/profile",REFRESH:"/api/auth/refresh",LOGOUT:"/api/auth/logout",CHANGE_PASSWORD:"/api/auth/change-password"},ADMIN:{USERS:"/api/admin/users",CREATE_USER:"/api/admin/users",USER_DETAILS:"/api/admin/users",USER_UPDATE:"/api/admin/users",USER_SUSPEND:"/api/admin/users",USER_ACTIVATE:"/api/admin/users",USER_DELETE:"/api/admin/users",USER_RESET_PASSWORD:"/api/admin/users",BULK_ACTION:"/api/admin/users/bulk-action",BULK_RESET_PASSWORD:"/api/admin/users/bulk-reset-password",DASHBOARD:"/api/admin/dashboard",MAINTENANCE:"/api/admin/maintenance",COMMUNITY_REPORTS:"/api/admin/community-reports",COMMUNITY_REPORTS_VERIFY:"/api/admin/community-reports",COMMUNITY_REPORTS_REJECT:"/api/admin/community-reports",COMMUNITY_REPORTS_ESCALATE:"/api/admin/community-reports",COMMUNITY_REPORTS_DELETE:"/api/admin/community-reports",COMMUNITY_REPORTS_BULK_ACTION:"/api/admin/community-reports/bulk-action"},THREAT_INTELLIGENCE:{DASHBOARD:"/api/threat_intelligence/dashboard",THREATS:"/api/threat_intelligence/threats",ALERTS:"/api/threat_intelligence/alerts",TRENDS:"/api/threat_intelligence/stats/trends"},RISK_PROFILE:{PROFILE:"/api/risk_profile/profile",SCANS:"/api/risk_profile/scans",LEARNING:"/api/risk_profile/learning/modules",RECOMMENDATIONS:"/api/risk_profile/recommendations"},LEARNING:{MODULES:"/api/learning/modules",PROGRESS:"/api/learning/progress",NEXT_LESSON:"/api/learning/next-lesson"},COMMUNITY:{REPORTS:"/api/community/reports",TRENDING:"/api/community/trending",STATS:"/api/community/stats",ALERTS:"/api/community/alerts",LEADERBOARD:"/api/community/leaderboard",MY_STATS:"/api/community/my-stats"},SCAM:"/api/scam/comprehensive",BREACH:"/api/breach/check",LINK:"/api/link/analyze",CHAT:"/api/chat/"},ns=async(t,s={})=>{const a=localStorage.getItem("authToken");console.log("ðŸŒ API Call - Endpoint:",t),console.log("ðŸŒ API Call - Token present:",!!a),console.log("ðŸŒ API Call - Token value:",a?`${a.substring(0,20)}...`:"None");const r={headers:{"Content-Type":"application/json",...a&&{Authorization:`Bearer ${a}`}},...s};console.log("ðŸŒ API Call - Request headers:",r.headers),console.log("ðŸŒ API Call - Full URL:",`${we}${t}`);try{const l=await fetch(`${we}${t}`,r);if(console.log("ðŸŒ API Call - Response status:",l.status),console.log("ðŸŒ API Call - Response headers:",Object.fromEntries(l.headers.entries())),!l.ok){if(l.status===401){console.log("ðŸŒ API Call - 401 Unauthorized, attempting token refresh...");const c=localStorage.getItem("refreshToken");if(c){console.log("ðŸŒ API Call - Refresh token found, attempting refresh...");const b=await fetch(`${we}${ce.AUTH.REFRESH}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({refresh_token:c})});if(b.ok){const{access_token:p}=await b.json();return console.log("ðŸŒ API Call - Token refresh successful, retrying request..."),localStorage.setItem("authToken",p),r.headers.Authorization=`Bearer ${p}`,await fetch(`${we}${t}`,r)}else console.log("ðŸŒ API Call - Token refresh failed, removing tokens")}localStorage.removeItem("authToken"),localStorage.removeItem("refreshToken")}throw new Error(`HTTP error! status: ${l.status}`)}return l}catch(l){throw console.error("ðŸŒ API Call - Request failed:",l),l}},ge=t=>ns(t,{method:"GET"}),fe=(t,s)=>ns(t,{method:"POST",body:JSON.stringify(s)}),Ie=(t,s)=>(console.log("ðŸ”§ apiPut called with:",{endpoint:t,data:s}),console.log("ðŸ”§ HTTP method will be: PUT"),ns(t,{method:"PUT",body:JSON.stringify(s)})),Ke=t=>ns(t,{method:"DELETE"}),Je={get:t=>ge(t),post:(t,s)=>fe(t,s),put:(t,s)=>Ie(t,s),delete:t=>Ke(t),request:t=>{const{method:s="GET",url:a,data:r,...l}=t;return s==="GET"?ge(a):s==="POST"?fe(a,r):s==="PUT"?Ie(a,r):s==="DELETE"?Ke(a):ns(a,{method:s,body:r?JSON.stringify(r):void 0,...l})}};function J({children:t,className:s="",padding:a="p-4",shadow:r="shadow-sm",hover:l=!1,onClick:c,interactive:b=!1,...p}){const D=`bg-white rounded-xl border border-gray-200 ${r==="shadow"?"shadow":r==="shadow-lg"?"shadow-lg":"shadow-sm"} ${l?"hover:shadow-lg transition-all duration-200":""} ${b?"active:scale-95 transition-transform duration-100":""} ${a} ${s}`.trim(),g=c?"button":"div";return e.jsx(g,{className:D,onClick:c,...p,children:t})}function _e({children:t,className:s=""}){return e.jsx("div",{className:`mb-3 ${s}`,children:t})}function De({children:t,className:s=""}){return e.jsx("div",{className:s,children:t})}function ne({label:t,error:s,helperText:a,fullWidth:r=!1,className:l="",...c}){const b=`w-full px-4 py-3 text-base border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors duration-200 ${s?"border-red-300 focus:ring-red-500 focus:border-red-500":""} ${r?"w-full":""} ${l}`;return e.jsxs("div",{className:`${r?"w-full":""}`,children:[t&&e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:t}),e.jsx("input",{className:b,...c}),s&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:s}),a&&!s&&e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:a})]})}function ys({label:t,error:s,helperText:a,fullWidth:r=!1,rows:l=4,className:c="",...b}){const p=`w-full px-4 py-3 text-base border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors duration-200 resize-none ${s?"border-red-300 focus:ring-red-500 focus:border-red-500":""} ${r?"w-full":""} ${c}`;return e.jsxs("div",{className:`${r?"w-full":""}`,children:[t&&e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:t}),e.jsx("textarea",{className:p,rows:l,...b}),s&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:s}),a&&!s&&e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:a})]})}function te({variant:t="primary",size:s="md",children:a,className:r="",disabled:l=!1,loading:c=!1,...b}){const p="inline-flex items-center justify-center font-medium rounded-lg transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",f={primary:"bg-gradient-to-r from-[#21a1ce] to-[#1a80a3] text-white hover:shadow-lg focus:ring-[#21a1ce]",secondary:"bg-gray-200 text-gray-800 hover:bg-gray-300 focus:ring-gray-500",danger:"bg-red-600 text-white hover:bg-red-700 focus:ring-red-600",success:"bg-green-600 text-white hover:bg-green-700 focus:ring-green-600",warning:"bg-yellow-600 text-white hover:bg-yellow-700 focus:ring-yellow-600",outline:"border-2 border-[#21a1ce] text-[#21a1ce] hover:bg-[#21a1ce] hover:text-white focus:ring-[#21a1ce]"},w={sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-sm",lg:"px-6 py-3 text-base",xl:"px-8 py-4 text-lg"},C=`${p} ${f[t]} ${w[s]} ${r}`.trim();return e.jsxs("button",{className:C,disabled:l||c,...b,children:[c&&e.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),a]})}var et={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const st=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),tt=(t,s)=>{const a=o.forwardRef(({color:r="currentColor",size:l=24,strokeWidth:c=2,absoluteStrokeWidth:b,children:p,...f},w)=>o.createElement("svg",{ref:w,...et,width:l,height:l,stroke:r,strokeWidth:b?Number(c)*24/Number(l):c,className:`lucide lucide-${st(t)}`,...f},[...s.map(([C,O])=>o.createElement(C,O)),...(Array.isArray(p)?p:[p])||[]]));return a.displayName=`${t}`,a};var ue=tt;const ws=ue("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),ts=ue("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),Te=ue("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]),Qe=ue("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["polyline",{points:"22 4 12 14.01 9 11.01",key:"6xbx8j"}]]),ks=ue("Flag",[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]]),at=ue("Key",[["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["path",{d:"m15.5 7.5 3 3L22 7l-3-3",key:"1rn1fs"}]]),As=ue("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),rt=ue("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]),as=ue("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]),gs=ue("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]),os=ue("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),is=ue("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),nt=ue("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]),lt=ue("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),Fe=ue("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z",key:"3xmgem"}]]),Ts=ue("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]),Ps=ue("ThumbsDown",[["path",{d:"M17 14V2",key:"8ymqnk"}],["path",{d:"M9 18.12 10 14H4.17a2 2 0 0 1-1.92-2.56l2.33-8A2 2 0 0 1 6.5 2H20a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-2.76a2 2 0 0 0-1.79 1.11L12 22h0a3.13 3.13 0 0 1-3-3.88Z",key:"s6e0r"}]]),Ds=ue("ThumbsUp",[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2h0a3.13 3.13 0 0 1 3 3.88Z",key:"y3tblf"}]]),cs=ue("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),Us=ue("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),ot=ue("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]),ps=ue("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),Ye=ue("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),it=ue("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),ct=16,Ue={lower:"abcdefghjkmnpqrstuvwxyz",upper:"ABCDEFGHJKMNPQRSTUVWXYZ",digits:"23456789",symbols:"!@#$%^&*()-_=+[]{};:,.?/|~",similar:"ilIoO01"};function fs(t){const s=new Uint32Array(t);return crypto.getRandomValues(s),s}function Is(t){let s="";return t.lower&&(s+=Ue.lower+(t.similar?"il":"")),t.upper&&(s+=Ue.upper+(t.similar?"IO":"")),t.digits&&(s+=(t.similar?"01":"")+Ue.digits),t.symbols&&(s+=Ue.symbols),t.ambiguous&&(s+="{}[]()/\\\\'\\\"`~,;:.<>"),t.similar||(s=[...s].filter(a=>!Ue.similar.includes(a)).join("")),s}function dt(t,s){const a=Is(s);if(!a.length)throw new Error("No character sets selected");const r=[];s.lower&&r.push(Ue.lower),s.upper&&r.push(Ue.upper),s.digits&&r.push(s.similar?Ue.digits+"01":Ue.digits),s.symbols&&r.push(Ue.symbols),s.ambiguous&&r.push("{}[]()/\\\\'\\\"`~,;:.<>");const l=[];r.forEach(p=>{const f=fs(1)[0]%p.length;l.push(p[f])});const c=Math.max(t-l.length,0),b=fs(c);for(let p=0;p<c;p++){const f=b[p]%a.length;l.push(a[f])}for(let p=l.length-1;p>0;p--){const f=fs(1)[0]%(p+1);[l[p],l[f]]=[l[f],l[p]]}return l.join("")}function mt(t,s){const a=Is(s),r=Math.max(a.length,1);return Math.round(t*Math.log2(r))}function xt({bits:t}){let s="Weak",a=25;return t>=80?(s="Very strong",a=100):t>=60?(s="Strong",a=75):t>=40&&(s="Okay",a=50),e.jsxs("div",{className:"mt-2",children:[e.jsx("div",{className:"w-full h-2 bg-gray-200 rounded",children:e.jsx("div",{className:`h-2 rounded ${a>=75?"bg-green-500":a>=50?"bg-yellow-500":"bg-red-500"}`,style:{width:`${a}%`}})}),e.jsxs("div",{className:"text-xs text-gray-600 mt-1",children:["Strength: ",s," (",t," bits)"]})]})}function ut({onUse:t}){const[s,a]=o.useState(ct),[r,l]=o.useState({lower:!0,upper:!0,digits:!0,symbols:!0,ambiguous:!1,similar:!1}),[c,b]=o.useState(""),[p,f]=o.useState(!1),w=o.useRef(null),C=o.useMemo(()=>mt(s,r),[s,r]);function O(h){l(S=>({...S,[h]:!S[h]}))}function D(){try{const h=dt(s,r);b(h),f(!1)}catch(h){console.error("Failed to generate password:",h)}}async function g(){if(c)try{await navigator.clipboard.writeText(c),f(!0),setTimeout(()=>f(!1),2e3)}catch(h){console.error("Failed to copy password:",h)}}function _(){t&&c&&t(c)}return e.jsxs(J,{className:"mb-6",children:[e.jsxs(_e,{children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center gap-2",children:[e.jsx(As,{className:"w-5 h-5 text-blue-600"}),"Password Generator"]}),e.jsx("p",{className:"text-sm text-gray-600",children:"Generate secure, random passwords"})]}),e.jsx(De,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Generated Password"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(ne,{ref:w,value:c,readOnly:!0,className:"flex-1 font-mono text-sm",placeholder:"Click 'Generate' to create a password"}),e.jsx(te,{onClick:g,variant:"outline",size:"sm",className:"px-3",children:p?"Copied!":"Copy"})]}),c&&e.jsx(xt,{bits:C})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Password Length: ",s]}),e.jsx("input",{type:"range",min:"8",max:"64",value:s,onChange:h=>a(parseInt(h.target.value)),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer"}),e.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[e.jsx("span",{children:"8"}),e.jsx("span",{children:"16"}),e.jsx("span",{children:"32"}),e.jsx("span",{children:"64"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Character Sets"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:Object.entries(r).map(([h,S])=>e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",checked:S,onChange:()=>O(h),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-700 capitalize",children:h==="lower"?"Lowercase":h==="upper"?"Uppercase":h==="digits"?"Numbers":h==="symbols"?"Symbols":h==="ambiguous"?"Ambiguous":h==="similar"?"Similar":h})]},h))})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(te,{onClick:D,className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white",children:"Generate Password"}),c&&t&&e.jsx(te,{onClick:_,variant:"outline",className:"flex-1",children:"Use This Password"})]}),e.jsxs("div",{className:"bg-blue-50 p-3 rounded-lg border border-blue-200",children:[e.jsx("h4",{className:"text-sm font-medium text-blue-900 mb-1",children:"Security Tips"}),e.jsxs("ul",{className:"text-xs text-blue-800 space-y-1",children:[e.jsx("li",{children:"â€¢ Use at least 16 characters for maximum security"}),e.jsx("li",{children:"â€¢ Include uppercase, lowercase, numbers, and symbols"}),e.jsx("li",{children:"â€¢ Avoid similar-looking characters (l, 1, I, O, 0)"}),e.jsx("li",{children:"â€¢ Store passwords in a secure password manager"})]})]})]})})]})}const Cs={passwords:{keywords:["password","passwords","strong password","secure password","passphrase","password manager"],response:`**Password Protection**

â€¢ Use at least 16 characters when possible
â€¢ Combine uppercase letters, lowercase letters, numbers, and symbols
â€¢ Avoid personal information (birthdays, names, etc.)
â€¢ Don't use common words or patterns
â€¢ Consider using passphrases (e.g., "KangarooJumping2025!Sydney")
â€¢ Use a different password for each account
â€¢ Consider using a password manager like LastPass, 1Password, or Bitwarden
â€¢ Enable multi-factor authentication (MFA) whenever possible`,source:"Expert Knowledge"}};function ht(){const[t,s]=o.useState([]),[a,r]=o.useState(""),[l,c]=o.useState(!1),[b,p]=o.useState(!1);return{chatMessages:t,inputMessage:a,isTyping:l,chatError:b,setInputMessage:r,formatChatMessage:C=>C?C.replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>").replace(/^â€¢ /gm,"<br>â€¢ ").replace(/^\* /gm,"<br>â€¢ ").replace(/^- /gm,"<br>â€¢ ").replace(/^### (.*$)/gm,'<h4 style="margin: 15px 0 8px 0; color: #374151; font-size: 16px;">$1</h4>').replace(/^## (.*$)/gm,'<h3 style="margin: 15px 0 10px 0; color: #1f2937; font-size: 18px;">$1</h3>').replace(/^# (.*$)/gm,'<h2 style="margin: 15px 0 10px 0; color: #111827; font-size: 20px;">$1</h2>').replace(/\[([^\]]+)\]\(([^)]+)\)/g,'<a href="$2" target="_blank" rel="noopener noreferrer" style="color: #21a1ce; text-decoration: underline;">$1</a>').replace(/\n\n/g,"<br><br>").replace(/\n/g,"<br>"):"",handleChatSubmit:async C=>{if(C.preventDefault(),!a.trim())return;p(!1);const O={text:a,sender:"user"};s(g=>[...g,O]);const D=a;r(""),c(!0);try{let g=!1,_="",h="";const S=D.toLowerCase();for(const $ in Cs){const{keywords:L,response:F,source:Y}=Cs[$];for(const K of L)if(S.includes(K.toLowerCase())){_=F,h=Y,g=!0;break}if(g)break}if(!g)try{const $=await fetch(`${we}/api/chat/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:D})});if(!$.ok)throw new Error(`API status ${$.status}`);const L=await $.json();L.success&&(_=L.response,h=L.source==="expert_knowledge"?"Expert Knowledge":"AI Analysis",g=!0)}catch{}g||(_="I don't have specific information about that topic yet. For complex cybersecurity questions, I recommend consulting with a security professional.",h="AI Analysis"),setTimeout(()=>{const $={text:_,sender:"assistant",source:h};s(L=>[...L,$]),c(!1)},600)}catch{p(!0);const _={text:"Sorry, I encountered an error processing your request. Please try again.",sender:"assistant",source:"System"};s(h=>[...h,_]),c(!1)}}}}function gt({setActiveTab:t}){const{chatMessages:s,inputMessage:a,isTyping:r,chatError:l,setInputMessage:c,formatChatMessage:b,handleChatSubmit:p}=ht();return e.jsx("div",{className:"p-2 md:p-4",children:e.jsx(J,{className:"mb-2",children:e.jsx(De,{children:e.jsxs("div",{className:"border border-gray-200 rounded-lg h-96 md:h-[32rem] flex flex-col",children:[e.jsxs("div",{className:"flex-1 p-4 overflow-y-auto space-y-4",children:[s.length===0&&e.jsxs("div",{className:"text-center text-gray-500 mt-8",children:[e.jsx(as,{className:"mx-auto mb-2 text-gray-300",size:48}),e.jsx("p",{className:"text-sm md:text-base",children:"Ask me anything about cybersecurity!"}),e.jsx("p",{className:"text-xs md:text-sm mt-2 text-gray-400",children:"Try asking about passwords, phishing, or device security."})]}),s.map((f,w)=>e.jsx("div",{className:`flex ${f.sender==="user"?"justify-end":"justify-start"}`,children:e.jsxs("div",{className:`max-w-[80%] px-3 py-2 rounded-lg ${f.sender==="user"?"bg-[#21a1ce] text-white":"bg-gray-100 text-gray-800"}`,children:[f.sender==="assistant"&&e.jsxs("div",{className:"flex items-center mb-1",children:[e.jsx(Fe,{className:"w-4 h-4 mr-1 text-[#21a1ce]"}),e.jsx("span",{className:"text-xs text-[#21a1ce] font-medium",children:f.source||"AI Assistant"})]}),e.jsx("div",{className:"text-sm",dangerouslySetInnerHTML:{__html:f.sender==="assistant"?b(f.text):f.text}})]})},w)),r&&e.jsx("div",{className:"flex justify-start",children:e.jsx("div",{className:"bg-gray-100 text-gray-800 px-3 py-2 rounded-lg",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(Fe,{className:"w-4 h-4 mr-1 text-[#21a1ce]"}),e.jsx("span",{className:"text-xs text-[#21a1ce] font-medium mr-2",children:"AI Assistant"}),e.jsxs("div",{className:"flex space-x-1",children:[e.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce"}),e.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),e.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})]})})})]}),e.jsx("form",{onSubmit:p,className:"border-t border-gray-200 p-4",children:e.jsxs("div",{className:"flex flex-col items-center space-y-3",children:[e.jsxs("div",{className:"flex w-full max-w-md space-x-2",children:[e.jsx(ne,{type:"text",value:a,onChange:f=>c(f.target.value),placeholder:"Type your cybersecurity question...",disabled:r,className:"flex-1"}),e.jsx(te,{type:"submit",disabled:r||!a.trim(),className:"bg-[#21a1ce] hover:bg-[#1a80a3] text-white px-4 py-2 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed",children:"Send"})]}),l&&e.jsx("p",{className:"text-red-500 text-sm",children:"Connection error. Please check your internet and try again."})]})})]})})})})}const pt="modulepreload",ft=function(t){return"/"+t},Ss={},jt=function(s,a,r){if(!a||a.length===0)return s();const l=document.getElementsByTagName("link");return Promise.all(a.map(c=>{if(c=ft(c),c in Ss)return;Ss[c]=!0;const b=c.endsWith(".css"),p=b?'[rel="stylesheet"]':"";if(!!r)for(let C=l.length-1;C>=0;C--){const O=l[C];if(O.href===c&&(!b||O.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${c}"]${p}`))return;const w=document.createElement("link");if(w.rel=b?"stylesheet":pt,b||(w.as="script",w.crossOrigin=""),w.href=c,document.head.appendChild(w),b)return new Promise((C,O)=>{w.addEventListener("load",C),w.addEventListener("error",()=>O(new Error(`Unable to preload CSS for ${c}`)))})})).then(()=>s()).catch(c=>{const b=new Event("vite:preloadError",{cancelable:!0});if(b.payload=c,window.dispatchEvent(b),!b.defaultPrevented)throw c})};function ee({children:t,variant:s="primary",size:a="md",fullWidth:r=!1,disabled:l=!1,loading:c=!1,className:b="",...p}){const f="inline-flex items-center justify-center font-medium rounded-xl transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed disabled:active:scale-100",w={primary:"bg-blue-600 text-white hover:bg-blue-700 focus:ring-blue-500 shadow-sm",secondary:"bg-gray-100 text-gray-900 hover:bg-gray-200 focus:ring-gray-500",outline:"border border-gray-300 bg-white text-gray-700 hover:bg-gray-50 focus:ring-blue-500",danger:"bg-red-600 text-white hover:bg-red-700 focus:ring-red-500 shadow-sm",success:"bg-green-600 text-white hover:bg-green-700 focus:ring-green-500 shadow-sm",ghost:"bg-transparent text-gray-700 hover:bg-gray-100 focus:ring-gray-500"},C={sm:"px-3 py-2 text-sm min-h-[44px]",md:"px-4 py-3 text-base min-h-[48px]",lg:"px-6 py-4 text-lg min-h-[56px]",xl:"px-8 py-5 text-xl min-h-[64px]"},O=r?"w-full":"",D=`${f} ${w[s]} ${C[a]} ${O} ${b}`.trim();return e.jsxs("button",{className:D,disabled:l||c,...p,children:[c&&e.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),t]})}const Ve=()=>{const[t,s]=o.useState(null),[a,r]=o.useState(!1),[l,c]=o.useState(!0),[b,p]=o.useState(null),f=o.useCallback(async()=>{try{const S=localStorage.getItem("refreshToken");if(!S)return{success:!1,error:"No refresh token available"};const $=await fe(ce.AUTH.REFRESH,{refresh_token:S});if($.ok){const L=await $.json(),{access_token:F,refresh_token:Y}=L;return localStorage.setItem("authToken",F),Y&&localStorage.setItem("refreshToken",Y),{success:!0}}else return{success:!1,error:"Token refresh failed"}}catch(S){return console.error("Token refresh error:",S),{success:!1,error:"Token refresh failed"}}},[]),w=o.useCallback(async()=>{if(localStorage.getItem("authToken"))try{const $=await ge(ce.AUTH.PROFILE);if($.ok){const L=await $.json(),F=L.user||L;s(F),r(!0)}else $.status===401&&(await f()).success||(localStorage.removeItem("authToken"),localStorage.removeItem("refreshToken"),s(null),r(!1))}catch{localStorage.removeItem("authToken"),localStorage.removeItem("refreshToken"),s(null),r(!1)}else s(null),r(!1);c(!1)},[f]);o.useEffect(()=>{w();const S=()=>w();return window.addEventListener("remaleh-auth-changed",S),()=>window.removeEventListener("remaleh-auth-changed",S)},[w]);const C=o.useCallback(async(S,$)=>{try{p(null),c(!0),console.log("Attempting login to:",ce.AUTH.LOGIN);const L=await fe(ce.AUTH.LOGIN,{email:S,password:$});if(L.ok){const F=await L.json();console.log("Login response:",F);const{access_token:Y,refresh_token:K,user:me}=F;localStorage.setItem("authToken",Y),localStorage.setItem("refreshToken",K);const re=me||F.user;return console.log("Setting user:",re),console.log("User is_admin:",re==null?void 0:re.is_admin),console.log("User role:",re==null?void 0:re.role),s(re),r(!0),window.dispatchEvent(new Event("remaleh-auth-changed")),{success:!0}}else{const F=await L.json();return p(F.message||"Login failed"),{success:!1,error:F.message}}}catch(L){console.error("Login error details:",L);let F="Network error occurred";return L.name==="TypeError"&&L.message.includes("fetch")?F="Cannot connect to server. Please check your internet connection or server status.":L.message&&(F=L.message),p(F),{success:!1,error:F}}finally{c(!1)}},[]),O=o.useCallback(async S=>{try{p(null),c(!0);const $=await fe(ce.AUTH.REGISTER,S);if($.ok){const{access_token:L,refresh_token:F,user:Y}=await $.json();return localStorage.setItem("authToken",L),localStorage.setItem("refreshToken",F),s(Y),r(!0),window.dispatchEvent(new Event("remaleh-auth-changed")),{success:!0}}else{const L=await $.json();return p(L.message||"Registration failed"),{success:!1,error:L.message}}}catch{return p("Network error occurred"),{success:!1,error:"Network error occurred"}}finally{c(!1)}},[]),D=o.useCallback(async()=>{try{localStorage.getItem("authToken")&&await fe(ce.AUTH.LOGOUT)}catch(S){console.error("Logout error:",S)}finally{localStorage.removeItem("authToken"),localStorage.removeItem("refreshToken"),s(null),r(!1),window.dispatchEvent(new Event("remaleh-auth-changed"))}},[]),g=o.useCallback(async S=>{try{p(null),c(!0);const $=await Ie(ce.AUTH.PROFILE,S);if($.ok){const L=await $.json();return s(L),{success:!0,user:L}}else{const L=await $.json();return p(L.message||"Profile update failed"),{success:!1,error:L.message}}}catch{return p("Network error occurred"),{success:!1,error:"Network error occurred"}}finally{c(!1)}},[]),_=o.useCallback(async(S,$)=>{try{p(null),c(!0);const L=await fe(ce.AUTH.CHANGE_PASSWORD,{current_password:S,new_password:$});if(L.ok)return{success:!0};{const F=await L.json();return p(F.message||"Password change failed"),{success:!1,error:F.message}}}catch{return p("Network error occurred"),{success:!1,error:"Network error occurred"}}finally{c(!1)}},[]),h=o.useCallback(()=>{console.log("=== USER AUTH DEBUG ==="),console.log("User object:",t),console.log("Is authenticated:",a),console.log("Is loading:",l),console.log("User is_admin:",t==null?void 0:t.is_admin),console.log("User role:",t==null?void 0:t.role),console.log("User email:",t==null?void 0:t.email),console.log("Local storage token:",localStorage.getItem("authToken")),console.log("========================")},[t,a,l]);return{user:t,isAuthenticated:a,isLoading:l,error:b,login:C,register:O,logout:D,updateProfile:g,changePassword:_,refreshAuthToken:f,clearError:()=>p(null),debugUserState:h}},be={MODULES:"/api/learning/modules",MODULE:t=>`/api/learning/modules/${t}`,LESSONS:t=>`/api/learning/modules/${t}/lessons`,LESSON:(t,s)=>`/api/learning/modules/${t}/lessons/${s}`,PROGRESS:t=>`/api/learning/modules/${t}/progress`,PROGRESS_OVERVIEW:"/api/learning/progress/overview",EXPORT:"/api/learning/content/export",IMPORT:"/api/learning/content/import"},ms="learning_content_fallback",je=async(t=!1)=>{try{const s=t?`${be.MODULES}?t=${Date.now()}`:be.MODULES;console.log("ðŸ”„ getAllModules called with forceRefresh:",t,"endpoint:",s);const a=await ge(s);if(a.ok){const r=await a.json();return console.log("ðŸ”„ getAllModules fresh data received:",r),localStorage.setItem(ms,JSON.stringify(r)),r.modules||[]}}catch(s){console.warn("Backend unavailable, using fallback data:",s)}if(!t)try{const s=localStorage.getItem(ms);if(s)return console.log("ðŸ”„ getAllModules using fallback data"),JSON.parse(s).modules||[]}catch(s){console.warn("Fallback data unavailable:",s)}return[]},$s=async t=>{try{const s=await ge(be.MODULE(t));if(s.ok)return await s.json()}catch(s){console.warn("Backend unavailable, using fallback data:",s)}try{const s=localStorage.getItem(ms);if(s)return(JSON.parse(s).modules||[]).find(r=>r.id===t)}catch(s){console.warn("Fallback data unavailable:",s)}return null},yt=async(t,s)=>{try{const a=await $s(t);if(a&&a.content&&a.content.lessons)return a.content.lessons.find(r=>r.id===s)}catch(a){console.warn("Error getting lesson:",a)}return null},Os=async t=>{try{const s=await ge(be.PROGRESS(t));if(s.ok)return await s.json()}catch(s){console.warn("Backend unavailable, using local progress:",s)}try{const s=localStorage.getItem(`module_progress_${t}`);if(s)return JSON.parse(s)}catch(s){console.warn("Local progress unavailable:",s)}return{module_id:t,completed:!1,score:0,started_at:null,completed_at:null}},rs=async()=>{try{const t=await ge(be.PROGRESS_OVERVIEW);if(t.ok)return await t.json()}catch(t){console.warn("Backend unavailable, using local progress:",t)}try{const t=await je(),s=t.filter(a=>{const r=localStorage.getItem(`module_progress_${a.id}`);return r&&JSON.parse(r).completed}).length;return{total_modules:t.length,completed_modules:s,completion_percentage:t.length>0?s/t.length*100:0,total_score:0,average_score:0}}catch(t){return console.warn("Local progress calculation failed:",t),{total_modules:0,completed_modules:0,completion_percentage:0,total_score:0,average_score:0}}},bt=async()=>{var t,s,a;try{const r=await je(),l=await rs();for(const c of r)if(!(await Os(c.id)).completed)return{module_id:c.id,module_title:c.title,lesson_id:1,lesson_title:((a=(s=(t=c.content)==null?void 0:t.lessons)==null?void 0:s[0])==null?void 0:a.title)||"Introduction"};return null}catch(r){return console.warn("Error getting next recommended lesson:",r),null}},ds=(t,s)=>{var a;try{if(!Array.isArray(t)||!s)return null;const r=new Set((s.lesson_progress_records||[]).filter(l=>l.completed).map(l=>`${l.module_id}_${l.lesson_id}`));for(const l of t){const c=((a=l==null?void 0:l.content)==null?void 0:a.lessons)||[];for(const b of c){const p=`${l.id}_${b.id}`;if(!r.has(p))return{module_id:l.id,module_title:l.title,lesson_id:b.id,lesson_title:b.title}}}return null}catch(r){return console.warn("Error computing next recommended lesson:",r),null}},Nt=async()=>{try{const t=await rs(),s=await je();return{...t,total_lessons:s.reduce((a,r)=>{var l,c;return a+(((c=(l=r.content)==null?void 0:l.lessons)==null?void 0:c.length)||0)},0),estimated_total_time:s.reduce((a,r)=>a+(r.estimated_time||0),0)}}catch(t){return console.warn("Error getting learning stats:",t),{total_modules:0,completed_modules:0,completion_percentage:0,total_lessons:0,estimated_total_time:0}}},vt=async t=>{try{const s=await je(),a=[],r=t.toLowerCase();for(const l of s)if((l.title.toLowerCase().includes(r)||l.description.toLowerCase().includes(r))&&a.push({type:"module",id:l.id,title:l.title,description:l.description,difficulty:l.difficulty}),l.content&&l.content.lessons)for(const c of l.content.lessons)(c.title.toLowerCase().includes(r)||c.content.toLowerCase().includes(r))&&a.push({type:"lesson",module_id:l.id,module_title:l.title,id:c.id,title:c.title,content:c.content.substring(0,100)+"..."});return a}catch(s){return console.warn("Error searching content:",s),[]}},wt=async t=>{try{return(await je()).filter(a=>a.difficulty===t)}catch(s){return console.warn("Error getting content by difficulty:",s),[]}},kt=async()=>{try{const t=await je(),s=[];for(const a of t)if(a.content&&a.content.lessons&&a.content.lessons.length>0){const r=a.content.lessons[0];s.push({module_id:a.id,module_title:a.title,lesson_id:r.id,lesson_title:r.title,content:r.content.substring(0,150)+"...",difficulty:a.difficulty,estimated_time:a.estimated_time})}return s}catch(t){return console.warn("Error getting quick tips:",t),[]}},Ct=async()=>{try{const t=await ge(be.EXPORT);if(t.ok)return(await t.json()).metadata}catch(t){console.warn("Backend unavailable, using fallback data:",t)}try{const t=localStorage.getItem(ms);if(t)return JSON.parse(t).metadata||{version:"1.0",last_updated:new Date().toISOString(),total_modules:0,total_lessons:0}}catch(t){console.warn("Fallback data unavailable:",t)}return{version:"1.0",last_updated:new Date().toISOString(),total_modules:0,total_lessons:0}},zs=async t=>{try{const s=await fe(be.MODULES,t);if(s.ok){const a=await s.json();return await je(),a}else throw new Error("Failed to create module")}catch(s){throw console.error("Error creating module:",s),s}},Fs=async(t,s)=>{try{console.log("ðŸ”„ updateModule called with:",{moduleId:t,moduleData:s}),console.log("ðŸŒ API endpoint:",be.MODULE(t));const a=await Ie(be.MODULE(t),s);if(console.log("ðŸŒ Response status:",a.status),console.log("ðŸŒ Response ok:",a.ok),a.ok){const r=await a.json();return console.log("âœ… Module updated successfully:",r),await je(),r}else throw console.error("âŒ Failed to update module, status:",a.status),new Error("Failed to update module")}catch(a){throw console.error("âŒ Error in updateModule:",a),a}},Bs=async t=>{try{if((await Ke(be.MODULE(t))).ok)return await je(),{message:"Module deleted successfully"};throw new Error("Failed to delete module")}catch(s){throw console.error("Error deleting module:",s),s}},Hs=async(t,s)=>{try{console.log("ðŸ”„ contentManager.addLesson called with:",{moduleId:t,lessonData:s}),console.log("ðŸ”„ API endpoint:",be.LESSONS(t));const a=await fe(be.LESSONS(t),s);if(console.log("ðŸ”„ API response received:",a),console.log("ðŸ”„ Response status:",a.status),console.log("ðŸ”„ Response ok:",a.ok),a.ok){const r=await a.json();return console.log("ðŸ”„ Response data:",r),await je(),r}else{console.log("âŒ Response not ok, status:",a.status);const r=await a.text();throw console.log("âŒ Error response body:",r),new Error(`Failed to add lesson: ${a.status}`)}}catch(a){throw console.error("âŒ Error in addLesson:",a),a}},Gs=async(t,s,a)=>{try{const r=await Ie(be.LESSON(t,s),a);if(r.ok){const l=await r.json();return await je(),l}else throw new Error("Failed to update lesson")}catch(r){throw console.error("Error updating lesson:",r),r}},Ws=async(t,s)=>{try{console.log("ðŸ”„ contentManager.deleteLesson called with:",{moduleId:t,lessonId:s}),console.log("ðŸ”„ API endpoint:",be.LESSON(t,s));const a=await Ke(be.LESSON(t,s));if(console.log("ðŸ”„ API response received:",a),console.log("ðŸ”„ Response status:",a.status),console.log("ðŸ”„ Response ok:",a.ok),a.ok)return console.log("âœ… Lesson deleted successfully from API"),await je(),{message:"Lesson deleted successfully"};{console.log("âŒ API response not ok, status:",a.status);const r=await a.json();throw console.log("âŒ Error response body:",r),new Error(r.error||`HTTP error! status: ${a.status}`)}}catch(a){throw console.error("âŒ Error in deleteLesson:",a),a}},St=async(t,s,a)=>{try{console.log("ðŸ”„ contentManager.updateLessonProgress called with:",{moduleId:t,lessonId:s,progressData:a});const r=`/api/learning/modules/${t}/lessons/${s}/progress`;console.log("ðŸ”„ API endpoint:",r);const l=await fe(r,a);if(console.log("ðŸ”„ API response received:",l),console.log("ðŸ”„ Response status:",l.status),console.log("ðŸ”„ Response ok:",l.ok),l.ok){const c=await l.json();return console.log("âœ… Lesson progress updated successfully:",c),c}else{console.log("âŒ API response not ok, status:",l.status);const c=await l.json();throw console.log("âŒ Error response body:",c),new Error(c.error||`HTTP error! status: ${l.status}`)}}catch(r){console.warn("Backend unavailable, storing progress locally:",r);const l={module_id:t,lesson_id:s,completed:a.completed||!1,score:a.score||0,started_at:new Date().toISOString(),completed_at:a.completed?new Date().toISOString():null};return localStorage.setItem(`lesson_progress_${t}_${s}`,JSON.stringify(l)),{progress:l}}},Et=async(t,s)=>{try{const a=await fe(be.PROGRESS(t),s);if(a.ok){const r=await a.json();return localStorage.setItem(`module_progress_${t}`,JSON.stringify(r.progress)),r}else throw new Error("Failed to update progress")}catch(a){console.warn("Backend unavailable, storing progress locally:",a);const r={module_id:t,completed:s.completed||!1,score:s.score||0,started_at:new Date().toISOString(),completed_at:s.completed?new Date().toISOString():null};return localStorage.setItem(`module_progress_${t}`,JSON.stringify(r)),{progress:r}}},Lt=async()=>{try{const t=await ge(be.EXPORT);if(t.ok)return await t.json();throw new Error("Failed to export content")}catch(t){throw console.error("Error exporting content:",t),t}},_t=async t=>{try{const s=await fe(be.IMPORT,t);if(s.ok){const a=await s.json();return await je(),a}else throw new Error("Failed to import content")}catch(s){throw console.error("Error importing content:",s),s}},Rt=Object.freeze(Object.defineProperty({__proto__:null,addLesson:Hs,computeNextRecommendedLesson:ds,createModule:zs,deleteLesson:Ws,deleteModule:Bs,exportContent:Lt,getAllModules:je,getContentByDifficulty:wt,getContentUpdateInfo:Ct,getLearningStats:Nt,getLessonById:yt,getModuleById:$s,getModuleProgress:Os,getNextRecommendedLesson:bt,getOverallProgress:rs,getQuickTips:kt,importContent:_t,searchLearningContent:vt,updateLesson:Gs,updateLessonProgress:St,updateModule:Fs,updateProgress:Et},Symbol.toStringTag,{value:"Module"}));function Mt({setActiveTab:t}){var q,he,Z,ke,m,T,G,se;const{isAuthenticated:s}=Ve(),[a,r]=o.useState(null),[l,c]=o.useState(null),[b,p]=o.useState(""),[f,w]=o.useState("all"),[C,O]=o.useState([]);o.useState(!1);const[D,g]=o.useState([]),[_,h]=o.useState({completed:0,total:0,progress:0}),[S,$]=o.useState(null),[L,F]=o.useState(!0),[Y,K]=o.useState(null);o.useEffect(()=>{s?me():F(!1)},[s]);const me=async()=>{try{F(!0),K(null);const[j,W]=await Promise.all([je(),rs()]);g(j),h(W),$(ds(j,W))}catch{K("Failed to load learning content. Please try again.")}finally{F(!1)}};o.useEffect(()=>{if(_.lesson_progress_records&&_.lesson_progress_records.length>0){const j=_.lesson_progress_records.filter(X=>X.completed).map(X=>`${X.module_id}_${X.lesson_id}`),W=new Set(j),U=new Set(C);if(j.filter(X=>!U.has(X)),C.filter(X=>!W.has(X)),j.length>C.length)O(j);else if(j.length===C.length){const X=j.filter(v=>!C.includes(v));if(X.length>0){const v=[...new Set([...C,...X])];O(v)}}}},[_]);const re=async(j,W)=>{var U,X,v;try{const y=D.find(le=>String(le.id)===String(j));if(!y)return;const N=`${String(y.id)}_${String(W)}`;if(C.includes(N))return;const M={completed:!0,score:100,completed_at:new Date().toISOString()},{updateLessonProgress:V}=await jt(()=>Promise.resolve().then(()=>Rt),void 0),B=await V(y.id,W,M),ae=`${String(((U=B==null?void 0:B.progress)==null?void 0:U.module_id)??y.id)}_${String(((X=B==null?void 0:B.progress)==null?void 0:X.lesson_id)??W)}`,A=!!(((v=B==null?void 0:B.progress)==null?void 0:v.completed)??!0)?ae:`${String(y.id)}_${String(W)}`;O(le=>[...new Set([...le,A])]),h(le=>{var ze,Be;const i=[...Array.isArray(le==null?void 0:le.lesson_progress_records)?le.lesson_progress_records:[]],P=((ze=B==null?void 0:B.progress)==null?void 0:ze.module_id)||y.id,R=((Be=B==null?void 0:B.progress)==null?void 0:Be.lesson_id)||W,H=i.findIndex(He=>He.module_id===P&&He.lesson_id===R);H>=0?i[H]={...i[H],completed:!0,score:100}:i.push({module_id:P,lesson_id:R,completed:!0,score:100});const Ne=i.filter(He=>He.completed).length,Ae=(le==null?void 0:le.total_lessons)||D.reduce((He,us)=>{var ls,es;return He+(((es=(ls=us.content)==null?void 0:ls.lessons)==null?void 0:es.length)||0)},0),Oe=Ae>0?Ne/Ae*100:(le==null?void 0:le.completion_percentage)||0,Pe={...le,lesson_progress_records:i,completed_lessons:Ne,completion_percentage:Oe};return $(ds(D,Pe)),Pe});const k=await rs(),E=new Set([...C||[],A]),I=Array.isArray(k==null?void 0:k.lesson_progress_records)?[...k.lesson_progress_records]:[];for(const le of E){const[u,i]=le.split("_"),P=Number(u),R=Number(i),H=I.findIndex(Ne=>Ne.module_id===P&&Ne.lesson_id===R);H>=0?I[H]={...I[H],completed:!0,score:100}:I.push({module_id:P,lesson_id:R,completed:!0,score:100})}const ye=I.filter(le=>le.completed).length,Ce=(k==null?void 0:k.total_lessons)||D.reduce((le,u)=>{var i,P;return le+(((P=(i=u.content)==null?void 0:i.lessons)==null?void 0:P.length)||0)},0),$e=Ce>0?ye/Ce*100:(k==null?void 0:k.completion_percentage)||0,Me={...k,lesson_progress_records:I,completed_lessons:ye,completion_percentage:$e};h(Me),$(ds(D,Me))}catch{const N=`${(a==null?void 0:a.id)||"unknown"}_${W}`;O(M=>[...new Set([...M,N])]);try{const M=[...new Set([...C,N])];localStorage.setItem("remaleh-completed-lessons",JSON.stringify(M))}catch{}}},xe=(()=>{let j=D;if(f!=="all"&&(j=j.filter(W=>(W.difficulty||"").toLowerCase()===f)),b){const W=b.toLowerCase();j=j.filter(U=>U.title.toLowerCase().includes(W)||U.description&&U.description.toLowerCase().includes(W))}return j})();return s?e.jsxs("div",{className:"space-y-4 p-4",children:[e.jsx("div",{className:"bg-gradient-to-r from-[#21a1ce] to-[#1a8bb8] rounded-2xl p-6 mb-6 text-white shadow-lg",children:e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"flex items-center justify-center mb-4",children:[e.jsx("div",{className:"bg-white bg-opacity-20 p-3 rounded-full mr-3",children:e.jsx(Te,{className:"w-8 h-8 text-white"})}),e.jsx("h1",{className:"text-3xl font-bold",children:"Learning Hub"}),e.jsx("button",{onClick:me,disabled:L,className:"ml-4 bg-white bg-opacity-20 p-2 rounded-full hover:bg-opacity-30 transition-all disabled:opacity-50",title:"Refresh content",children:e.jsx(is,{className:`w-5 h-5 text-white ${L?"animate-spin":""}`})})]}),e.jsx("div",{className:"bg-white bg-opacity-10 rounded-xl p-4 mb-4 backdrop-blur-sm",children:e.jsx("p",{className:"text-white text-base leading-relaxed font-medium",children:"Remaleh isn't just about learning it's about doing. Stuck or unsure? A Remaleh Guardian will guide you step-by-step until you're confident, capable, and ready to take action."})}),e.jsx("div",{className:"bg-white bg-opacity-15 rounded-lg p-3 inline-block",children:e.jsx("p",{className:"text-white text-sm italic font-medium",children:"ðŸš— No one ever learns driving by reading alone - they were guided by an expert. Let us be your guide! âœ¨"})})]})}),Y&&e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-4",children:[e.jsx("p",{className:"text-red-800",children:Y}),e.jsx("button",{onClick:me,className:"mt-2 text-sm text-red-600 hover:text-red-800 underline",children:"Try again"})]}),e.jsxs(J,{className:"mb-4",children:[e.jsx(_e,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Your Progress"}),e.jsx("div",{className:"text-sm text-gray-600",children:L?"Loading...":`${_.completed_modules||0}/${_.total_modules||0} modules`})]})}),e.jsxs(De,{children:[e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 mb-2",children:e.jsx("div",{className:"bg-[#21a1ce] h-2 rounded-full transition-all duration-300",style:{width:`${_.completion_percentage||0}%`}})}),e.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-600",children:[e.jsx("span",{children:L?"Loading...":`${Math.round(_.completion_percentage||0)}% Complete`}),S&&e.jsxs("span",{className:"text-sm text-[#21a1ce] font-medium",children:["Next: ",S.lesson_title]})]})]})]}),e.jsxs(J,{className:"mb-4",children:[e.jsx(_e,{children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-[#21a1ce] rounded-lg flex items-center justify-center",children:e.jsx(Fe,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Need Help Implementing?"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Don't struggle alone - get expert guidance"})]})]})}),e.jsxs(De,{children:[e.jsx("p",{className:"text-gray-700 mb-4 text-sm",children:"Learning is just the first step. When you're ready to implement cybersecurity measures, our Remaleh Guardians are here to guide you through every step of the process."}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"w-2 h-2 bg-[#21a1ce] rounded-full mt-2"}),e.jsxs("div",{className:"text-sm text-gray-700",children:[e.jsx("span",{className:"font-medium",children:"Personal Guidance:"})," One-on-one support for your specific situation"]})]}),e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"w-2 h-2 bg-[#21a1ce] rounded-full mt-2"}),e.jsxs("div",{className:"text-sm text-gray-700",children:[e.jsx("span",{className:"font-medium",children:"Step-by-Step Implementation:"})," We'll walk you through each process"]})]}),e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"w-2 h-2 bg-[#21a1ce] rounded-full mt-2"}),e.jsxs("div",{className:"text-sm text-gray-700",children:[e.jsx("span",{className:"font-medium",children:"Ongoing Support:"})," We're here until you feel confident and empowered"]})]})]}),e.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:e.jsx(ee,{onClick:()=>t("chat"),variant:"primary",className:"w-full",children:"Connect with a Remaleh Guardian"})})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx(lt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx(ne,{type:"text",placeholder:"Search learning content...",value:b,onChange:j=>p(j.target.value),className:"pl-10"})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(ee,{onClick:()=>w("all"),variant:f==="all"?"primary":"secondary",className:"text-sm px-3 py-2",children:"All"}),e.jsx(ee,{onClick:()=>w("beginner"),variant:f==="beginner"?"primary":"secondary",className:"text-sm px-3 py-2",children:"Beginner"}),e.jsx(ee,{onClick:()=>w("intermediate"),variant:f==="intermediate"?"primary":"secondary",className:"text-sm px-3 py-2",children:"Intermediate"}),e.jsx(ee,{onClick:()=>w("advanced"),variant:f==="advanced"?"primary":"secondary",className:"text-sm px-3 py-2",children:"Advanced"})]})]}),a?l?e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("button",{onClick:()=>c(null),className:"flex items-center text-[#21a1ce] hover:underline text-sm",children:[e.jsx(ts,{className:"w-4 h-4 mr-1"}),"Back to lessons"]}),!C.includes(`${String(a.id)}_${String(l.id)}`)&&e.jsx(ee,{onClick:()=>re(a.id,l.id),variant:"primary",size:"sm",children:"Mark Complete"})]}),e.jsxs(J,{children:[e.jsxs(_e,{children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:l.title}),e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[e.jsx("span",{children:l.duration}),e.jsx("span",{children:"â€¢"}),e.jsx("span",{className:"capitalize",children:l.contentType})]})]}),e.jsx(De,{children:e.jsx(At,{lesson:l})})]})]}):e.jsxs("div",{children:[e.jsx("div",{className:"flex items-center mb-4",children:e.jsxs("button",{onClick:()=>r(null),className:"flex items-center text-[#21a1ce] hover:underline text-sm",children:[e.jsx(ts,{className:"w-4 h-4 mr-1"}),"Back to modules"]})}),e.jsxs(J,{children:[e.jsx(_e,{children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg flex items-center justify-center text-white",style:{backgroundColor:a.color},children:e.jsx(Te,{className:"w-5 h-5"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:a.title}),e.jsx("p",{className:"text-gray-600",children:a.description}),e.jsxs("div",{className:"mt-3",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-600 mb-1",children:[e.jsx("span",{children:"Progress"}),e.jsxs("span",{children:[((he=(q=a.content)==null?void 0:q.lessons)==null?void 0:he.filter(j=>C.includes(`${String(a.id)}_${String(j.id)}`)).length)||0,"/",((ke=(Z=a.content)==null?void 0:Z.lessons)==null?void 0:ke.length)||0," lessons"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-[#21a1ce] h-2 rounded-full transition-all duration-300",style:{width:`${((T=(m=a.content)==null?void 0:m.lessons)==null?void 0:T.length)>0?a.content.lessons.filter(j=>C.includes(`${String(a.id)}_${String(j.id)}`)).length/a.content.lessons.length*100:0}%`}})})]})]})]})}),e.jsx(De,{children:e.jsx("div",{className:"space-y-3",children:(se=(G=a.content)==null?void 0:G.lessons)==null?void 0:se.map(j=>{const W=`${String(a.id)}_${String(j.id)}`,U=C.includes(W);return e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg cursor-pointer hover:bg-gray-100 transition-colors",onClick:()=>c(j),children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[U?e.jsx(Qe,{className:"w-5 h-5 text-green-500"}):e.jsx("div",{className:"w-5 h-5 border-2 border-gray-300 rounded-full"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:j.title}),e.jsxs("p",{className:"text-sm text-gray-600",children:[j.duration," min â€¢ ",j.contentType]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[j.contentType==="warning"&&e.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full"}),j.contentType==="example"&&e.jsx("div",{className:"w-2 h-2 bg-yellow-500 rounded-full"}),e.jsx(ts,{className:"w-4 h-4 text-gray-400 transform rotate-180"})]}),e.jsx("div",{className:"text-xs text-gray-400 ml-2",children:W})]},j.id)})})})]})]}):e.jsx("div",{className:"space-y-4",children:L?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-[#21a1ce] mx-auto"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Loading learning modules..."})]}):xe.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Te,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"No learning modules found"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Check back later for new content"})]}):xe.map(j=>{var v,y,N,M;const W=((y=(v=j.content)==null?void 0:v.lessons)==null?void 0:y.length)||0,U=((M=(N=j.content)==null?void 0:N.lessons)==null?void 0:M.filter(V=>C.includes(`${String(j.id)}_${String(V.id)}`)).length)||0,X=W>0?U/W*100:0;return e.jsxs(J,{className:"cursor-pointer hover:shadow-md transition-shadow",onClick:()=>r(j),children:[e.jsx(_e,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-lg flex items-center justify-center text-white",style:{backgroundColor:j.color||"#21a1ce"},children:e.jsx(Te,{className:"w-6 h-6"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:j.title}),e.jsx("p",{className:"text-sm text-gray-600",children:j.description}),e.jsxs("div",{className:"flex items-center space-x-4 text-xs text-gray-500 mt-1",children:[e.jsxs("span",{children:[W," lessons"]}),e.jsxs("span",{children:[j.estimated_time," min"]}),e.jsx("span",{className:"capitalize",children:j.difficulty})]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-sm font-medium text-[#21a1ce]",children:[Math.round(X),"%"]}),e.jsxs("div",{className:"text-xs text-gray-500",children:[U,"/",W]})]})]})}),e.jsx(De,{children:e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-[#21a1ce] h-2 rounded-full transition-all duration-300",style:{width:`${X}%`}})})})]},j.id)})})]}):e.jsxs("div",{className:"space-y-6 p-4",children:[e.jsx("div",{className:"bg-gradient-to-r from-[#21a1ce] to-[#1a8bb8] rounded-2xl p-6 text-white shadow-lg",children:e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"flex items-center justify-center mb-4",children:[e.jsx("div",{className:"bg-white bg-opacity-20 p-3 rounded-full mr-3",children:e.jsx(Te,{className:"w-8 h-8 text-white"})}),e.jsx("h1",{className:"text-3xl font-bold",children:"Learning Hub"})]}),e.jsx("div",{className:"bg-white bg-opacity-10 rounded-xl p-4 mb-4 backdrop-blur-sm",children:e.jsx("p",{className:"text-white text-base leading-relaxed font-medium",children:"Remaleh isn't just about learning it's about doing. Stuck or unsure? A Remaleh Guardian will guide you step-by-step until you're confident, capable, and ready to take action."})}),e.jsx("div",{className:"bg-white bg-opacity-15 rounded-lg p-3 inline-block",children:e.jsx("p",{className:"text-white text-sm italic font-medium",children:"ðŸš— No one ever learns driving by reading alone - they were guided by an expert. Let us be your guide! âœ¨"})})]})}),e.jsx(J,{children:e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Te,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Authentication Required"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Please log in to access the Learning Hub and track your progress."}),e.jsx(ee,{onClick:()=>t("login"),className:"bg-[#21a1ce] hover:bg-[#1a8bb8] text-white",children:"Go to Login"})]})})]})}function At({lesson:t}){const s=r=>{switch(r){case"blue":return"bg-blue-50 border-blue-200";case"yellow":return"bg-yellow-50 border-yellow-200";case"red":return"bg-red-50 border-red-200";case"green":return"bg-green-50 border-green-200";default:return"bg-gray-50 border-gray-200"}},a=()=>{var r,l,c,b,p;switch(t.contentType){case"tips":return e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-gray-700",children:t.content}),e.jsx("div",{className:"space-y-3",children:(r=t.tips)==null?void 0:r.map((f,w)=>e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"p-1 rounded-full mr-3 mt-1 bg-green-100",children:e.jsx("div",{className:"w-2 h-2 rounded-full bg-green-500"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:f.title}),e.jsx("p",{className:"text-sm text-gray-600",children:f.description})]})]},w))})]});case"warning-signs":return e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-gray-700",children:t.content}),e.jsx("div",{className:"space-y-3",children:(l=t.signs)==null?void 0:l.map((f,w)=>e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:`p-1 rounded-full mr-3 mt-1 ${f.danger?"bg-red-100":"bg-green-100"}`,children:e.jsx("div",{className:`w-2 h-2 rounded-full ${f.danger?"bg-red-500":"bg-green-500"}`})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:f.title}),e.jsx("p",{className:"text-sm text-gray-600",children:f.description})]})]},w))})]});case"steps":return e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-gray-700",children:t.content}),e.jsx("div",{className:"space-y-2",children:(c=t.steps)==null?void 0:c.map((f,w)=>e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"w-6 h-6 rounded-full bg-[#21a1ce] text-white text-sm font-bold flex items-center justify-center mr-3 mt-0.5",children:w+1}),e.jsx("p",{className:"text-gray-700",children:f})]},w))})]});case"list":return e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-gray-700",children:t.content}),e.jsx("ul",{className:"space-y-2 ml-4",children:(b=t.items)==null?void 0:b.map((f,w)=>e.jsxs("li",{className:"text-gray-700",children:["â€¢ ",f]},w))})]});case"warning":case"warning-list":return e.jsxs("div",{className:`p-4 rounded-lg border ${s(t.contentStyle)}`,children:[e.jsx("h4",{className:"font-bold mb-2 text-red-800",children:"Important"}),e.jsx("p",{className:"text-red-700 mb-3",children:t.content}),t.items&&e.jsx("ul",{className:"space-y-1 text-red-700",children:t.items.map((f,w)=>e.jsxs("li",{children:["â€¢ ",f]},w))})]});case"action-list":return e.jsxs("div",{className:`p-4 rounded-lg border ${s(t.contentStyle)}`,children:[e.jsx("h4",{className:"font-bold mb-2 text-green-800",children:"Actions to Take"}),e.jsx("p",{className:"text-green-700 mb-3",children:t.content}),e.jsx("ul",{className:"space-y-1 text-green-700",children:(p=t.actions)==null?void 0:p.map((f,w)=>e.jsxs("li",{children:["â€¢ ",f]},w))})]});case"example":return e.jsxs("div",{className:`p-4 rounded-lg border ${s(t.contentStyle)}`,children:[e.jsx("h4",{className:"font-bold mb-2",children:"Real-World Example"}),e.jsx("p",{className:"text-gray-700",children:t.content})]});default:return e.jsx("div",{className:`p-4 rounded-lg border ${s(t.contentStyle)}`,children:e.jsx("p",{className:"text-gray-700",children:t.content})})}};return e.jsxs("div",{className:"space-y-6",children:[a(),Array.isArray(t.media)&&t.media.length>0&&e.jsx("div",{className:"space-y-3",children:t.media.map((r,l)=>e.jsxs("div",{className:"space-y-2",children:[r.type==="image"?e.jsx("img",{src:r.url,alt:r.caption||t.title,className:"w-full max-h-72 object-cover rounded-lg border border-gray-200",loading:"lazy"}):r.type==="video"?e.jsxs("video",{controls:!0,className:"w-full max-h-80 rounded-lg border border-gray-200",children:[e.jsx("source",{src:r.url}),"Your browser does not support the video tag."]}):null,r.caption&&e.jsx("div",{className:"text-xs text-gray-500",children:r.caption})]},l))})]})}const Vs=()=>{const[t,s]=o.useState([]),[a,r]=o.useState([]),[l,c]=o.useState(null),[b,p]=o.useState([]),[f,w]=o.useState([]),[C,O]=o.useState(null),[D,g]=o.useState(!1),[_,h]=o.useState(null),[S,$]=o.useState(null),[L,F]=o.useState(!0),Y=o.useCallback(async(v={},y=!1)=>{try{g(!0),h(null);const N=new URLSearchParams(v).toString(),M=`${ce.COMMUNITY.REPORTS}${N?`?${N}`:""}`,V=await ge(M);if(V.ok){const B=await V.json();return y&&B.reports?s(ae=>[...ae,...B.reports]):s(B.reports||B),B.pagination&&($(B.pagination),F(B.pagination.has_next)),B}else throw new Error("Failed to fetch community reports")}catch(N){h(N.message),console.error("Error fetching reports:",N)}finally{g(!1)}},[]),K=o.useCallback(async()=>{try{g(!0),h(null);const v=await ge(ce.COMMUNITY.TRENDING);if(v.ok){const y=await v.json();return r(y.trending_threats||y),y}else throw new Error("Failed to fetch trending threats")}catch(v){h(v.message),console.error("Error fetching trending threats:",v)}finally{g(!1)}},[]),me=o.useCallback(async v=>{try{g(!0),h(null);const y=await ge(`${ce.COMMUNITY.REPORTS}/${v}`);if(y.ok)return{success:!0,report:await y.json()};{const N=await y.json();throw new Error(N.message||"Failed to fetch report")}}catch(y){return h(y.message),{success:!1,error:y.message}}finally{g(!1)}},[]),re=o.useCallback(async(v,{page:y=1,per_page:N=20}={})=>{try{g(!0),h(null);const M=new URLSearchParams({page:y,per_page:N}).toString(),V=await ge(`${ce.COMMUNITY.REPORTS}/${v}/comments?${M}`);if(V.ok)return{success:!0,...await V.json()};{const B=await V.json();throw new Error(B.message||"Failed to fetch comments")}}catch(M){return h(M.message),{success:!1,error:M.message}}finally{g(!1)}},[]),Q=o.useCallback(async v=>{try{g(!0),h(null);const y=await Ke(`/api/community/comments/${v}`);if(y.ok)return{success:!0};{const N=await y.json();throw new Error(N.message||"Failed to delete comment")}}catch(y){return h(y.message),{success:!1,error:y.message}}finally{g(!1)}},[]),xe=o.useCallback(async()=>{try{g(!0),h(null);const v=await ge(ce.COMMUNITY.STATS);if(v.ok){const y=await v.json();return c(y),y}else throw new Error("Failed to fetch community statistics")}catch(v){h(v.message),console.error("Error fetching community stats:",v)}finally{g(!1)}},[]),q=o.useCallback(async()=>{try{g(!0),h(null);const v=await ge(ce.COMMUNITY.ALERTS);if(v.ok){const y=await v.json();return p(y.alerts||y),y}else throw new Error("Failed to fetch community alerts")}catch(v){h(v.message),console.error("Error fetching alerts:",v)}finally{g(!1)}},[]),he=o.useCallback(async()=>{try{g(!0),h(null);const v=await ge(ce.COMMUNITY.LEADERBOARD);if(v.ok){const y=await v.json();return w(y.leaderboard||y),y}else throw new Error("Failed to fetch leaderboard")}catch(v){h(v.message),console.error("Error fetching leaderboard:",v)}finally{g(!1)}},[]),Z=o.useCallback(async()=>{try{g(!0),h(null);const v=await ge(ce.COMMUNITY.MY_STATS);if(v.ok){const y=await v.json();return O(y),y}else throw new Error("Failed to fetch my stats")}catch(v){h(v.message),console.error("Error fetching my stats:",v)}finally{g(!1)}},[]),ke=o.useCallback(async v=>{try{g(!0),h(null);const y={threat_type:v.threat_type,description:v.description,location:v.location,urgency:v.urgency||"MEDIUM"},N=await fe(ce.COMMUNITY.REPORTS,y);if(N.ok){const{report:M}=await N.json();return s(V=>[M,...V]),{success:!0,report:M}}else{const M=await N.json();throw new Error(M.message||"Failed to create report")}}catch(y){return h(y.message),{success:!1,error:y.message}}finally{g(!1)}},[]),m=o.useCallback(async(v,y)=>{try{g(!0),h(null);let N;if(y instanceof File){const M=localStorage.getItem("authToken"),V=new FormData;V.append("file",y),N=await fetch(`${we}${ce.COMMUNITY.REPORTS}/${v}/media`,{method:"POST",headers:{...M&&{Authorization:`Bearer ${M}`}},body:V})}else N=await fe(`${ce.COMMUNITY.REPORTS}/${v}/media`,{media_url:String(y),media_type:"image"});if(N.ok){const M=await N.json(),V=M.media||M;return s(B=>B.map(ae=>ae.id===v?{...ae,media:[...ae.media||[],V]}:ae)),{success:!0,media:V}}else{const M=await N.json();throw new Error(M.error||M.message||"Failed to upload media")}}catch(N){return h(N.message),{success:!1,error:N.message}}finally{g(!1)}},[s]),T=o.useCallback(async v=>{try{g(!0),h(null);const y=await Ke(`${ce.COMMUNITY.REPORTS}/${v}`);if(y.ok)return s(N=>N.filter(M=>M.id!==v)),{success:!0};{const N=await y.json();throw new Error(N.message||"Failed to delete report")}}catch(y){return h(y.message),{success:!1,error:y.message}}finally{g(!1)}},[]),G=o.useCallback(async(v,y)=>{try{g(!0),h(null);const N=await fe(`${ce.COMMUNITY.REPORTS}/${v}/vote`,{vote_type:y});if(N.ok){const M=await N.json(),V=M.report||M;return s(B=>B.map(ae=>ae.id===v?{...V}:ae)),{success:!0,data:V}}else{const M=await N.json();throw new Error(M.message||"Failed to vote on report")}}catch(N){return h(N.message),{success:!1,error:N.message}}finally{g(!1)}},[]),se=o.useCallback(async(v,y)=>{try{g(!0),h(null);const N=await fe(`${ce.COMMUNITY.REPORTS}/${v}/verify`,y);if(N.ok){const M=await N.json(),V=M.report||M;return s(B=>B.map(ae=>ae.id===v?{...V}:ae)),{success:!0,data:V}}else{const M=await N.json();throw new Error(M.message||"Failed to verify report")}}catch(N){return h(N.message),{success:!1,error:N.message}}finally{g(!1)}},[]),j=o.useCallback(async(v,y)=>{try{g(!0),h(null);const N=await fe(`${ce.COMMUNITY.REPORTS}/${v}/comment`,y);if(N.ok){const V={id:(await N.json()).comment_id,comment:y.comment};return s(B=>B.map(ae=>ae.id===v?{...ae,comments:[...ae.comments||[],V]}:ae)),{success:!0,comment:V}}else{const M=await N.json();throw new Error(M.message||"Failed to add comment")}}catch(N){return h(N.message),{success:!1,error:N.message}}finally{g(!1)}},[]),W=o.useCallback(async v=>{try{g(!0),h(null);const y={message:v.message,severity:(v.priority||"medium").toUpperCase(),threat_type:v.title},N=await fe(ce.COMMUNITY.ALERTS,y);if(N.ok){const{alert:M}=await N.json();return p(V=>[M,...V]),{success:!0,alert:M}}else{const M=await N.json();throw new Error(M.message||"Failed to create alert")}}catch(y){return h(y.message),{success:!1,error:y.message}}finally{g(!1)}},[]),U=o.useCallback(async()=>{await Promise.all([Y({},!1),K(),xe(),q(),he(),Z()])},[Y,K,xe,q,he,Z]),X=o.useCallback(()=>h(null),[]);return{reports:t,trendingThreats:a,communityStats:l,alerts:b,leaderboard:f,myStats:C,isLoading:D,error:_,pagination:S,hasMore:L,fetchReports:Y,fetchTrendingThreats:K,fetchComments:re,deleteComment:Q,fetchReportById:me,fetchCommunityStats:xe,fetchAlerts:q,fetchLeaderboard:he,fetchMyStats:Z,createReport:ke,voteOnReport:G,verifyReport:se,addComment:j,createAlert:W,uploadReportMedia:m,deleteReport:T,loadAllData:U,clearError:X}};function Xe({isOpen:t,onClose:s,title:a,children:r,showCloseButton:l=!0,fullScreen:c=!1,hideOnDesktop:b=!0}){return o.useEffect(()=>{const p=f=>{f.key==="Escape"&&s()};return t&&(document.addEventListener("keydown",p),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",p),document.body.style.overflow="unset"}},[t,s]),t?e.jsxs("div",{className:`fixed inset-0 z-50 ${b?"md:hidden":""}`,children:[e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 backdrop-blur-sm",onClick:s}),e.jsxs("div",{className:`absolute inset-0 bg-white ${c?"rounded-none":"rounded-t-3xl"} transform transition-transform duration-300 ease-out ${t?"translate-y-0":"translate-y-full"}`,children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:a}),l&&e.jsx(te,{variant:"ghost",size:"sm",onClick:s,className:"p-2 rounded-full hover:bg-gray-100",children:e.jsx(it,{className:"w-5 h-5 text-gray-600"})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:r}),e.jsx("div",{className:"h-4 bg-white"})]})]}):null}function Tt({setActiveTab:t}){const[s,a]=o.useState("reports"),{reports:r,fetchReports:l,leaderboard:c,trendingThreats:b,myStats:p,loadAllData:f,isLoading:w,pagination:C,hasMore:O,createReport:D,uploadReportMedia:g,deleteReport:_,voteOnReport:h,addComment:S,fetchReportById:$,fetchComments:L,deleteComment:F}=Vs(),{user:Y,isAuthenticated:K}=Ve(),[me,re]=o.useState(!1),[Q,xe]=o.useState({description:"",threat_type:"SCAM",urgency:"MEDIUM",location:""}),[q,he]=o.useState([]),[Z,ke]=o.useState(!1),[m,T]=o.useState(null),[G,se]=o.useState(!1),[j,W]=o.useState([]),[U,X]=o.useState(0),[v,y]=o.useState(!1),[N,M]=o.useState(null),[V,B]=o.useState(1),[ae,d]=o.useState(!1),[A,k]=o.useState({});o.useEffect(()=>{K&&f()},[K,f]),o.useEffect(()=>{const u=()=>{if(s!=="feed")return;if(window.innerHeight+window.scrollY>=document.body.offsetHeight-200&&!w&&O&&C){const P=C.next_num;P&&l({page:P},!0)}};return window.addEventListener("scroll",u),()=>window.removeEventListener("scroll",u)},[s,w,O,C,l]);const E=u=>{if(!u)return"";if(u.startsWith("http"))return u;try{return new URL(u,we).toString()}catch{return`${we}${u}`}},I=u=>!u||!u.media_type?!0:u.media_type.toLowerCase().startsWith("image"),ye=(u,i=0)=>{const P=(u||[]).filter(I).map(R=>({id:R.id,src:E(R.media_url)})).filter(R=>!!R.src);P.length>0&&(W(P),X(Math.max(0,Math.min(i,P.length-1))),se(!0))},Ce=async u=>{var P,R;B(1);const i=await L(u,{page:1,per_page:20});i.success&&(M({id:u,comments:i.comments||[]}),d((((P=i.pagination)==null?void 0:P.page)||1)<(((R=i.pagination)==null?void 0:R.pages)||1)),y(!0))},$e=async()=>{var P,R;if(!N)return;const u=V+1,i=await L(N.id,{page:u,per_page:20});i.success&&(M(H=>({...H,comments:[...H.comments||[],...i.comments||[]]})),B(u),d((((P=i.pagination)==null?void 0:P.page)||u)<(((R=i.pagination)==null?void 0:R.pages)||u)))},Me=[{id:"reports",label:"Report Scam",icon:ks},{id:"feed",label:"Community Reports",icon:Ye},{id:"my_reports",label:"My Reports",icon:Qe},{id:"leaderboard",label:"Leaderboard",icon:ot},{id:"latest",label:"Latest Scams",icon:Us}],le=()=>{switch(s){case"reports":return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"text-center mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Report a Scam"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Help protect others by reporting scams you encounter"})]}),e.jsx(J,{className:"bg-blue-50 border-blue-200",children:e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx(ks,{className:"w-5 h-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:"Your Reporting Stats"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Keep reporting to climb the leaderboard!"})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:(p==null?void 0:p.report_count)??0}),e.jsx("div",{className:"text-xs text-gray-600",children:"Reports"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:(p==null?void 0:p.points)??0}),e.jsx("div",{className:"text-xs text-gray-600",children:"Points"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-orange-600",children:p!=null&&p.rank?`#${p.rank}`:"â€”"}),e.jsx("div",{className:"text-xs text-gray-600",children:"Rank"})]})]})]})}),e.jsxs(ee,{onClick:()=>re(!0),className:"w-full bg-red-600 hover:bg-red-700 text-white py-3",children:[e.jsx(os,{className:"w-5 h-5 mr-2"}),"Report New Scam"]})]});case"feed":return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"text-center flex-1",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Community Reports"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Approved and verified reports from the community"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("select",{onChange:u=>l({sort:u.target.value},!1),className:"text-xs border border-gray-300 rounded px-2 py-1",defaultValue:"newest",children:[e.jsx("option",{value:"newest",children:"Newest"}),e.jsx("option",{value:"top",children:"Top"}),e.jsx("option",{value:"verified",children:"Verified first"})]}),e.jsx(te,{onClick:()=>l({},!1),variant:"outline",size:"sm",children:"Refresh"})]})]}),C&&e.jsxs("div",{className:"text-center text-xs text-gray-500 mb-2",children:["Showing ",(r==null?void 0:r.length)||0," of ",C.total," reports",O&&e.jsx("span",{className:"ml-2",children:"â€¢ Scroll to load more"})]}),e.jsxs("div",{className:"space-y-3",children:[r&&r.length>0?r.map(u=>{var i,P;return e.jsx(J,{className:"border-gray-200",children:e.jsx("div",{className:"p-4",children:e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"text-xs px-2 py-0.5 rounded-full bg-gray-100 text-gray-700",children:u.threat_type}),e.jsx("span",{className:"text-xs text-gray-500",children:u.created_at?new Date(u.created_at).toLocaleDateString():""}),u.verified&&e.jsx(Qe,{className:"w-3.5 h-3.5 text-green-600"})]}),e.jsxs("div",{className:"text-xs text-gray-500 mb-1",children:["by ",((i=u.creator)==null?void 0:i.name)||"Anonymous"]}),e.jsx("p",{className:"text-sm text-gray-800",children:u.description}),u.media&&u.media.length>0&&e.jsx("div",{className:"mt-2 grid grid-cols-3 gap-2",children:u.media.filter(I).slice(0,3).map((R,H,Ne)=>{const Ae=H===Ne.length-1&&u.media.length>3,Oe=u.media.length-3,Pe=E(R.media_url);return e.jsxs("button",{type:"button",onClick:()=>ye(u.media,H),className:"relative w-full h-24 bg-gray-100 rounded overflow-hidden focus:outline-none",children:[Pe&&e.jsx("img",{src:Pe,alt:"report media",className:"w-full h-full object-cover",loading:"lazy",onError:ze=>{const Be=R.media_url||"";Be&&ze.currentTarget.src!==Be?ze.currentTarget.src=Be:ze.currentTarget.style.display="none"}}),Ae&&Oe>0&&e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-40 flex items-center justify-center",children:e.jsxs("span",{className:"text-white text-sm font-semibold",children:["+",Oe]})})]},R.id||H)})}),e.jsxs("div",{className:"mt-3 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(te,{onClick:()=>h(u.id,"up"),variant:"ghost",size:"sm",className:u.user_vote==="up"?"text-green-600":"",children:[e.jsx(Ds,{className:"w-4 h-4 mr-1"})," ",u.votes_up||0]}),e.jsxs(te,{onClick:()=>h(u.id,"down"),variant:"ghost",size:"sm",className:u.user_vote==="down"?"text-red-600":"",children:[e.jsx(Ps,{className:"w-4 h-4 mr-1"})," ",u.votes_down||0]})]}),e.jsxs("div",{className:"text-xs text-gray-500 flex items-center gap-1",children:[e.jsx(as,{className:"w-3.5 h-3.5"})," ",((P=u.comments)==null?void 0:P.length)||0]})]}),u.comments&&u.comments.length>0&&e.jsxs("div",{className:"mt-2 space-y-1",children:[u.comments.slice(0,2).map((R,H)=>e.jsxs("div",{className:"text-xs text-gray-700 bg-gray-50 p-2 rounded",children:[e.jsxs("span",{className:"font-medium",children:[R.user_name||"Anonymous",":"]})," ",R.comment]},R.id||H)),e.jsx("div",{children:e.jsx(te,{variant:"ghost",size:"sm",onClick:()=>Ce(u.id),children:"View all comments"})})]}),e.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[e.jsx(ne,{placeholder:"Add a comment...",value:A[u.id]||"",onChange:R=>k(H=>({...H,[u.id]:R.target.value})),className:"flex-1"}),e.jsx(te,{size:"sm",disabled:!(A[u.id]||"").trim(),onClick:async()=>{const R=(A[u.id]||"").trim();R&&(await S(u.id,{comment:R}),k(H=>({...H,[u.id]:""})))},children:"Comment"})]}),u.user_id===(Y==null?void 0:Y.id)&&e.jsx("div",{className:"mt-2 text-right",children:e.jsx(te,{variant:"outline",size:"sm",onClick:async()=>{if(confirm("Delete this report? This cannot be undone.")){const R=await _(u.id);R.success||alert(R.error||"Failed to delete")}},children:"Delete report"})})]})})})},u.id)}):e.jsx("p",{className:"text-gray-500 text-center py-6",children:"No reports to display yet."}),w&&O&&e.jsxs("div",{className:"text-center py-4",children:[e.jsx("div",{className:"inline-block animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"}),e.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Loading more reports..."})]})]})]});case"my_reports":return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"text-center mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"My Reports"}),e.jsx("p",{className:"text-sm text-gray-600",children:"See the status of your submitted reports"})]}),e.jsx("div",{className:"space-y-3",children:r&&r.length>0?r.filter(u=>u.user_id===(Y==null?void 0:Y.id)).map(u=>e.jsx(J,{className:"border-gray-200",children:e.jsx("div",{className:"p-4",children:e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"flex-1 pr-3",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${u.status==="APPROVED"||u.status==="VERIFIED"?"bg-green-100 text-green-700":u.status==="REJECTED"?"bg-red-100 text-red-700":"bg-yellow-100 text-yellow-700"}`,children:u.status}),u.verified&&e.jsx("span",{className:"text-xs px-2 py-1 rounded-full bg-blue-100 text-blue-700",children:"Verified"})]}),e.jsxs("div",{className:"text-xs text-gray-500 mb-1",children:["Submitted ",new Date(u.created_at).toLocaleString()]}),e.jsx("p",{className:"text-sm text-gray-800",children:u.description}),u.media&&u.media.length>0&&e.jsx("div",{className:"mt-2 grid grid-cols-3 gap-2",children:u.media.filter(i=>!i.media_type||i.media_type.startsWith("image")).slice(0,3).map((i,P,R)=>{const H=P===R.length-1&&u.media.length>3,Ne=u.media.length-3,Ae=i.media_url&&(i.media_url.startsWith("http")?i.media_url:`${we}${i.media_url}`);return e.jsxs("button",{type:"button",onClick:()=>ye(u.media,P),className:"relative w-full h-24 bg-gray-100 rounded overflow-hidden focus:outline-none",children:[Ae&&e.jsx("img",{src:Ae,alt:"report media",className:"w-full h-full object-cover",loading:"lazy"}),H&&Ne>0&&e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-40 flex items-center justify-center",children:e.jsxs("span",{className:"text-white text-sm font-semibold",children:["+",Ne]})})]},i.id||P)})})]})})})},u.id)):e.jsx("p",{className:"text-gray-500 text-center py-6",children:"No reports found"})})]});case"leaderboard":return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"text-center mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Top Reporters"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Community heroes protecting others from scams"})]}),e.jsx("div",{className:"space-y-2",children:c.map((u,i)=>e.jsx(J,{className:"border-gray-200",children:e.jsx("div",{className:"p-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold ${i===0?"bg-yellow-100 text-yellow-800":i===1?"bg-gray-100 text-gray-800":i===2?"bg-orange-100 text-orange-800":"bg-blue-100 text-blue-800"}`,children:i===0?"ðŸ¥‡":i===1?"ðŸ¥ˆ":i===2?"ðŸ¥‰":u.rank}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-gray-900",children:u.username||u.name}),e.jsxs("div",{className:"text-xs text-gray-600",children:[u.reports," reports"]})]})]}),i<3&&e.jsx(Ts,{className:"w-5 h-5 text-yellow-500"})]})})},u.id))})]});case"latest":return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"text-center mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Latest Scams"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Stay informed about current threats"})]}),e.jsx("div",{className:"space-y-3",children:b.map((u,i)=>e.jsx(J,{className:"border-gray-200",children:e.jsxs("div",{className:"p-4",children:[e.jsx("div",{className:"flex items-start justify-between mb-2",children:e.jsx("h4",{className:"font-semibold text-gray-900",children:u.threat_type})}),e.jsxs("p",{className:"text-sm text-gray-600 mb-3",children:["Reports: ",u.report_count," â€¢ Trend: ",u.trend]}),e.jsx("div",{className:"flex items-center justify-between text-xs text-gray-500",children:e.jsxs("span",{children:["Urgency score: ",u.urgency_score]})})]})},i))})]});default:return null}};return e.jsxs("div",{className:"space-y-4 p-4",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("div",{className:"flex justify-center mb-3",children:e.jsx("div",{className:"p-3 bg-orange-100 rounded-full",children:e.jsx(Ye,{className:"w-8 h-8 text-orange-600"})})}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Community Hub"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Report scams, track threats, and see top reporters"})]}),e.jsx("div",{className:"flex space-x-1 bg-gray-100 p-1 rounded-lg",children:Me.map(u=>{const i=u.icon;return e.jsxs("button",{onClick:()=>a(u.id),className:`flex-1 flex items-center justify-center space-x-2 py-2 px-3 rounded-md text-sm font-medium transition-colors ${s===u.id?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-800"}`,children:[e.jsx(i,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:u.label})]},u.id)})}),le(),e.jsx("div",{className:"mt-6",children:e.jsx(J,{className:"bg-orange-50 border-orange-200",children:e.jsxs("div",{className:"p-4",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"ðŸ¤ Community Benefits"}),e.jsxs("ul",{className:"text-sm text-gray-600 space-y-1",children:[e.jsx("li",{children:"â€¢ Report scams to protect others"}),e.jsx("li",{children:"â€¢ Earn points and climb the leaderboard"}),e.jsx("li",{children:"â€¢ Stay updated on latest threats"}),e.jsx("li",{children:"â€¢ Build a safer digital community"})]})]})})}),me&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl mx-4",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Report New Threat"}),K?e.jsxs("form",{onSubmit:async u=>{u.preventDefault();try{ke(!0);const i=await D(Q);if(!i.success)throw new Error(i.error||"Failed to create report");for(const P of q){const R=await g(i.report.id,P);if(!R.success)throw new Error(R.error||"Failed to upload media")}re(!1),xe({description:"",threat_type:"SCAM",urgency:"MEDIUM",location:""}),he([]),T({type:"success",message:"Report submitted successfully"}),setTimeout(()=>T(null),3e3),f()}catch(i){T({type:"error",message:i.message||"Submission failed"}),setTimeout(()=>T(null),4e3)}finally{ke(!1)}},className:"space-y-4",children:[e.jsx(ys,{placeholder:"Detailed Description",value:Q.description,onChange:u=>xe({...Q,description:u.target.value}),required:!0,rows:4}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("select",{value:Q.threat_type,onChange:u=>xe({...Q,threat_type:u.target.value}),className:"border border-gray-300 rounded-md px-3 py-2",children:[e.jsx("option",{value:"PHISHING",children:"Phishing"}),e.jsx("option",{value:"MALWARE",children:"Malware"}),e.jsx("option",{value:"SCAM",children:"Scam"}),e.jsx("option",{value:"SOCIAL_ENGINEERING",children:"Social Engineering"}),e.jsx("option",{value:"OTHER",children:"Other"})]}),e.jsxs("select",{value:Q.urgency,onChange:u=>xe({...Q,urgency:u.target.value}),className:"border border-gray-300 rounded-md px-3 py-2",children:[e.jsx("option",{value:"LOW",children:"Low"}),e.jsx("option",{value:"MEDIUM",children:"Medium"}),e.jsx("option",{value:"HIGH",children:"High"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Attach Photos (optional)"}),e.jsx("input",{type:"file",accept:"image/*",multiple:!0,onChange:u=>he(Array.from(u.target.files||[])),className:"block w-full text-sm text-gray-700"}),q.length>0&&e.jsxs("div",{className:"mt-2 text-xs text-gray-600",children:[q.length," file(s) selected"]})]}),e.jsx(ne,{placeholder:"Location/URL",value:Q.location,onChange:u=>xe({...Q,location:u.target.value})}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx(te,{type:"submit",className:"flex-1",disabled:Z,children:Z?"Submitting...":"Submit Report"}),e.jsx(te,{type:"button",variant:"outline",onClick:()=>re(!1),className:"flex-1",children:"Cancel"})]})]}):e.jsx("div",{className:"text-center text-gray-600",children:"Please log in to submit a community report."})]})}),m&&e.jsx("div",{className:`fixed bottom-6 left-1/2 -translate-x-1/2 px-4 py-3 rounded-lg shadow-md text-sm z-50 ${m.type==="success"?"bg-green-600 text-white":"bg-red-600 text-white"}`,children:m.message}),e.jsx(Xe,{isOpen:G,onClose:()=>se(!1),title:"Preview",fullScreen:!0,children:j.length>0&&e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:"w-full h-[60vh] bg-black flex items-center justify-center mb-3",children:e.jsx("img",{src:j[U].src,alt:"preview",className:"max-h-full max-w-full object-contain"})}),e.jsxs("div",{className:"flex items-center justify-between w-full",children:[e.jsx(te,{onClick:()=>X(u=>Math.max(0,u-1)),disabled:U===0,variant:"outline",size:"sm",children:"Prev"}),e.jsxs("div",{className:"text-sm text-gray-600",children:[U+1," / ",j.length]}),e.jsx(te,{onClick:()=>X(u=>Math.min(j.length-1,u+1)),disabled:U>=j.length-1,variant:"outline",size:"sm",children:"Next"})]})]})}),e.jsx(Xe,{isOpen:v,onClose:()=>y(!1),title:"All Comments",children:N?e.jsxs("div",{className:"space-y-3",children:[N.comments&&N.comments.length>0?N.comments.map(u=>e.jsx("div",{className:"p-2 bg-gray-50 rounded border border-gray-200 flex items-start justify-between",children:e.jsxs("div",{children:[e.jsxs("div",{className:"text-sm text-gray-800",children:[e.jsxs("span",{className:"font-medium",children:[u.user_name||"Anonymous",":"]})," ",u.comment]}),e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:u.created_at?new Date(u.created_at).toLocaleString():""})]})},u.id)):e.jsx("div",{className:"text-sm text-gray-500",children:"No comments yet."}),ae&&e.jsx("div",{className:"pt-2",children:e.jsx(te,{onClick:$e,variant:"outline",size:"sm",children:"Load more"})})]}):e.jsx("div",{className:"text-sm text-gray-500",children:"Loading..."})})]})}function Pt({setActiveTab:t}){var u;const{isAuthenticated:s,user:a}=Ve(),{reports:r,trendingThreats:l,communityStats:c,alerts:b,isLoading:p,error:f,loadAllData:w,createReport:C,voteOnReport:O,verifyReport:D,addComment:g,createAlert:_,uploadReportMedia:h,fetchReportById:S,fetchComments:$,deleteComment:L,clearError:F}=Vs(),[Y,K]=o.useState(!1),[me,re]=o.useState(!1),[Q,xe]=o.useState({description:"",threat_type:"SCAM",urgency:"MEDIUM",location:""}),[q,he]=o.useState({title:"",message:"",priority:"medium"}),[Z,ke]=o.useState(""),[m,T]=o.useState([]),[G,se]=o.useState(!1),[j,W]=o.useState([]),[U,X]=o.useState(0),[v,y]=o.useState(!1),[N,M]=o.useState(null),[V,B]=o.useState(1),[ae,d]=o.useState(!1);o.useEffect(()=>{if(s&&(w(),typeof localStorage<"u"&&localStorage.getItem("openNewReport")==="1"||typeof sessionStorage<"u"&&sessionStorage.getItem("openNewReport")==="1"||typeof window<"u"&&window.__openNewReport===!0)){K(!0);try{localStorage.removeItem("openNewReport")}catch{}try{sessionStorage.removeItem("openNewReport")}catch{}try{delete window.__openNewReport}catch{}}},[w,s]);const A=async i=>{i.preventDefault();const P=await C(Q);if(P.success){for(const R of m)await h(P.report.id,R);K(!1),xe({description:"",threat_type:"SCAM",urgency:"MEDIUM",location:""}),T([])}},k=async i=>{i.preventDefault(),(await _(q)).success&&(re(!1),he({title:"",message:"",priority:"medium"}))},E=async(i,P)=>{await O(i,P)},I=async i=>{await D(i,{verified:!0})},ye=async i=>{Z.trim()&&(await g(i,{comment:Z}),ke(""))},Ce=async i=>{var R,H;B(1);const P=await $(i,{page:1,per_page:20});P.success&&(M({id:i,comments:P.comments||[]}),d((((R=P.pagination)==null?void 0:R.page)||1)<(((H=P.pagination)==null?void 0:H.pages)||1)),y(!0))},$e=async()=>{var R,H;if(!N)return;const i=V+1,P=await $(N.id,{page:i,per_page:20});P.success&&(M(Ne=>({...Ne,comments:[...Ne.comments||[],...P.comments||[]]})),B(i),d((((R=P.pagination)==null?void 0:R.page)||i)<(((H=P.pagination)==null?void 0:H.pages)||i)))},Me=async i=>{(await L(i)).success&&M(R=>({...R,comments:(R.comments||[]).filter(H=>H.id!==i)}))},le=(i,P=0)=>{const R=(i||[]).filter(H=>!H.media_type||H.media_type==="image").map(H=>({id:H.id,src:H.media_url&&(H.media_url.startsWith("http")?H.media_url:`${we}${H.media_url}`)})).filter(H=>!!H.src);R.length>0&&(W(R),X(Math.max(0,Math.min(P,R.length-1))),se(!0))};if(!s)return e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx(As,{className:"w-8 h-8 mx-auto mb-2 text-gray-400"}),e.jsx("p",{className:"text-gray-600 mb-2",children:"Login required to access Community"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Please log in to view and contribute to community reports"})]})});if(p)return e.jsx("div",{className:"flex items-center justify-center min-h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading community data..."})]})});if(f){const i=f.includes("Token is missing")||f.includes("401")||f.includes("Unauthorized");return e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(ws,{className:"h-5 w-5 text-red-400 mr-2"}),e.jsx("span",{className:"text-red-800",children:i?"Authentication Required":f})]}),e.jsx("p",{className:"text-red-700 text-sm mt-2",children:i?"Please log in to access community features. Your session may have expired.":""}),e.jsx("div",{className:"flex gap-2 mt-3",children:i?e.jsx(te,{onClick:()=>window.location.reload(),variant:"outline",size:"sm",children:"Go to Login"}):e.jsx(te,{onClick:F,variant:"outline",size:"sm",children:"Dismiss"})})]})}return e.jsxs("div",{className:"space-y-6 p-4",children:[e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsx("button",{onClick:()=>t("community"),className:"p-2 mr-3 text-gray-600 hover:text-gray-800 transition-colors",children:e.jsx(ts,{className:"w-5 h-5"})}),e.jsxs("div",{className:"flex-1 text-center",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Community Reports"}),e.jsx("p",{className:"text-gray-600 text-sm",children:"Report and track security threats"})]})]}),c&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx(J,{className:"p-4",children:e.jsxs(_e,{className:"flex items-center",children:[e.jsx(Ye,{className:"h-8 w-8 text-blue-600 mr-3"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Reports"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:c.total_reports||0})]})]})}),e.jsx(J,{className:"p-4",children:e.jsxs(_e,{className:"flex items-center",children:[e.jsx(ws,{className:"h-8 w-8 text-red-600 mr-3"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Verified"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:c.status_breakdown&&c.status_breakdown.VERIFIED||0})]})]})}),e.jsx(J,{className:"p-4",children:e.jsxs(_e,{className:"flex items-center",children:[e.jsx(Qe,{className:"h-8 w-8 text-green-600 mr-3"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Pending"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:c.status_breakdown&&c.status_breakdown.PENDING||0})]})]})}),e.jsx(J,{className:"p-4",children:e.jsxs(_e,{className:"flex items-center",children:[e.jsx(Ye,{className:"h-8 w-8 text-purple-600 mr-3"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Top Reporter"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:c.top_contributors&&((u=c.top_contributors[0])==null?void 0:u.name)||"â€”"})]})]})})]}),e.jsxs(J,{className:"p-6",children:[e.jsxs(_e,{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Trending Threats"}),e.jsx(Us,{className:"h-5 w-5 text-orange-500"})]}),e.jsx(De,{children:e.jsx("div",{className:"space-y-3",children:l&&l.length>0?l.map((i,P)=>e.jsx("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Ts,{className:"h-4 w-4 text-yellow-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:i.threat_type}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Reports: ",i.report_count," â€¢ Trend: ",i.trend," â€¢ Urgency score: ",i.urgency_score]})]})]})},P)):e.jsx("p",{className:"text-gray-500 text-center py-4",children:"No trending threats at the moment"})})})]}),e.jsxs(J,{className:"p-6",children:[e.jsxs(_e,{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Recent Reports"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(te,{onClick:()=>K(!0),size:"sm",children:"Report New Scam"}),e.jsx(te,{onClick:w,variant:"outline",size:"sm",children:"Refresh"})]})]}),e.jsx(De,{children:e.jsx("div",{className:"space-y-4",children:r&&r.length>0?r.map(i=>{var P;return e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-gray-900",children:i.threat_type}),e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:i.description}),i.media&&i.media.length>0&&e.jsx("div",{className:"mt-2 grid grid-cols-3 gap-2",children:i.media.filter(R=>!R.media_type||R.media_type==="image").slice(0,3).map((R,H,Ne)=>{const Ae=H===Ne.length-1&&i.media.length>3,Oe=i.media.length-3,Pe=R.media_url&&(R.media_url.startsWith("http")?R.media_url:`${we}${R.media_url}`);return e.jsxs("button",{type:"button",onClick:()=>le(i.media,H),className:"relative w-full h-20 bg-gray-100 rounded overflow-hidden focus:outline-none",children:[Pe&&e.jsx("img",{src:Pe,alt:"report media",className:"w-full h-full object-cover",loading:"lazy"}),Ae&&Oe>0&&e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-40 flex items-center justify-center",children:e.jsxs("span",{className:"text-white text-sm font-semibold",children:["+",Oe]})})]},R.id||H)})}),e.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500",children:[e.jsxs("span",{children:["Urgency: ",i.urgency]}),e.jsxs("span",{children:["Location: ",i.location||"N/A"]}),e.jsxs("span",{children:["Reported: ",i.created_at?new Date(i.created_at).toLocaleDateString():"N/A"]})]})]}),e.jsx("div",{className:"flex items-center space-x-2",children:i.verified&&e.jsx(Qe,{className:"h-4 w-4 text-green-500"})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(te,{onClick:()=>E(i.id,"up"),variant:"ghost",size:"sm",className:i.user_vote==="up"?"text-green-600":"",children:[e.jsx(Ds,{className:"h-4 w-4 mr-1"}),i.votes_up||0]}),e.jsxs(te,{onClick:()=>E(i.id,"down"),variant:"ghost",size:"sm",className:i.user_vote==="down"?"text-red-600":"",children:[e.jsx(Ps,{className:"h-4 w-4 mr-1"}),i.votes_down||0]})]}),(a==null?void 0:a.is_admin)&&!i.verified&&e.jsxs(te,{onClick:()=>I(i.id),variant:"outline",size:"sm",children:[e.jsx(Qe,{className:"h-4 w-4 mr-1"}),"Verify"]})]}),e.jsx("div",{className:"text-sm text-gray-500",children:((P=i.creator)==null?void 0:P.name)||"Anonymous"})]}),i.comments&&i.comments.length>0&&e.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-200",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Comments"}),e.jsx("div",{className:"space-y-2",children:i.comments.map((R,H)=>e.jsxs("div",{className:"text-sm text-gray-600 bg-gray-50 p-2 rounded",children:[e.jsxs("span",{className:"font-medium",children:[R.user_name||"Anonymous",":"]})," ",R.comment]},H))}),e.jsx("div",{className:"mt-2",children:e.jsx(te,{variant:"ghost",size:"sm",onClick:()=>Ce(i.id),children:"View all comments"})})]}),e.jsx("div",{className:"mt-3 pt-3 border-t border-gray-200",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(ne,{placeholder:"Add a comment...",value:Z,onChange:R=>ke(R.target.value),className:"flex-1"}),e.jsx(te,{onClick:()=>ye(i.id),size:"sm",disabled:!Z.trim(),children:"Comment"})]})})]},i.id)}):e.jsx("p",{className:"text-gray-500 text-center py-8",children:"No reports yet. Be the first to report a threat!"})})})]}),e.jsxs(J,{className:"p-6",children:[e.jsx(_e,{className:"flex items-center justify-between mb-4",children:e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Community Alerts"})}),e.jsx(De,{children:e.jsx("div",{className:"space-y-3",children:b&&b.length>0?b.map(i=>e.jsxs("div",{className:"flex items-start space-x-3 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsx(as,{className:"h-5 w-5 text-blue-600 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-medium text-blue-900",children:i.threat_type||"Community Alert"}),e.jsx("p",{className:"text-sm text-blue-800",children:i.message}),e.jsxs("div",{className:"flex items-center space-x-4 mt-2 text-xs text-blue-600",children:[e.jsxs("span",{children:["Severity: ",i.severity]}),e.jsx("span",{children:i.created_at?new Date(i.created_at).toLocaleDateString():""})]})]})]},i.id)):e.jsx("p",{className:"text-gray-500 text-center py-4",children:"No active alerts"})})})]}),Y&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl mx-4",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Report New Threat"}),e.jsxs("form",{onSubmit:A,className:"space-y-4",children:[e.jsx(ys,{placeholder:"Detailed Description",value:Q.description,onChange:i=>xe({...Q,description:i.target.value}),required:!0,rows:4}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("select",{value:Q.threat_type,onChange:i=>xe({...Q,threat_type:i.target.value}),className:"border border-gray-300 rounded-md px-3 py-2",children:[e.jsx("option",{value:"PHISHING",children:"Phishing"}),e.jsx("option",{value:"MALWARE",children:"Malware"}),e.jsx("option",{value:"SCAM",children:"Scam"}),e.jsx("option",{value:"SOCIAL_ENGINEERING",children:"Social Engineering"}),e.jsx("option",{value:"OTHER",children:"Other"})]}),e.jsxs("select",{value:Q.urgency,onChange:i=>xe({...Q,urgency:i.target.value}),className:"border border-gray-300 rounded-md px-3 py-2",children:[e.jsx("option",{value:"LOW",children:"Low"}),e.jsx("option",{value:"MEDIUM",children:"Medium"}),e.jsx("option",{value:"HIGH",children:"High"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Attach Photos (optional)"}),e.jsx("input",{type:"file",accept:"image/*",multiple:!0,onChange:i=>T(Array.from(i.target.files||[])),className:"block w-full text-sm text-gray-700"}),m.length>0&&e.jsxs("div",{className:"mt-2 text-xs text-gray-600",children:[m.length," file(s) selected"]})]}),e.jsx(ne,{placeholder:"Location/URL",value:Q.location,onChange:i=>xe({...Q,location:i.target.value})}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx(te,{type:"submit",className:"flex-1",children:"Submit Report"}),e.jsx(te,{type:"button",variant:"outline",onClick:()=>K(!1),className:"flex-1",children:"Cancel"})]})]})]})}),me&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-lg mx-4",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Create Community Alert"}),e.jsxs("form",{onSubmit:k,className:"space-y-4",children:[e.jsx(ne,{placeholder:"Alert Title",value:q.title,onChange:i=>he({...q,title:i.target.value}),required:!0}),e.jsx(ys,{placeholder:"Alert Message",value:q.message,onChange:i=>he({...q,message:i.target.value}),required:!0,rows:4}),e.jsxs("select",{value:q.priority,onChange:i=>he({...q,priority:i.target.value}),className:"border border-gray-300 rounded-md px-3 py-2 w-full",children:[e.jsx("option",{value:"low",children:"Low Priority"}),e.jsx("option",{value:"medium",children:"Medium Priority"}),e.jsx("option",{value:"high",children:"High Priority"}),e.jsx("option",{value:"urgent",children:"Urgent"})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx(te,{type:"submit",className:"flex-1",children:"Create Alert"}),e.jsx(te,{type:"button",variant:"outline",onClick:()=>re(!1),className:"flex-1",children:"Cancel"})]})]})]})}),e.jsx(Xe,{isOpen:v,onClose:()=>y(!1),title:"All Comments",children:N?e.jsxs("div",{className:"space-y-3",children:[N.comments&&N.comments.length>0?N.comments.map(i=>e.jsxs("div",{className:"p-2 bg-gray-50 rounded border border-gray-200 flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"text-sm text-gray-800",children:[e.jsxs("span",{className:"font-medium",children:[i.user_name||"Anonymous",":"]})," ",i.comment]}),e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:i.created_at?new Date(i.created_at).toLocaleString():""})]}),((a==null?void 0:a.id)===i.user_id||(a==null?void 0:a.is_admin))&&e.jsx(te,{variant:"ghost",size:"sm",onClick:()=>Me(i.id),title:"Delete comment",children:e.jsx(cs,{className:"w-4 h-4 text-red-600"})})]},i.id)):e.jsx("div",{className:"text-sm text-gray-500",children:"No comments yet."}),ae&&e.jsx("div",{className:"pt-2",children:e.jsx(te,{onClick:$e,variant:"outline",size:"sm",children:"Load more"})})]}):e.jsx("div",{className:"text-sm text-gray-500",children:"Loading..."})}),e.jsx(Xe,{isOpen:G,onClose:()=>se(!1),title:"Preview",fullScreen:!0,children:j.length>0&&e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:"w-full h-[60vh] bg-black flex items-center justify-center mb-3",children:e.jsx("img",{src:j[U].src,alt:"preview",className:"max-h-full max-w-full object-contain"})}),e.jsxs("div",{className:"flex items-center justify-between w-full",children:[e.jsx(te,{onClick:()=>X(i=>Math.max(0,i-1)),disabled:U===0,variant:"outline",size:"sm",children:"Prev"}),e.jsxs("div",{className:"text-sm text-gray-600",children:[U+1," / ",j.length]}),e.jsx(te,{onClick:()=>X(i=>Math.min(j.length-1,i+1)),disabled:U>=j.length-1,variant:"outline",size:"sm",children:"Next"})]})]})})]})}const Ze=ss.forwardRef(({className:t="",...s},a)=>{const l=`flex min-h-[80px] w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm placeholder:text-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:cursor-not-allowed disabled:opacity-50 ${t}`;return e.jsx("textarea",{className:l,ref:a,...s})});Ze.displayName="Textarea";const Re={USERS:"/api/admin/users",USER:t=>`/api/admin/users/${t}`,UPDATE_STATUS:t=>`/api/admin/users/${t}/status`,UPDATE_ROLE:t=>`/api/admin/users/${t}/role`,DELETE_USER:t=>`/api/admin/users/${t}`,DELETED_USERS:"/api/admin/users/deleted"},Dt=async(t={})=>{try{const s=new URLSearchParams;t.page&&s.append("page",t.page),t.per_page&&s.append("per_page",t.per_page),t.status&&s.append("status",t.status),t.role&&s.append("role",t.role);const a=`${Re.USERS}?${s.toString()}`,r=await ge(a);if(r.ok){const l=await r.json();return{users:l.users||[],pagination:l.pagination||{},success:!0}}else throw new Error(`HTTP error! status: ${r.status}`)}catch(s){return console.error("Error fetching users:",s),{users:[],pagination:{},success:!1,error:s.message}}},Ut=async()=>{try{const t=await ge(Re.DELETED_USERS);if(t.ok)return{users:(await t.json()).users||[],success:!0};throw new Error(`HTTP error! status: ${t.status}`)}catch(t){return console.error("Error fetching deleted users:",t),{users:[],success:!1,error:t.message}}},Es=async(t,s)=>{try{console.log("ðŸ”„ userManager.updateUserStatus called with:",{userId:t,newStatus:s}),console.log("ðŸ”„ API endpoint:",Re.UPDATE_STATUS(t));const a=await Ie(Re.UPDATE_STATUS(t),{status:s});if(console.log("ðŸ”„ API response received:",a),console.log("ðŸ”„ Response status:",a.status),console.log("ðŸ”„ Response ok:",a.ok),a.ok){const r=await a.json();return console.log("ðŸ”„ Response data:",r),{success:!0,message:r.message||"User status updated successfully",user:r.user}}else{console.log("âŒ Response not ok, status:",a.status);const r=await a.json();throw console.log("âŒ Error response body:",r),new Error(r.error||`HTTP error! status: ${a.status}`)}}catch(a){return console.error("âŒ Error in updateUserStatus:",a),{success:!1,error:a.message}}},Ls=async(t,s)=>{try{console.log("ðŸ”„ userManager.updateUserRole called with:",{userId:t,newRole:s}),console.log("ðŸ”„ API endpoint:",Re.UPDATE_ROLE(t));const a=await Ie(Re.UPDATE_ROLE(t),{role:s});if(console.log("ðŸ”„ API response received:",a),console.log("ðŸ”„ Response status:",a.status),console.log("ðŸ”„ Response ok:",a.ok),a.ok){const r=await a.json();return console.log("ðŸ”„ Response data:",r),{success:!0,message:r.message||"User role updated successfully",user:r.user}}else{console.log("âŒ Response not ok, status:",a.status);const r=await a.json();throw console.log("âŒ Error response body:",r),new Error(r.error||`HTTP error! status: ${a.status}`)}}catch(a){return console.error("âŒ Error in updateUserRole:",a),{success:!1,error:a.message}}},It=async(t,s)=>{try{const a=await Ie(Re.USER(t),s);if(a.ok){const r=await a.json();return{success:!0,message:r.message||"User information updated successfully",user:r.user}}else{const r=await a.json();throw new Error(r.error||`HTTP error! status: ${a.status}`)}}catch(a){return console.error("Error updating user information:",a),{success:!1,error:a.message}}},$t=async(t,s)=>{try{const a=await Ie(`${Re.USER(t)}/password`,{password:s});if(a.ok)return{success:!0,message:(await a.json()).message||"User password updated successfully"};{const r=await a.json();throw new Error(r.error||`HTTP error! status: ${a.status}`)}}catch(a){return console.error("Error updating user password:",a),{success:!1,error:a.message}}},Ot=async t=>{try{const s=await Ke(Re.DELETE_USER(t));if(s.ok)return{success:!0,message:(await s.json()).message||"User deleted successfully"};{const a=await s.json();throw new Error(a.error||`HTTP error! status: ${s.status}`)}}catch(s){return console.error("Error deleting user:",s),{success:!1,error:s.message}}},zt=async t=>{try{const s=await fe(Re.USERS,t);if(s.ok){const a=await s.json();return{success:!0,message:a.message||"User created successfully",user:a.user}}else{const a=await s.json();throw new Error(a.error||`HTTP error! status: ${s.status}`)}}catch(s){return console.error("Error creating user:",s),{success:!1,error:s.message}}},Ft=async()=>{try{const t=await ge(Re.USERS);if(t.ok){const a=(await t.json()).users||[];return{stats:{total:a.length,active:a.filter(l=>l.status==="ACTIVE").length,suspended:a.filter(l=>l.status==="SUSPENDED").length,banned:a.filter(l=>l.status==="BANNED").length,admins:a.filter(l=>l.is_admin||l.role==="ADMIN").length,moderators:a.filter(l=>l.role==="MODERATOR").length,regular:a.filter(l=>l.role==="USER").length},success:!0}}else throw new Error(`HTTP error! status: ${t.status}`)}catch(t){return console.error("Error fetching user stats:",t),{stats:{total:0,active:0,suspended:0,banned:0,admins:0,moderators:0,regular:0},success:!1,error:t.message}}},Bt=async t=>{try{console.log("ðŸ”„ userManager.restoreUser called with:",{userId:t}),console.log("ðŸ”„ API endpoint:",Re.USER(t)+"/restore");const s=await Ie(`${Re.USER(t)}/restore`,{});if(console.log("ðŸ”„ API response received:",s),console.log("ðŸ”„ Response status:",s.status),console.log("ðŸ”„ Response ok:",s.ok),s.ok){const a=await s.json();return console.log("ðŸ”„ Response data:",a),{success:!0,message:a.message||"User restored successfully",user:a.user}}else{console.log("âŒ Response not ok, status:",s.status);const a=await s.json();throw console.log("âŒ Error response body:",a),new Error(a.error||`HTTP error! status: ${s.status}`)}}catch(s){return console.error("âŒ Error in restoreUser:",s),{success:!1,error:s.message}}},_s=({initialFilters:t})=>{const[s,a]=o.useState([]),[r,l]=o.useState({}),[c,b]=o.useState(!0),[p,f]=o.useState(null),[w,C]=o.useState([]),[O,D]=o.useState(!1),[g,_]=o.useState(null),[h,S]=o.useState(!1),[$,L]=o.useState(""),[F,Y]=o.useState({page:1,per_page:20,status:"",urgency:"",threat_type:"",verified:""});o.useEffect(()=>{t&&Object.keys(t).length>0&&Y(m=>({...m,...t,page:1}))},[]),o.useEffect(()=>{K()},[F]);const K=async()=>{try{b(!0);const m=new URLSearchParams;Object.entries(F).forEach(([se,j])=>{j&&m.append(se,j)});const G=await(await Je.get(`/api/admin/reports?${m}`)).json();a(G.reports||[]),l(G.pagination||{}),f(null)}catch(m){f("Failed to load community reports"),console.error("Reports error:",m)}finally{b(!1)}},me=async(m,T)=>{var G,se;try{let j;if(T==="verify")j=await Je.request({method:"POST",url:`/api/community/reports/${m}/verify`});else{const W={reject:"REJECTED",escalate:"FLAGGED",approve:"APPROVED"},U=W[T]||W.approve;j=await Je.request({method:"PUT",url:`/api/admin/reports/${m}/moderate`,data:{action:U}})}if(!j.ok){const W=await j.json().catch(()=>({}));throw new Error(W.error||`Failed to ${T} report`)}K(),C([])}catch(j){console.error("Report action error:",j),alert(`Failed to ${T} report: ${((se=(G=j.response)==null?void 0:G.data)==null?void 0:se.error)||j.message}`)}},re=async()=>{var m,T;if(!(!$||w.length===0))try{if($==="verify")await Promise.all(w.map(async G=>{const se=await Je.request({method:"POST",url:`/api/community/reports/${G}/verify`});if(!se.ok){const j=await se.json().catch(()=>({}));throw new Error(j.error||`Failed to verify report ${G}`)}}));else{const G={reject:"REJECTED",escalate:"FLAGGED",approve:"APPROVED"},se=G[$]||G.approve;await Promise.all(w.map(async j=>{const W=await Je.request({method:"PUT",url:`/api/admin/reports/${j}/moderate`,data:{action:se}});if(!W.ok){const U=await W.json().catch(()=>({}));throw new Error(U.error||`Failed to ${$} report ${j}`)}}))}K(),C([]),S(!1),L("")}catch(G){console.error("Bulk action error:",G),alert(`Failed to perform bulk action: ${((T=(m=G.response)==null?void 0:m.data)==null?void 0:T.error)||G.message}`)}},Q=m=>{C(T=>T.includes(m)?T.filter(G=>G!==m):[...T,m])},xe=()=>{w.length===s.length?C([]):C(s.map(m=>m.id))},q=m=>{Y(T=>({...T,...m,page:1}))},he=({report:m})=>e.jsx("div",{className:"bg-white border rounded-lg p-4 mb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("input",{type:"checkbox",checked:w.includes(m.id),onChange:()=>Q(m.id),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${m.urgency==="HIGH"?"bg-red-100 text-red-800":m.urgency==="MEDIUM"?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"}`,children:m.urgency}),e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${m.status==="PENDING"?"bg-yellow-100 text-yellow-800":m.status==="VERIFIED"?"bg-green-100 text-green-800":m.status==="REJECTED"?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"}`,children:m.status}),m.verified&&e.jsx("span",{className:"px-2 py-1 text-xs rounded-full bg-blue-100 text-blue-800",children:"âœ“ Verified"})]}),e.jsx("h4",{className:"font-medium text-gray-900",children:m.threat_type}),e.jsx("p",{className:"text-sm text-gray-600 mt-1 line-clamp-2",children:m.description}),e.jsxs("div",{className:"flex items-center space-x-4 mt-2 text-xs text-gray-500",children:[e.jsxs("span",{children:["Location: ",m.location||"N/A"]}),e.jsxs("span",{children:["Votes: +",m.votes_up," / -",m.votes_down]}),e.jsxs("span",{children:["Created: ",new Date(m.created_at).toLocaleDateString()]})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>{_(m),D(!0)},className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:"View"}),e.jsx("div",{className:"relative",children:e.jsxs("select",{onChange:T=>me(m.id,T.target.value),className:"text-sm border rounded px-2 py-1",defaultValue:"",children:[e.jsx("option",{value:"",disabled:!0,children:"Actions"}),m.status==="PENDING"&&e.jsxs(e.Fragment,{children:[e.jsx("option",{value:"verify",children:"Approve"}),e.jsx("option",{value:"reject",children:"Reject"}),e.jsx("option",{value:"escalate",children:"Flag"})]})]})})]})]})}),Z=()=>e.jsx(Xe,{isOpen:O,onClose:()=>D(!1),title:"Report Details",hideOnDesktop:!1,children:g&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Threat Type"}),e.jsx("p",{className:"text-gray-900",children:g.threat_type})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Urgency"}),e.jsx("p",{className:"text-gray-900",children:g.urgency})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Status"}),e.jsx("p",{className:"text-gray-900",children:g.status})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Verified"}),e.jsx("p",{className:"text-gray-900",children:g.verified?"Yes":"No"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Location"}),e.jsx("p",{className:"text-gray-900",children:g.location||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Created"}),e.jsx("p",{className:"text-gray-900",children:new Date(g.created_at).toLocaleString()})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Description"}),e.jsx("p",{className:"text-gray-900",children:g.description})]}),g.media&&g.media.length>0&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Attachments"}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:g.media.map((m,T)=>{var se;const G=(se=m.media_url)!=null&&se.startsWith("http")?m.media_url:`${we}${m.media_url}`;return e.jsx("a",{href:G,target:"_blank",rel:"noreferrer",className:"block w-full h-24 bg-gray-100 rounded overflow-hidden",children:e.jsx("img",{src:G,alt:"attachment",className:"w-full h-full object-cover",onError:j=>{j.currentTarget.style.display="none"}})},m.id||T)})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Up Votes"}),e.jsx("p",{className:"text-gray-900",children:g.votes_up})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Down Votes"}),e.jsx("p",{className:"text-gray-900",children:g.votes_down})]})]}),e.jsxs("div",{className:"pt-4 border-t",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Quick Actions"}),e.jsxs("div",{className:"flex space-x-2",children:[g.status==="PENDING"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>{me(g.id,"verify"),D(!1)},className:"bg-green-600 text-white px-3 py-2 rounded text-sm hover:bg-green-700",children:"Verify"}),e.jsx("button",{onClick:()=>{me(g.id,"reject"),D(!1)},className:"bg-red-600 text-white px-3 py-2 rounded text-sm hover:bg-red-700",children:"Reject"}),e.jsx("button",{onClick:()=>{me(g.id,"escalate"),D(!1)},className:"bg-yellow-600 text-white px-3 py-2 rounded text-sm hover:bg-yellow-700",children:"Escalate"})]}),e.jsx("button",{onClick:async()=>{if(confirm("Delete this report?"))try{if(!(await Je.request({method:"DELETE",url:`/api/admin/reports/${g.id}`})).ok)throw new Error("Delete failed");D(!1),K()}catch{alert("Failed to delete report")}},className:"bg-gray-600 text-white px-3 py-2 rounded text-sm hover:bg-gray-700",children:"Delete"})]})]})]})}),ke=()=>e.jsx(Xe,{isOpen:h,onClose:()=>S(!1),title:"Bulk Actions",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Action for ",w.length," selected reports"]}),e.jsxs("select",{value:$,onChange:m=>L(m.target.value),className:"w-full border rounded-lg px-3 py-2",children:[e.jsx("option",{value:"",children:"Select action..."}),e.jsx("option",{value:"verify",children:"Approve"}),e.jsx("option",{value:"reject",children:"Reject"}),e.jsx("option",{value:"escalate",children:"Flag"})]})]}),e.jsx("div",{className:"pt-4 border-t",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:re,disabled:!$,className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 disabled:bg-gray-400",children:"Apply Action"}),e.jsx("button",{onClick:()=>S(!1),className:"bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700",children:"Cancel"})]})})]})});return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Community Reports"}),e.jsx("p",{className:"text-gray-600",children:"Manage and moderate community threat reports"})]}),e.jsxs("div",{className:"mt-4 sm:mt-0 flex space-x-2",children:[w.length>0&&e.jsxs("button",{onClick:()=>S(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700",children:["Bulk Actions (",w.length,")"]}),e.jsx("button",{onClick:K,className:"bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700",children:"Refresh"})]})]})}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Filters"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),e.jsxs("select",{value:F.status,onChange:m=>q({status:m.target.value}),className:"w-full border rounded-lg px-3 py-2",children:[e.jsx("option",{value:"",children:"All Statuses"}),e.jsx("option",{value:"PENDING",children:"Pending"}),e.jsx("option",{value:"VERIFIED",children:"Verified"}),e.jsx("option",{value:"REJECTED",children:"Rejected"}),e.jsx("option",{value:"ESCALATED",children:"Escalated"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Urgency"}),e.jsxs("select",{value:F.urgency,onChange:m=>q({urgency:m.target.value}),className:"w-full border rounded-lg px-3 py-2",children:[e.jsx("option",{value:"",children:"All Urgencies"}),e.jsx("option",{value:"HIGH",children:"High"}),e.jsx("option",{value:"MEDIUM",children:"Medium"}),e.jsx("option",{value:"LOW",children:"Low"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Threat Type"}),e.jsxs("select",{value:F.threat_type,onChange:m=>q({threat_type:m.target.value}),className:"w-full border rounded-lg px-3 py-2",children:[e.jsx("option",{value:"",children:"All Types"}),e.jsx("option",{value:"PHISHING",children:"Phishing"}),e.jsx("option",{value:"MALWARE",children:"Malware"}),e.jsx("option",{value:"SCAM",children:"Scam"}),e.jsx("option",{value:"SOCIAL_ENGINEERING",children:"Social Engineering"}),e.jsx("option",{value:"OTHER",children:"Other"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Verified"}),e.jsxs("select",{value:F.verified,onChange:m=>q({verified:m.target.value}),className:"w-full border rounded-lg px-3 py-2",children:[e.jsx("option",{value:"",children:"All"}),e.jsx("option",{value:"true",children:"Verified Only"}),e.jsx("option",{value:"false",children:"Unverified Only"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Per Page"}),e.jsxs("select",{value:F.per_page,onChange:m=>q({per_page:parseInt(m.target.value)}),className:"w-full border rounded-lg px-3 py-2",children:[e.jsx("option",{value:10,children:"10"}),e.jsx("option",{value:20,children:"20"}),e.jsx("option",{value:50,children:"50"})]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow",children:[e.jsx("div",{className:"p-6 border-b",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Reports (",r.total||0,")"]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",checked:w.length===s.length&&s.length>0,onChange:xe,className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-600",children:"Select All"})]})]})}),e.jsx("div",{className:"p-6",children:c?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):p?e.jsxs("div",{className:"text-center py-12",children:[e.jsxs("div",{className:"text-red-500 mb-4",children:["âš ï¸ ",p]}),e.jsx("button",{onClick:K,className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700",children:"Retry"})]}):s.length===0?e.jsx("div",{className:"text-center py-12 text-gray-500",children:"No reports found matching your criteria"}):e.jsx("div",{children:s.map(m=>e.jsx(he,{report:m},m.id))})})]}),r.pages>1&&e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-gray-700",children:["Showing ",(r.page-1)*r.per_page+1," to"," ",Math.min(r.page*r.per_page,r.total)," of"," ",r.total," results"]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>q({page:r.page-1}),disabled:r.page<=1,className:"px-3 py-2 border rounded-lg disabled:bg-gray-100 disabled:text-gray-400",children:"Previous"}),e.jsxs("span",{className:"px-3 py-2 text-gray-700",children:["Page ",r.page," of ",r.pages]}),e.jsx("button",{onClick:()=>q({page:r.page+1}),disabled:r.page>=r.pages,className:"px-3 py-2 border rounded-lg disabled:bg-gray-100 disabled:text-gray-400",children:"Next"})]})]})}),e.jsx(Z,{}),e.jsx(ke,{})]})};function Ht({setActiveTab:t}){var es,bs;const{user:s,isAuthenticated:a,isLoading:r}=Ve(),[l,c]=o.useState("overview"),[b,p]=o.useState(!1),[f,w]=o.useState(!1),[C,O]=o.useState(null),[D,g]=o.useState(null),[_,h]=o.useState(!1),[S,$]=o.useState(!1),[L,F]=o.useState({title:"",description:"",difficulty:"BEGINNER",estimated_time:10}),[Y,K]=o.useState({first_name:"",last_name:"",email:"",role:"USER",password:""}),[me,re]=o.useState([]),[Q,xe]=o.useState([]),[q,he]=o.useState([]),[Z,ke]=o.useState({total:0,active:0,suspended:0,banned:0,admins:0,moderators:0,regular:0}),[m,T]=o.useState(null),[G,se]=o.useState("checking"),[j,W]=o.useState(null),[U,X]=o.useState(null),[v,y]=o.useState({title:"",type:"info",content:"",contentType:"info",contentStyle:"default",duration:5,media:[]}),[N,M]=o.useState(null),[V,B]=o.useState(!1),[ae,d]=o.useState(""),[A,k]=o.useState(0);ss.useEffect(()=>{if(ae){const n=setTimeout(()=>{d("")},3e3);return()=>clearTimeout(n)}},[ae]),ss.useEffect(()=>{var n,x,z;console.log("ðŸ”„ selectedModuleForLessons state changed:",U),U&&(console.log("ðŸ”„ New selectedModuleForLessons lessons:",(n=U.content)==null?void 0:n.lessons),console.log("ðŸ”„ New selectedModuleForLessons lesson count:",((z=(x=U.content)==null?void 0:x.lessons)==null?void 0:z.length)||0))},[U]);const E=async()=>{try{T(null);const n=await je();re(n)}catch(n){console.error("Failed to load modules:",n),T(`Failed to load modules: ${n.message}`),(n.message.includes("Failed to fetch")||n.message.includes("NetworkError"))&&se("disconnected")}},I=async()=>{try{$(!0),T(null),console.log("ðŸ”„ loadUsers called");const n=await Dt();console.log("ðŸ”„ getAllUsers result:",n),n.success?(console.log("âœ… Setting users state with:",n.users),xe(n.users)):(console.error("âŒ Failed to load users:",n.error),T(`Failed to load users: ${n.error}`))}catch(n){console.error("âŒ Error in loadUsers:",n),T(`Failed to load users: ${n.message}`),(n.message.includes("Failed to fetch")||n.message.includes("NetworkError"))&&se("disconnected")}finally{$(!1)}},ye=async()=>{try{console.log("ðŸ”„ loadDeletedUsers called");const n=await Ut();console.log("ðŸ”„ getDeletedUsers result:",n),n.success?(console.log("âœ… Setting deletedUsers state with:",n.users),he(n.users)):console.error("âŒ Failed to load deleted users:",n.error)}catch(n){console.error("âŒ Error in loadDeletedUsers:",n)}},Ce=async()=>{try{T(null);const n=await Ft();n.success?ke(n.stats):(console.error("Failed to load user stats:",n.error),T(`Failed to load user stats: ${n.error}`))}catch(n){console.error("Failed to load user stats:",n),T(`Failed to load user stats: ${n.message}`),(n.message.includes("Failed to fetch")||n.message.includes("NetworkError"))&&se("disconnected")}},$e=async()=>{if(!L.title.trim()||!L.description.trim()){alert("Please fill in all required fields");return}try{h(!0);const n={...L,content:{lessons:[]}};await zs(n),F({title:"",description:"",difficulty:"BEGINNER",estimated_time:10}),p(!1),await E(),alert("Module created successfully!")}catch(n){console.error("Failed to create module:",n),alert(`Failed to create module: ${n.message}`)}finally{h(!1)}},Me=async n=>{if(confirm("Are you sure you want to delete this module? This will also delete all lessons within it. This action cannot be undone."))try{h(!0),await Bs(n),alert("Module deleted successfully!"),await E()}catch(x){console.error("Failed to delete module:",x),alert(`Failed to delete module: ${x.message}`)}finally{h(!1)}},le=async(n,x)=>{try{h(!0),console.log("ðŸ”„ Updating user status:",{userId:n,newStatus:x});const z=await Es(n,x);console.log("ðŸ”„ updateUserStatus result:",z),z.success?(console.log("âœ… User status updated successfully"),alert("User status updated successfully!"),await I(),await Ce()):(console.log("âŒ User status update failed:",z.error),alert(`Failed to update user status: ${z.error}`))}catch(z){console.error("âŒ Error updating user status:",z),alert(`Failed to update user status: ${z.message}`)}finally{h(!1)}},u=async(n,x)=>{try{h(!0),console.log("ðŸ”„ Updating user role:",{userId:n,newRole:x});const z=await Ls(n,x);console.log("ðŸ”„ updateUserRole result:",z),z.success?(console.log("âœ… User role updated successfully"),alert("User role updated successfully!"),await I(),await Ce()):(console.log("âŒ User role update failed:",z.error),alert(`Failed to update user role: ${z.error}`))}catch(z){console.error("âŒ Error updating user role:",z),alert(`Failed to update user role: ${z.message}`)}finally{h(!1)}},i=async n=>{if(confirm("Are you sure you want to delete this user? This action cannot be undone."))try{h(!0);const x=await Ot(n);x.success?(alert("User deleted successfully!"),await I(),await ye(),await Ce()):alert(`Failed to delete user: ${x.error}`)}catch(x){console.error("Failed to delete user:",x),alert(`Failed to delete user: ${x.message}`)}finally{h(!1)}},P=async n=>{if(confirm("Are you sure you want to restore this user? They will be able to access the system again."))try{h(!0);const x=await Bt(n);x.success?(alert("User restored successfully!"),await I(),await ye(),await Ce()):alert(`Failed to restore user: ${x.error}`)}catch(x){console.error("Failed to restore user:",x),alert(`Failed to restore user: ${x.message}`)}finally{h(!1)}},R=async()=>{if(!Y.first_name.trim()||!Y.last_name.trim()||!Y.email.trim()||!Y.password.trim()){alert("Please fill in all required fields");return}try{h(!0),T(null);const n=await zt(Y);n.success?(alert("User created successfully!"),K({first_name:"",last_name:"",email:"",role:"USER",password:""}),w(!1),await I(),await Ce()):T(n.error||"Failed to create user")}catch(n){console.error("Failed to create user:",n),T(n.message||"Failed to create user")}finally{h(!1)}},H=async n=>{var x,z,ie,de,pe;try{h(!0),T(null);const oe=D,Se=[];if(oe.first_name!==((x=Q.find(ve=>ve.id===n))==null?void 0:x.first_name)||oe.last_name!==((z=Q.find(ve=>ve.id===n))==null?void 0:z.last_name)||oe.email!==((ie=Q.find(ve=>ve.id===n))==null?void 0:ie.email)){const ve={first_name:oe.first_name,last_name:oe.last_name,email:oe.email};Se.push(It(n,ve))}if(oe.role&&oe.role!==((de=Q.find(ve=>ve.id===n))==null?void 0:de.role)&&Se.push(Ls(n,oe.role)),oe.status&&oe.status!==((pe=Q.find(ve=>ve.id===n))==null?void 0:pe.status)&&Se.push(Es(n,oe.status)),oe.newPassword&&Se.push($t(n,oe.newPassword)),Se.length>0){const ve=await Promise.all(Se);if(ve.some(Le=>!Le.success)){const Le=ve.filter(Ge=>!Ge.success).map(Ge=>Ge.error).join(", ");T(`Failed to update user: ${Le}`);return}}alert("User updated successfully!"),g(null),await I(),await Ce()}catch(oe){console.error("Failed to update user:",oe),T(oe.message||"Failed to update user")}finally{h(!1)}},Ne=async n=>{try{console.log("ðŸ”„ handleUpdateModule called with moduleId:",n),console.log("ðŸ”„ editingModule state:",C),h(!0),T(null);const x=C;console.log("ðŸ”„ moduleToUpdate:",x);const z={title:x.title,description:x.description,difficulty:x.difficulty,estimated_time:x.estimated_time};console.log("ðŸ”„ moduleData to send:",z),console.log("ðŸ”„ Calling updateModule from contentManager..."),await Fs(n,z),alert("Module updated successfully!"),O(null),await E()}catch(x){console.error("âŒ Failed to update module:",x),T(x.message||"Failed to update module")}finally{h(!1)}},Ae=async n=>{var x,z,ie,de,pe,oe,Se,qe,ve,hs;try{B(!0),d(""),console.log("ðŸ”„ Adding lesson with data:",{moduleId:n,newLessonData:v});const Le=await Hs(n,v);if(console.log("ðŸ”„ addLesson response:",Le),Le&&Le.message){console.log("âœ… Lesson added successfully, response:",Le),y({title:"",type:"info",content:"",contentType:"info",contentStyle:"default",duration:5,media:[]}),await E(),console.log("ðŸ”„ After loadModules, modules state:",me);const Ge=await je(!0);console.log("ðŸ”„ getAllModules result:",Ge),console.log("ðŸ”„ All modules content:",Ge.map(We=>{var Ns;return{id:We.id,title:We.title,content:We.content,lessons:(Ns=We.content)==null?void 0:Ns.lessons}}));const Ee=Ge.find(We=>We.id===n);console.log("ðŸ”„ Found updated module:",Ee),console.log("ðŸ”„ Module content:",Ee==null?void 0:Ee.content),console.log("ðŸ”„ Module lessons:",(x=Ee==null?void 0:Ee.content)==null?void 0:x.lessons),console.log("ðŸ”„ Lesson count:",((ie=(z=Ee==null?void 0:Ee.content)==null?void 0:z.lessons)==null?void 0:ie.length)||0),console.log("ðŸ”„ Current selectedModuleForLessons state:",U),console.log("ðŸ”„ Current selectedModuleForLessons lessons:",(de=U==null?void 0:U.content)==null?void 0:de.lessons),console.log("ðŸ”„ Current selectedModuleForLessons lesson count:",((oe=(pe=U==null?void 0:U.content)==null?void 0:pe.lessons)==null?void 0:oe.length)||0),Ee?(console.log("ðŸ”„ Setting selectedModuleForLessons to:",Ee),console.log("ðŸ”„ Current lesson count before update:",((qe=(Se=U==null?void 0:U.content)==null?void 0:Se.lessons)==null?void 0:qe.length)||0),console.log("ðŸ”„ New lesson count after update:",((hs=(ve=Ee==null?void 0:Ee.content)==null?void 0:ve.lessons)==null?void 0:hs.length)||0),X(Ee),re(Ge),k(We=>We+1),setTimeout(()=>{console.log("ðŸ”„ After state update - selectedModuleForLessons:",U),console.log("ðŸ”„ After state update - modules state:",me),console.log("ðŸ”„ After state update - forceUpdate value:",A)},100)):console.log("âŒ Could not find updated module with ID:",n),d("Lesson added successfully!")}else console.log("âŒ Lesson add failed, response:",Le),T((Le==null?void 0:Le.error)||"Failed to add lesson")}catch(Le){console.error("âŒ Error adding lesson:",Le),T("Failed to add lesson")}finally{B(!1)}},Oe=async(n,x,z)=>{try{B(!0),d("");const ie=await Gs(n,x,z);if(ie&&ie.message){M(null),await E();const de=await je(!0),pe=de.find(oe=>oe.id===n);pe&&(X(pe),re(de),k(oe=>oe+1)),d("Lesson updated successfully!")}else T((ie==null?void 0:ie.error)||"Failed to update lesson")}catch(ie){console.error("Error updating lesson:",ie),T("Failed to update lesson")}finally{B(!1)}},Pe=async(n,x)=>{var z,ie,de;if(window.confirm("Are you sure you want to delete this lesson?"))try{B(!0),d(""),console.log("ðŸ”„ handleDeleteLesson called with:",{moduleId:n,lessonId:x});const pe=await Ws(n,x);if(console.log("ðŸ”„ deleteLesson response:",pe),pe&&pe.message){console.log("âœ… Lesson deleted successfully, refreshing data..."),await E();const oe=await je(!0),Se=oe.find(qe=>qe.id===n);Se&&(console.log("ðŸ”„ Found updated module:",Se),console.log("ðŸ”„ Module content:",Se.content),console.log("ðŸ”„ Module lessons:",(z=Se.content)==null?void 0:z.lessons),console.log("ðŸ”„ Lesson count:",((de=(ie=Se.content)==null?void 0:ie.lessons)==null?void 0:de.length)||0),X(Se),re(oe),k(qe=>qe+1)),d("Lesson deleted successfully!")}else console.log("âŒ Failed to delete lesson:",pe==null?void 0:pe.error),T((pe==null?void 0:pe.error)||"Failed to delete lesson")}catch(pe){console.error("âŒ Error deleting lesson:",pe),T("Failed to delete lesson")}finally{B(!1)}},ze=async()=>{try{se("checking");const x=await fetch("https://api.remalehprotect.remaleh.com.au/api/health",{method:"GET",headers:{"Content-Type":"application/json"},signal:AbortSignal.timeout(1e4)});if(x.ok){const z=await x.json();console.log("Health check response:",z),se(z.database==="healthy"?"connected":"disconnected"),z.database!=="healthy"?T(`Database status: ${z.database}`):T(null)}else console.error("Health check failed with status:",x.status),se("disconnected"),T(`Backend health check failed: ${x.status}`)}catch(n){console.error("Database connection check failed:",n),se("disconnected"),n.name==="AbortError"?T("Backend connection timeout - service may be unavailable"):n.message.includes("Failed to fetch")?T("Cannot connect to backend - check if service is running"):T(`Connection error: ${n.message}`)}};if(ss.useEffect(()=>{E(),I(),ye(),Ce(),ze(),(async()=>{try{const n=await ge("/api/admin/stats");if(n.ok){const x=await n.json();W(x)}}catch{}})()},[]),r)return e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#21a1ce] mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Checking authentication..."})]})});if(!a)return e.jsxs("div",{className:"space-y-6 p-4",children:[e.jsx("div",{className:"bg-gradient-to-r from-[#21a1ce] to-[#1a8bb8] rounded-2xl p-6 text-white shadow-lg",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Fe,{className:"w-16 h-16 mx-auto mb-4"}),e.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Authentication Required"}),e.jsx("p",{className:"text-white text-lg",children:"Please log in to access the Admin Dashboard."})]})}),e.jsx(J,{children:e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Fe,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Access Denied"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"You must be logged in to access the admin panel."}),e.jsx(ee,{onClick:()=>t("login"),className:"bg-[#21a1ce] hover:bg-[#1a8bb8] text-white",children:"Go to Login"})]})})]});if(!(s!=null&&s.is_admin)&&(s==null?void 0:s.role)!=="ADMIN")return e.jsxs("div",{className:"space-y-6 p-4",children:[e.jsx("div",{className:"bg-gradient-to-r from-red-500 to-red-600 rounded-2xl p-6 text-white shadow-lg",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Fe,{className:"w-16 h-16 mx-auto mb-4"}),e.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Access Denied"}),e.jsx("p",{className:"text-white text-lg",children:"You don't have permission to access the Admin Dashboard."})]})}),e.jsx(J,{children:e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Fe,{className:"w-16 h-16 text-red-400 mx-auto mb-4"}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Insufficient Privileges"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Only administrators can access this panel."}),e.jsx(ee,{onClick:()=>t("home"),className:"bg-[#21a1ce] hover:bg-[#1a8bb8] text-white",children:"Return to Home"})]})})]});const Be=()=>{var n,x;return e.jsxs("div",{className:"space-y-6",children:[e.jsx(J,{children:e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Database Status"}),e.jsxs("div",{className:`flex items-center space-x-2 ${G==="connected"?"text-green-600":G==="disconnected"?"text-red-600":"text-yellow-600"}`,children:[e.jsx("div",{className:`w-3 h-3 rounded-full ${G==="connected"?"bg-green-500":G==="disconnected"?"bg-red-500":"bg-yellow-500"}`}),e.jsx("span",{className:"text-sm font-medium capitalize",children:G==="connected"?"Connected":G==="disconnected"?"Disconnected":"Checking..."})]})]}),G==="disconnected"&&e.jsxs("div",{className:"mt-2",children:[e.jsx("p",{className:"text-sm text-red-600 mb-2",children:"Warning: Database connection failed. Some features may not work properly."}),m&&e.jsxs("p",{className:"text-xs text-red-500 bg-red-50 p-2 rounded",children:["Error: ",m]})]}),e.jsx("button",{onClick:ze,className:"mt-2 text-sm text-blue-600 hover:text-blue-800 underline",children:"Check Connection"})]})}),e.jsx(J,{children:e.jsxs("div",{className:"p-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"System Overview"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsx(J,{children:e.jsxs("div",{className:"text-center p-4",children:[e.jsx(Te,{className:"w-8 h-8 text-blue-500 mx-auto mb-2"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:me.length}),e.jsx("p",{className:"text-sm text-gray-600",children:"Learning Modules"})]})}),e.jsx(J,{children:e.jsxs("div",{className:"text-center p-4",children:[e.jsx(Ye,{className:"w-8 h-8 text-green-500 mx-auto mb-2"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:Z.total}),e.jsx("p",{className:"text-sm text-gray-600",children:"Total Users"}),e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[Z.active," active, ",Z.admins," admins"]})]})}),e.jsx(J,{children:e.jsxs("div",{className:"text-center p-4",children:[e.jsx(as,{className:"w-8 h-8 text-orange-500 mx-auto mb-2"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:((n=j==null?void 0:j.reports)==null?void 0:n.total)??0}),e.jsx("p",{className:"text-sm text-gray-600",children:"Community Reports"}),(j==null?void 0:j.reports)&&e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[j.reports.pending," pending, ",j.reports.approved," approved"]}),e.jsxs("div",{className:"mt-3 flex items-center justify-center gap-2",children:[e.jsx(ee,{onClick:()=>c("reports"),className:"bg-orange-600 hover:bg-orange-700 text-white px-3 py-1 text-xs",children:"Go to Reports"}),((x=j==null?void 0:j.reports)==null?void 0:x.pending)>0&&e.jsx(ee,{onClick:()=>{c("reports"),window.__ADMIN_REPORTS_INITIAL_FILTERS__={status:"PENDING"}},className:"bg-yellow-600 hover:bg-yellow-700 text-white px-3 py-1 text-xs",children:"Review Pending"})]})]})}),e.jsx(J,{children:e.jsxs("div",{className:"text-center p-4",children:[e.jsx(Fe,{className:"w-8 h-8 text-purple-500 mx-auto mb-2"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Active"}),e.jsx("p",{className:"text-sm text-gray-600",children:"System Status"})]})})]}),e.jsxs("div",{className:"mt-6 space-y-3",children:[e.jsxs(ee,{onClick:()=>c("content"),className:"bg-[#21a1ce] hover:bg-[#1a8bb8] text-white",children:[e.jsx(Te,{className:"w-4 h-4 mr-2"}),"Manage Content"]}),e.jsxs(ee,{onClick:()=>c("users"),className:"bg-green-600 hover:bg-green-700 text-white",children:[e.jsx(Ye,{className:"w-4 h-4 mr-2"}),"Manage Users"]}),e.jsxs(ee,{onClick:()=>c("reports"),className:"bg-orange-600 hover:bg-orange-700 text-white",children:[e.jsx(as,{className:"w-4 h-4 mr-2"}),"View Reports"]})]})]})})]})},He=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Learning Content Management"}),e.jsxs(ee,{onClick:()=>p(!0),className:"bg-[#21a1ce] hover:bg-[#1a8bb8] text-white",children:[e.jsx(os,{className:"w-4 h-4 mr-2"}),"Add Module"]})]}),e.jsx("div",{className:"space-y-4",children:me.length===0?e.jsx(J,{children:e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Te,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Modules Yet"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Create your first learning module to get started."}),e.jsxs(ee,{onClick:()=>p(!0),className:"bg-[#21a1ce] hover:bg-[#1a8bb8] text-white",children:[e.jsx(os,{className:"w-4 h-4 mr-2"}),"Create First Module"]})]})}):me.map(n=>{var x,z;return e.jsx(J,{children:e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:n.title}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>X(n),className:"p-2 text-green-600 hover:bg-green-50 rounded-lg transition-colors",title:"Manage Lessons",children:e.jsx(Te,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>O(n),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Edit Module",children:e.jsx(gs,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>Me(n.id),disabled:_,className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors disabled:opacity-50",title:"Delete Module",children:e.jsx(cs,{className:"w-4 h-4"})})]})]}),e.jsx("p",{className:"text-gray-600 text-sm mb-2",children:n.description}),e.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500",children:[e.jsxs("span",{children:[((z=(x=n.content)==null?void 0:x.lessons)==null?void 0:z.length)||0," lessons"]}),e.jsx("span",{className:"px-2 py-1 rounded-full text-xs bg-blue-100 text-blue-800",children:n.difficulty}),e.jsxs("span",{className:"px-2 py-1 rounded-full text-xs bg-green-100 text-green-800",children:[n.estimated_time," min"]})]})]})},n.id)})})]}),us=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"User Management"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs(ee,{onClick:I,disabled:_,className:"bg-gray-600 hover:bg-gray-700 text-white",children:[e.jsx(is,{className:`w-4 h-4 mr-2 ${_?"animate-spin":""}`}),"Refresh"]}),e.jsxs(ee,{onClick:()=>w(!0),className:"bg-green-600 hover:bg-green-700 text-white",children:[e.jsx(os,{className:"w-4 h-4 mr-2"}),"Add User"]})]})]}),S?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#21a1ce] mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading users..."})]})}):Q.length===0?e.jsx(J,{children:e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Ye,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Users Found"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"There are no users in the system yet."})]})}):e.jsx("div",{className:"space-y-4",children:Q.map(n=>{var x;return e.jsx(J,{children:e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:n.first_name&&n.last_name?`${n.first_name} ${n.last_name}`:((x=n.email)==null?void 0:x.split("@")[0])||"Unknown User"}),e.jsx("p",{className:"text-sm text-gray-600",children:n.email}),n.created_at&&e.jsxs("p",{className:"text-xs text-gray-500",children:["Joined: ",new Date(n.created_at).toLocaleDateString()]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>g(n),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Edit User",children:e.jsx(gs,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>i(n.id),disabled:_,className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors disabled:opacity-50",title:"Delete User",children:e.jsx(cs,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"flex items-center space-x-4 text-sm mb-3",children:[e.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${n.is_admin||n.role==="ADMIN"?"bg-purple-100 text-purple-800":n.role==="MODERATOR"?"bg-orange-100 text-orange-800":"bg-blue-100 text-blue-800"}`,children:n.role||"USER"}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${n.status==="ACTIVE"?"bg-green-100 text-green-800":n.status==="SUSPENDED"?"bg-yellow-100 text-yellow-800":n.status==="BANNED"?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"}`,children:n.status||"UNKNOWN"})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs("select",{value:n.status||"ACTIVE",onChange:z=>le(n.id,z.target.value),disabled:_,className:"px-2 py-1 text-xs border border-gray-300 rounded-md focus:ring-1 focus:ring-blue-500 disabled:opacity-50",children:[e.jsx("option",{value:"ACTIVE",children:"Active"}),e.jsx("option",{value:"SUSPENDED",children:"Suspended"}),e.jsx("option",{value:"BANNED",children:"Banned"})]}),e.jsxs("select",{value:n.role||"USER",onChange:z=>u(n.id,z.target.value),disabled:_,className:"px-2 py-1 text-xs border border-gray-300 rounded-md focus:ring-1 focus:ring-blue-500 disabled:opacity-50",children:[e.jsx("option",{value:"USER",children:"User"}),e.jsx("option",{value:"MODERATOR",children:"Moderator"}),e.jsx("option",{value:"ADMIN",children:"Admin"})]})]})]})},n.id)})})]}),ls=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Deleted Users"}),e.jsxs("div",{className:"space-y-4",children:[q.map(n=>{var x;return e.jsx(J,{children:e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900",children:n.first_name&&n.last_name?`${n.first_name} ${n.last_name}`:((x=n.email)==null?void 0:x.split("@")[0])||"Unknown User"}),e.jsx("p",{className:"text-sm text-gray-600",children:n.email}),n.created_at&&e.jsxs("p",{className:"text-xs text-gray-500",children:["Joined: ",new Date(n.created_at).toLocaleDateString()]})]}),e.jsx("div",{className:"flex space-x-2",children:e.jsx("button",{onClick:()=>P(n.id),disabled:_,className:"p-2 text-green-600 hover:bg-green-50 rounded-lg transition-colors disabled:opacity-50",title:"Restore User",children:e.jsx(is,{className:"w-4 h-4"})})})]}),e.jsxs("div",{className:"flex items-center space-x-4 text-sm",children:[e.jsx("span",{className:"px-2 py-1 rounded-full text-xs bg-gray-100 text-gray-800",children:n.role||"USER"}),e.jsx("span",{className:"px-2 py-1 rounded-full text-xs bg-red-100 text-red-800",children:"DELETED"})]})]})},n.id)}),q.length===0&&e.jsx("div",{className:"text-center py-8 text-gray-500",children:e.jsx("p",{children:"No deleted users"})})]})]});return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Admin Dashboard"}),e.jsxs("p",{className:"text-gray-600",children:["Welcome back, ",(s==null?void 0:s.name)||"Admin"]}),e.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[e.jsx("span",{className:"text-sm text-gray-500",children:"Backend:"}),e.jsxs("div",{className:`flex items-center space-x-1 ${G==="connected"?"text-green-600":G==="disconnected"?"text-red-600":"text-yellow-600"}`,children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${G==="connected"?"bg-green-500":G==="disconnected"?"bg-red-500":"bg-yellow-500"}`}),e.jsx("span",{className:"text-xs font-medium capitalize",children:G==="connected"?"Connected":G==="disconnected"?"Disconnected":"Checking..."})]})]})]}),e.jsx("button",{onClick:()=>t("home"),className:"p-2 text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"flex space-x-1 bg-gray-100 p-1 rounded-xl",children:[e.jsx("button",{onClick:()=>c("overview"),className:`flex-1 py-2 px-4 rounded-lg text-sm font-medium transition-colors ${l==="overview"?"bg-white text-[#21a1ce] shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:"Overview"}),e.jsx("button",{onClick:()=>c("content"),className:`flex-1 py-2 px-4 rounded-lg text-sm font-medium transition-colors ${l==="content"?"bg-white text-[#21a1ce] shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:"Content"}),e.jsx("button",{onClick:()=>c("users"),className:`flex-1 py-2 px-4 rounded-lg text-sm font-medium transition-colors ${l==="users"?"bg-white text-[#21a1ce] shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:"Users"}),e.jsx("button",{onClick:()=>c("reports"),className:`flex-1 py-2 px-4 rounded-lg text-sm font-medium transition-colors ${l==="reports"?"bg-white text-[#21a1ce] shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:"Reports"})]}),l==="overview"&&Be(),l==="content"&&He(),l==="users"&&e.jsxs(e.Fragment,{children:[us(),ls()]}),l==="reports"&&(window.__ADMIN_REPORTS_INITIAL_FILTERS__?(()=>{const n=window.__ADMIN_REPORTS_INITIAL_FILTERS__;return delete window.__ADMIN_REPORTS_INITIAL_FILTERS__,e.jsx(_s,{initialFilters:n})})():e.jsx(_s,{})),b&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white rounded-2xl max-w-md w-full max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Add New Module"}),e.jsx("button",{onClick:()=>p(!1),className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Module Title *"}),e.jsx(ne,{type:"text",value:L.title,onChange:n=>F(x=>({...x,title:n.target.value})),placeholder:"Enter module title",className:"w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description *"}),e.jsx(Ze,{value:L.description,onChange:n=>F(x=>({...x,description:n.target.value})),placeholder:"Enter module description",className:"w-full",rows:3})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Difficulty"}),e.jsxs("select",{value:L.difficulty,onChange:n=>F(x=>({...x,difficulty:n.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#21a1ce] focus:border-transparent",children:[e.jsx("option",{value:"BEGINNER",children:"Beginner"}),e.jsx("option",{value:"INTERMEDIATE",children:"Intermediate"}),e.jsx("option",{value:"ADVANCED",children:"Advanced"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Estimated Time (minutes)"}),e.jsx(ne,{type:"number",value:L.estimated_time,onChange:n=>F(x=>({...x,estimated_time:parseInt(n.target.value)||10})),placeholder:"10",min:"1",max:"120",className:"w-full"})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx(ee,{onClick:()=>p(!1),className:"flex-1 bg-gray-600 hover:bg-gray-700 text-white",children:"Cancel"}),e.jsx(ee,{onClick:$e,disabled:_,className:"flex-1 bg-[#21a1ce] hover:bg-[#1a8bb8] text-white",children:_?"Creating...":"Create Module"})]})]})]})})}),f&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white rounded-2xl max-w-md w-full max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Add New User"}),e.jsx("button",{onClick:()=>w(!1),className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Full Name"}),e.jsx(ne,{type:"text",placeholder:"Enter full name",value:Y.first_name,onChange:n=>K(x=>({...x,first_name:n.target.value})),className:"w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),e.jsx(ne,{type:"email",placeholder:"Enter email address",value:Y.email,onChange:n=>K(x=>({...x,email:n.target.value})),className:"w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Role"}),e.jsxs("select",{value:Y.role,onChange:n=>K(x=>({...x,role:n.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#21a1ce] focus:border-transparent",children:[e.jsx("option",{value:"USER",children:"User"}),e.jsx("option",{value:"MODERATOR",children:"Moderator"}),e.jsx("option",{value:"ADMIN",children:"Admin"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),e.jsx(ne,{type:"password",placeholder:"Enter password",value:Y.password,onChange:n=>K(x=>({...x,password:n.target.value})),className:"w-full"})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx(ee,{onClick:()=>w(!1),className:"flex-1 bg-gray-600 hover:bg-gray-700 text-white",children:"Cancel"}),e.jsx(ee,{onClick:R,disabled:_,className:"flex-1 bg-green-600 hover:bg-green-700 text-white",children:_?"Creating...":"Create User"})]})]})]})})}),D&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white rounded-2xl max-w-md w-full max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Edit User"}),e.jsx("button",{onClick:()=>g(null),className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"First Name"}),e.jsx(ne,{type:"text",placeholder:"Enter first name",value:D.first_name||"",onChange:n=>g(x=>({...x,first_name:n.target.value})),className:"w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Last Name"}),e.jsx(ne,{type:"text",placeholder:"Enter last name",value:D.last_name||"",onChange:n=>g(x=>({...x,last_name:n.target.value})),className:"w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),e.jsx(ne,{type:"email",placeholder:"Enter email address",value:D.email||"",onChange:n=>g(x=>({...x,email:n.target.value})),className:"w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Role"}),e.jsxs("select",{value:D.role||"USER",onChange:n=>g(x=>({...x,role:n.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#21a1ce] focus:border-transparent",children:[e.jsx("option",{value:"USER",children:"User"}),e.jsx("option",{value:"MODERATOR",children:"Moderator"}),e.jsx("option",{value:"ADMIN",children:"Admin"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),e.jsxs("select",{value:D.status||"ACTIVE",onChange:n=>g(x=>({...x,status:n.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#21a1ce] focus:border-transparent",children:[e.jsx("option",{value:"ACTIVE",children:"Active"}),e.jsx("option",{value:"SUSPENDED",children:"Suspended"}),e.jsx("option",{value:"BANNED",children:"Banned"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"New Password (leave blank to keep current)"}),e.jsx(ne,{type:"password",placeholder:"Enter new password",value:D.newPassword||"",onChange:n=>g(x=>({...x,newPassword:n.target.value})),className:"w-full"})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx(ee,{onClick:()=>g(null),className:"flex-1 bg-gray-600 hover:bg-gray-700 text-white",children:"Cancel"}),e.jsx(ee,{onClick:()=>H(D.id),disabled:_,className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white",children:_?"Updating...":"Update User"})]})]})]})})}),C&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white rounded-2xl max-w-md w-full max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Edit Module"}),e.jsx("button",{onClick:()=>O(null),className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Title"}),e.jsx(ne,{type:"text",placeholder:"Enter module title",value:C.title||"",onChange:n=>O(x=>({...x,title:n.target.value})),className:"w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),e.jsx(Ze,{placeholder:"Enter module description",value:C.description||"",onChange:n=>O(x=>({...x,description:n.target.value})),className:"w-full",rows:3})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Difficulty"}),e.jsxs("select",{value:C.difficulty||"BEGINNER",onChange:n=>O(x=>({...x,difficulty:n.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#21a1ce] focus:border-transparent",children:[e.jsx("option",{value:"BEGINNER",children:"Beginner"}),e.jsx("option",{value:"INTERMEDIATE",children:"Intermediate"}),e.jsx("option",{value:"ADVANCED",children:"Advanced"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Estimated Time (minutes)"}),e.jsx(ne,{type:"number",placeholder:"10",value:C.estimated_time||10,onChange:n=>O(x=>({...x,estimated_time:parseInt(n.target.value)||10})),min:"1",max:"120",className:"w-full"})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx(ee,{onClick:()=>O(null),className:"flex-1 bg-gray-600 hover:bg-gray-700 text-white",children:"Cancel"}),e.jsx(ee,{onClick:()=>Ne(C.id),disabled:_,className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white",children:_?"Updating...":"Update Module"})]})]})]})})}),U&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white rounded-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-900",children:["Manage Lessons: ",U.title]}),e.jsxs("div",{className:"text-sm text-gray-500",children:["Last updated: ",new Date().toLocaleTimeString()," (Render: ",A,")"]}),e.jsx("button",{onClick:()=>X(null),className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Add New Lesson"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Title"}),e.jsx(ne,{type:"text",placeholder:"Enter lesson title",value:v.title,onChange:n=>y(x=>({...x,title:n.target.value})),className:"w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Type"}),e.jsxs("select",{value:v.type,onChange:n=>y(x=>({...x,type:n.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#21a1ce] focus:border-transparent",children:[e.jsx("option",{value:"info",children:"Information"}),e.jsx("option",{value:"quiz",children:"Quiz"}),e.jsx("option",{value:"video",children:"Video"}),e.jsx("option",{value:"interactive",children:"Interactive"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Content Type"}),e.jsxs("select",{value:v.contentType,onChange:n=>y(x=>({...x,contentType:n.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#21a1ce] focus:border-transparent",children:[e.jsx("option",{value:"info",children:"Text"}),e.jsx("option",{value:"html",children:"HTML"}),e.jsx("option",{value:"markdown",children:"Markdown"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Duration (minutes)"}),e.jsx(ne,{type:"number",placeholder:"5",value:v.duration,onChange:n=>y(x=>({...x,duration:parseInt(n.target.value)||5})),min:"1",max:"60",className:"w-full"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Content"}),e.jsx(Ze,{placeholder:"Enter lesson content",value:v.content,onChange:n=>y(x=>({...x,content:n.target.value})),className:"w-full",rows:4})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Media (optional)"}),e.jsxs("div",{className:"space-y-3",children:[(v.media||[]).map((n,x)=>e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-2 items-center",children:[e.jsxs("select",{value:n.type||"image",onChange:z=>y(ie=>{const de=[...ie.media||[]];return de[x]={...de[x],type:z.target.value},{...ie,media:de}}),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#21a1ce] focus:border-transparent",children:[e.jsx("option",{value:"image",children:"Image"}),e.jsx("option",{value:"video",children:"Video"})]}),e.jsx("input",{type:"url",placeholder:"https://cdn.example.com/path/to/media",value:n.url||"",onChange:z=>y(ie=>{const de=[...ie.media||[]];return de[x]={...de[x],url:z.target.value},{...ie,media:de}}),className:"md:col-span-2 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#21a1ce] focus:border-transparent"}),e.jsx("input",{type:"text",placeholder:"Caption (optional)",value:n.caption||"",onChange:z=>y(ie=>{const de=[...ie.media||[]];return de[x]={...de[x],caption:z.target.value},{...ie,media:de}}),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#21a1ce] focus:border-transparent"}),e.jsx("button",{type:"button",onClick:()=>y(z=>({...z,media:(z.media||[]).filter((ie,de)=>de!==x)})),className:"text-red-600 text-sm hover:underline",children:"Remove"})]},x)),e.jsx("button",{type:"button",onClick:()=>y(n=>({...n,media:[...n.media||[],{type:"image",url:"",caption:""}]})),className:"text-[#21a1ce] text-sm hover:underline",children:"+ Add media"})]})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx(ee,{onClick:()=>Ae(U.id),disabled:V,className:"bg-[#21a1ce] hover:bg-[#1a8bb8] text-white",children:V?"Adding...":"Add Lesson"}),ae&&e.jsx("div",{className:"mt-3 p-3 bg-green-50 border border-green-200 rounded-lg",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("svg",{className:"w-5 h-5 text-green-600 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),e.jsx("span",{className:"text-sm text-green-800 font-medium",children:ae})]})})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Existing Lessons"}),V&&e.jsx("div",{className:"mb-4 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(is,{className:"w-4 h-4 text-blue-600 mr-2 animate-spin"}),e.jsx("span",{className:"text-sm text-blue-800",children:"Updating lessons..."})]})}),((bs=(es=U.content)==null?void 0:es.lessons)==null?void 0:bs.length)>0?e.jsx("div",{className:"space-y-3",children:U.content.lessons.map(n=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h4",{className:"font-medium text-gray-900",children:n.title}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>M(n),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Edit Lesson",children:e.jsx(gs,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>Pe(U.id,n.id),disabled:V,className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors disabled:opacity-50",title:"Delete Lesson",children:e.jsx(cs,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"text-sm text-gray-600 mb-2",children:[e.jsx("span",{className:"px-2 py-1 rounded-full text-xs bg-blue-100 text-blue-800 mr-2",children:n.type}),e.jsxs("span",{className:"px-2 py-1 rounded-full text-xs bg-green-100 text-green-800 mr-2",children:[n.duration," min"]}),e.jsx("span",{className:"px-2 py-1 rounded-full text-xs bg-purple-100 text-purple-800",children:n.contentType})]}),e.jsx("p",{className:"text-gray-700 text-sm line-clamp-2",children:n.content})]},n.id))}):e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(Te,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("p",{children:"No lessons yet. Add your first lesson above!"})]})]})]})})}),N&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white rounded-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Edit Lesson"}),e.jsx("button",{onClick:()=>M(null),className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Title"}),e.jsx(ne,{type:"text",placeholder:"Enter lesson title",value:N.title||"",onChange:n=>M(x=>({...x,title:n.target.value})),className:"w-full"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Type"}),e.jsxs("select",{value:N.type||"info",onChange:n=>M(x=>({...x,type:n.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#21a1ce] focus:border-transparent",children:[e.jsx("option",{value:"info",children:"Information"}),e.jsx("option",{value:"quiz",children:"Quiz"}),e.jsx("option",{value:"video",children:"Video"}),e.jsx("option",{value:"interactive",children:"Interactive"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Duration (minutes)"}),e.jsx(ne,{type:"number",placeholder:"5",value:N.duration||5,onChange:n=>M(x=>({...x,duration:parseInt(n.target.value)||5})),min:"1",max:"60",className:"w-full"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Content"}),e.jsx(Ze,{placeholder:"Enter lesson content",value:N.content||"",onChange:n=>M(x=>({...x,content:n.target.value})),className:"w-full",rows:6})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx(ee,{onClick:()=>M(null),className:"flex-1 bg-gray-600 hover:bg-gray-700 text-white",children:"Cancel"}),e.jsx(ee,{onClick:()=>Oe(U.id,N.id,N),disabled:V,className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white",children:V?"Updating...":"Update Lesson"})]})]})]})})})]})}function Gt({setActiveTab:t}){const{user:s,updateProfile:a,changePassword:r}=Ve(),[l,c]=o.useState(!1),[b,p]=o.useState(!1),[f,w]=o.useState(!1),[C,O]=o.useState({name:(s==null?void 0:s.name)||"",email:(s==null?void 0:s.email)||"",bio:(s==null?void 0:s.bio)||""}),[D,g]=o.useState({currentPassword:"",newPassword:"",confirmPassword:""}),_=L=>{const{name:F,value:Y}=L.target;O(K=>({...K,[F]:Y}))},h=L=>{const{name:F,value:Y}=L.target;g(K=>({...K,[F]:Y}))},S=async()=>{w(!0);try{await a(C),c(!1)}catch(L){console.error("Failed to update profile:",L)}finally{w(!1)}},$=async()=>{if(D.newPassword!==D.confirmPassword){alert("New passwords do not match");return}w(!0);try{await r(D.currentPassword,D.newPassword),p(!1),g({currentPassword:"",newPassword:"",confirmPassword:""})}catch(L){console.error("Failed to change password:",L)}finally{w(!1)}};return s?e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:()=>t("home"),className:"p-2 text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(ts,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Profile Settings"}),e.jsx("p",{className:"text-gray-600",children:"Manage your account information"})]})]})}),e.jsx(J,{children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Profile Information"}),e.jsx(ee,{onClick:()=>c(!l),variant:l?"secondary":"primary",className:"bg-[#21a1ce] hover:bg-[#1a8bb8] text-white",children:l?"Cancel":"Edit Profile"})]}),l?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Full Name"}),e.jsx(ne,{type:"text",name:"name",value:C.name,onChange:_,placeholder:"Enter your full name",className:"w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),e.jsx(ne,{type:"email",name:"email",value:C.email,onChange:_,placeholder:"Enter your email",className:"w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Bio"}),e.jsx(Ze,{name:"bio",value:C.bio,onChange:_,placeholder:"Tell us about yourself",rows:3,className:"w-full"})]}),e.jsxs(ee,{onClick:S,disabled:f,loading:f,className:"w-full bg-[#21a1ce] hover:bg-[#1a8bb8] text-white",children:[e.jsx(nt,{className:"w-4 h-4 mr-2"}),"Save Changes"]})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(ps,{className:"w-5 h-5 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Name"}),e.jsx("p",{className:"font-medium text-gray-900",children:s.name||"Not set"})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(rt,{className:"w-5 h-5 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Email"}),e.jsx("p",{className:"font-medium text-gray-900",children:s.email})]})]}),s.bio&&e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(ps,{className:"w-5 h-5 text-gray-400 mt-1"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Bio"}),e.jsx("p",{className:"font-medium text-gray-900",children:s.bio})]})]})]})]})}),e.jsx(J,{children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Security"}),e.jsx(ee,{onClick:()=>p(!b),variant:b?"secondary":"primary",className:"bg-green-600 hover:bg-green-700 text-white",children:b?"Cancel":"Change Password"})]}),b?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Current Password"}),e.jsx(ne,{type:"password",name:"currentPassword",value:D.currentPassword,onChange:h,placeholder:"Enter current password",className:"w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"New Password"}),e.jsx(ne,{type:"password",name:"newPassword",value:D.newPassword,onChange:h,placeholder:"Enter new password",className:"w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Confirm New Password"}),e.jsx(ne,{type:"password",name:"confirmPassword",value:D.confirmPassword,onChange:h,placeholder:"Confirm new password",className:"w-full"})]}),e.jsxs(ee,{onClick:$,disabled:f,loading:f,className:"w-full bg-green-600 hover:bg-green-700 text-white",children:[e.jsx(at,{className:"w-4 h-4 mr-2"}),"Update Password"]})]}):e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Fe,{className:"w-5 h-5 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Password"}),e.jsx("p",{className:"font-medium text-gray-900",children:"â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢"})]})]})]})}),e.jsx(J,{children:e.jsxs("div",{className:"p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Account Status"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Account Type"}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${s.is_admin||s.role==="ADMIN"?"bg-purple-100 text-purple-800":"bg-blue-100 text-blue-800"}`,children:s.is_admin||s.role==="ADMIN"?"Admin":"User"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Status"}),e.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:"Active"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Member Since"}),e.jsx("span",{className:"text-sm font-medium text-gray-900",children:s.created_at?new Date(s.created_at).toLocaleDateString():"Unknown"})]})]})]})})]}):e.jsx("div",{className:"space-y-6",children:e.jsx(J,{children:e.jsxs("div",{className:"text-center py-8",children:[e.jsx(ps,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Profile Not Found"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Please log in to access your profile."}),e.jsx(ee,{onClick:()=>t("login"),className:"bg-[#21a1ce] hover:bg-[#1a8bb8] text-white",children:"Go to Login"})]})})})}const Wt=({onLoginSuccess:t,onSwitchToRegister:s})=>{const[a,r]=o.useState({email:"",password:""}),[l,c]=o.useState(!1),{login:b,error:p,user:f,isAuthenticated:w}=Ve();o.useEffect(()=>{w&&f&&t&&t()},[w,f,t]);const C=async D=>{if(D.preventDefault(),!(!a.email.trim()||!a.password.trim())){c(!0);try{const g=await b(a.email,a.password);g.success||console.error("Login failed:",g.error)}catch(g){console.error("Login error:",g)}finally{c(!1)}}},O=D=>{r({...a,[D.target.name]:D.target.value})};return e.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:[e.jsx("div",{className:"flex justify-center",children:e.jsx("img",{src:"/remaleh-logo.png",alt:"Remaleh Protect",className:"h-12 w-auto"})}),e.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Sign in to your account"}),e.jsx("p",{className:"mt-2 text-center text-sm text-gray-600",children:"Access your digital security dashboard"})]}),e.jsx("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md",children:e.jsxs("div",{className:"bg-white py-8 px-4 shadow sm:rounded-lg sm:px-10",children:[e.jsxs("form",{className:"space-y-6",onSubmit:C,children:[p&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),e.jsx("div",{className:"ml-3",children:e.jsx("p",{className:"text-sm text-red-800",children:p})})]})}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email address"}),e.jsx("div",{className:"mt-1",children:e.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:a.email,onChange:O,className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"Enter your email"})})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Password"}),e.jsx("div",{className:"mt-1",children:e.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,value:a.password,onChange:O,className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"Enter your password"})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{id:"remember-me",name:"remember-me",type:"checkbox",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsx("label",{htmlFor:"remember-me",className:"ml-2 block text-sm text-gray-900",children:"Remember me"})]}),e.jsx("div",{className:"text-sm",children:e.jsx("a",{href:"#",className:"font-medium text-blue-600 hover:text-blue-500",children:"Forgot your password?"})})]}),e.jsx("div",{children:e.jsx("button",{type:"submit",disabled:l,className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:l?e.jsxs("div",{className:"flex items-center",children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Signing in..."]}):"Sign in"})})]}),e.jsxs("div",{className:"mt-6",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("div",{className:"w-full border-t border-gray-300"})}),e.jsx("div",{className:"relative flex justify-center text-sm",children:e.jsx("span",{className:"px-2 bg-white text-gray-500",children:"New to Remaleh Protect?"})})]}),e.jsx("div",{className:"mt-6",children:e.jsx("button",{onClick:()=>{s&&s()},className:"w-full flex justify-center py-2 px-4 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Create an account"})})]})]})})]})},Vt=({onRegisterSuccess:t})=>{const[s,a]=o.useState({first_name:"",last_name:"",email:"",password:"",confirm_password:""}),[r,l]=o.useState({}),[c,b]=o.useState(!1),{register:p,error:f,user:w,isAuthenticated:C}=Ve();o.useEffect(()=>{C&&w&&t&&t()},[C,w,t]);const O=()=>{const _={};return s.first_name.trim()||(_.first_name="First name is required"),s.last_name.trim()||(_.last_name="Last name is required"),s.email.trim()?/\S+@\S+\.\S+/.test(s.email)||(_.email="Email is invalid"):_.email="Email is required",s.password?s.password.length<8&&(_.password="Password must be at least 8 characters"):_.password="Password is required",s.password!==s.confirm_password&&(_.confirm_password="Passwords do not match"),l(_),Object.keys(_).length===0},D=async _=>{if(_.preventDefault(),!!O()){b(!0);try{const h={first_name:s.first_name.trim(),last_name:s.last_name.trim(),email:s.email.trim().toLowerCase(),password:s.password},S=await p(h);S.success||console.error("Registration failed:",S.error)}catch(h){console.error("Registration error:",h)}finally{b(!1)}}},g=_=>{a({...s,[_.target.name]:_.target.value}),r[_.target.name]&&l({...r,[_.target.name]:""})};return e.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:[e.jsx("div",{className:"flex justify-center",children:e.jsx("img",{src:"/remaleh-logo.png",alt:"Remaleh Protect",className:"h-12 w-auto"})}),e.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Create your account"}),e.jsx("p",{className:"mt-2 text-center text-sm text-gray-600",children:"Join Remaleh Protect for enhanced digital security"})]}),e.jsx("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md",children:e.jsxs("div",{className:"bg-white py-8 px-4 shadow sm:rounded-lg sm:px-10",children:[e.jsxs("form",{className:"space-y-6",onSubmit:D,children:[f&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),e.jsx("div",{className:"ml-3",children:e.jsx("p",{className:"text-sm text-red-800",children:f})})]})}),e.jsxs("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"first_name",className:"block text-sm font-medium text-gray-700",children:"First name"}),e.jsx("div",{className:"mt-1",children:e.jsx("input",{id:"first_name",name:"first_name",type:"text",autoComplete:"given-name",required:!0,value:s.first_name,onChange:g,className:`appearance-none block w-full px-3 py-2 border rounded-md placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm ${r.first_name?"border-red-300":"border-gray-300"}`,placeholder:"Enter your first name"})}),r.first_name&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:r.first_name})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"last_name",className:"block text-sm font-medium text-gray-700",children:"Last name"}),e.jsx("div",{className:"mt-1",children:e.jsx("input",{id:"last_name",name:"last_name",type:"text",autoComplete:"family-name",required:!0,value:s.last_name,onChange:g,className:`appearance-none block w-full px-3 py-2 border rounded-md placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm ${r.last_name?"border-red-300":"border-gray-300"}`,placeholder:"Enter your last name"})}),r.last_name&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:r.last_name})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email address"}),e.jsx("div",{className:"mt-1",children:e.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:s.email,onChange:g,className:`appearance-none block w-full px-3 py-2 border rounded-md placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm ${r.email?"border-red-300":"border-gray-300"}`,placeholder:"Enter your email address"})}),r.email&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:r.email})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Password"}),e.jsx("div",{className:"mt-1",children:e.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"new-password",required:!0,value:s.password,onChange:g,className:`appearance-none block w-full px-3 py-2 border rounded-md placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm ${r.password?"border-red-300":"border-gray-300"}`,placeholder:"Create a strong password"})}),r.password&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:r.password}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Must be at least 8 characters long"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"confirm_password",className:"block text-sm font-medium text-gray-700",children:"Confirm password"}),e.jsx("div",{className:"mt-1",children:e.jsx("input",{id:"confirm_password",name:"confirm_password",type:"password",autoComplete:"new-password",required:!0,value:s.confirm_password,onChange:g,className:`appearance-none block w-full px-3 py-2 border rounded-md placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm ${r.confirm_password?"border-red-300":"border-gray-300"}`,placeholder:"Confirm your password"})}),r.confirm_password&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:r.confirm_password})]}),e.jsx("div",{children:e.jsx("button",{type:"submit",disabled:c,className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:c?e.jsxs("div",{className:"flex items-center",children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Creating account..."]}):"Create account"})})]}),e.jsxs("div",{className:"mt-6",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("div",{className:"w-full border-t border-gray-300"})}),e.jsx("div",{className:"relative flex justify-center text-sm",children:e.jsx("span",{className:"px-2 bg-white text-gray-500",children:"Already have an account?"})})]}),e.jsx("div",{className:"mt-6",children:e.jsx("button",{onClick:()=>t(),className:"w-full flex justify-center py-2 px-4 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Sign in instead"})})]})]})})]})};function qt(){const[t,s]=o.useState("home"),[a,r]=o.useState(""),[l,c]=o.useState(""),[b,p]=o.useState(null),[f,w]=o.useState(!1),[C,O]=o.useState(""),[D,g]=o.useState(!1),[_,h]=o.useState(!1),{user:S,isAuthenticated:$,logout:L}=Ve(),F=async()=>{try{localStorage.removeItem("authToken"),localStorage.removeItem("refreshToken"),s("home"),window.location.reload()}catch(d){console.error("Global logout error:",d),window.location.reload()}};o.useEffect(()=>(window.logoutUser=F,()=>{delete window.logoutUser}),[]),o.useEffect(()=>{r((()=>{const A=new Date().getHours();return A<12?"Good morning!":A<17?"Good afternoon!":"Good evening!"})())},[]);const Y=()=>{if(S!=null&&S.name){const d=S.name.split(" ");return d.length>=2?`${d[0][0]}${d[d.length-1][0]}`.toUpperCase():d[0][0].toUpperCase()}return S!=null&&S.email?S.email[0].toUpperCase():"U"},K=()=>{h(!_)},me=()=>{L(),h(!1),s("home")};o.useEffect(()=>{const d=k=>{_&&!k.target.closest(".profile-dropdown")&&h(!1)},A=k=>{k.key==="Escape"&&_&&h(!1)};return document.addEventListener("mousedown",d),document.addEventListener("keydown",A),()=>{document.removeEventListener("mousedown",d),document.removeEventListener("keydown",A)}},[_]);const re=[{id:"home",icon:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})})},{id:"breach",icon:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})},{id:"scam",icon:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})},{id:"learn",icon:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})}),label:"Learning Hub"},{id:"community",icon:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})})},{id:"chat",icon:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})})},{id:"admin",icon:e.jsxs("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a0 3 3 0 11-6 0 3 3 0 016 0z"})]}),label:"Admin"}],Q=async()=>{if(!l||!l.includes("@")){O("Please enter a valid email address");return}w(!0),O(""),p(null);try{const d=await fe(ce.BREACH,{email:l}),A=await d.json();d.ok?p(A):O(A.error||"Failed to check for breaches")}catch(d){console.error("Breach check error:",d),O("Network error. Please try again.")}finally{w(!1)}},xe=d=>{console.log("Generated password:",d),g(!1)},[q,he]=o.useState(""),[Z,ke]=o.useState("message"),[m,T]=o.useState(null),[G,se]=o.useState(!1),[j,W]=o.useState(""),U=async()=>{if(!q.trim()){W("Please enter content to analyze");return}se(!0),W(""),T(null);try{let d,A=Z,k="";if(Z==="link"){const E=/^https?:\/\/[^\s]+$/i,I=/https?:\/\/[^\s]+/gi.test(q);E.test(q.trim())?(d=await X(q),k="Analyzed as single URL"):I?(d=await N(q),A="message",k="Detected message with URLs - used Enhanced Scam Detection Engine"):(d=await N(q),A="message",k="No URLs detected - analyzed with Enhanced Scam Detection Engine")}else if(Z==="email"){const E=/^[^\s]+@[^\s]+\.[^\s]+/i,I=/^(from|to|subject|date):/im.test(q);E.test(q.split(`
`)[0])||I?(d=await v(q),k="Analyzed as email content"):(d=await N(q),A="message",k="Content doesn't appear to be email - used Enhanced Scam Detection Engine")}else d=await N(q),k="Analyzed with Enhanced Scam Detection Engine";k&&(d.contentTypeNote=k,d.detectedContentType=A),T(d)}catch(d){console.error("Scam analysis error:",d),d.message.includes("Failed to fetch")?W("Unable to connect to security APIs. Please check your internet connection and try again."):d.message.includes("HTTP error")?W("Security API temporarily unavailable. Please try again later."):W("Analysis failed. Please try again.")}finally{se(!1)}},X=async d=>{var A;try{const k=await fetch(`${we}/api/link/analyze-url`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:d})});if(!k.ok)throw new Error(`HTTP error! status: ${k.status}`);const E=await k.json();if(!E.success)throw new Error(E.error||"Link analysis failed");const I=E.result;return{riskLevel:((A=I.risk_level)==null?void 0:A.toLowerCase())||"medium",riskScore:I.risk_score||50,indicators:I.indicators||[],recommendations:I.recommendations||["Be cautious of this link","Verify the destination before clicking","Check for HTTPS and legitimate domain"],analysis:d.substring(0,100)+(d.length>100?"...":""),linkDetails:I}}catch(k){return console.error("Link analysis error:",k),V(d,"link")}},v=async d=>{var A;try{const k=await fetch(`${we}/api/enhanced-scam/analyze`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:d})});if(!k.ok)throw new Error(`HTTP error! status: ${k.status}`);const E=await k.json();if(!E.success)throw new Error(E.error||"Email analysis failed");const I=E.result;return{riskLevel:((A=I.risk_level)==null?void 0:A.toLowerCase())||"medium",riskScore:Math.round(I.risk_score*100)||50,indicators:I.indicators||[],recommendations:y(I.risk_level,I.indicators),analysis:d.substring(0,100)+(d.length>100?"...":""),emailDetails:I}}catch(k){return console.error("Email analysis error:",k),V(d,"email")}},y=(d,A)=>{const k=[];return d==="SCAM"?(k.push("Do not respond to this email"),k.push("Delete immediately and contact Remaleh Guardians"),k.push("Do not click any links or attachments"),k.push("If you clicked any links, reach out to Remaleh Guardians via chat immediately")):d==="SUSPICIOUS"?(k.push("Exercise extreme caution with this email"),k.push("Verify sender authenticity before responding"),k.push("Do not share personal information"),k.push("Contact Remaleh Guardians if you need assistance")):(k.push("Review this email carefully"),k.push("Check sender authenticity"),k.push("Avoid clicking suspicious links")),A.some(E=>E.includes("financial"))&&(k.push("Never send money or financial information via email"),k.push("Contact Remaleh Guardians if you have financial concerns")),A.some(E=>E.includes("urgency"))&&k.push("Be cautious of urgent requests - legitimate organizations rarely pressure you"),k},N=async d=>{var A;try{const k=await fetch(`${we}/api/enhanced-scam/analyze`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:d})});if(!k.ok)throw new Error(`HTTP error! status: ${k.status}`);const E=await k.json();if(!E.success)throw new Error(E.error||"Enhanced scam analysis failed");const I=E.result;return{riskLevel:((A=I.risk_level)==null?void 0:A.toLowerCase())||"medium",riskScore:Math.round(I.risk_score*100)||50,indicators:I.indicators||[],recommendations:M(I.risk_level,I.indicators,I.patterns),analysis:d.substring(0,100)+(d.length>100?"...":""),messageDetails:I}}catch(k){return console.error("Enhanced message analysis error:",k),V(d,"message")}},M=(d,A,k)=>{const E=[];return d==="SCAM"?(E.push("Do not respond to this message"),E.push("Delete immediately and contact Remaleh Guardians"),E.push("Do not click any links or attachments"),E.push("If you clicked any links, reach out to Remaleh Guardians via chat immediately")):d==="SUSPICIOUS"?(E.push("Exercise extreme caution with this message"),E.push("Verify authenticity before responding"),E.push("Do not share personal information"),E.push("Contact Remaleh Guardians if you need assistance")):d==="SAFE"?(E.push("Content appears safe - no obvious threats detected"),E.push("Continue to exercise normal caution"),E.push("If you have concerns, contact Remaleh Guardians via chat")):(E.push("Review this message carefully"),E.push("Check sender authenticity"),E.push("Avoid clicking suspicious links")),k&&k.includes("suspicious_domain")&&E.push("Contains suspicious domain (.buzz, .tk, etc.) - high risk"),k&&k.includes("url")&&E.push("Contains URLs - verify before clicking"),k&&k.includes("phone_number")&&E.push("Contains phone numbers - do not call unknown numbers"),E.some(ye=>ye.includes("Remaleh Guardians"))||E.push("Contact Remaleh Guardians via chat for immediate assistance"),[...new Set(E)]},V=(d,A)=>{const k={urgency:/(urgent|immediate|now|quick|fast|hurry|deadline|limited time|expires|last chance)/gi,money:/(\$[\d,]+|money|payment|bank|account|credit card|paypal|bitcoin|crypto|investment|profit|return)/gi,personal:/(password|login|verify|confirm|update|social security|ssn|birthday|address|phone)/gi,threats:/(suspended|blocked|locked|deleted|expired|legal action|police|fbi|irs|tax)/gi,suspicious:/(click here|verify now|login|password|bank|urgent|free|winner|prize|lottery)/gi},E={};let I=0;Object.entries(k).forEach(([Ce,$e])=>{const Me=d.match($e);Me&&(E[Ce]=Me.length,I+=Me.length*2)}),A==="link"&&((d.includes("bit.ly")||d.includes("tinyurl"))&&(I+=5),d.includes("http://")&&!d.includes("https://")&&(I+=3)),A==="email"&&d.includes("@")&&!d.includes("@gmail.com")&&!d.includes("@yahoo.com")&&(I+=2);const ye=I<10?"safe":I<20?"suspicious":"scam";return{riskLevel:ye,riskScore:I,indicators:E,recommendations:B(ye,E,A),analysis:d.substring(0,100)+(d.length>100?"...":"")}},B=(d,A,k)=>{const E=[];return d==="scam"&&(E.push("Do not click any links or provide personal information"),E.push("Contact Remaleh Guardians immediately"),E.push("Delete the message immediately"),E.push("If you clicked any links, reach out to Remaleh Guardians via chat")),A.urgency&&E.push("Be cautious of urgent requests - legitimate organizations rarely pressure you"),A.money&&E.push("Never send money to unknown sources or for urgent requests"),A.personal&&E.push("Never share passwords, SSN, or other sensitive information via message"),k==="link"&&(E.push("Hover over links to verify the actual destination"),E.push("Use link scanning tools before clicking")),E.some(ye=>ye.includes("Remaleh Guardians"))||E.push("Contact Remaleh Guardians via chat for immediate assistance"),[...new Set(E)]},ae=()=>{switch(t){case"home":return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-3xl font-bold text-black mb-2",children:a}),e.jsx("p",{className:"text-gray-600",children:"Welcome to Remaleh Protect"})]}),e.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-gray-100",children:[e.jsx("h2",{className:"text-xl font-bold text-black mb-4",children:"Latest Community Scam Reports"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"flex gap-4 overflow-x-auto pb-4 scrollbar-hide",children:[{id:1,type:"Phishing",description:"Fake bank email asking for login details",time:"2 hours ago",severity:"high",reporter:"Sarah M."},{id:2,type:"Investment Scam",description:"Promises of 500% returns in crypto trading",time:"4 hours ago",severity:"high",reporter:"Mike R."},{id:3,type:"Tech Support",description:"Call claiming computer has virus",time:"6 hours ago",severity:"medium",reporter:"Lisa K."},{id:4,type:"Romance Scam",description:"Online dating profile asking for money",time:"8 hours ago",severity:"medium",reporter:"David L."},{id:5,type:"Lottery Scam",description:"Email claiming you won $1M prize",time:"12 hours ago",severity:"low",reporter:"Emma T."}].map((d,A)=>e.jsx("div",{className:"flex-shrink-0 w-80 bg-gradient-to-r from-red-50 to-orange-50 border-l-4 border-red-400 p-4 rounded-xl hover:shadow-md transition-all duration-200 cursor-pointer",children:e.jsxs("div",{className:"flex items-start justify-between h-full",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${d.severity==="high"?"bg-red-100 text-red-700":d.severity==="medium"?"bg-yellow-100 text-yellow-700":"bg-green-100 text-green-700"}`,children:d.severity.toUpperCase()}),e.jsx("span",{className:"text-gray-500 text-xs",children:d.time})]}),e.jsx("h3",{className:"font-semibold text-gray-800 mb-1",children:d.type}),e.jsx("p",{className:"text-gray-600 text-sm mb-2",children:d.description}),e.jsxs("p",{className:"text-gray-500 text-xs",children:["Reported by ",d.reporter]})]}),e.jsx("div",{className:"text-red-400 ml-3",children:e.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})})]})},d.id))}),e.jsx("div",{className:"flex justify-center mt-4 space-x-2",children:[1,2,3,4,5].map((d,A)=>e.jsx("div",{className:"w-2 h-2 rounded-full bg-gray-300"},A))})]}),e.jsx("div",{className:"mt-4 text-center",children:e.jsx("button",{className:"text-[#21a1ce] text-sm font-medium hover:underline",children:"View All Reports â†’"})})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsx("div",{className:"bg-white rounded-2xl p-5 shadow-sm border border-gray-100 hover:shadow-md transition-shadow cursor-pointer",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-12 h-12 bg-[#21a1ce] rounded-xl flex items-center justify-center mr-4",children:e.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-semibold text-black mb-1",children:"Breach Check"}),e.jsx("p",{className:"text-gray-600 text-sm",children:"Check if your email has been compromised in data breaches"})]}),e.jsx("div",{className:"text-gray-400",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]})}),e.jsx("div",{className:"bg-white rounded-2xl p-5 shadow-sm border border-gray-100 hover:shadow-md transition-shadow cursor-pointer",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-12 h-12 bg-[#21a1ce] rounded-xl flex items-center justify-center mr-4",children:e.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-semibold text-black mb-1",children:"Scam Analysis"}),e.jsx("p",{className:"text-gray-600 text-sm",children:"Analyze suspicious messages and links for potential scams"})]}),e.jsx("div",{className:"text-gray-400",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]})}),e.jsx("div",{className:"bg-white rounded-2xl p-5 shadow-sm border border-gray-100 hover:shadow-md transition-shadow cursor-pointer",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-12 h-12 bg-[#21a1ce] rounded-xl flex items-center justify-center mr-4",children:e.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-semibold text-black mb-1",children:"Learn Hub"}),e.jsx("p",{className:"text-gray-600 text-sm",children:"Educational content to improve your digital security"})]}),e.jsx("div",{className:"text-gray-400",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]})}),e.jsx("div",{className:"bg-white rounded-2xl p-5 shadow-sm border border-gray-100 hover:shadow-md transition-shadow cursor-pointer",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-12 h-12 bg-[#21a1ce] rounded-xl flex items-center justify-center mr-4",children:e.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-semibold text-black mb-1",children:"Community"}),e.jsx("p",{className:"text-gray-600 text-sm",children:"Report scams and stay updated on latest threats"})]}),e.jsx("div",{className:"text-gray-400",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]})}),e.jsx("div",{className:"bg-white rounded-2xl p-5 shadow-sm border border-gray-100 hover:shadow-md transition-shadow cursor-pointer",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-12 h-12 bg-[#21a1ce] rounded-xl flex items-center justify-center mr-4",children:e.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-semibold text-black mb-1",children:"Chat"}),e.jsx("p",{className:"text-gray-600 text-sm",children:"Get instant help and answers to security questions"})]}),e.jsx("div",{className:"text-gray-400",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]})})]})]});case"breach":return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-gray-100",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("div",{className:"w-12 h-12 bg-[#21a1ce] rounded-xl flex items-center justify-center mr-4",children:e.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-black",children:"Breach Checker"}),e.jsx("p",{className:"text-gray-600",children:"Secure email verification"})]})]}),e.jsx("p",{className:"text-gray-700 mb-6",children:"Check if your email has been compromised in data breaches and get personalized security recommendations."})]}),e.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-gray-100",children:[e.jsx("h2",{className:"text-lg font-semibold text-black mb-4",children:"Check Your Email"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("svg",{className:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 12a4 4 0 10-8 0 4 4 0 008 0zm0 0v1.5a2.5 2.5 0 005 0V12a9 9 0 10-9 9m4.5-1.206a8.959 8.959 0 01-4.5 1.207"})})}),e.jsx("input",{type:"email",id:"email",value:l,onChange:d=>c(d.target.value),onKeyDown:d=>{d.key==="Enter"&&!f&&l&&l.includes("@")&&Q()},placeholder:"Enter your email address",className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-[#21a1ce] focus:border-transparent transition-all duration-200",disabled:f})]})]}),C&&e.jsx("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("svg",{className:"w-5 h-5 text-red-600 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})}),e.jsx("span",{className:"text-red-800 text-sm",children:C})]})}),e.jsx("button",{onClick:Q,disabled:f||!l,className:"w-full bg-[#21a1ce] text-white py-3 px-6 rounded-xl font-medium hover:bg-[#1a8bb8] transition-all duration-200 shadow-sm hover:shadow-md flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed",children:f?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Checking..."]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),"Check for Breaches"]})})]})]}),b&&e.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-gray-100",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[b.breached?e.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-xl flex items-center justify-center mr-4",children:e.jsx("svg",{className:"w-6 h-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}):e.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-xl flex items-center justify-center mr-4",children:e.jsx("svg",{className:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h2",{className:"text-xl font-bold text-black",children:b.breached?"Breaches Found":"No Breaches Detected"}),e.jsx("p",{className:"text-gray-600",children:b.breached?`${b.breach_count} breach(es) found`:"Your email is secure"}),e.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Checked: ",l]})]})]}),e.jsx("div",{className:"mb-4",children:e.jsx("p",{className:`text-lg ${b.breached?"text-red-700":"text-green-700"}`,children:b.message})}),b.breached&&b.breaches&&b.breaches.length>0&&e.jsxs("div",{className:"space-y-3",children:[e.jsx("h3",{className:"font-semibold text-gray-800",children:"Affected Services:"}),b.breaches.map((d,A)=>e.jsx("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-medium text-red-800 mb-1",children:d.name}),e.jsx("p",{className:"text-red-700 text-sm mb-2",children:d.domain}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs("span",{className:"text-red-600 text-xs",children:["Breached: ",d.date]}),e.jsx("span",{className:"text-red-600 text-xs",children:"â€¢"}),e.jsx("span",{className:"text-red-600 text-xs",children:d.data.join(", ")})]})]}),e.jsx("div",{className:"text-red-400 ml-3",children:e.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})})]})},A))]}),b.demo_mode&&e.jsx("div",{className:"mt-4 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("svg",{className:"w-5 h-5 text-blue-600 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("span",{className:"text-blue-800 text-sm",children:"Demo mode - Results are simulated for testing purposes"})]})}),e.jsxs("div",{className:"mt-6 pt-4 border-t border-gray-200",children:[e.jsx("h3",{className:"text-lg font-semibold text-black mb-4",children:"Security Recommendations"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-lg",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center mr-3 flex-shrink-0",children:e.jsx("svg",{className:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-medium text-blue-800 mb-1",children:"Enable Multi-Factor Authentication (MFA)"}),e.jsx("p",{className:"text-blue-700 text-sm mb-3",children:"Add an extra layer of security to your accounts with MFA apps like Google Authenticator, Authy, or Microsoft Authenticator."}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-700 text-xs rounded-full",children:"Google Authenticator"}),e.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-700 text-xs rounded-full",children:"Authy"}),e.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-700 text-xs rounded-full",children:"Microsoft Authenticator"})]})]})]})}),e.jsx("div",{className:"p-4 bg-green-50 border border-green-200 rounded-lg",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center mr-3 flex-shrink-0",children:e.jsx("svg",{className:"w-5 h-5 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-medium text-green-800 mb-1",children:"Use Strong, Unique Passwords"}),e.jsx("p",{className:"text-green-700 text-sm mb-3",children:"Generate secure passwords for each account to prevent credential stuffing attacks."}),e.jsxs("button",{onClick:()=>g(!0),className:"inline-flex items-center px-3 py-2 bg-green-600 text-white text-sm font-medium rounded-lg hover:bg-green-700 transition-colors",children:[e.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),"Generate Secure Password"]})]})]})}),e.jsx("div",{className:"p-4 bg-purple-50 border border-purple-200 rounded-lg",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"w-10 h-10 bg-purple-100 rounded-lg flex items-center justify-center mr-3 flex-shrink-0",children:e.jsx("svg",{className:"w-5 h-5 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-medium text-purple-800 mb-1",children:"Monitor Your Accounts Regularly"}),e.jsx("p",{className:"text-purple-700 text-sm mb-3",children:"Use Remaleh Protect regularly to check for new breaches and stay updated on security threats."}),e.jsxs("div",{className:"flex items-center text-purple-600 text-sm",children:[e.jsx("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Check back monthly for new breaches"]})]})]})}),e.jsx("div",{className:"p-4 bg-orange-50 border border-orange-200 rounded-lg",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"w-10 h-10 bg-orange-100 rounded-lg flex items-center justify-center mr-3 flex-shrink-0",children:e.jsx("svg",{className:"w-5 h-5 text-orange-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-medium text-orange-800 mb-1",children:"Use a Password Manager"}),e.jsx("p",{className:"text-orange-700 text-sm mb-3",children:"Store and manage your passwords securely with trusted password managers."}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx("span",{className:"px-2 py-1 bg-orange-100 text-orange-700 text-xs rounded-full",children:"Bitwarden"}),e.jsx("span",{className:"px-2 py-1 bg-orange-100 text-orange-700 text-xs rounded-full",children:"1Password"}),e.jsx("span",{className:"px-2 py-1 bg-orange-100 text-orange-700 text-xs rounded-full",children:"LastPass"}),e.jsx("span",{className:"px-2 py-1 bg-orange-100 text-orange-700 text-xs rounded-full",children:"Dashlane"})]})]})]})})]})]}),e.jsx("div",{className:"mt-6 pt-4 border-t border-gray-200",children:e.jsx("button",{onClick:()=>{c(""),p(null),O("")},className:"w-full bg-gray-100 text-gray-700 py-3 px-6 rounded-xl font-medium hover:bg-gray-200 transition-all duration-200",children:"Check Another Email"})})]}),e.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-gray-100",children:[e.jsx("h2",{className:"text-lg font-semibold text-black mb-4",children:"How It Works"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"text-center p-4",children:[e.jsx("div",{className:"w-12 h-12 bg-[#21a1ce] bg-opacity-10 rounded-xl flex items-center justify-center mx-auto mb-3",children:e.jsx("span",{className:"text-[#21a1ce] font-bold text-lg",children:"1"})}),e.jsx("h3",{className:"font-medium text-gray-800 mb-2",children:"Enter Email"}),e.jsx("p",{className:"text-gray-600 text-sm",children:"Provide your email address securely"})]}),e.jsxs("div",{className:"text-center p-4",children:[e.jsx("div",{className:"w-12 h-12 bg-[#21a1ce] bg-opacity-10 rounded-xl flex items-center justify-center mx-auto mb-3",children:e.jsx("span",{className:"text-[#21a1ce] font-bold text-lg",children:"2"})}),e.jsx("h3",{className:"font-medium text-gray-800 mb-2",children:"Scan Database"}),e.jsx("p",{className:"text-gray-600 text-sm",children:"We check against known breaches"})]}),e.jsxs("div",{className:"text-center p-4",children:[e.jsx("div",{className:"w-12 h-12 bg-[#21a1ce] bg-opacity-10 rounded-xl flex items-center justify-center mx-auto mb-3",children:e.jsx("span",{className:"text-[#21a1ce] font-bold text-lg",children:"3"})}),e.jsx("h3",{className:"font-medium text-gray-800 mb-2",children:"Get Results"}),e.jsx("p",{className:"text-gray-600 text-sm",children:"Instant results and recommendations"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-gray-100",children:[e.jsx("h2",{className:"text-lg font-semibold text-black mb-4",children:"Security Features"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center p-3 bg-green-50 rounded-lg border border-green-200",children:[e.jsx("svg",{className:"w-5 h-5 text-green-600 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("span",{className:"text-green-800 text-sm",children:"Your data is never stored or shared"})]}),e.jsxs("div",{className:"flex items-center p-3 bg-blue-50 rounded-lg border border-blue-200",children:[e.jsx("svg",{className:"w-5 h-5 text-blue-600 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),e.jsx("span",{className:"text-blue-800 text-sm",children:"Real-time breach database updates"})]}),e.jsxs("div",{className:"flex items-center p-3 bg-purple-50 rounded-lg border border-purple-200",children:[e.jsx("svg",{className:"w-5 h-5 text-purple-600 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})}),e.jsx("span",{className:"text-purple-800 text-sm",children:"Instant results and notifications"})]})]})]})]});case"scam":return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-gray-100",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("div",{className:"w-12 h-12 bg-[#21a1ce] rounded-xl flex items-center justify-center mr-4",children:e.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-black",children:"Scam Analysis"}),e.jsx("p",{className:"text-gray-600",children:"Advanced threat detection"})]})]}),e.jsx("p",{className:"text-gray-700 mb-6",children:"Analyze suspicious messages, links, and emails for potential scams using advanced pattern recognition and threat intelligence."}),e.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),e.jsx("span",{className:"text-gray-600",children:"Connected to Remaleh Protect Security Engine"}),e.jsx("button",{onClick:async()=>{try{const d=await fetch(`${we}/api/security/status`);if(d.ok){const A=await d.json();console.log("Security Engine Status:",A),alert(`Security Engine Status: ${A.status}
Version: ${A.version}
Services: ${Object.keys(A.available_services).length} available`)}}catch(d){console.error("Status check failed:",d),alert("Unable to check Security Engine status")}},className:"ml-2 text-xs text-[#21a1ce] hover:text-[#1a8bb8] underline cursor-pointer",children:"Check Status"})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-gray-100",children:[e.jsx("h2",{className:"text-lg font-semibold text-black mb-4",children:"Analyze Content"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Content Type"}),e.jsx("div",{className:"grid grid-cols-3 gap-3",children:[{id:"message",label:"Message",icon:"ðŸ’¬"},{id:"link",label:"Link",icon:"ðŸ”—"},{id:"email",label:"Email",icon:"ðŸ“§"}].map(d=>e.jsx("button",{onClick:()=>ke(d.id),className:`p-3 rounded-xl border-2 transition-all duration-200 ${Z===d.id?"border-[#21a1ce] bg-[#21a1ce] bg-opacity-10":"border-gray-200 hover:border-gray-300"}`,children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl mb-1",children:d.icon}),e.jsx("div",{className:"text-sm font-medium text-gray-700",children:d.label})]})},d.id))})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"scamInput",className:"block text-sm font-medium text-gray-700 mb-2",children:Z==="message"?"Message Content":Z==="link"?"URL or Link":"Email Content"}),e.jsxs("div",{className:"relative",children:[Z==="link"?e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("svg",{className:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})})}):Z==="email"?e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("svg",{className:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 12a4 4 0 10-8 0 4 4 0 008 0zm0 0v1.5a2.5 2.5 0 005 0V12a9 9 0 10-9 9m4.5-1.206a8.959 8.959 0 01-4.5 1.207"})})}):e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("svg",{className:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})})}),e.jsx("textarea",{id:"scamInput",value:q,onChange:d=>he(d.target.value),onKeyDown:d=>{d.key==="Enter"&&d.ctrlKey&&!G&&q.trim()&&U()},placeholder:Z==="message"?"Paste the suspicious message here...":Z==="link"?"Enter the URL or link to analyze...":"Paste the email content here...",rows:4,className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-[#21a1ce] focus:border-transparent transition-all duration-200 resize-none",disabled:G})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Press Ctrl+Enter to analyze quickly"}),e.jsxs("div",{className:"mt-2 p-2 bg-gray-50 rounded-lg border border-gray-200",children:[e.jsxs("p",{className:"text-xs text-gray-600",children:[e.jsx("strong",{children:"Content Guide:"})," ",Z==="link"?"Paste a single URL (e.g., https://example.com) or a message containing URLs":Z==="email"?"Paste email content with headers (From:, To:, Subject:) or email body text":"Paste any suspicious message, text, or content for analysis"]}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["ðŸ’¡ ",e.jsx("strong",{children:"Smart Detection:"})," The system automatically detects content type and routes to the best analysis method"]})]})]}),j&&e.jsx("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("svg",{className:"w-5 h-5 text-red-600 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})}),e.jsx("span",{className:"text-red-800 text-sm",children:j})]})}),e.jsx("button",{onClick:U,disabled:G||!q.trim(),className:"w-full bg-[#21a1ce] text-white py-3 px-6 rounded-xl font-medium hover:bg-[#1a8bb8] transition-all duration-200 shadow-sm hover:shadow-md flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed",children:G?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Analyzing with ",Z==="link"?"Link Analysis Engine":Z==="email"?"Enhanced Scam Detection Engine":"Comprehensive Scam Analysis Engine","..."]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),"Analyze for Scams"]})})]})]}),m&&e.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-gray-100",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center mr-4 ${m.riskLevel==="scam"?"bg-red-100":m.riskLevel==="suspicious"?"bg-yellow-100":(m.riskLevel==="safe","bg-green-100")}`,children:e.jsx("svg",{className:`w-6 h-6 ${m.riskLevel==="scam"?"text-red-600":m.riskLevel==="suspicious"?"text-yellow-600":(m.riskLevel==="safe","text-green-600")}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl font-bold text-black",children:["Risk Level: ",m.riskLevel==="safe"?"Safe âœ…":m.riskLevel==="scam"?"Scam ðŸš¨":m.riskLevel==="suspicious"?"Suspicious âš ï¸":m.riskLevel.charAt(0).toUpperCase()+m.riskLevel.slice(1),m.riskLevel==="scam"?" - IMMEDIATE ACTION REQUIRED":"",m.riskLevel==="safe"?" - No threats detected":"",m.riskLevel==="suspicious"?" - Exercise caution":""]}),e.jsxs("p",{className:"text-gray-600",children:["Risk Score: ",m.riskScore,"/100",m.riskScore>=70?" - IMMEDIATE ACTION REQUIRED":"",m.riskLevel==="safe"?" - Content appears safe":"",m.riskLevel==="suspicious"?" - Review carefully":""]}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Analyzed with ",Z==="link"?"Link Analysis Engine":Z==="email"?"Enhanced Scam Detection Engine":"Comprehensive Scam Analysis Engine"]}),m.contentTypeNote&&e.jsx("div",{className:"mt-2 p-2 bg-blue-50 rounded-lg border border-blue-200",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("svg",{className:"w-4 h-4 text-blue-600 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsxs("span",{className:"text-blue-800 text-xs",children:[e.jsx("strong",{children:"Content Detection:"})," ",m.contentTypeNote]})]})})]})]}),(m.riskLevel==="scam"||m.riskScore>=70)&&e.jsxs("div",{className:"mb-4 p-4 bg-red-50 border-2 border-red-300 rounded-xl",children:[e.jsxs("div",{className:"flex items-center mb-3",children:[e.jsx("svg",{className:"w-6 h-6 text-red-600 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})}),e.jsx("h3",{className:"text-lg font-bold text-red-800",children:"ðŸš¨ SCAM DETECTED"})]}),e.jsxs("div",{className:"space-y-2 text-red-700",children:[e.jsx("p",{className:"font-medium",children:"This content shows multiple signs of being a scam:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1 text-sm",children:[m.riskLevel==="scam"&&e.jsx("li",{children:"Scam risk level - immediate action required"}),m.riskScore>=70&&e.jsxs("li",{children:["Very high risk score (",m.riskScore,"/100)"]}),m.indicators&&m.indicators.length>0&&e.jsx("li",{children:"Multiple suspicious indicators detected"}),e.jsx("li",{children:"Do NOT click any links or respond to this message"}),e.jsx("li",{children:"Contact Remaleh Guardians via chat immediately"})]})]})]}),m.riskLevel==="suspicious"&&e.jsxs("div",{className:"mb-4 p-4 bg-yellow-50 border-2 border-yellow-300 rounded-xl",children:[e.jsxs("div",{className:"flex items-center mb-3",children:[e.jsx("svg",{className:"w-6 h-6 text-yellow-600 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})}),e.jsx("h3",{className:"text-lg font-bold text-yellow-800",children:"âš ï¸ SUSPICIOUS CONTENT DETECTED"})]}),e.jsxs("div",{className:"space-y-2 text-yellow-700",children:[e.jsx("p",{className:"font-medium",children:"This content shows some concerning signs:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1 text-sm",children:[e.jsx("li",{children:"Exercise caution with this content"}),e.jsx("li",{children:"Verify authenticity before responding"}),e.jsx("li",{children:"Do not share personal information"}),e.jsx("li",{children:"Contact Remaleh Guardians via chat if you need assistance"})]})]})]}),m.riskLevel==="safe"&&e.jsxs("div",{className:"mb-4 p-4 bg-green-50 border-2 border-green-300 rounded-xl",children:[e.jsxs("div",{className:"flex items-center mb-3",children:[e.jsx("svg",{className:"w-6 h-6 text-green-600 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("h3",{className:"text-lg font-bold text-green-800",children:"âœ… CONTENT APPEARS SAFE"})]}),e.jsxs("div",{className:"space-y-2 text-green-700",children:[e.jsx("p",{className:"font-medium",children:"This content shows no obvious signs of being a scam:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1 text-sm",children:[e.jsxs("li",{children:["Low risk score (",m.riskScore,"/100)"]}),e.jsx("li",{children:"No suspicious patterns detected"}),e.jsx("li",{children:"Continue to exercise normal caution"}),e.jsx("li",{children:"If you have concerns, contact Remaleh Guardians via chat"})]})]})]}),m.indicators&&e.jsxs("div",{className:"mb-4",children:[e.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Detected Indicators:"}),Object.keys(m.indicators).length>0&&!Array.isArray(m.indicators)&&e.jsx("div",{className:"grid grid-cols-2 gap-2",children:Object.entries(m.indicators).map(([d,A])=>e.jsx("div",{className:"p-2 bg-gray-50 rounded-lg border border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700 capitalize",children:d.replace(/([A-Z])/g," $1").trim()}),e.jsx("span",{className:"text-xs bg-[#21a1ce] text-white px-2 py-1 rounded-full",children:A})]})},d))}),Array.isArray(m.indicators)&&m.indicators.length>0&&e.jsx("div",{className:"space-y-2",children:m.indicators.map((d,A)=>e.jsx("div",{className:"p-3 bg-yellow-50 rounded-lg border border-yellow-200",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("svg",{className:"w-4 h-4 text-yellow-600 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})}),e.jsx("span",{className:"text-yellow-800 text-sm",children:d})]})},A))}),(!m.indicators||Array.isArray(m.indicators)&&m.indicators.length===0||!Array.isArray(m.indicators)&&Object.keys(m.indicators).length===0)&&e.jsx("div",{className:"p-3 bg-green-50 rounded-lg border border-green-200",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("svg",{className:"w-4 h-4 text-green-600 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("span",{className:"text-green-800 text-sm",children:"No suspicious indicators detected"})]})})]}),m.linkDetails&&e.jsxs("div",{className:"mb-4",children:[e.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Link Analysis Details:"}),e.jsx("div",{className:"space-y-2",children:m.linkDetails.indicators&&m.linkDetails.indicators.map((d,A)=>e.jsx("div",{className:"p-2 bg-yellow-50 rounded-lg border border-yellow-200",children:e.jsx("span",{className:"text-yellow-800 text-sm",children:d})},A))})]}),m.emailDetails&&e.jsxs("div",{className:"mb-4",children:[e.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Email Analysis Details:"}),e.jsx("div",{className:"space-y-2",children:m.emailDetails.scam_categories&&m.emailDetails.scam_categories.map((d,A)=>e.jsx("div",{className:"p-2 bg-purple-50 rounded-lg border border-purple-200",children:e.jsx("span",{className:"text-purple-800 text-sm",children:d})},A))})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Security Recommendations:"}),e.jsx("div",{className:"space-y-2",children:m.recommendations.map((d,A)=>e.jsxs("div",{className:"flex items-start p-3 bg-blue-50 rounded-lg border border-blue-200",children:[e.jsx("svg",{className:"w-4 h-4 text-blue-600 mr-2 mt-0.5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("span",{className:"text-blue-800 text-sm",children:d})]},A))})]}),e.jsx("div",{className:"pt-4 border-t border-gray-200",children:e.jsx("button",{onClick:()=>{he(""),T(null),W("")},className:"w-full bg-gray-100 text-gray-700 py-3 px-6 rounded-xl font-medium hover:bg-gray-200 transition-all duration-200",children:"Analyze Another Item"})})]}),e.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-gray-100",children:[e.jsx("h2",{className:"text-lg font-semibold text-black mb-4",children:"How Scam Analysis Works"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"text-center p-4",children:[e.jsx("div",{className:"w-12 h-12 bg-[#21a1ce] bg-opacity-10 rounded-xl flex items-center justify-center mx-auto mb-3",children:e.jsx("span",{className:"text-[#21a1ce] font-bold text-lg",children:"1"})}),e.jsx("h3",{className:"font-medium text-gray-800 mb-2",children:"Input Content"}),e.jsx("p",{className:"text-gray-600 text-sm",children:"Paste suspicious messages, links, or emails"})]}),e.jsxs("div",{className:"text-center p-4",children:[e.jsx("div",{className:"w-12 h-12 bg-[#21a1ce] bg-opacity-10 rounded-xl flex items-center justify-center mx-auto mb-3",children:e.jsx("span",{className:"text-[#21a1ce] font-bold text-lg",children:"2"})}),e.jsx("h3",{className:"font-medium text-gray-800 mb-2",children:"AI Analysis"}),e.jsx("p",{className:"text-gray-600 text-sm",children:"Advanced pattern recognition scans for threats"})]}),e.jsxs("div",{className:"text-center p-4",children:[e.jsx("div",{className:"w-12 h-12 bg-[#21a1ce] bg-opacity-10 rounded-xl flex items-center justify-center mx-auto mb-3",children:e.jsx("span",{className:"text-[#21a1ce] font-bold text-lg",children:"3"})}),e.jsx("h3",{className:"font-medium text-gray-800 mb-2",children:"Get Results"}),e.jsx("p",{className:"text-gray-600 text-sm",children:"Risk assessment and security recommendations"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-gray-100",children:[e.jsx("h2",{className:"text-lg font-semibold text-black mb-4",children:"Detection Capabilities"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center p-3 bg-red-50 rounded-lg border border-red-200",children:[e.jsx("svg",{className:"w-5 h-5 text-red-600 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})}),e.jsx("span",{className:"text-red-800 text-sm",children:"Phishing attempts and social engineering"})]}),e.jsxs("div",{className:"flex items-center p-3 bg-yellow-50 rounded-lg border border-yellow-200",children:[e.jsx("svg",{className:"w-5 h-5 text-yellow-600 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})}),e.jsx("span",{className:"text-yellow-800 text-sm",children:"Suspicious links and URLs"})]}),e.jsxs("div",{className:"flex items-center p-3 bg-purple-50 rounded-lg border border-purple-200",children:[e.jsx("svg",{className:"w-5 h-5 text-purple-600 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),e.jsx("span",{className:"text-yellow-800 text-sm",children:"Financial fraud and money scams"})]})]})]})]});case"chat":return e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"bg-white rounded-2xl p-4 shadow-sm border border-gray-100",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-10 h-10 bg-[#21a1ce] bg-opacity-10 rounded-full flex items-center justify-center mx-auto mb-2",children:e.jsx("svg",{className:"w-5 h-5 text-[#21a1ce]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})})}),e.jsx("p",{className:"text-gray-600 text-sm mb-2",children:"Your AI cybersecurity assistant for instant help and guidance"}),e.jsx("div",{className:"bg-[#21a1ce] bg-opacity-10 px-3 py-2 rounded-lg border border-[#21a1ce] border-opacity-20 inline-block",children:e.jsxs("p",{className:"text-[#21a1ce] text-xs font-medium",children:["ðŸ’¡ ",e.jsx("strong",{children:"Need human help?"}),' Send "connect me with a Remaleh Guardian"']})})]})}),e.jsx("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100",children:e.jsx(gt,{setActiveTab:s})})]});case"learn":return e.jsx(Mt,{setActiveTab:s});case"admin":return e.jsx(Ht,{setActiveTab:s});case"login":return e.jsx(Wt,{onLoginSuccess:()=>s("home"),onSwitchToRegister:()=>s("register")});case"register":return e.jsx(Vt,{onRegisterSuccess:()=>s("home")});case"profile":return e.jsx(Gt,{setActiveTab:s});case"community":return e.jsx(Tt,{setActiveTab:s});case"community_reports":return e.jsx(Pt,{setActiveTab:s});default:return e.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-gray-100",children:[e.jsx("h1",{className:"text-2xl font-bold text-black mb-4",children:"Welcome to Remaleh Protect"}),e.jsx("p",{className:"text-gray-700",children:"Your digital security companion"})]})}};return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("header",{className:"bg-[#21a1ce] px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex-1 text-center",children:e.jsx("img",{src:"/Remaleh-logo-full-2.jpg",alt:"Remaleh",className:"h-8 w-auto mx-auto"})}),e.jsxs("div",{className:"relative",children:[e.jsx("button",{onClick:K,className:"w-8 h-8 bg-white rounded-full flex items-center justify-center shadow-sm hover:shadow-md transition-all duration-200 cursor-pointer",children:e.jsx("span",{className:"text-[#21a1ce] font-semibold text-sm",children:Y()})}),_&&e.jsx("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-xl shadow-lg border border-gray-200 py-2 z-50 profile-dropdown",children:$?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"px-4 py-2 border-b border-gray-100",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:(S==null?void 0:S.name)||"User"}),e.jsx("p",{className:"text-xs text-gray-500",children:S==null?void 0:S.email})]}),e.jsx("button",{onClick:()=>s("profile"),className:"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 transition-colors",children:"Profile Settings"}),((S==null?void 0:S.is_admin)||(S==null?void 0:S.role)==="ADMIN")&&e.jsx("button",{onClick:()=>{s("admin"),h(!1)},className:"w-full text-left px-4 py-2 text-sm text-purple-700 hover:bg-purple-50 transition-colors border-t border-gray-100 bg-purple-50",children:e.jsxs("div",{className:"flex items-center",children:[e.jsxs("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a0 3 3 0 11-6 0 3 3 0 016 0z"})]}),"Go to Admin Dashboard"]})}),e.jsx("button",{onClick:me,className:"w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-red-50 transition-colors",children:"Sign Out"})]}):e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>{s("login"),h(!1)},className:"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 transition-colors",children:"Sign In"}),e.jsx("button",{onClick:()=>{s("register"),h(!1)},className:"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 transition-colors",children:"Create Account"})]})})]})]})}),e.jsx("main",{className:"px-6 py-6 pb-24",children:ae()}),D&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white rounded-2xl max-w-md w-full max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Password Generator"}),e.jsx("button",{onClick:()=>g(!1),className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsx(ut,{onUse:xe})]})})}),e.jsx("nav",{className:"fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 px-6 py-4",children:e.jsx("div",{className:"flex justify-around",children:re.filter(d=>d.id==="admin"?(S==null?void 0:S.is_admin)||(S==null?void 0:S.role)==="ADMIN":!0).map(d=>e.jsx("button",{onClick:()=>s(d.id),className:`flex items-center justify-center w-12 h-12 rounded-2xl transition-all duration-200 ${t===d.id?"text-[#21a1ce] bg-[#21a1ce] bg-opacity-15 shadow-lg scale-110":"text-gray-500 hover:text-gray-700 hover:bg-gray-100"}`,children:e.jsx("span",{className:"text-2xl",children:d.icon})},d.id))})})]})}js.createRoot(document.getElementById("root")).render(e.jsx(ss.StrictMode,{children:e.jsx(qt,{})}));
//# sourceMappingURL=index-4382e6c8.js.map
